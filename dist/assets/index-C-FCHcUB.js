import{r as fn,a as bn,g as yn}from"./vendor-DavUf6mE.js";import{r as l,u as de,a as Rt,R as be,b as Lt,B as jn,c as vn,d as Q,N as Is}from"./router-DQvsklb9.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();var ks={exports:{}},vt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ur;function wn(){if(ur)return vt;ur=1;var t=fn(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function i(d,m,u){var h,f={},k=null,v=null;u!==void 0&&(k=""+u),m.key!==void 0&&(k=""+m.key),m.ref!==void 0&&(v=m.ref);for(h in m)a.call(m,h)&&!n.hasOwnProperty(h)&&(f[h]=m[h]);if(d&&d.defaultProps)for(h in m=d.defaultProps,m)f[h]===void 0&&(f[h]=m[h]);return{$$typeof:s,type:d,key:k,ref:v,props:f,_owner:o.current}}return vt.Fragment=r,vt.jsx=i,vt.jsxs=i,vt}var mr;function Nn(){return mr||(mr=1,ks.exports=wn()),ks.exports}var e=Nn(),Yt={},hr;function Sn(){if(hr)return Yt;hr=1;var t=bn();return Yt.createRoot=t.createRoot,Yt.hydrateRoot=t.hydrateRoot,Yt}var kn=Sn();const Cn=yn(kn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Tn=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,a)=>a?a.toUpperCase():r.toLowerCase()),xr=t=>{const s=Tn(t);return s.charAt(0).toUpperCase()+s.slice(1)},sa=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim(),En=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=l.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:n,iconNode:i,...d},m)=>l.createElement("svg",{ref:m,...Pn,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:sa("lucide",o),...!n&&!En(d)&&{"aria-hidden":"true"},...d},[...i.map(([u,h])=>l.createElement(u,h)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=(t,s)=>{const r=l.forwardRef(({className:a,...o},n)=>l.createElement(Dn,{ref:n,iconNode:s,className:sa(`lucide-${An(xr(t))}`,`lucide-${t}`,a),...o}));return r.displayName=xr(t),r};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],pr=_("activity",On);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Te=_("arrow-left",Rn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ye=_("arrow-right",Ln);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],gr=_("bot",Mn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],_n=_("brain",Fn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Qs=_("building-2",In);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zs=_("check",$n);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],st=_("chevron-down",Vn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],hs=_("chevron-left",zn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Mt=_("chevron-right",Un);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],qn=_("chevron-up",Bn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pe=_("circle-alert",Hn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ke=_("circle-check-big",Gn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fr=_("circle",Wn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ht=_("clock",Yn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ra=_("cloud-upload",Jn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],xs=_("code",Xn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Cs=_("copy",Kn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],aa=_("cpu",Qn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],eo=_("credit-card",Zn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],os=_("database",to);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Je=_("download",so);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],is=_("eye-off",ro);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ut=_("eye",ao);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],oo=_("file-down",no);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xe=_("file-text",io);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],$s=_("folder-open",lo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],uo=_("git-branch",co);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],ho=_("git-compare",mo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],po=_("grid-3x3",xo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],na=_("history",go);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],bo=_("house",fo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],jo=_("image",yo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oa=_("info",vo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],No=_("key",wo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Vs=_("lightbulb",So);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Co=_("list",ko);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],zs=_("loader-circle",Ao);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],ia=_("loader",To);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Us=_("log-out",Eo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],br=_("map-pin",Po);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Oo=_("maximize-2",Do);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Lo=_("menu",Ro);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],er=_("message-circle",Mo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Bs=_("message-square",Fo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Io=_("minimize-2",_o);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=[["path",{d:"M5 12h14",key:"1ays0h"}]],Vo=_("minus",$o);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],la=_("monitor",zo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],Bo=_("plug",Uo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mt=_("plus",qo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ye=_("refresh-cw",Ho);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ls=_("rotate-ccw",Go);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ze=_("save",Wo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Tt=_("search",Yo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ps=_("send",Jo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tr=_("settings",Xo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ve=_("shield",Ko);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Zo=_("smartphone",Qo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ti=_("sparkles",ei);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ri=_("square-pen",si);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ni=_("tag",ai);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ft=_("trash-2",oi);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_t=_("triangle-alert",ii);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],It=_("upload",li);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ca=_("user",ci);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],gs=_("users",di);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],da=_("wand-sparkles",ui);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ua=_("wifi-off",mi);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ma=_("wifi",hi);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Re=_("x",xi);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],fs=_("zap",pi),ge="/assets/logo-CwhF-OLf.png";function ha(t,s){return function(){return t.apply(s,arguments)}}const{toString:gi}=Object.prototype,{getPrototypeOf:sr}=Object,{iterator:bs,toStringTag:xa}=Symbol,ys=(t=>s=>{const r=gi.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Le=t=>(t=t.toLowerCase(),s=>ys(s)===t),js=t=>s=>typeof s===t,{isArray:xt}=Array,Dt=js("undefined");function $t(t){return t!==null&&!Dt(t)&&t.constructor!==null&&!Dt(t.constructor)&&je(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const pa=Le("ArrayBuffer");function fi(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&pa(t.buffer),s}const bi=js("string"),je=js("function"),ga=js("number"),Vt=t=>t!==null&&typeof t=="object",yi=t=>t===!0||t===!1,rs=t=>{if(ys(t)!=="object")return!1;const s=sr(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(xa in t)&&!(bs in t)},ji=t=>{if(!Vt(t)||$t(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},vi=Le("Date"),wi=Le("File"),Ni=Le("Blob"),Si=Le("FileList"),ki=t=>Vt(t)&&je(t.pipe),Ci=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||je(t.append)&&((s=ys(t))==="formdata"||s==="object"&&je(t.toString)&&t.toString()==="[object FormData]"))},Ai=Le("URLSearchParams"),[Ti,Ei,Pi,Di]=["ReadableStream","Request","Response","Headers"].map(Le),Oi=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function zt(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),xt(t))for(a=0,o=t.length;a<o;a++)s.call(null,t[a],a,t);else{if($t(t))return;const n=r?Object.getOwnPropertyNames(t):Object.keys(t),i=n.length;let d;for(a=0;a<i;a++)d=n[a],s.call(null,t[d],d,t)}}function fa(t,s){if($t(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,o;for(;a-- >0;)if(o=r[a],s===o.toLowerCase())return o;return null}const Ze=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ba=t=>!Dt(t)&&t!==Ze;function qs(){const{caseless:t}=ba(this)&&this||{},s={},r=(a,o)=>{const n=t&&fa(s,o)||o;rs(s[n])&&rs(a)?s[n]=qs(s[n],a):rs(a)?s[n]=qs({},a):xt(a)?s[n]=a.slice():s[n]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&zt(arguments[a],r);return s}const Ri=(t,s,r,{allOwnKeys:a}={})=>(zt(s,(o,n)=>{r&&je(o)?t[n]=ha(o,r):t[n]=o},{allOwnKeys:a}),t),Li=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mi=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},Fi=(t,s,r,a)=>{let o,n,i;const d={};if(s=s||{},t==null)return s;do{for(o=Object.getOwnPropertyNames(t),n=o.length;n-- >0;)i=o[n],(!a||a(i,t,s))&&!d[i]&&(s[i]=t[i],d[i]=!0);t=r!==!1&&sr(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},_i=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},Ii=t=>{if(!t)return null;if(xt(t))return t;let s=t.length;if(!ga(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},$i=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&sr(Uint8Array)),Vi=(t,s)=>{const a=(t&&t[bs]).call(t);let o;for(;(o=a.next())&&!o.done;){const n=o.value;s.call(t,n[0],n[1])}},zi=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},Ui=Le("HTMLFormElement"),Bi=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,o){return a.toUpperCase()+o}),yr=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),qi=Le("RegExp"),ya=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};zt(r,(o,n)=>{let i;(i=s(o,n,t))!==!1&&(a[n]=i||o)}),Object.defineProperties(t,a)},Hi=t=>{ya(t,(s,r)=>{if(je(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(je(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Gi=(t,s)=>{const r={},a=o=>{o.forEach(n=>{r[n]=!0})};return xt(t)?a(t):a(String(t).split(s)),r},Wi=()=>{},Yi=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Ji(t){return!!(t&&je(t.append)&&t[xa]==="FormData"&&t[bs])}const Xi=t=>{const s=new Array(10),r=(a,o)=>{if(Vt(a)){if(s.indexOf(a)>=0)return;if($t(a))return a;if(!("toJSON"in a)){s[o]=a;const n=xt(a)?[]:{};return zt(a,(i,d)=>{const m=r(i,o+1);!Dt(m)&&(n[d]=m)}),s[o]=void 0,n}}return a};return r(t,0)},Ki=Le("AsyncFunction"),Qi=t=>t&&(Vt(t)||je(t))&&je(t.then)&&je(t.catch),ja=((t,s)=>t?setImmediate:s?((r,a)=>(Ze.addEventListener("message",({source:o,data:n})=>{o===Ze&&n===r&&a.length&&a.shift()()},!1),o=>{a.push(o),Ze.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",je(Ze.postMessage)),Zi=typeof queueMicrotask<"u"?queueMicrotask.bind(Ze):typeof process<"u"&&process.nextTick||ja,el=t=>t!=null&&je(t[bs]),P={isArray:xt,isArrayBuffer:pa,isBuffer:$t,isFormData:Ci,isArrayBufferView:fi,isString:bi,isNumber:ga,isBoolean:yi,isObject:Vt,isPlainObject:rs,isEmptyObject:ji,isReadableStream:Ti,isRequest:Ei,isResponse:Pi,isHeaders:Di,isUndefined:Dt,isDate:vi,isFile:wi,isBlob:Ni,isRegExp:qi,isFunction:je,isStream:ki,isURLSearchParams:Ai,isTypedArray:$i,isFileList:Si,forEach:zt,merge:qs,extend:Ri,trim:Oi,stripBOM:Li,inherits:Mi,toFlatObject:Fi,kindOf:ys,kindOfTest:Le,endsWith:_i,toArray:Ii,forEachEntry:Vi,matchAll:zi,isHTMLForm:Ui,hasOwnProperty:yr,hasOwnProp:yr,reduceDescriptors:ya,freezeMethods:Hi,toObjectSet:Gi,toCamelCase:Bi,noop:Wi,toFiniteNumber:Yi,findKey:fa,global:Ze,isContextDefined:ba,isSpecCompliantForm:Ji,toJSONObject:Xi,isAsyncFn:Ki,isThenable:Qi,setImmediate:ja,asap:Zi,isIterable:el};function q(t,s,r,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}P.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const va=q.prototype,wa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{wa[t]={value:t}});Object.defineProperties(q,wa);Object.defineProperty(va,"isAxiosError",{value:!0});q.from=(t,s,r,a,o,n)=>{const i=Object.create(va);return P.toFlatObject(t,i,function(m){return m!==Error.prototype},d=>d!=="isAxiosError"),q.call(i,t.message,s,r,a,o),i.cause=t,i.name=t.name,n&&Object.assign(i,n),i};const tl=null;function Hs(t){return P.isPlainObject(t)||P.isArray(t)}function Na(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function jr(t,s,r){return t?t.concat(s).map(function(o,n){return o=Na(o),!r&&n?"["+o+"]":o}).join(r?".":""):s}function sl(t){return P.isArray(t)&&!t.some(Hs)}const rl=P.toFlatObject(P,{},null,function(s){return/^is[A-Z]/.test(s)});function vs(t,s,r){if(!P.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=P.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,b){return!P.isUndefined(b[N])});const a=r.metaTokens,o=r.visitor||h,n=r.dots,i=r.indexes,m=(r.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(s);if(!P.isFunction(o))throw new TypeError("visitor must be a function");function u(x){if(x===null)return"";if(P.isDate(x))return x.toISOString();if(P.isBoolean(x))return x.toString();if(!m&&P.isBlob(x))throw new q("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(x)||P.isTypedArray(x)?m&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,N,b){let C=x;if(x&&!b&&typeof x=="object"){if(P.endsWith(N,"{}"))N=a?N:N.slice(0,-2),x=JSON.stringify(x);else if(P.isArray(x)&&sl(x)||(P.isFileList(x)||P.endsWith(N,"[]"))&&(C=P.toArray(x)))return N=Na(N),C.forEach(function(y,w){!(P.isUndefined(y)||y===null)&&s.append(i===!0?jr([N],w,n):i===null?N:N+"[]",u(y))}),!1}return Hs(x)?!0:(s.append(jr(b,N,n),u(x)),!1)}const f=[],k=Object.assign(rl,{defaultVisitor:h,convertValue:u,isVisitable:Hs});function v(x,N){if(!P.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(x),P.forEach(x,function(C,p){(!(P.isUndefined(C)||C===null)&&o.call(s,C,P.isString(p)?p.trim():p,N,k))===!0&&v(C,N?N.concat(p):[p])}),f.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return v(t),s}function vr(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function rr(t,s){this._pairs=[],t&&vs(t,this,s)}const Sa=rr.prototype;Sa.append=function(s,r){this._pairs.push([s,r])};Sa.toString=function(s){const r=s?function(a){return s.call(this,a,vr)}:vr;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function al(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ka(t,s,r){if(!s)return t;const a=r&&r.encode||al;P.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let n;if(o?n=o(s,r):n=P.isURLSearchParams(s)?s.toString():new rr(s,r).toString(a),n){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class wr{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){P.forEach(this.handlers,function(a){a!==null&&s(a)})}}const Ca={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nl=typeof URLSearchParams<"u"?URLSearchParams:rr,ol=typeof FormData<"u"?FormData:null,il=typeof Blob<"u"?Blob:null,ll={isBrowser:!0,classes:{URLSearchParams:nl,FormData:ol,Blob:il},protocols:["http","https","file","blob","url","data"]},ar=typeof window<"u"&&typeof document<"u",Gs=typeof navigator=="object"&&navigator||void 0,cl=ar&&(!Gs||["ReactNative","NativeScript","NS"].indexOf(Gs.product)<0),dl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ul=ar&&window.location.href||"http://localhost",ml=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ar,hasStandardBrowserEnv:cl,hasStandardBrowserWebWorkerEnv:dl,navigator:Gs,origin:ul},Symbol.toStringTag,{value:"Module"})),xe={...ml,...ll};function hl(t,s){return vs(t,new xe.classes.URLSearchParams,{visitor:function(r,a,o,n){return xe.isNode&&P.isBuffer(r)?(this.append(a,r.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...s})}function xl(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function pl(t){const s={},r=Object.keys(t);let a;const o=r.length;let n;for(a=0;a<o;a++)n=r[a],s[n]=t[n];return s}function Aa(t){function s(r,a,o,n){let i=r[n++];if(i==="__proto__")return!0;const d=Number.isFinite(+i),m=n>=r.length;return i=!i&&P.isArray(o)?o.length:i,m?(P.hasOwnProp(o,i)?o[i]=[o[i],a]:o[i]=a,!d):((!o[i]||!P.isObject(o[i]))&&(o[i]=[]),s(r,a,o[i],n)&&P.isArray(o[i])&&(o[i]=pl(o[i])),!d)}if(P.isFormData(t)&&P.isFunction(t.entries)){const r={};return P.forEachEntry(t,(a,o)=>{s(xl(a),o,r,0)}),r}return null}function gl(t,s,r){if(P.isString(t))try{return(s||JSON.parse)(t),P.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Ut={transitional:Ca,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",o=a.indexOf("application/json")>-1,n=P.isObject(s);if(n&&P.isHTMLForm(s)&&(s=new FormData(s)),P.isFormData(s))return o?JSON.stringify(Aa(s)):s;if(P.isArrayBuffer(s)||P.isBuffer(s)||P.isStream(s)||P.isFile(s)||P.isBlob(s)||P.isReadableStream(s))return s;if(P.isArrayBufferView(s))return s.buffer;if(P.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let d;if(n){if(a.indexOf("application/x-www-form-urlencoded")>-1)return hl(s,this.formSerializer).toString();if((d=P.isFileList(s))||a.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return vs(d?{"files[]":s}:s,m&&new m,this.formSerializer)}}return n||o?(r.setContentType("application/json",!1),gl(s)):s}],transformResponse:[function(s){const r=this.transitional||Ut.transitional,a=r&&r.forcedJSONParsing,o=this.responseType==="json";if(P.isResponse(s)||P.isReadableStream(s))return s;if(s&&P.isString(s)&&(a&&!this.responseType||o)){const i=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(s)}catch(d){if(i)throw d.name==="SyntaxError"?q.from(d,q.ERR_BAD_RESPONSE,this,null,this.response):d}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xe.classes.FormData,Blob:xe.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{Ut.headers[t]={}});const fl=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bl=t=>{const s={};let r,a,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),r=i.substring(0,o).trim().toLowerCase(),a=i.substring(o+1).trim(),!(!r||s[r]&&fl[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},Nr=Symbol("internals");function wt(t){return t&&String(t).trim().toLowerCase()}function as(t){return t===!1||t==null?t:P.isArray(t)?t.map(as):String(t)}function yl(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const jl=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function As(t,s,r,a,o){if(P.isFunction(a))return a.call(this,s,r);if(o&&(s=r),!!P.isString(s)){if(P.isString(a))return s.indexOf(a)!==-1;if(P.isRegExp(a))return a.test(s)}}function vl(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function wl(t,s){const r=P.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(o,n,i){return this[a].call(this,s,o,n,i)},configurable:!0})})}let ve=class{constructor(s){s&&this.set(s)}set(s,r,a){const o=this;function n(d,m,u){const h=wt(m);if(!h)throw new Error("header name must be a non-empty string");const f=P.findKey(o,h);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||m]=as(d))}const i=(d,m)=>P.forEach(d,(u,h)=>n(u,h,m));if(P.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(P.isString(s)&&(s=s.trim())&&!jl(s))i(bl(s),r);else if(P.isObject(s)&&P.isIterable(s)){let d={},m,u;for(const h of s){if(!P.isArray(h))throw TypeError("Object iterator must return a key-value pair");d[u=h[0]]=(m=d[u])?P.isArray(m)?[...m,h[1]]:[m,h[1]]:h[1]}i(d,r)}else s!=null&&n(r,s,a);return this}get(s,r){if(s=wt(s),s){const a=P.findKey(this,s);if(a){const o=this[a];if(!r)return o;if(r===!0)return yl(o);if(P.isFunction(r))return r.call(this,o,a);if(P.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=wt(s),s){const a=P.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||As(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let o=!1;function n(i){if(i=wt(i),i){const d=P.findKey(a,i);d&&(!r||As(a,a[d],d,r))&&(delete a[d],o=!0)}}return P.isArray(s)?s.forEach(n):n(s),o}clear(s){const r=Object.keys(this);let a=r.length,o=!1;for(;a--;){const n=r[a];(!s||As(this,this[n],n,s,!0))&&(delete this[n],o=!0)}return o}normalize(s){const r=this,a={};return P.forEach(this,(o,n)=>{const i=P.findKey(a,n);if(i){r[i]=as(o),delete r[n];return}const d=s?vl(n):String(n).trim();d!==n&&delete r[n],r[d]=as(o),a[d]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return P.forEach(this,(a,o)=>{a!=null&&a!==!1&&(r[o]=s&&P.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(o=>a.set(o)),a}static accessor(s){const a=(this[Nr]=this[Nr]={accessors:{}}).accessors,o=this.prototype;function n(i){const d=wt(i);a[d]||(wl(o,i),a[d]=!0)}return P.isArray(s)?s.forEach(n):n(s),this}};ve.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(ve.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});P.freezeMethods(ve);function Ts(t,s){const r=this||Ut,a=s||r,o=ve.from(a.headers);let n=a.data;return P.forEach(t,function(d){n=d.call(r,n,o.normalize(),s?s.status:void 0)}),o.normalize(),n}function Ta(t){return!!(t&&t.__CANCEL__)}function pt(t,s,r){q.call(this,t??"canceled",q.ERR_CANCELED,s,r),this.name="CanceledError"}P.inherits(pt,q,{__CANCEL__:!0});function Ea(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new q("Request failed with status code "+r.status,[q.ERR_BAD_REQUEST,q.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Nl(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Sl(t,s){t=t||10;const r=new Array(t),a=new Array(t);let o=0,n=0,i;return s=s!==void 0?s:1e3,function(m){const u=Date.now(),h=a[n];i||(i=u),r[o]=m,a[o]=u;let f=n,k=0;for(;f!==o;)k+=r[f++],f=f%t;if(o=(o+1)%t,o===n&&(n=(n+1)%t),u-i<s)return;const v=h&&u-h;return v?Math.round(k*1e3/v):void 0}}function kl(t,s){let r=0,a=1e3/s,o,n;const i=(u,h=Date.now())=>{r=h,o=null,n&&(clearTimeout(n),n=null),t(...u)};return[(...u)=>{const h=Date.now(),f=h-r;f>=a?i(u,h):(o=u,n||(n=setTimeout(()=>{n=null,i(o)},a-f)))},()=>o&&i(o)]}const cs=(t,s,r=3)=>{let a=0;const o=Sl(50,250);return kl(n=>{const i=n.loaded,d=n.lengthComputable?n.total:void 0,m=i-a,u=o(m),h=i<=d;a=i;const f={loaded:i,total:d,progress:d?i/d:void 0,bytes:m,rate:u||void 0,estimated:u&&d&&h?(d-i)/u:void 0,event:n,lengthComputable:d!=null,[s?"download":"upload"]:!0};t(f)},r)},Sr=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},kr=t=>(...s)=>P.asap(()=>t(...s)),Cl=xe.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,xe.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(xe.origin),xe.navigator&&/(msie|trident)/i.test(xe.navigator.userAgent)):()=>!0,Al=xe.hasStandardBrowserEnv?{write(t,s,r,a,o,n){const i=[t+"="+encodeURIComponent(s)];P.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),P.isString(a)&&i.push("path="+a),P.isString(o)&&i.push("domain="+o),n===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Tl(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function El(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Pa(t,s,r){let a=!Tl(s);return t&&(a||r==!1)?El(t,s):s}const Cr=t=>t instanceof ve?{...t}:t;function tt(t,s){s=s||{};const r={};function a(u,h,f,k){return P.isPlainObject(u)&&P.isPlainObject(h)?P.merge.call({caseless:k},u,h):P.isPlainObject(h)?P.merge({},h):P.isArray(h)?h.slice():h}function o(u,h,f,k){if(P.isUndefined(h)){if(!P.isUndefined(u))return a(void 0,u,f,k)}else return a(u,h,f,k)}function n(u,h){if(!P.isUndefined(h))return a(void 0,h)}function i(u,h){if(P.isUndefined(h)){if(!P.isUndefined(u))return a(void 0,u)}else return a(void 0,h)}function d(u,h,f){if(f in s)return a(u,h);if(f in t)return a(void 0,u)}const m={url:n,method:n,data:n,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:d,headers:(u,h,f)=>o(Cr(u),Cr(h),f,!0)};return P.forEach(Object.keys({...t,...s}),function(h){const f=m[h]||o,k=f(t[h],s[h],h);P.isUndefined(k)&&f!==d||(r[h]=k)}),r}const Da=t=>{const s=tt({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:n,headers:i,auth:d}=s;s.headers=i=ve.from(i),s.url=ka(Pa(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&i.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let m;if(P.isFormData(r)){if(xe.hasStandardBrowserEnv||xe.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((m=i.getContentType())!==!1){const[u,...h]=m?m.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...h].join("; "))}}if(xe.hasStandardBrowserEnv&&(a&&P.isFunction(a)&&(a=a(s)),a||a!==!1&&Cl(s.url))){const u=o&&n&&Al.read(n);u&&i.set(o,u)}return s},Pl=typeof XMLHttpRequest<"u",Dl=Pl&&function(t){return new Promise(function(r,a){const o=Da(t);let n=o.data;const i=ve.from(o.headers).normalize();let{responseType:d,onUploadProgress:m,onDownloadProgress:u}=o,h,f,k,v,x;function N(){v&&v(),x&&x(),o.cancelToken&&o.cancelToken.unsubscribe(h),o.signal&&o.signal.removeEventListener("abort",h)}let b=new XMLHttpRequest;b.open(o.method.toUpperCase(),o.url,!0),b.timeout=o.timeout;function C(){if(!b)return;const y=ve.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!d||d==="text"||d==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:y,config:t,request:b};Ea(function(j){r(j),N()},function(j){a(j),N()},S),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(a(new q("Request aborted",q.ECONNABORTED,t,b)),b=null)},b.onerror=function(){a(new q("Network Error",q.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let w=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const S=o.transitional||Ca;o.timeoutErrorMessage&&(w=o.timeoutErrorMessage),a(new q(w,S.clarifyTimeoutError?q.ETIMEDOUT:q.ECONNABORTED,t,b)),b=null},n===void 0&&i.setContentType(null),"setRequestHeader"in b&&P.forEach(i.toJSON(),function(w,S){b.setRequestHeader(S,w)}),P.isUndefined(o.withCredentials)||(b.withCredentials=!!o.withCredentials),d&&d!=="json"&&(b.responseType=o.responseType),u&&([k,x]=cs(u,!0),b.addEventListener("progress",k)),m&&b.upload&&([f,v]=cs(m),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",v)),(o.cancelToken||o.signal)&&(h=y=>{b&&(a(!y||y.type?new pt(null,t,b):y),b.abort(),b=null)},o.cancelToken&&o.cancelToken.subscribe(h),o.signal&&(o.signal.aborted?h():o.signal.addEventListener("abort",h)));const p=Nl(o.url);if(p&&xe.protocols.indexOf(p)===-1){a(new q("Unsupported protocol "+p+":",q.ERR_BAD_REQUEST,t));return}b.send(n||null)})},Ol=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,o;const n=function(u){if(!o){o=!0,d();const h=u instanceof Error?u:this.reason;a.abort(h instanceof q?h:new pt(h instanceof Error?h.message:h))}};let i=s&&setTimeout(()=>{i=null,n(new q(`timeout ${s} of ms exceeded`,q.ETIMEDOUT))},s);const d=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(n):u.removeEventListener("abort",n)}),t=null)};t.forEach(u=>u.addEventListener("abort",n));const{signal:m}=a;return m.unsubscribe=()=>P.asap(d),m}},Rl=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,o;for(;a<r;)o=a+s,yield t.slice(a,o),a=o},Ll=async function*(t,s){for await(const r of Ml(t))yield*Rl(r,s)},Ml=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},Ar=(t,s,r,a)=>{const o=Ll(t,s);let n=0,i,d=m=>{i||(i=!0,a&&a(m))};return new ReadableStream({async pull(m){try{const{done:u,value:h}=await o.next();if(u){d(),m.close();return}let f=h.byteLength;if(r){let k=n+=f;r(k)}m.enqueue(new Uint8Array(h))}catch(u){throw d(u),u}},cancel(m){return d(m),o.return()}},{highWaterMark:2})},ws=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Oa=ws&&typeof ReadableStream=="function",Fl=ws&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Ra=(t,...s)=>{try{return!!t(...s)}catch{return!1}},_l=Oa&&Ra(()=>{let t=!1;const s=new Request(xe.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Tr=64*1024,Ws=Oa&&Ra(()=>P.isReadableStream(new Response("").body)),ds={stream:Ws&&(t=>t.body)};ws&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!ds[s]&&(ds[s]=P.isFunction(t[s])?r=>r[s]():(r,a)=>{throw new q(`Response type '${s}' is not supported`,q.ERR_NOT_SUPPORT,a)})})})(new Response);const Il=async t=>{if(t==null)return 0;if(P.isBlob(t))return t.size;if(P.isSpecCompliantForm(t))return(await new Request(xe.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(P.isArrayBufferView(t)||P.isArrayBuffer(t))return t.byteLength;if(P.isURLSearchParams(t)&&(t=t+""),P.isString(t))return(await Fl(t)).byteLength},$l=async(t,s)=>{const r=P.toFiniteNumber(t.getContentLength());return r??Il(s)},Vl=ws&&(async t=>{let{url:s,method:r,data:a,signal:o,cancelToken:n,timeout:i,onDownloadProgress:d,onUploadProgress:m,responseType:u,headers:h,withCredentials:f="same-origin",fetchOptions:k}=Da(t);u=u?(u+"").toLowerCase():"text";let v=Ol([o,n&&n.toAbortSignal()],i),x;const N=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let b;try{if(m&&_l&&r!=="get"&&r!=="head"&&(b=await $l(h,a))!==0){let S=new Request(s,{method:"POST",body:a,duplex:"half"}),T;if(P.isFormData(a)&&(T=S.headers.get("content-type"))&&h.setContentType(T),S.body){const[j,c]=Sr(b,cs(kr(m)));a=Ar(S.body,Tr,j,c)}}P.isString(f)||(f=f?"include":"omit");const C="credentials"in Request.prototype;x=new Request(s,{...k,signal:v,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:a,duplex:"half",credentials:C?f:void 0});let p=await fetch(x,k);const y=Ws&&(u==="stream"||u==="response");if(Ws&&(d||y&&N)){const S={};["status","statusText","headers"].forEach(g=>{S[g]=p[g]});const T=P.toFiniteNumber(p.headers.get("content-length")),[j,c]=d&&Sr(T,cs(kr(d),!0))||[];p=new Response(Ar(p.body,Tr,j,()=>{c&&c(),N&&N()}),S)}u=u||"text";let w=await ds[P.findKey(ds,u)||"text"](p,t);return!y&&N&&N(),await new Promise((S,T)=>{Ea(S,T,{data:w,headers:ve.from(p.headers),status:p.status,statusText:p.statusText,config:t,request:x})})}catch(C){throw N&&N(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new q("Network Error",q.ERR_NETWORK,t,x),{cause:C.cause||C}):q.from(C,C&&C.code,t,x)}}),Ys={http:tl,xhr:Dl,fetch:Vl};P.forEach(Ys,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Er=t=>`- ${t}`,zl=t=>P.isFunction(t)||t===null||t===!1,La={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:s}=t;let r,a;const o={};for(let n=0;n<s;n++){r=t[n];let i;if(a=r,!zl(r)&&(a=Ys[(i=String(r)).toLowerCase()],a===void 0))throw new q(`Unknown adapter '${i}'`);if(a)break;o[i||"#"+n]=a}if(!a){const n=Object.entries(o).map(([d,m])=>`adapter ${d} `+(m===!1?"is not supported by the environment":"is not available in the build"));let i=s?n.length>1?`since :
`+n.map(Er).join(`
`):" "+Er(n[0]):"as no adapter specified";throw new q("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a},adapters:Ys};function Es(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new pt(null,t)}function Pr(t){return Es(t),t.headers=ve.from(t.headers),t.data=Ts.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),La.getAdapter(t.adapter||Ut.adapter)(t).then(function(a){return Es(t),a.data=Ts.call(t,t.transformResponse,a),a.headers=ve.from(a.headers),a},function(a){return Ta(a)||(Es(t),a&&a.response&&(a.response.data=Ts.call(t,t.transformResponse,a.response),a.response.headers=ve.from(a.response.headers))),Promise.reject(a)})}const Ma="1.11.0",Ns={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Ns[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Dr={};Ns.transitional=function(s,r,a){function o(n,i){return"[Axios v"+Ma+"] Transitional option '"+n+"'"+i+(a?". "+a:"")}return(n,i,d)=>{if(s===!1)throw new q(o(i," has been removed"+(r?" in "+r:"")),q.ERR_DEPRECATED);return r&&!Dr[i]&&(Dr[i]=!0,console.warn(o(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(n,i,d):!0}};Ns.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function Ul(t,s,r){if(typeof t!="object")throw new q("options must be an object",q.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const n=a[o],i=s[n];if(i){const d=t[n],m=d===void 0||i(d,n,t);if(m!==!0)throw new q("option "+n+" must be "+m,q.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new q("Unknown option "+n,q.ERR_BAD_OPTION)}}const ns={assertOptions:Ul,validators:Ns},Fe=ns.validators;let et=class{constructor(s){this.defaults=s||{},this.interceptors={request:new wr,response:new wr}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const n=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?n&&!String(a.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+n):a.stack=n}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=tt(this.defaults,r);const{transitional:a,paramsSerializer:o,headers:n}=r;a!==void 0&&ns.assertOptions(a,{silentJSONParsing:Fe.transitional(Fe.boolean),forcedJSONParsing:Fe.transitional(Fe.boolean),clarifyTimeoutError:Fe.transitional(Fe.boolean)},!1),o!=null&&(P.isFunction(o)?r.paramsSerializer={serialize:o}:ns.assertOptions(o,{encode:Fe.function,serialize:Fe.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ns.assertOptions(r,{baseUrl:Fe.spelling("baseURL"),withXsrfToken:Fe.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=n&&P.merge(n.common,n[r.method]);n&&P.forEach(["delete","get","head","post","put","patch","common"],x=>{delete n[x]}),r.headers=ve.concat(i,n);const d=[];let m=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(r)===!1||(m=m&&N.synchronous,d.unshift(N.fulfilled,N.rejected))});const u=[];this.interceptors.response.forEach(function(N){u.push(N.fulfilled,N.rejected)});let h,f=0,k;if(!m){const x=[Pr.bind(this),void 0];for(x.unshift(...d),x.push(...u),k=x.length,h=Promise.resolve(r);f<k;)h=h.then(x[f++],x[f++]);return h}k=d.length;let v=r;for(f=0;f<k;){const x=d[f++],N=d[f++];try{v=x(v)}catch(b){N.call(this,b);break}}try{h=Pr.call(this,v)}catch(x){return Promise.reject(x)}for(f=0,k=u.length;f<k;)h=h.then(u[f++],u[f++]);return h}getUri(s){s=tt(this.defaults,s);const r=Pa(s.baseURL,s.url,s.allowAbsoluteUrls);return ka(r,s.params,s.paramsSerializer)}};P.forEach(["delete","get","head","options"],function(s){et.prototype[s]=function(r,a){return this.request(tt(a||{},{method:s,url:r,data:(a||{}).data}))}});P.forEach(["post","put","patch"],function(s){function r(a){return function(n,i,d){return this.request(tt(d||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}et.prototype[s]=r(),et.prototype[s+"Form"]=r(!0)});let Bl=class Fa{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(n){r=n});const a=this;this.promise.then(o=>{if(!a._listeners)return;let n=a._listeners.length;for(;n-- >0;)a._listeners[n](o);a._listeners=null}),this.promise.then=o=>{let n;const i=new Promise(d=>{a.subscribe(d),n=d}).then(o);return i.cancel=function(){a.unsubscribe(n)},i},s(function(n,i,d){a.reason||(a.reason=new pt(n,i,d),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new Fa(function(o){s=o}),cancel:s}}};function ql(t){return function(r){return t.apply(null,r)}}function Hl(t){return P.isObject(t)&&t.isAxiosError===!0}const Js={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Js).forEach(([t,s])=>{Js[s]=t});function _a(t){const s=new et(t),r=ha(et.prototype.request,s);return P.extend(r,et.prototype,s,{allOwnKeys:!0}),P.extend(r,s,null,{allOwnKeys:!0}),r.create=function(o){return _a(tt(t,o))},r}const K=_a(Ut);K.Axios=et;K.CanceledError=pt;K.CancelToken=Bl;K.isCancel=Ta;K.VERSION=Ma;K.toFormData=vs;K.AxiosError=q;K.Cancel=K.CanceledError;K.all=function(s){return Promise.all(s)};K.spread=ql;K.isAxiosError=Hl;K.mergeConfig=tt;K.AxiosHeaders=ve;K.formToJSON=t=>Aa(P.isHTMLForm(t)?new FormData(t):t);K.getAdapter=La.getAdapter;K.HttpStatusCode=Js;K.default=K;const{Axios:Mu,AxiosError:Fu,CanceledError:_u,isCancel:Iu,CancelToken:$u,VERSION:Vu,all:zu,Cancel:Uu,isAxiosError:Bu,spread:qu,toFormData:Hu,AxiosHeaders:Gu,HttpStatusCode:Wu,formToJSON:Yu,getAdapter:Ju,mergeConfig:Xu}=K;/*! js-cookie v3.0.5 | MIT */function Jt(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)t[a]=r[a]}return t}var Gl={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Xs(t,s){function r(o,n,i){if(!(typeof document>"u")){i=Jt({},s,i),typeof i.expires=="number"&&(i.expires=new Date(Date.now()+i.expires*864e5)),i.expires&&(i.expires=i.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var m in i)i[m]&&(d+="; "+m,i[m]!==!0&&(d+="="+i[m].split(";")[0]));return document.cookie=o+"="+t.write(n,o)+d}}function a(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var n=document.cookie?document.cookie.split("; "):[],i={},d=0;d<n.length;d++){var m=n[d].split("="),u=m.slice(1).join("=");try{var h=decodeURIComponent(m[0]);if(i[h]=t.read(u,h),o===h)break}catch{}}return o?i[o]:i}}return Object.create({set:r,get:a,remove:function(o,n){r(o,"",Jt({},n,{expires:-1}))},withAttributes:function(o){return Xs(this.converter,Jt({},this.attributes,o))},withConverter:function(o){return Xs(Jt({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(t)}})}var te=Xs(Gl,{path:"/"});const at="pandaura_auth_token",nt="pandaura_auth_user",Xt="pandaura_auth_orgs",Kt="pandaura_auth_selected_org",Nt="pandaura_auth_login_time",it={expires:30,secure:!1,sameSite:"lax",path:"/"};console.log("🍪 AuthStorage: Cookie options configured:",it);const Ks=24,H={setToken:t=>{console.log("🍪 AuthStorage: Setting token cookie"),te.set(at,t,it),te.set(Nt,Date.now().toString(),it),console.log("🍪 AuthStorage: Token cookie set, verifying...",!!te.get(at))},getToken:()=>{const t=te.get(at)||null;return console.log("🍪 AuthStorage: Getting token cookie:",t?`${t.substring(0,10)}...`:"null"),t},removeToken:()=>{console.log("🍪 AuthStorage: Removing token cookie"),te.remove(at,{path:"/"}),te.remove(Nt,{path:"/"})},setUser:t=>{console.log("🍪 AuthStorage: Setting user cookie",t.email),te.set(nt,JSON.stringify(t),it),console.log("🍪 AuthStorage: User cookie set, verifying...",!!te.get(nt))},getUser:()=>{const t=te.get(nt);if(!t)return console.log("🍪 AuthStorage: No user cookie found"),null;try{const s=JSON.parse(t);return console.log("🍪 AuthStorage: Getting user cookie:",s.email),s}catch(s){return console.error("🍪 AuthStorage: Failed to parse user cookie:",s),null}},removeUser:()=>{console.log("🍪 AuthStorage: Removing user cookie"),te.remove(nt,{path:"/"})},setOrganizations:t=>{console.log("🍪 AuthStorage: Setting organizations cookie",t.length,"orgs"),te.set(Xt,JSON.stringify(t),it)},getOrganizations:()=>{const t=te.get(Xt);if(!t)return console.log("🍪 AuthStorage: No organizations cookie found"),[];try{const s=JSON.parse(t);return console.log("🍪 AuthStorage: Getting organizations cookie:",s.length,"orgs"),s}catch(s){return console.error("🍪 AuthStorage: Failed to parse organizations cookie:",s),[]}},removeOrganizations:()=>{console.log("🍪 AuthStorage: Removing organizations cookie"),te.remove(Xt,{path:"/"})},setSelectedOrg:t=>{console.log("🍪 AuthStorage: Setting selected org cookie",t.org_name),te.set(Kt,JSON.stringify(t),it)},getSelectedOrg:()=>{const t=te.get(Kt);if(!t)return console.log("🍪 AuthStorage: No selected org cookie found"),null;try{const s=JSON.parse(t);return console.log("🍪 AuthStorage: Getting selected org cookie:",s.org_name),s}catch(s){return console.error("🍪 AuthStorage: Failed to parse selected org cookie:",s),null}},removeSelectedOrg:()=>{console.log("🍪 AuthStorage: Removing selected org cookie"),te.remove(Kt,{path:"/"})},clearAll:()=>{console.log("🍪 AuthStorage: Clearing all auth cookies"),te.remove(at,{path:"/"}),te.remove(nt,{path:"/"}),te.remove(Xt,{path:"/"}),te.remove(Kt,{path:"/"}),te.remove(Nt,{path:"/"}),console.log("🍪 AuthStorage: All cookies cleared")},hasAuthData:()=>{const t=te.get(at),s=te.get(nt),r=te.get(Nt);let a=!1;if(r){const n=parseInt(r,10);a=(Date.now()-n)/(1e3*60*60)>Ks}const o=!!(t&&s)&&!a;return console.log("🍪 AuthStorage: Checking auth data:",{hasToken:!!t,hasUser:!!s,expired:a,hasAuth:o}),o},isSessionExpired:()=>{const t=te.get(Nt);if(!t)return!0;const s=parseInt(t,10);return(Date.now()-s)/(1e3*60*60)>Ks}},Ia=!1,$a=!0;console.log("🔍 Environment Detection:",{"import.meta.env.DEV":!1,"import.meta.env.PROD":!0,"import.meta.env.MODE":"production",VITE_DEPLOYMENT_MODE:"production",isDevelopment:Ia,isProduction:$a});const Wl=()=>(console.log("✅ Using explicit API URL:","https://pandaura-backend-production.up.railway.app"),"https://pandaura-backend-production.up.railway.app"),gt={apiBaseUrl:Wl(),deploymentMode:"production",appTitle:"Pandaura AS",features:{analytics:!0,externalFonts:!0,cdnAssets:!0},upload:{maxFileSize:parseInt("10485760"),endpoint:"/api/v1/upload",allowedTypes:["pdf","docx","txt","png","jpg","jpeg"]},auth:{type:"local",sessionTimeout:parseInt("28800000")},network:{timeout:3e4,retries:3},onPremise:{showStatus:!0,offlineMode:!0,localOnly:!0}},Yl=()=>{const t=window.location.hostname,s=window.location.port;return{hostname:t,port:s,isLocal:t==="localhost"||t==="127.0.0.1",displayUrl:s?`${t}:${s}`:t}},nr=()=>{console.log("🔍 Environment Debug:",{isDevelopment:Ia,isProduction:$a,"import.meta.env.DEV":!1,"import.meta.env.PROD":!0,"import.meta.env.MODE":"production",VITE_API_BASE_URL:"https://pandaura-backend-production.up.railway.app","Final API URL":gt.apiBaseUrl})},Va=l.createContext(void 0),Jl=`${gt.apiBaseUrl}/api/v1`;K.defaults.baseURL=Jl;const Xl=({children:t})=>{const[s,r]=l.useState(null),[a,o]=l.useState(null),[n,i]=l.useState([]),[d,m]=l.useState(null),[u,h]=l.useState(!0),[f,k]=l.useState(!1),[v,x]=l.useState(!1),N=!!a&&!!s&&!v,b=g=>{m(g),g?H.setSelectedOrg(g):H.removeSelectedOrg()};l.useEffect(()=>{console.log("🔍 AuthContext: Authentication state changed:",{isAuthenticated:N,hasToken:!!a,hasUser:!!s,userEmail:s?.email,isLoading:u})},[N,a,s,u]),l.useEffect(()=>{console.log("🔍 AuthContext: Token effect triggered, token:",a?`${a.substring(0,10)}...`:"null","isInitialized:",f),a?(K.defaults.headers.common.Authorization=`Bearer ${a}`,console.log("🔍 AuthContext: Setting token to cookies..."),H.setToken(a)):f?(delete K.defaults.headers.common.Authorization,console.log("🔍 AuthContext: Removing token from cookies (post-initialization)..."),H.removeToken()):(delete K.defaults.headers.common.Authorization,console.log("🔍 AuthContext: Removing auth header only (during initialization)..."))},[a,f]),l.useEffect(()=>{let g=!0;console.log("🔍 AuthContext: Starting initialization...");const A=H.getToken(),O=H.getUser(),D=H.getOrganizations(),R=H.getSelectedOrg();if(console.log("🔍 AuthContext: Raw cookie data:",{storedToken:A,storedUser:O,storedOrgs:D,storedSelectedOrg:R}),console.log("🔍 AuthContext: Stored data analysis:",{hasToken:!!A,hasUser:!!O,hasOrgs:D&&D.length>0,hasSelectedOrg:!!R,tokenPrefix:A?`${A.substring(0,10)}...`:"none",userEmail:O?.email||"none"}),A&&O)if(H.isSessionExpired())x(!0),p();else try{g&&(r(O),o(A),D&&D.length>0&&i(D),R&&m(R))}catch{g&&H.clearAll()}return g&&(console.log("🔍 AuthContext: Setting loading to false and marking as initialized"),h(!1),k(!0)),()=>{console.log("🔍 AuthContext: Cleanup called"),g=!1}},[]);const C=async(g,A,O)=>{try{const D=await K.post("/auth/login",{email:g,password:A,twoFactorToken:O});if(D.data.requiresTwoFactor)return{requiresTwoFactor:!0,success:!1,message:D.data.message};const{token:R,userId:V,fullName:M,email:L,twoFactorEnabled:B,orgId:z,role:J,orgName:ie,organizations:U}=D.data;o(R);const Z={userId:V,fullName:M||"",email:L||g,twoFactorEnabled:B||!1};r(Z),H.setUser(Z);const W=U.map(le=>({org_id:le.org_id,org_name:le.org_name,role:le.role,industry:le.industry,size:le.size}));i(W),H.setOrganizations(W);const Y=W.find(le=>le.org_id===z)||W[0];return m(Y),H.setSelectedOrg(Y),{success:!0,message:"Login successful"}}catch(D){return console.error("Login error:",D),{success:!1,message:D.response?.data?.error||"Login failed"}}},p=()=>{console.log("🔍 AuthContext: Logging out user"),o(null),r(null),i([]),m(null),H.clearAll(),console.log("🔍 AuthContext: Logout complete, cookies cleared")},y=async g=>{try{const A=await K.post("/auth/orgs",g),{token:O,userId:D,orgId:R,role:V}=A.data;o(O);const M={userId:D,fullName:g.fullName,email:g.email,twoFactorEnabled:!1};r(M);const L={org_id:R,org_name:g.orgName,role:V,industry:g.industry,size:g.size};return i([L]),m(L),H.setUser(M),H.setOrganizations([L]),H.setSelectedOrg(L),{success:!0,message:"Organization created successfully"}}catch(A){return console.error("Create organization error:",A),{success:!1,message:A.response?.data?.error||"Failed to create organization"}}},w=async g=>{try{const A=await K.get(`/auth/invites/validate?code=${g}`);return{valid:A.data.valid,orgName:A.data.orgName,role:A.data.role,email:A.data.email}}catch(A){return console.error("Validate invite error:",A),{valid:!1,message:A.response?.data?.error||"Invalid invite code"}}},S=async g=>{try{const A=await K.post("/auth/invites/accept",g),{token:O,userId:D,orgId:R,role:V}=A.data;o(O);const M={userId:D,fullName:g.fullName,email:g.email,twoFactorEnabled:!1};r(M);const B=(await K.get(`/auth/users/${D}/orgs`,{headers:{Authorization:`Bearer ${O}`}})).data.map(J=>({org_id:J.org_id,org_name:J.org_name,role:J.role,industry:J.industry,size:J.size}));i(B);const z=B.find(J=>J.org_id===R)||B[0];return m(z),H.setUser(M),H.setOrganizations(B),H.setSelectedOrg(z),{success:!0,message:"Successfully joined organization"}}catch(A){return console.error("Accept invite error:",A),{success:!1,message:A.response?.data?.error||"Failed to accept invite"}}},T=async()=>{try{const g=a||H.getToken();if(!g)throw new Error("No authentication token available");const A=await K.post("/auth/setup-2fa",{},{headers:{Authorization:`Bearer ${g}`}});return{secret:A.data.secret,qrCodeUrl:A.data.qrCode||A.data.otpauth_url}}catch(g){throw console.error("Setup 2FA error:",g),new Error(g.response?.data?.error||"Failed to setup 2FA")}},j=async g=>{try{return await K.post("/auth/verify-2fa",{token:g}),s&&r({...s,twoFactorEnabled:!0}),{success:!0,message:"2FA enabled successfully"}}catch(A){return{success:!1,message:A.response?.data?.error||"2FA verification failed"}}},c=async(g,A)=>{try{return await K.post("/auth/device-bind",{instanceId:g,deviceFingerprintHash:A}),{success:!0,message:"Device bound successfully"}}catch(O){return{success:!1,message:O.response?.data?.error||"Device binding failed"}}};return v?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-surface",children:e.jsxs("div",{className:"bg-white border border-error/30 rounded-lg shadow-lg p-8 max-w-md text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-error mb-4",children:"Session Expired"}),e.jsxs("p",{className:"text-muted mb-6",children:["For security purposes, you must log in again. Your session has expired after ",Ks," hours."]}),e.jsx("a",{href:"/signin",className:"inline-block px-6 py-2 bg-primary text-white rounded hover:bg-secondary transition-colors font-semibold",children:"Go to Login"})]})}):e.jsx(Va.Provider,{value:{user:s,token:a,organizations:n,selectedOrg:d,isAuthenticated:N,isLoading:u,setSelectedOrg:b,login:C,logout:p,createOrganization:y,validateInvite:w,acceptInvite:S,setupTwoFactor:T,verifyTwoFactor:j,bindDevice:c},children:t})},Ee=()=>{const t=l.useContext(Va);if(!t)throw new Error("useAuth must be used within AuthProvider");return t};function lt(){const[t,s]=l.useState(null),r=de(),a=Rt(),o=l.useRef(null),{logout:n}=Ee(),i=d=>{s(m=>m===d?null:d)};return l.useEffect(()=>{const d=m=>{o.current&&!o.current.contains(m.target)&&s(null)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),e.jsxs("div",{ref:o,className:"flex space-x-4 items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>i("integrations"),title:"Integrations",className:"p-2 rounded hover:bg-gray-200",children:e.jsx(Bo,{className:"w-5 h-5"})}),t==="integrations"&&e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded shadow-lg p-4 text-sm z-50",children:[e.jsx("div",{className:"font-semibold mb-3 text-primary",children:"Productivity Tools"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{onClick:()=>{console.log("Connecting to Google Drive API..."),alert("Google Drive integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"G"})}),e.jsx("span",{children:"Google Drive API"})]}),e.jsxs("li",{onClick:()=>{console.log("Connecting to Google Docs API..."),alert("Google Docs integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"📄"})}),e.jsx("span",{children:"Google Docs API"})]}),e.jsxs("li",{onClick:()=>{console.log("Connecting to Dropbox API..."),alert("Dropbox integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-700 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"📦"})}),e.jsx("span",{children:"Dropbox API"})]}),e.jsxs("li",{onClick:()=>{console.log("Connecting to Excel API..."),alert("Excel API integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-green-600 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"📊"})}),e.jsx("span",{children:"Excel API"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>i("profile"),title:"User Profile",className:"p-2 rounded-full border hover:bg-gray-200",children:e.jsx(ca,{className:"w-5 h-5"})}),t==="profile"&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded shadow-lg py-2 text-sm z-50",children:e.jsxs("ul",{className:"text-gray-800",children:[e.jsx("li",{onClick:()=>{console.log("Navigating to profile..."),r("/profile",{state:{from:a.pathname}}),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"👤 Profile"}),e.jsx("li",{onClick:()=>{console.log("Navigating to feedback..."),r("/feedback"),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"💬 Feedback"}),e.jsx("li",{onClick:()=>{console.log("Navigating to privacy..."),r("/privacy"),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"🔐 Privacy"}),e.jsx("li",{onClick:()=>{console.log("Navigating to case study library..."),r("/case-study-library"),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"📂 Case Studies"}),e.jsxs("li",{onClick:()=>{n(),r("/signin"),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer flex items-center gap-2",children:[e.jsx(Us,{className:"w-4 h-4"}),"Log Out"]})]})})]})]})}function za(){const[t,s]=l.useState(!1),[r,a]=l.useState(!1),[o,n]=l.useState(""),[i,d]=l.useState([{id:"1",text:"Pandaura AS (Mini) is your smart co-engineer. It adapts to whatever page you're on and helps with tips, training, logic guidance, and more — always context-aware, always available.",sender:"pandaura",timestamp:new Date().toLocaleTimeString()}]),m=l.useRef(null),u=l.useRef(null),h=()=>{u.current?.scrollIntoView({behavior:"smooth"})};l.useEffect(()=>{h()},[i]),l.useEffect(()=>{const v=x=>{if(m.current&&!m.current.contains(x.target)){const N=document.querySelector("[data-pandaura-orb]");N&&!N.contains(x.target)&&s(!1)}};return t&&document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[t]);const f=()=>{if(!o.trim())return;const v={id:Date.now().toString(),text:o,sender:"user",timestamp:new Date().toLocaleTimeString()};d(x=>[...x,v]),n(""),setTimeout(()=>{const x=["I understand you're working on that. Let me help you with the PLC logic structure. Would you like me to explain the safety interlocks?","That's a great question about motor control. In industrial automation, we typically use three-wire control circuits for safety. Let me walk you through it.","For tag management, I recommend organizing your variables by function: Inputs (I_), Outputs (O_), and Memory (M_). This follows industry best practices.","I can help you generate the structured text code for that. Which PLC vendor are you targeting - Rockwell, Siemens, or Beckhoff?","Let me analyze your logic. Based on what you've described, you'll need to consider emergency stop circuits, guard door interlocks, and overload protection."],N=x[Math.floor(Math.random()*x.length)],b={id:(Date.now()+1).toString(),text:N,sender:"pandaura",timestamp:new Date().toLocaleTimeString()};d(C=>[...C,b])},1e3)},k=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),f())};return e.jsxs(e.Fragment,{children:[e.jsx("button",{"data-pandaura-orb":!0,onClick:()=>s(!t),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary rounded-full flex items-center justify-center shadow-lg hover:scale-105 transition-transform z-50",title:"Ask Pandaura AS (Mini)",children:e.jsx(gr,{className:"w-6 h-6 text-white"})}),t&&e.jsxs("div",{ref:m,className:`fixed bottom-24 right-6 bg-white border border-light rounded-lg shadow-xl z-50 transition-all duration-300 ${r?"w-80 h-16":"w-80 h-96"}`,children:[e.jsxs("div",{className:"bg-primary text-white p-3 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Pandaura AS (Mini)"}),e.jsx("span",{className:"text-xs bg-green-500 px-1 rounded",children:"Online"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>a(!r),className:"hover:bg-white hover:bg-opacity-20 p-1 rounded",children:r?e.jsx(Oo,{className:"w-3 h-3"}):e.jsx(Io,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>s(!1),className:"hover:bg-white hover:bg-opacity-20 p-1 rounded",children:e.jsx(Re,{className:"w-3 h-3"})})]})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-64 overflow-y-auto p-3 space-y-3",children:[i.map(v=>e.jsx("div",{className:`flex ${v.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-2 text-sm ${v.sender==="user"?"bg-primary text-white":"bg-gray-100 text-primary"}`,children:[e.jsx("div",{children:v.text}),e.jsx("div",{className:`text-xs mt-1 ${v.sender==="user"?"text-blue-200":"text-gray-500"}`,children:v.timestamp})]})},v.id)),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"border-t border-light p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:o,onChange:v=>n(v.target.value),onKeyPress:k,placeholder:"Ask about PLCs, automation, tags...",className:"flex-1 border border-light rounded px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-accent",rows:1}),e.jsx("button",{onClick:f,disabled:!o.trim(),className:"bg-primary text-white p-2 rounded hover:bg-secondary transition-colors disabled:opacity-50",children:e.jsx(ps,{className:"w-4 h-4"})})]})})]})]})]})}const Ua=l.createContext(void 0),or=()=>{const t=l.useContext(Ua);if(!t)throw new Error("useModuleState must be used within a ModuleStateProvider");return t},Kl=({children:t})=>{const[s,r]=l.useState({}),a=l.useCallback(m=>s[m]||{},[s]),o=l.useCallback((m,u)=>{r(h=>{const f=h[m]||{},k={...f,...u};return JSON.stringify(f)===JSON.stringify(k)?h:{...h,[m]:k}})},[]),n=l.useCallback(m=>{r(u=>{if(!u[m])return u;const h={...u};return delete h[m],h})},[]),i=l.useCallback((m,u)=>{const h=setTimeout(()=>{try{const f=JSON.parse(localStorage.getItem("pandaura_module_states")||"{}");f[m]=u,localStorage.setItem("pandaura_module_states",JSON.stringify(f))}catch(f){console.warn("Failed to save module state to localStorage:",f)}},100);return o(m,u),()=>clearTimeout(h)},[o]);be.useEffect(()=>{try{const m=JSON.parse(localStorage.getItem("pandaura_module_states")||"{}");r(m)}catch(m){console.warn("Failed to load module states from localStorage:",m)}},[]);const d=l.useMemo(()=>({getModuleState:a,setModuleState:o,clearModuleState:n,saveModuleState:i}),[a,o,n,i]);return e.jsx(Ua.Provider,{value:d,children:t})};function Ql({hasUnsavedChanges:t,onSave:s,message:r="You have unsaved changes. Do you want to save before leaving?"}){const a=de();return Rt(),l.useEffect(()=>{const n=i=>{if(t){if(s&&"sendBeacon"in navigator)try{const d=JSON.stringify({emergency_save:!0,timestamp:Date.now()});navigator.sendBeacon("/api/v1/emergency-save",d),console.log("Attempting beacon save before unload")}catch(d){console.warn("Beacon save failed:",d)}return i.preventDefault(),i.returnValue="",r}};return window.addEventListener("beforeunload",n),()=>window.removeEventListener("beforeunload",n)},[t,r,s]),{handleNavigation:l.useCallback(async n=>{if(!t){a(n);return}const i=window.confirm(r);if(i&&s)try{await s()?a(n):console.error("Save failed, navigation cancelled")}catch(d){console.error("Save error during navigation:",d)}else i||a(n)},[t,r,s,a]),hasUnsavedChanges:t}}function Ba(t,s){return Ql({hasUnsavedChanges:t,onSave:s,message:"You have unsaved project changes. Save before leaving?"})}const Qt=[{name:"Logic Studio",path:"/logic-studio",icon:aa},{name:"Tag Database Manager",path:"/tag-database",icon:os},{name:"AutoDocs",path:"/autodocs",icon:Xe},{name:"Pandaura AS",path:"/pandaura-as",icon:er}],Zl={"Pandaura AS":["Your AI co-engineer for automation, electrical, robotics, and everything in between."],"Logic Studio":["Turn natural language into fully structured PLC code — instantly and vendor-ready."],AutoDocs:["Auto-generate PLC docs for end-user delivery—specs, IO lists, logic summaries, and more"],"Tag Database Manager":["Organize, edit, and maintain all your PLC tags in one centralized system."],Projects:["Manage and organize your automation projects, files, and collaborative workspaces."]};function De({children:t}){const[s,r]=l.useState(!0),[a,o]=l.useState(!1),n=de(),i=Rt(),{projectId:d}=Lt(),{saveModuleState:m}=or(),u=i.pathname.startsWith("/workspace/"),[h,f]=l.useState(!1),k=l.useCallback(async()=>{try{return console.log("Performing fallback save before navigation"),!0}catch(j){return console.error("Failed to save before navigation:",j),!1}},[]),{handleNavigation:v}=Ba(h&&u,k);l.useEffect(()=>{const j=c=>{f(c.detail.hasChanges)};return window.addEventListener("pandaura:unsaved-changes",j),()=>{window.removeEventListener("pandaura:unsaved-changes",j)}},[]);const x=l.useMemo(()=>{if(u&&d){const j=Qt.map(c=>({...c,path:`/workspace/${d}${c.path}`}));return console.log("🔧 SharedLayout: Using project-specific tool paths:",{projectId:d,originalPaths:Qt.map(c=>c.path),projectPaths:j.map(c=>c.path)}),j}return console.log("🔧 SharedLayout: Using standard tool paths"),Qt},[u,d]),N=()=>{const j=i.pathname,c=x.find(A=>A.path===j);return c?c.name:Qt.find(A=>j.includes(A.path.substring(1)))?.name||"Pandaura AS"},b=l.useCallback(j=>{console.log("🔧 SharedLayout: Navigating to tool:",{toolPath:j,currentPath:i.pathname,projectId:d,isProjectWorkspace:u}),u&&h?v(j):n(j)},[n,i.pathname,d,u,h,v]),C=l.useCallback(()=>{u&&h?v("/home"):o(!0)},[u,h,v]),p=l.useCallback(async()=>{const j=N();console.log(`Auto-saving ${j} progress...`),await k()&&(o(!1),n("/home"))},[n,k]),y=l.useCallback(()=>{o(!1),n("/home")},[n]),w=()=>{const j=Yl();return e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:C,className:"hover:opacity-80 transition-opacity",title:"Go to Home",children:e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsx("span",{className:"text-primary font-medium",children:gt.appTitle}),e.jsxs("span",{className:"text-muted",children:["Running on ",j.displayUrl," (Offline Mode)"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-yellow-100 border border-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs",children:"Offline Mode"}),e.jsx(lt,{})]})]})},S=l.useMemo(()=>e.jsxs("div",{className:`h-full overflow-y-auto scrollbar-hide bg-gray-light border-r border-light shadow-card p-2 space-y-4 transition-all duration-200 will-change-transform ${s?"w-72":"w-16"}`,style:{scrollBehavior:"smooth"},children:[e.jsx("button",{className:"text-secondary mb-2 focus:outline-none hover:text-primary transition-colors",onClick:()=>r(!s),"aria-label":"Toggle sidebar",title:"Toggle sidebar",children:e.jsx(Lo,{className:"w-8 h-8"})}),x.map(j=>{const c=j.icon,g=N()===j.name;return e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>b(j.path),className:`flex items-center ${s?"":"justify-center"} cursor-pointer py-3 rounded-md transition-colors duration-150 ${g?" text-primary shadow-sm":"hover:bg-gray hover:text-primary hover:shadow-sm"}`,children:[e.jsx(c,{className:"w-6 h-6 min-w-[1.5rem] min-h-[1.5rem]"}),s&&e.jsx("span",{className:"text-sm font-medium ml-2",children:j.name})]}),s&&e.jsx("div",{className:"ml-7 mt-1 space-y-1 text-xs text-muted",children:Zl[j.name]?.map((A,O)=>e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-disabled",children:"→"}),e.jsx("span",{children:A})]},O))})]},j.name)})]}),[s,i.pathname,b]),T=()=>a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-96 p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Save Current Progress?"}),e.jsx("button",{onClick:()=>o(!1),className:"text-secondary hover:text-primary",children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-secondary mb-6",children:"Do you want to save your current progress before returning to the Home screen?"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 border border-light rounded-md text-sm hover:bg-gray-100 transition-colors",children:"Don't Save"}),e.jsx("button",{onClick:p,className:"px-4 py-2 bg-primary text-white rounded-md text-sm hover:bg-secondary transition-colors",children:"Save & Go Home"})]})]})});return e.jsxs("div",{className:"flex flex-col h-screen bg-background text-primary",children:[w(),e.jsxs("div",{className:"flex flex-1 overflow-hidden min-w-0",children:[S,e.jsx("div",{className:"flex-1 overflow-y-auto will-change-scroll",style:{scrollBehavior:"smooth"},children:t})]}),e.jsx(za,{}),T()]})}function ec(){return e.jsxs("div",{className:"max-w-2xl mx-auto py-18 px-6",children:[e.jsx("div",{className:"z-10 mb-2 flex flex-col items-center",children:e.jsx("img",{src:ge,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("h1",{className:"text-3xl font-bold mb-6 text-primary",children:"End User License Agreement (EULA)"}),e.jsxs("div",{className:"space-y-6 text-base text-gray-800",children:[e.jsx("p",{children:'This End User License Agreement ("Agreement") is a legal agreement between you ("User") and Pandaura AS ("Company") for the use of the Pandaura AS software and services ("Software").'}),e.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"1. License Grant"}),e.jsx("p",{children:"The Company grants you a non-exclusive, non-transferable, limited license to use the Software in accordance with the terms of this Agreement."}),e.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"2. Restrictions"}),e.jsxs("ul",{className:"list-disc ml-6",children:[e.jsx("li",{children:"You may not copy, modify, distribute, sell, or lease any part of the Software."}),e.jsx("li",{children:"You may not reverse engineer or attempt to extract the source code of the Software."})]}),e.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"3. Termination"}),e.jsx("p",{children:"The Company may terminate your license if you fail to comply with any term of this Agreement. Upon termination, you must cease all use of the Software."}),e.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"4. Limitation of Liability"}),e.jsx("p",{children:'The Software is provided "as is" without warranty of any kind. The Company shall not be liable for any damages arising from the use or inability to use the Software.'}),e.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"5. Governing Law"}),e.jsx("p",{children:"This Agreement shall be governed by the laws of Norway, without regard to its conflict of law principles."}),e.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"6. Contact"}),e.jsx("p",{children:"For any questions regarding this Agreement, please contact Pandaura AS at support@pandaura.com."})]})]})}function St({children:t}){const s=de();return e.jsxs("div",{className:"flex flex-col h-screen bg-background text-primary",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Back to Home",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-12 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"Quick Session"}),e.jsx("span",{className:"text-xs text-muted",children:"One-time use"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsx(_t,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-xs text-yellow-800",children:"Session data will not be saved"})]}),e.jsxs("button",{onClick:()=>s("/home"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-secondary transition-colors text-sm",children:[e.jsx(bo,{className:"w-4 h-4"}),"Home"]})]})]}),e.jsx("div",{className:"bg-accent/5 border-b border-accent/20 px-6 py-3",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("p",{className:"text-sm text-accent-dark",children:[e.jsx("strong",{children:"Quick Session Mode:"})," You can upload files, use all features, and export results — but your session will not be saved. For persistent projects,",e.jsx("button",{onClick:()=>s("/app"),className:"underline hover:text-primary transition-colors ml-1",children:"start a full project workflow"}),"."]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t})]})}function ue({children:t,redirectTo:s="/signin"}){const{isAuthenticated:r,isLoading:a,user:o,token:n}=Ee(),i=de(),[d,m]=be.useState(!1);return l.useEffect(()=>{console.log("🛡️ ProtectedRoute: Auth check started",{isLoading:a,isAuthenticated:r,hasToken:!!n,hasUser:!!o,userEmail:o?.email,redirectTo:s,currentPath:window.location.pathname,cookies_token:!!H.getToken(),cookies_user:!!H.getUser(),hasInitialized:d,timestamp:new Date().toISOString()});const u=H.getToken(),h=H.getUser();if(console.log("🛡️ ProtectedRoute: Direct cookie check:",{cookieToken:u?`${u.substring(0,10)}...`:null,cookieUser:h?h.email:null,cookieHasAuthData:H.hasAuthData()}),!a&&!d&&(console.log("🛡️ ProtectedRoute: Setting initialization complete"),m(!0)),!a&&d&&!r){console.log("🛡️ ProtectedRoute: Not authenticated after initialization, starting redirect timer");const f=setTimeout(()=>{const k=H.hasAuthData(),v={token:H.getToken(),user:H.getUser(),hasAuthData:k};console.log("🛡️ ProtectedRoute: Final check before redirect:",{isAuthenticated:r,hasStoredAuth:k,finalCookieCheck:v,contextState:{hasToken:!!n,hasUser:!!o}}),!r&&!k?(console.log("🚨 ProtectedRoute: Redirecting to signin - final auth check failed",{reason:n?o?"Unknown":"No user":"No token",hasCookieToken:!!H.getToken(),hasCookieUser:!!H.getUser(),redirectingTo:s}),i(s,{replace:!0})):!r&&k&&(console.log("🤔 ProtectedRoute: Cookies have auth data but context does not - potential race condition"),setTimeout(()=>{r||(console.log("🚨 ProtectedRoute: Context still not updated, forcing redirect"),i(s,{replace:!0}))},500))},300);return()=>clearTimeout(f)}},[a,r,i,s,n,o,d]),a||!d?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted",children:a?"Loading authentication...":"Initializing..."})]})}):r?e.jsx(e.Fragment,{children:t}):null}const tc={primary:"bg-primary hover:bg-secondary text-white",secondary:"bg-secondary hover:bg-primary text-white",outline:"border border-light bg-white hover:bg-accent-light text-primary hover:border-accent",ghost:"hover:bg-accent-light text-primary",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white"},sc={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};function F({children:t,onClick:s,type:r="button",variant:a="primary",size:o="md",disabled:n=!1,loading:i=!1,icon:d,iconPosition:m="left",className:u="",title:h}){const k=`inline-flex items-center justify-center rounded-md font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${tc[a]} ${sc[o]} ${u}`;return e.jsxs("button",{type:r,onClick:s,disabled:n||i,className:k,title:h,children:[i&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d&&m==="left"&&!i&&e.jsx(d,{className:`w-4 h-4 ${t?"mr-2":""}`}),t,d&&m==="right"&&!i&&e.jsx(d,{className:`w-4 h-4 ${t?"ml-2":""}`})]})}function fe({id:t,name:s,type:r="text",value:a,onChange:o,placeholder:n,label:i,required:d=!1,disabled:m=!1,autoFocus:u=!1,autoComplete:h,maxLength:f,pattern:k,icon:v,onBlur:x,iconPosition:N="right",onIconClick:b,error:C,helpText:p,className:y=""}){const w=t||s,A=`w-full px-4 py-3 bg-surface text-primary border rounded-md shadow-sm outline-none transition-all focus:ring-2 focus:ring-accent focus:border-accent ${!!C?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-light"} ${m?"opacity-50 cursor-not-allowed":""} ${v?N==="left"?"pl-12":"pr-12":""} ${y}`;return e.jsxs("div",{className:"w-full",children:[i&&e.jsxs("label",{htmlFor:w,className:"block text-sm font-medium text-secondary mb-2",children:[i,d&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[v&&N==="left"&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(v,{className:"w-5 h-5 text-muted"})}),e.jsx("input",{id:w,name:s,type:r,value:a,onChange:o,onBlur:x,placeholder:n,required:d,disabled:m,autoFocus:u,autoComplete:h,maxLength:f,pattern:k,className:A}),v&&N==="right"&&e.jsx("button",{type:"button",onClick:b,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary transition-colors",disabled:m,children:e.jsx(v,{className:"w-5 h-5"})})]}),C&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C}),p&&!C&&e.jsx("p",{className:"mt-1 text-sm text-muted",children:p})]})}function Et({id:t,name:s,value:r,onChange:a,placeholder:o,label:n,required:i=!1,disabled:d=!1,autoFocus:m=!1,rows:u=4,maxLength:h,error:f,helpText:k,className:v="",showCharCount:x=!1}){const N=t||s,S=`w-full px-4 py-3 bg-background border rounded-md text-primary placeholder-muted resize-none outline-none transition-all focus:ring-2 focus:ring-accent focus:border-accent ${!!f?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-light"} ${d?"opacity-50 cursor-not-allowed":""} ${v}`;return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{htmlFor:N,className:"block text-sm font-medium text-secondary mb-2",children:[n,i&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{id:N,name:s,value:r,onChange:a,placeholder:o,required:i,disabled:d,autoFocus:m,rows:u,maxLength:h,className:S}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{children:[f&&e.jsx("p",{className:"text-sm text-red-600",children:f}),k&&!f&&e.jsx("p",{className:"text-sm text-muted",children:k})]}),(x||h)&&e.jsxs("span",{className:"text-xs text-muted",children:[r.length,h&&`/${h}`]})]})]})}const rc={sm:"p-4",md:"p-6",lg:"p-8"},ac={default:"bg-surface border border-light",elevated:"bg-surface border border-light shadow-card",bordered:"bg-background border-2 border-light"};function Ce({children:t,title:s,subtitle:r,icon:a,className:o="",padding:n="md",variant:i="default"}){const m=`rounded-lg ${ac[i]} ${rc[n]} ${o}`;return e.jsxs("div",{className:m,children:[(s||r||a)&&e.jsxs("div",{className:"mb-6",children:[a&&e.jsx("div",{className:"w-12 h-12 bg-accent/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(a,{className:"w-6 h-6 text-accent"})}),s&&e.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:s}),r&&e.jsx("p",{className:"text-sm text-muted",children:r})]}),t]})}function _e({options:t,value:s,onChange:r,placeholder:a="Select an option",label:o,disabled:n=!1,error:i,className:d="",required:m=!1}){const[u,h]=l.useState(!1),f=l.useRef(null),k=t.find(b=>b.value===s);l.useEffect(()=>{const b=C=>{f.current&&!f.current.contains(C.target)&&h(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const v=b=>{r(b),h(!1)},N=`w-full flex items-center justify-between px-4 py-3 bg-surface text-primary border rounded-md shadow-sm outline-none transition-all ${!!i?"border-red-500":"border-light"} ${n?"opacity-50 cursor-not-allowed":"hover:border-accent focus:ring-2 focus:ring-accent focus:border-accent cursor-pointer"} ${d}`;return e.jsxs("div",{className:"w-full",children:[o&&e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:[o," ",m&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",ref:f,children:[e.jsxs("button",{type:"button",onClick:()=>!n&&h(!u),className:N,disabled:n,children:[e.jsxs("div",{className:"flex items-center",children:[k?.icon&&e.jsx(k.icon,{className:"w-4 h-4 mr-2 text-muted"}),e.jsx("span",{className:k?"text-primary":"text-muted",children:k?k.label:a})]}),e.jsx(st,{className:`w-4 h-4 text-muted transition-transform ${u?"rotate-180":""}`})]}),u&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-surface border border-light rounded-md shadow-lg max-h-60 overflow-auto",children:t.map(b=>e.jsxs("button",{type:"button",onClick:()=>!b.disabled&&v(b.value),className:`w-full flex items-center px-4 py-3 text-left transition-colors ${b.disabled?"opacity-50 cursor-not-allowed":"hover:bg-accent-light cursor-pointer"} ${b.value===s?"bg-accent-light text-primary":"text-primary"}`,disabled:b.disabled,children:[b.icon&&e.jsx(b.icon,{className:"w-4 h-4 mr-2 text-muted"}),b.label]},b.value))})]}),i&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]})}function nc({title:t,subtitle:s,showBackButton:r=!1,backTo:a,actions:o,icon:n,className:i=""}){const d=de(),m=()=>{d(a||-1)};return e.jsx("header",{className:`bg-surface border-b border-light px-6 py-4 ${i}`,children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[r&&e.jsx(F,{variant:"ghost",size:"sm",onClick:m,icon:Te,title:"Go back"}),e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsx("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:e.jsx(n,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:t}),s&&e.jsx("p",{className:"text-sm text-secondary",children:s})]})]})]}),o&&e.jsx("div",{className:"flex items-center gap-3",children:o})]})})}const oc={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};function Ae({isOpen:t,onClose:s,title:r,children:a,size:o="md",showCloseButton:n=!0,closeOnOverlayClick:i=!0,actions:d}){return l.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),l.useEffect(()=>{const m=u=>{u.key==="Escape"&&s()};return t&&document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[t,s]),t?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i?s:void 0}),e.jsxs("div",{className:`relative bg-surface rounded-lg shadow-xl w-full ${oc[o]} z-10`,children:[(r||n)&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light",children:[r&&e.jsx("h2",{className:"text-lg font-semibold text-primary",children:r}),n&&e.jsx(F,{variant:"ghost",size:"sm",onClick:s,icon:Re,title:"Close"})]}),e.jsx("div",{className:"p-6",children:a}),d&&e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-light",children:d})]})]})}):null}const ic={success:{icon:ke,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",titleColor:"text-green-800",textColor:"text-green-700"},error:{icon:pe,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",titleColor:"text-red-800",textColor:"text-red-700"},warning:{icon:_t,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-600",titleColor:"text-yellow-800",textColor:"text-yellow-700"},info:{icon:oa,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",titleColor:"text-blue-800",textColor:"text-blue-700"}};function dt({variant:t,title:s,children:r,onClose:a,className:o=""}){const n=ic[t],i=n.icon;return e.jsx("div",{className:`p-4 rounded-md border ${n.bgColor} ${n.borderColor} ${o}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(i,{className:`w-5 h-5 ${n.iconColor}`})}),e.jsxs("div",{className:"ml-3 flex-1",children:[s&&e.jsx("h3",{className:`text-sm font-medium ${n.titleColor} mb-1`,children:s}),e.jsx("div",{className:`text-sm ${n.textColor}`,children:r})]}),a&&e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{type:"button",onClick:a,className:`inline-flex rounded-md p-1.5 ${n.textColor} hover:${n.bgColor} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-green-50 focus:ring-green-600`,children:e.jsx(Re,{className:"w-4 h-4"})})})]})})}const qa=be.createContext(void 0),lc=({children:t})=>{const[s,r]=l.useState([]),a=n=>{const i=Math.random().toString(36).substr(2,9),d={...n,id:i};r(u=>[...u,d]);const m=n.duration||5e3;setTimeout(()=>{o(i)},m)},o=n=>{r(i=>i.filter(d=>d.id!==n))};return e.jsxs(qa.Provider,{value:{toasts:s,showToast:a,removeToast:o},children:[t,e.jsx(cc,{toasts:s,removeToast:o})]})},cc=({toasts:t,removeToast:s})=>t.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(r=>e.jsx(dt,{variant:r.variant,title:r.title,onClose:()=>s(r.id),className:"min-w-80 shadow-lg animate-slide-in",children:r.message},r.id))}),rt=()=>{const t=be.useContext(qa);if(!t)throw new Error("useToast must be used within ToastProvider");return t};class Ge extends l.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,r){console.error("ErrorBoundary caught an error:",s,r),this.setState({error:s,errorInfo:r})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const s=this.state.error?.message?.includes("useContext")||this.state.error?.message?.includes("must be used within");return e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 max-w-lg",children:[e.jsx(pe,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:s?"Context Error":"Something went wrong"}),e.jsxs("div",{className:"text-sm text-gray-600 mb-6",children:[s?e.jsxs("div",{children:[e.jsx("p",{className:"mb-2",children:"A component is trying to access data that isn't available."}),e.jsx("p",{className:"mb-2",children:"This usually happens when a component is not properly wrapped with its required provider."})]}):e.jsx("p",{className:"mb-2",children:"An error occurred while rendering this component."}),this.state.error&&e.jsxs("details",{className:"mt-4",children:[e.jsx("summary",{className:"cursor-pointer text-blue-600 hover:text-blue-800",children:"Show error details"}),e.jsx("pre",{className:"text-left bg-gray-50 p-4 rounded-md overflow-auto text-xs mt-2",children:this.state.error.toString()})]})]}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(F,{onClick:this.handleRetry,children:"Try Again"}),e.jsx(F,{variant:"ghost",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})})}return this.props.children}}const us=t=>({id:t.id,name:t.projectName||t.project_name||"",client:t.clientName||t.client_name||"N/A",vendor:t.targetPLCVendor||t.target_plc_vendor||"N/A",type:t.projectType||t.project_type||"",lastModified:t.updatedAt||t.updated_at||"",description:t.description||"",status:"active",versions:[],recentActivity:[]}),ce=K.create({baseURL:`${gt.apiBaseUrl}/api/v1`,timeout:1e4}),dc=()=>{const t=H.getToken();return t?(console.log("ProjectsAPI: Found auth token:",t?`${t.substring(0,20)}...`:"null"),t):(console.warn("ProjectsAPI: No authentication token found. User may not be logged in."),null)};ce.interceptors.request.use(t=>{const s=dc();return s?(t.headers.Authorization=`Bearer ${s}`,console.log("ProjectsAPI interceptor - Added Authorization header")):console.warn("ProjectsAPI interceptor - No token available for request to:",t.url),t},t=>(console.error("ProjectsAPI request interceptor error:",t),Promise.reject(t)));ce.interceptors.response.use(t=>(console.log("ProjectsAPI Response:",{url:t.config.url,status:t.status,data:t.data}),t),t=>{throw console.error("Projects API Error:",{url:t.config?.url,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,message:t.message}),t});class se{static async createProject(s){try{const r=await ce.post("/projects",s);if(!r.data.success||!r.data.project)throw new Error(r.data.message||"Failed to create project");return r.data.project}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async getProjects(){try{const s=await ce.get("/projects");if(!s.data.success)throw new Error(s.data.message||"Failed to fetch projects");return s.data.projects||[]}catch(s){throw console.error("ProjectsAPI.getProjects error:",s.response?.data||s.message),s.response?.status===401?new Error("Authentication required. Please log in again."):s.response?.status===403?new Error("Access denied. Please check your permissions."):s.response?.data?.error?new Error(s.response.data.error):s}}static async getProject(s){try{const r=await ce.get(`/projects/${s}`);if(!r.data.success||!r.data.project)throw new Error(r.data.message||"Project not found");return r.data.project}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async updateProject(s,r){try{const a=await ce.patch(`/projects/${s}`,r);if(!a.data.success||!a.data.project)throw new Error(a.data.message||"Failed to update project");return a.data.project}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async autosaveProject(s,r){try{const a=await ce.put(`/projects/${s}/autosave`,{autosaveState:r});if(!a.data.success)throw new Error(a.data.message||"Auto-save failed")}catch(a){console.error("Auto-save failed:",a.response?.data?.error||a.message)}}static async saveProject(s,r){try{const a=await ce.put(`/projects/${s}/save`,{state:r});if(!a.data.success)throw new Error(a.data.message||"Save failed")}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async deleteProject(s){try{const r=await ce.delete(`/projects/${s}`);if(!r.data.success)throw new Error(r.data.message||"Failed to delete project")}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async checkProjectOwnership(s){try{const r=await ce.get(`/projects/${s}/ownership`);return r.data.success&&r.data.isOwner||!1}catch(r){return console.error("Ownership check failed:",r.response?.data?.error||r.message),!1}}static async getVersionHistory(s){try{return(await ce.get(`/projects/${s}/versions`)).data.versions||[]}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async createVersion(s,r){try{const a=await ce.post(`/projects/${s}/create-version`,r);if(!a.data.success)throw new Error("Failed to create version");return a.data.versionId}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async getVersion(s,r){try{const o=(await this.getVersionHistory(s)).find(n=>n.version_number===r);if(!o)throw new Error(`Version ${r} not found`);return o.snapshot_info}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async rollbackToVersion(s,r){try{const a=await ce.post(`/versions/projects/${s}/version/${r}/rollback`);if(!a.data.success)throw new Error("Failed to rollback to version");return{rolledBackTo:a.data.rolledBackTo,newVersion:a.data.newVersion}}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async createVersionSnapshot(s,r,a=!1){try{const o=await ce.post(`/projects/${s}/version`,{message:r,isAuto:a});if(!o.data.success)throw new Error("Failed to create version snapshot");return o.data.version}catch(o){throw o.response?.data?.error?new Error(o.response.data.error):o}}static async getVersionSnapshot(s,r){try{const a=await ce.get(`/versions/projects/${s}/version/${r}`);if(!a.data.success)throw new Error("Failed to get version snapshot");return a.data.data}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async createAutoSaveVersion(s,r){try{if(!(await ce.post(`/projects/${s}/auto-save`,{state:r})).data.success)throw new Error("Auto-save version creation failed")}catch(a){console.error("Auto-save version creation failed:",a.response?.data?.error||a.message)}}static async getLatestAutoSave(s){try{return(await ce.get(`/projects/${s}/auto-save`)).data}catch(r){return console.error("Failed to get latest auto-save:",r.response?.data?.error||r.message),null}}static async deleteVersion(s,r){try{if(!(await ce.delete(`/projects/${s}/version/${r}`)).data.success)throw new Error("Failed to delete version")}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}}function Bt({projectId:t,autoCreateVersions:s=!0,versionInterval:r=300*1e3}){const[a,o]=l.useState([]),[n,i]=l.useState(!1),[d,m]=l.useState(null),[u,h]=l.useState(null),f=l.useCallback(async()=>{if(!t){console.log("useVersionControl: No project ID provided");return}console.log("useVersionControl: Loading version history for project",t),i(!0),m(null);try{const p=await se.getVersionHistory(t);if(console.log("useVersionControl: Loaded version history:",p),o(p),p.length>0){const y=p[0];h(new Date(y.snapshot_info.timestamp*1e3)),console.log("useVersionControl: Latest version time set:",y.snapshot_info.timestamp)}}catch(p){const y=p.message||"Failed to load version history";m(y),console.error("useVersionControl: Failed to load version history:",p)}finally{i(!1)}},[t]),k=l.useCallback(async(p,y)=>{if(!t)throw new Error("No project ID provided");try{m(null);const w={state:y||{},message:p||`Manual save - ${new Date().toLocaleString()}`},S=await se.createVersion(t,w);return await f(),S}catch(w){throw m(w.message||"Failed to create version"),w}},[t,f]),v=l.useCallback(async p=>{if(!t)throw new Error("No project ID provided");try{m(null);const y=await se.rollbackToVersion(t,p);console.log(`Enhanced rollback completed: rolled back to version ${y.rolledBackTo}, created new version ${y.newVersion}`),await f(),window.dispatchEvent(new CustomEvent("pandaura:project-rollback",{detail:{projectId:t,targetVersion:p,rolledBackTo:y.rolledBackTo,newVersion:y.newVersion,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("pandaura:project-state-changed",{detail:{projectId:t,action:"rollback",targetVersion:y.rolledBackTo,newVersion:y.newVersion}}))}catch(y){throw m(y.message||"Failed to rollback to version"),y}},[t,f]),x=l.useCallback(async p=>{if(!t)throw new Error("No project ID provided");try{return await se.getVersion(t,p)}catch(y){throw m(y.message||"Failed to get version data"),y}},[t]),N=l.useCallback(async(p,y)=>{if(!(!t||!s)){if(u&&Date.now()-u.getTime()<r){console.log("Skipping auto-version: too soon since last version");return}try{await se.createAutoSaveVersion(t,p),console.log("Auto-version created:",y||"Automatic save"),h(new Date)}catch(w){console.error("Failed to create auto-version:",w)}}},[t,s,r,u]),b=l.useCallback(()=>u?Date.now()-u.getTime()>=r:!0,[u,r]);l.useEffect(()=>{console.log("useVersionControl: useEffect triggered with projectId:",t),t&&t>0?(console.log("useVersionControl: Calling refreshVersions for project:",t),f()):(console.log("useVersionControl: No valid projectId, skipping version load"),o([]))},[t,f]);const C=l.useCallback(async p=>{if(!t)throw new Error("No project ID provided");try{m(null),await se.deleteVersion(t,p),await f(),window.dispatchEvent(new CustomEvent("pandaura:version-deleted",{detail:{projectId:t,versionNumber:p,timestamp:Date.now()}}))}catch(y){throw m(y.message||"Failed to delete version"),y}},[t,f]);return{versions:a,isLoading:n,error:d,createVersion:k,rollbackToVersion:v,deleteVersion:C,getVersionData:x,refreshVersions:f,triggerAutoVersion:N,lastVersionTime:u,canCreateVersion:b()}}function uc(t,s=3e4){const[r,a]=l.useState(null),[o,n]=l.useState(!0),[i,d]=l.useState(null),[m,u]=l.useState(!1),[h,f]=l.useState(null),k=async()=>{try{console.log(`useProject: Loading project ${t}...`),d(null);const C=await se.getProject(t);console.log(`useProject: Project ${t} loaded successfully:`,C);const p=us(C);a(p)}catch(C){console.error("Failed to load project:",C);let p="Failed to load project";C.code==="ERR_NETWORK"?p="Cannot connect to server. Please check if the backend is running on port 5000.":C.code==="ERR_INSUFFICIENT_RESOURCES"?p="Server resource error. Please try refreshing the page or restart the backend.":C.response?.status===404?p=`Project with ID ${t} not found.`:C.response?.status===401?p="Authentication required. Please log in again.":C.message&&(p=C.message),d(p)}finally{n(!1)}},v=async C=>{if(!r)return;const p=await se.updateProject(r.id,C),y=us(p);a(y),u(!1),f(new Date)},x=async C=>{if(r)try{await se.autosaveProject(r.id,C),f(new Date)}catch(p){console.error("Auto-save failed:",p)}},N=async C=>{r&&(await se.saveProject(r.id,C),u(!1),f(new Date))},b=()=>u(!0);return l.useEffect(()=>{t&&t>0&&k()},[t]),{project:r,isLoading:o,error:i,isDirty:m,lastSaved:h,updateProject:v,autosave:x,save:N,markDirty:b,reload:k}}function Ha(t,s={}){const[r,a]=l.useState(s),[o,n]=l.useState(!1),[i,d]=l.useState(null),[m,u]=l.useState(null),[h,f]=l.useState(!1),k=l.useRef(null),v=l.useRef(null),x=l.useRef(0),N=3,b=l.useRef(0),{triggerAutoVersion:C,createVersion:p}=Bt({projectId:t??-1,autoCreateVersions:!0,versionInterval:600*1e3}),y=l.useCallback((A,O)=>JSON.stringify(A)!==JSON.stringify(O),[]),w=l.useCallback(async(A,O=!1)=>{if(!t||!y(A,k.current))return!0;n(!0),u(null);try{if(O?await se.saveProject(t,{autosaveState:A}):await se.autosaveProject(t,A),k.current=structuredClone(A),d(new Date),f(!1),x.current=0,O)try{await p(`Manual save - ${new Date().toLocaleString()}`,A),console.log("Manual version created successfully")}catch(D){console.error("Failed to create manual version:",D)}else if(b.current++,b.current>=10)try{await C(A,`Auto-version after ${b.current} changes`),b.current=0}catch(D){console.error("Failed to create auto-version:",D)}return!0}catch(D){const R=D.response?.data?.error||D.message||"Auto-save failed";if(console.error("Auto-save failed:",R),x.current<N&&!O){x.current++,console.log(`Retrying auto-save (attempt ${x.current}/${N})`);const V=Math.pow(2,x.current)*1e3;setTimeout(()=>w(A,!1),V)}else{u(R);try{const V=`pandaura_project_${t}_fallback`;localStorage.setItem(V,JSON.stringify({state:A,timestamp:Date.now(),projectId:t})),console.log("State cached to localStorage as fallback")}catch(V){console.error("Failed to cache state to localStorage:",V)}}return!1}finally{n(!1)}},[t,y]),S=l.useCallback(A=>{v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{w(A,!1)},2e3)},[w]),T=l.useCallback(A=>{a(O=>{const D=typeof A=="function"?A(O):{...O,...A};return y(D,k.current)&&(f(!0),S(D)),D})},[y,S]),j=l.useCallback(async()=>await w(r,!0),[w,r]),c=l.useCallback(async A=>{if(!t)return!1;try{const O=await w(r,!1);return O&&(await p(A,r),console.log("Manual version created with message:",A)),O}catch(O){return console.error("Failed to save with message:",O),!1}},[t,w,r,p]),g=l.useCallback(()=>{try{const A=`pandaura_project_${t}_fallback`,O=localStorage.getItem(A);if(O){const{state:D,timestamp:R}=JSON.parse(O);Date.now()-R<3600*1e3&&(console.log("Loaded fallback state from localStorage"),a(D),f(!0),w(D,!1)),localStorage.removeItem(A)}}catch(A){console.error("Failed to load fallback state:",A)}},[t,w]);return l.useEffect(()=>{t&&g()},[t,g]),l.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]),{projectState:r,updateProjectState:T,isSaving:o,lastSaved:i,saveError:m,hasUnsavedChanges:h,saveNow:j,saveWithMessage:c,loadFallbackState:g}}function Ga({isSaving:t,lastSaved:s,saveError:r,hasUnsavedChanges:a,onManualSave:o,className:n=""}){const i=h=>{if(!h)return"Never saved";const k=new Date().getTime()-h.getTime(),v=Math.floor(k/1e3),x=Math.floor(v/60),N=Math.floor(x/60);return v<60?"Saved just now":x<60?`Saved ${x}m ago`:N<24?`Saved ${N}h ago`:`Saved on ${h.toLocaleDateString()}`},d=()=>t?e.jsx(ia,{className:"w-4 h-4 animate-spin text-blue-500"}):r?e.jsx(pe,{className:"w-4 h-4 text-red-500"}):a?e.jsx(ht,{className:"w-4 h-4 text-yellow-500"}):e.jsx(ke,{className:"w-4 h-4 text-green-500"}),m=()=>t?"Saving...":r?"Save failed":a?"Unsaved changes":i(s),u=()=>t?"text-blue-600":r?"text-red-600":a?"text-yellow-600":"text-green-600";return e.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[d(),e.jsx("span",{className:`text-sm ${u()}`,children:m()}),r&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-xs text-red-500",title:r,children:["(",r,")"]}),o&&e.jsx("button",{onClick:o,className:"text-xs text-blue-600 hover:text-blue-800 underline",title:"Retry save",children:"Retry"})]}),a&&o&&!t&&e.jsxs("button",{onClick:o,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",title:"Save now",children:[e.jsx(ze,{className:"w-3 h-3"}),"Save"]})]})}function Ps({sessionMode:t=!1}){const{getModuleState:s,saveModuleState:r}=or(),a=de(),{projectId:o}=Lt(),n=s("AskPandaura"),[i,d]=l.useState(n.chatMessage||""),[m,u]=l.useState(!1),[h,f]=l.useState(!1),k=o?parseInt(o):null,{updateProjectState:v,isSaving:x,lastSaved:N,saveError:b,hasUnsavedChanges:C,saveNow:p}=Ha(k||0,{module:"AskPandaura",chatMessage:i,lastActivity:new Date().toISOString()});l.useEffect(()=>{!t&&k&&v({module:"AskPandaura",chatMessage:i,lastActivity:new Date().toISOString()})},[t,k,v,i]),l.useEffect(()=>{const w=()=>{const j=document.querySelector('[class*="w-72"], [class*="w-16"]');if(j){const c=j.classList.contains("w-16");f(c)}};setTimeout(w,100);const S=new MutationObserver(w),T=document.body;return S.observe(T,{attributes:!0,attributeFilter:["class"],subtree:!0}),()=>S.disconnect()},[]),l.useEffect(()=>{if(!t){const w=setTimeout(()=>{r("AskPandaura",{chatMessage:i})},1e3);return()=>clearTimeout(w)}},[i,t,r]);const y=()=>m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-96 max-h-[80vh] overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Conversations"}),e.jsx("button",{onClick:()=>u(!1),className:"text-secondary hover:text-primary",children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 border-b border-light",children:e.jsxs("button",{onClick:()=>{d(""),u(!1)},className:"w-full flex items-center justify-center gap-2 bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),"New Chat"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto max-h-[400px]",children:e.jsx("div",{className:"p-4 space-y-2",children:[{id:1,title:"TIA Portal Safety IO Configuration",time:"2 hours ago"},{id:2,title:"Motor Control Logic Help",time:"Yesterday"},{id:3,title:"SCADA System Design",time:"3 days ago"},{id:4,title:"PLC Programming Best Practices",time:"1 week ago"}].map(w=>e.jsxs("div",{onClick:()=>{d(""),u(!1),console.log("Loading conversation:",w.title)},className:"p-3 rounded-md hover:bg-gray-100 cursor-pointer transition-colors border border-light",children:[e.jsx("div",{className:"font-medium text-sm text-primary truncate",children:w.title}),e.jsx("div",{className:"text-xs text-muted mt-1",children:w.time})]},w.id))})})]})});return e.jsxs("div",{className:"flex flex-col bg-white h-full relative",children:[e.jsxs("div",{className:"p-6 max-w-4xl mx-auto flex-1 pb-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Pandaura AS"}),e.jsx("p",{className:"text-sm text-secondary",children:"Your AI co-engineer for automation, electrical, robotics, and everything in between."})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[!t&&k&&e.jsx(Ga,{isSaving:x,lastSaved:N,saveError:b,hasUnsavedChanges:C,onManualSave:p,className:"text-xs"}),e.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"View Conversations",children:e.jsx(Bs,{className:"w-6 h-6 text-primary"})})]})]}),e.jsxs("div",{className:"text-muted mt-4 px-6 flex flex-col items-center text-center",children:[e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-24 w-auto mb-4 filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Ask Pandaura Anything"}),e.jsx("p",{className:"text-sm",children:"Start a conversation with Pandaura or upload a document to begin."})]}),e.jsxs("div",{className:"space-y-6 mt-8 scrollable-container optimized-text",children:[e.jsx("div",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-xs font-medium text-gray-700",children:"You"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-gray-800",children:"I need to create a motor starter logic with safety interlocks for a conveyor system. Can you help me generate the structured text code for Rockwell PLC?"})})]})}),e.jsx("div",{className:"px-4 py-3 text-sm bg-gray-50",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-xs font-medium text-white",children:"P"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800 mb-3",children:"I'll help you create a comprehensive motor starter logic with safety interlocks. Here's a structured approach:"}),e.jsxs("div",{className:"text-gray-800 mb-3",children:[e.jsx("strong",{children:"Key Components:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Emergency stop circuit with latching"}),e.jsx("li",{children:"Guard door safety switches"}),e.jsx("li",{children:"Motor overload protection"}),e.jsx("li",{children:"Start/stop pushbutton logic"}),e.jsx("li",{children:"Status indicators and fault diagnostics"})]})]}),e.jsx("p",{className:"text-gray-800",children:"Would you like me to generate the complete ST code with these safety features included?"})]})]})}),e.jsx("div",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-xs font-medium text-gray-700",children:"You"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-gray-800",children:"Yes, please generate the code and also create the tag database for all the I/O points."})})]})}),e.jsx("div",{className:"px-4 py-3 text-sm bg-gray-50",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-xs font-medium text-white",children:"P"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800 mb-3",children:"Perfect! I'll generate both the ST logic and create a comprehensive tag database. Let me switch you to Logic Studio to generate the code, and then we can use the Tag Database Manager to organize all I/O points with proper naming conventions and documentation."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>a("/logic-studio"),className:"bg-primary text-white px-3 py-1 rounded text-xs hover:bg-secondary transition-colors",children:"→ Open in Logic Studio"}),e.jsx("button",{onClick:()=>a("/tag-database"),className:"bg-white border border-light px-3 py-1 rounded text-xs hover:bg-accent-light transition-colors",children:"📋 Generate Tag Database"})]})]})]})})]})]}),e.jsx("div",{className:`fixed bottom-0 right-0 bg-white border-t px-6 py-4 shadow-md z-30 transition-all duration-200 ${h?"left-16":"left-72"}`,children:e.jsxs("div",{className:"flex items-end gap-3 max-w-4xl mx-auto",children:[e.jsx("textarea",{value:i,onChange:w=>d(w.target.value),placeholder:"Ask about PLCs, SCADA, HMI, robotics, motor control, or upload documents...",className:"flex-1 border border-light rounded-md px-4 py-3 bg-surface shadow-sm text-sm text-primary placeholder-muted resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all min-h-[44px] max-h-[120px]",rows:1,style:{height:"auto"},onInput:w=>{const S=w.target;S.style.height="auto",S.style.height=Math.min(S.scrollHeight,120)+"px"}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{console.log("Opening file upload dialog")},className:"bg-white border border-light p-3 rounded-md hover:bg-accent-light transition-colors shadow-sm",title:"Upload documents",children:e.jsx(ra,{className:"w-4 h-4 text-primary"})}),e.jsx("button",{onClick:()=>{i.trim()&&(console.log("Sending message:",i),d(""))},className:"bg-primary text-white px-6 py-3 rounded-md hover:bg-secondary transition-colors text-sm font-medium shadow-sm",disabled:!i.trim(),children:e.jsx(ps,{className:"w-4 h-4"})})]})]})}),y()]})}function mc(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Or(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,a)}return r}function Rr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Or(Object(r),!0).forEach(function(a){mc(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Or(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function hc(t,s){if(t==null)return{};var r={},a=Object.keys(t),o,n;for(n=0;n<a.length;n++)o=a[n],!(s.indexOf(o)>=0)&&(r[o]=t[o]);return r}function xc(t,s){if(t==null)return{};var r=hc(t,s),a,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(o=0;o<n.length;o++)a=n[o],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function pc(t,s){return gc(t)||fc(t,s)||bc(t,s)||yc()}function gc(t){if(Array.isArray(t))return t}function fc(t,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],a=!0,o=!1,n=void 0;try{for(var i=t[Symbol.iterator](),d;!(a=(d=i.next()).done)&&(r.push(d.value),!(s&&r.length===s));a=!0);}catch(m){o=!0,n=m}finally{try{!a&&i.return!=null&&i.return()}finally{if(o)throw n}}return r}}function bc(t,s){if(t){if(typeof t=="string")return Lr(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lr(t,s)}}function Lr(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function yc(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jc(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Mr(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,a)}return r}function Fr(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Mr(Object(r),!0).forEach(function(a){jc(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function vc(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return function(a){return s.reduceRight(function(o,n){return n(o)},a)}}function At(t){return function s(){for(var r=this,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return o.length>=t.length?t.apply(this,o):function(){for(var i=arguments.length,d=new Array(i),m=0;m<i;m++)d[m]=arguments[m];return s.apply(r,[].concat(o,d))}}}function ms(t){return{}.toString.call(t).includes("Object")}function wc(t){return!Object.keys(t).length}function Ot(t){return typeof t=="function"}function Nc(t,s){return Object.prototype.hasOwnProperty.call(t,s)}function Sc(t,s){return ms(s)||We("changeType"),Object.keys(s).some(function(r){return!Nc(t,r)})&&We("changeField"),s}function kc(t){Ot(t)||We("selectorType")}function Cc(t){Ot(t)||ms(t)||We("handlerType"),ms(t)&&Object.values(t).some(function(s){return!Ot(s)})&&We("handlersType")}function Ac(t){t||We("initialIsRequired"),ms(t)||We("initialType"),wc(t)&&We("initialContent")}function Tc(t,s){throw new Error(t[s]||t.default)}var Ec={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},We=At(Tc)(Ec),Zt={changes:Sc,selector:kc,handler:Cc,initial:Ac};function Pc(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Zt.initial(t),Zt.handler(s);var r={current:t},a=At(Rc)(r,s),o=At(Oc)(r),n=At(Zt.changes)(t),i=At(Dc)(r);function d(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return Zt.selector(u),u(r.current)}function m(u){vc(a,o,n,i)(u)}return[d,m]}function Dc(t,s){return Ot(s)?s(t.current):s}function Oc(t,s){return t.current=Fr(Fr({},t.current),s),s}function Rc(t,s,r){return Ot(s)?s(t.current):Object.keys(r).forEach(function(a){var o;return(o=s[a])===null||o===void 0?void 0:o.call(s,t.current[a])}),r}var Lc={create:Pc},Mc={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Fc(t){return function s(){for(var r=this,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return o.length>=t.length?t.apply(this,o):function(){for(var i=arguments.length,d=new Array(i),m=0;m<i;m++)d[m]=arguments[m];return s.apply(r,[].concat(o,d))}}}function _c(t){return{}.toString.call(t).includes("Object")}function Ic(t){return t||_r("configIsRequired"),_c(t)||_r("configType"),t.urls?($c(),{paths:{vs:t.urls.monacoBase}}):t}function $c(){console.warn(Wa.deprecation)}function Vc(t,s){throw new Error(t[s]||t.default)}var Wa={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},_r=Fc(Vc)(Wa),zc={config:Ic},Uc=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return function(o){return r.reduceRight(function(n,i){return i(n)},o)}};function Ya(t,s){return Object.keys(s).forEach(function(r){s[r]instanceof Object&&t[r]&&Object.assign(s[r],Ya(t[r],s[r]))}),Rr(Rr({},t),s)}var Bc={type:"cancelation",msg:"operation is manually canceled"};function Ds(t){var s=!1,r=new Promise(function(a,o){t.then(function(n){return s?o(Bc):a(n)}),t.catch(o)});return r.cancel=function(){return s=!0},r}var qc=Lc.create({config:Mc,isInitialized:!1,resolve:null,reject:null,monaco:null}),Ja=pc(qc,2),qt=Ja[0],Ss=Ja[1];function Hc(t){var s=zc.config(t),r=s.monaco,a=xc(s,["monaco"]);Ss(function(o){return{config:Ya(o.config,a),monaco:r}})}function Gc(){var t=qt(function(s){var r=s.monaco,a=s.isInitialized,o=s.resolve;return{monaco:r,isInitialized:a,resolve:o}});if(!t.isInitialized){if(Ss({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Ds(Os);if(window.monaco&&window.monaco.editor)return Xa(window.monaco),t.resolve(window.monaco),Ds(Os);Uc(Wc,Jc)(Xc)}return Ds(Os)}function Wc(t){return document.body.appendChild(t)}function Yc(t){var s=document.createElement("script");return t&&(s.src=t),s}function Jc(t){var s=qt(function(a){var o=a.config,n=a.reject;return{config:o,reject:n}}),r=Yc("".concat(s.config.paths.vs,"/loader.js"));return r.onload=function(){return t()},r.onerror=s.reject,r}function Xc(){var t=qt(function(r){var a=r.config,o=r.resolve,n=r.reject;return{config:a,resolve:o,reject:n}}),s=window.require;s.config(t.config),s(["vs/editor/editor.main"],function(r){Xa(r),t.resolve(r)},function(r){t.reject(r)})}function Xa(t){qt().monaco||Ss({monaco:t})}function Kc(){return qt(function(t){var s=t.monaco;return s})}var Os=new Promise(function(t,s){return Ss({resolve:t,reject:s})}),Ka={config:Hc,init:Gc,__getMonacoInstance:Kc},Qc={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Rs=Qc,Zc={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ed=Zc;function td({children:t}){return be.createElement("div",{style:ed.container},t)}var sd=td,rd=sd;function ad({width:t,height:s,isEditorReady:r,loading:a,_ref:o,className:n,wrapperProps:i}){return be.createElement("section",{style:{...Rs.wrapper,width:t,height:s},...i},!r&&be.createElement(rd,null,a),be.createElement("div",{ref:o,style:{...Rs.fullWidth,...!r&&Rs.hide},className:n}))}var nd=ad,Qa=l.memo(nd);function od(t){l.useEffect(t,[])}var Za=od;function id(t,s,r=!0){let a=l.useRef(!0);l.useEffect(a.current||!r?()=>{a.current=!1}:t,s)}var Se=id;function Pt(){}function ct(t,s,r,a){return ld(t,a)||cd(t,s,r,a)}function ld(t,s){return t.editor.getModel(en(t,s))}function cd(t,s,r,a){return t.editor.createModel(s,r,a?en(t,a):void 0)}function en(t,s){return t.Uri.parse(s)}function dd({original:t,modified:s,language:r,originalLanguage:a,modifiedLanguage:o,originalModelPath:n,modifiedModelPath:i,keepCurrentOriginalModel:d=!1,keepCurrentModifiedModel:m=!1,theme:u="light",loading:h="Loading...",options:f={},height:k="100%",width:v="100%",className:x,wrapperProps:N={},beforeMount:b=Pt,onMount:C=Pt}){let[p,y]=l.useState(!1),[w,S]=l.useState(!0),T=l.useRef(null),j=l.useRef(null),c=l.useRef(null),g=l.useRef(C),A=l.useRef(b),O=l.useRef(!1);Za(()=>{let M=Ka.init();return M.then(L=>(j.current=L)&&S(!1)).catch(L=>L?.type!=="cancelation"&&console.error("Monaco initialization: error:",L)),()=>T.current?V():M.cancel()}),Se(()=>{if(T.current&&j.current){let M=T.current.getOriginalEditor(),L=ct(j.current,t||"",a||r||"text",n||"");L!==M.getModel()&&M.setModel(L)}},[n],p),Se(()=>{if(T.current&&j.current){let M=T.current.getModifiedEditor(),L=ct(j.current,s||"",o||r||"text",i||"");L!==M.getModel()&&M.setModel(L)}},[i],p),Se(()=>{let M=T.current.getModifiedEditor();M.getOption(j.current.editor.EditorOption.readOnly)?M.setValue(s||""):s!==M.getValue()&&(M.executeEdits("",[{range:M.getModel().getFullModelRange(),text:s||"",forceMoveMarkers:!0}]),M.pushUndoStop())},[s],p),Se(()=>{T.current?.getModel()?.original.setValue(t||"")},[t],p),Se(()=>{let{original:M,modified:L}=T.current.getModel();j.current.editor.setModelLanguage(M,a||r||"text"),j.current.editor.setModelLanguage(L,o||r||"text")},[r,a,o],p),Se(()=>{j.current?.editor.setTheme(u)},[u],p),Se(()=>{T.current?.updateOptions(f)},[f],p);let D=l.useCallback(()=>{if(!j.current)return;A.current(j.current);let M=ct(j.current,t||"",a||r||"text",n||""),L=ct(j.current,s||"",o||r||"text",i||"");T.current?.setModel({original:M,modified:L})},[r,s,o,t,a,n,i]),R=l.useCallback(()=>{!O.current&&c.current&&(T.current=j.current.editor.createDiffEditor(c.current,{automaticLayout:!0,...f}),D(),j.current?.editor.setTheme(u),y(!0),O.current=!0)},[f,u,D]);l.useEffect(()=>{p&&g.current(T.current,j.current)},[p]),l.useEffect(()=>{!w&&!p&&R()},[w,p,R]);function V(){let M=T.current?.getModel();d||M?.original?.dispose(),m||M?.modified?.dispose(),T.current?.dispose()}return be.createElement(Qa,{width:v,height:k,isEditorReady:p,loading:h,_ref:c,className:x,wrapperProps:N})}var ud=dd;l.memo(ud);function md(t){let s=l.useRef();return l.useEffect(()=>{s.current=t},[t]),s.current}var hd=md,es=new Map;function xd({defaultValue:t,defaultLanguage:s,defaultPath:r,value:a,language:o,path:n,theme:i="light",line:d,loading:m="Loading...",options:u={},overrideServices:h={},saveViewState:f=!0,keepCurrentModel:k=!1,width:v="100%",height:x="100%",className:N,wrapperProps:b={},beforeMount:C=Pt,onMount:p=Pt,onChange:y,onValidate:w=Pt}){let[S,T]=l.useState(!1),[j,c]=l.useState(!0),g=l.useRef(null),A=l.useRef(null),O=l.useRef(null),D=l.useRef(p),R=l.useRef(C),V=l.useRef(),M=l.useRef(a),L=hd(n),B=l.useRef(!1),z=l.useRef(!1);Za(()=>{let U=Ka.init();return U.then(Z=>(g.current=Z)&&c(!1)).catch(Z=>Z?.type!=="cancelation"&&console.error("Monaco initialization: error:",Z)),()=>A.current?ie():U.cancel()}),Se(()=>{let U=ct(g.current,t||a||"",s||o||"",n||r||"");U!==A.current?.getModel()&&(f&&es.set(L,A.current?.saveViewState()),A.current?.setModel(U),f&&A.current?.restoreViewState(es.get(n)))},[n],S),Se(()=>{A.current?.updateOptions(u)},[u],S),Se(()=>{!A.current||a===void 0||(A.current.getOption(g.current.editor.EditorOption.readOnly)?A.current.setValue(a):a!==A.current.getValue()&&(z.current=!0,A.current.executeEdits("",[{range:A.current.getModel().getFullModelRange(),text:a,forceMoveMarkers:!0}]),A.current.pushUndoStop(),z.current=!1))},[a],S),Se(()=>{let U=A.current?.getModel();U&&o&&g.current?.editor.setModelLanguage(U,o)},[o],S),Se(()=>{d!==void 0&&A.current?.revealLine(d)},[d],S),Se(()=>{g.current?.editor.setTheme(i)},[i],S);let J=l.useCallback(()=>{if(!(!O.current||!g.current)&&!B.current){R.current(g.current);let U=n||r,Z=ct(g.current,a||t||"",s||o||"",U||"");A.current=g.current?.editor.create(O.current,{model:Z,automaticLayout:!0,...u},h),f&&A.current.restoreViewState(es.get(U)),g.current.editor.setTheme(i),d!==void 0&&A.current.revealLine(d),T(!0),B.current=!0}},[t,s,r,a,o,n,u,h,f,i,d]);l.useEffect(()=>{S&&D.current(A.current,g.current)},[S]),l.useEffect(()=>{!j&&!S&&J()},[j,S,J]),M.current=a,l.useEffect(()=>{S&&y&&(V.current?.dispose(),V.current=A.current?.onDidChangeModelContent(U=>{z.current||y(A.current.getValue(),U)}))},[S,y]),l.useEffect(()=>{if(S){let U=g.current.editor.onDidChangeMarkers(Z=>{let W=A.current.getModel()?.uri;if(W&&Z.find(Y=>Y.path===W.path)){let Y=g.current.editor.getModelMarkers({resource:W});w?.(Y)}});return()=>{U?.dispose()}}return()=>{}},[S,w]);function ie(){V.current?.dispose(),k?f&&es.set(n,A.current.saveViewState()):A.current.getModel()?.dispose(),A.current.dispose()}return be.createElement(Qa,{width:v,height:x,isEditorReady:S,loading:m,_ref:O,className:N,wrapperProps:b})}var pd=xd,gd=l.memo(pd),fd=gd;function bd({message:t,onApply:s}){return e.jsxs("div",{className:"absolute z-50 bg-white border border-light rounded-md shadow-md p-3 w-64 text-sm",children:[e.jsx("div",{className:"text-primary mb-2",children:t}),e.jsx("button",{onClick:s,className:"bg-primary text-white px-3 py-1 rounded-md hover:bg-secondary transition-colors text-xs",children:"✅ Apply Fix"})]})}function yd({suggestion:t,onApply:s,onDismiss:r}){const[a,o]=l.useState(!1);return t?e.jsxs("div",{className:"bg-accent-light border border-accent rounded-md p-3 mb-2 relative",children:[e.jsx("button",{onClick:r,className:"absolute top-2 right-2 text-muted hover:text-primary",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[e.jsx(Vs,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-primary text-sm",children:t.message}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("button",{onClick:()=>o(!a),className:"text-xs bg-white border border-light px-3 py-1 rounded hover:bg-gray-50 transition-colors flex items-center gap-1",children:[e.jsx(xs,{className:"w-3 h-3"}),a?"Hide Preview":"Show Preview"]}),e.jsx("button",{onClick:()=>s(t.refactoredCode),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors",children:"Apply Refactor"}),e.jsx("button",{onClick:r,className:"text-xs text-muted hover:text-primary px-2 py-1",children:"Dismiss"})]}),a&&e.jsx("div",{className:"mt-3 text-xs",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-1",children:"Before:"}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded border text-xs overflow-x-auto",children:t.originalCode})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-1",children:"After:"}),e.jsx("pre",{className:"bg-green-50 p-2 rounded border text-xs overflow-x-auto",children:t.refactoredCode})]})]})})]})]})]}):null}function jd({isVisible:t,selectedText:s,selectedLine:r,position:a,onExplain:o,onRefactor:n,onSimplify:i,onTagEdit:d}){const[m,u]=l.useState(!1),[h,f]=l.useState(""),k=[{id:"explain",icon:e.jsx(Vs,{className:"w-4 h-4"}),label:"Explain",onClick:()=>{const N=v(s);f(N),u(!0),o(s)},variant:"accent"},{id:"refactor",icon:e.jsx(ye,{className:"w-4 h-4"}),label:"Refactor",onClick:()=>n(s),variant:"primary"},{id:"simplify",icon:e.jsx(da,{className:"w-4 h-4"}),label:"Simplify",onClick:()=>i(s),variant:"secondary"},{id:"tags",icon:e.jsx(ni,{className:"w-4 h-4"}),label:"Tag Edit",onClick:()=>d(r),variant:"secondary"}],v=N=>N.includes("IF")&&N.includes("THEN")?"This is a conditional logic block that checks if certain conditions are met before executing actions. The IF statement evaluates boolean conditions and executes the THEN clause when true.":N.includes("CASE")?"This CASE statement provides multi-way branching logic, evaluating an expression and executing different code blocks based on matching values. It's more efficient than multiple IF-ELSE statements.":N.includes(":=")?"This is an assignment operation that sets a variable to a specific value. The ':=' operator is used in structured text to assign values to variables.":N.includes("AND")||N.includes("OR")?"This contains boolean logic operators that combine multiple conditions. AND requires all conditions to be true, while OR requires at least one condition to be true.":"This code block contains PLC logic that controls industrial automation processes. The structured text follows IEC 61131-3 standards for programmable controller programming.",x=(N="secondary")=>{const b="p-2 rounded shadow-sm text-xs font-medium transition-all duration-150 flex items-center gap-1 whitespace-nowrap";switch(N){case"primary":return`${b} bg-primary text-white hover:bg-secondary`;case"accent":return`${b} bg-accent text-white hover:bg-purple-600`;default:return`${b} bg-white border border-light text-primary hover:bg-accent-light`}};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed z-50 bg-white border border-light rounded-lg shadow-lg p-1 flex gap-1",style:{left:a.x,top:a.y-50,transform:"translateX(-50%)"},children:k.map(N=>e.jsxs("button",{onClick:N.onClick,className:x(N.variant),title:N.label,children:[N.icon,e.jsx("span",{className:"hidden sm:inline",children:N.label})]},N.id))}),m&&e.jsx("div",{className:"fixed z-40 bg-blue-50 border border-blue-200 rounded-lg shadow-lg p-3 max-w-md",style:{left:a.x,top:a.y+20,transform:"translateX(-50%)"},children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Vs,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-800 text-xs mb-1",children:"Code Explanation:"}),e.jsx("div",{className:"text-blue-700 text-xs leading-relaxed",children:h})]})]}),e.jsx("button",{onClick:()=>u(!1),className:"text-blue-400 hover:text-blue-600 flex-shrink-0",children:e.jsx(is,{className:"w-3 h-3"})})]})})]}):null}const Ir={Rockwell:`PROGRAM Main
    VAR
        MotorStart : BOOL;
        MotorStop : BOOL;
        MotorRunning : BOOL;
    END_VAR

    IF MotorStart AND NOT MotorStop THEN
        MotorRunning := TRUE;
    ELSE
        MotorRunning := FALSE;
    END_IF;
END_PROGRAM`,Siemens:`PROGRAM Main
    VAR
        StartButton : BOOL;
        StopButton : BOOL;
        MotorState : BOOL;
    END_VAR

    IF StartButton = TRUE AND StopButton = FALSE THEN
        MotorState := TRUE;
    ELSE
        MotorState := FALSE;
    END_IF;
END_PROGRAM`,Beckhoff:`PROGRAM PLC_PRG
    VAR
        Start : BOOL;
        Stop : BOOL;
        Output : BOOL;
    END_VAR

    IF Start AND NOT Stop THEN
        Output := TRUE;
    ELSE
        Output := FALSE;
    END_IF;
END_PROGRAM`};function vd({initialCode:t,vendorType:s,onChange:r}){const[a,o]=l.useState(t),[n,i]=l.useState(!1),[d,m]=l.useState({top:0,left:0}),[u,h]=l.useState(!1),[f,k]=l.useState(!1),[v,x]=l.useState(""),[N,b]=l.useState(0),[C,p]=l.useState({x:0,y:0});l.useEffect(()=>{if(!t&&s in Ir){const c=Ir[s];o(c),r(c)}},[t,s,r]);const y=c=>{const g=c||"";o(g),r(g),g.includes("undefined_tag")?(i(!0),m({top:50,left:200})):i(!1)},w=()=>{const c=a.replace("undefined_tag","defined_tag");o(c),r(c),i(!1)};l.useEffect(()=>{a.includes("IF")&&a.includes("ELSE")&&a.includes("IF")?h(!0):h(!1)},[a]);const S={type:"nested-conditionals",message:"This nested IF structure can be simplified with a CASE block. Want to refactor?",originalCode:`IF condition1 THEN
  IF condition2 THEN
    result := 1;
  ELSE
    result := 2;
  END_IF;
ELSE
  result := 0;
END_IF;`,refactoredCode:`CASE TRUE OF
  condition1 AND condition2: result := 1;
  condition1 AND NOT condition2: result := 2;
  ELSE result := 0;
END_CASE;`,line:10},T=c=>{o(c),r(c),h(!1)},j=c=>{if(c&&c.startLineNumber&&c.endLineNumber){const g=c.startLineNumber,D=a.split(`
`).slice(c.startLineNumber-1,c.endLineNumber).join(`
`);D.trim()?(x(D),b(g),p({x:300,y:g*20+100}),k(!0)):k(!1)}};return e.jsxs("div",{className:"relative w-full h-[90vh]",children:[u&&e.jsx(yd,{suggestion:S,onApply:T,onDismiss:()=>h(!1)}),e.jsx("div",{className:"border border-light rounded shadow-sm h-full",children:e.jsx(fd,{height:"100%",language:"pascal",theme:"vs-light",value:a,onChange:y,onMount:c=>{c.onDidChangeCursorSelection(g=>{j(g.selection)})},options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,selectOnLineNumbers:!0,glyphMargin:!0,folding:!0,lineNumbers:"on",scrollbar:{vertical:"visible",horizontal:"visible",verticalScrollbarSize:14,horizontalScrollbarSize:14},wordWrap:"on",automaticLayout:!0}})}),n&&e.jsx("div",{className:"absolute z-50",style:{top:d.top,left:d.left},children:e.jsx(bd,{message:"Looks like this tag is undefined. Do you want to auto-fix it?",onApply:w})}),e.jsx(jd,{isVisible:f,selectedText:v,selectedLine:N,position:C,onExplain:c=>console.log("Explaining:",c),onRefactor:c=>console.log("Refactoring:",c),onSimplify:c=>console.log("Simplifying:",c),onTagEdit:c=>console.log("Editing tags for line:",c)})]})}function wd(){return e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>{console.log("AI Refactoring logic..."),alert("AI is analyzing your code structure and will suggest improvements for better readability and performance.")},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Refactor Logic",children:e.jsx(da,{className:"w-5 h-5 text-primary"})}),e.jsx("button",{onClick:()=>{console.log("AI Explaining code..."),alert(`AI Code Explanation:

This logic implements a motor control sequence with safety interlocks. The code structure follows industry standards with proper error handling and safety protocols.`)},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Explain Code",children:e.jsx(_n,{className:"w-5 h-5 text-primary"})}),e.jsx("button",{onClick:()=>{console.log("AI Highlighting variables..."),alert(`Variable Analysis:

✓ Input Variables: 12 found
✓ Output Variables: 8 found
✓ Internal Variables: 15 found
✓ Safety Variables: 6 found

All variables are properly documented and follow naming conventions.`)},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Highlight Variables",children:e.jsx(Tt,{className:"w-5 h-5 text-primary"})})]})}function Nd({suggestions:t=[],onClose:s}){return t.length?e.jsxs("div",{className:"bg-white border border-light rounded-md shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[e.jsx(ti,{className:"w-4 h-4 text-accent"}),"AI Suggestions"]}),s&&e.jsx("button",{onClick:s,className:"text-muted hover:text-primary transition-colors p-1",title:"Close AI Suggestions",children:e.jsx(Re,{className:"w-4 h-4"})})]}),e.jsx("ul",{className:"space-y-1",children:t.map((r,a)=>e.jsx("li",{className:"px-3 py-1 rounded hover:bg-accent-light cursor-pointer text-sm",onClick:()=>{navigator.clipboard.writeText(r)},title:"Click to copy to clipboard",children:r},a))})]}):null}function Sd({isEnabled:t,onToggle:s,diffs:r,originalCode:a,modifiedCode:o,aiSummary:n,onReintegrate:i,onRevert:d}){const[m,u]=l.useState(!1);return e.jsxs("div",{className:"border border-light rounded-md bg-white shadow-sm",children:[e.jsx("div",{className:"p-3 border-b border-light",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:h=>s(h.target.checked),className:"accent-primary"}),e.jsx(ho,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-primary",children:"Compare with Original"})]}),t&&r.length>0&&e.jsxs("span",{className:"text-xs text-accent bg-accent-light px-2 py-1 rounded",children:[r.length," change",r.length!==1?"s":""]})]})}),t&&e.jsx("div",{className:"p-3",children:r.length===0?e.jsxs("div",{className:"text-center text-muted text-sm py-4",children:[e.jsx(Zs,{className:"w-5 h-5 mx-auto mb-2 text-green-500"}),"No changes detected"]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(pe,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-800 text-xs",children:"AI Analysis:"}),e.jsx("div",{className:"text-blue-700 text-xs",children:n})]})]})}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>u(!m),className:"text-xs bg-white border border-light px-3 py-1 rounded hover:bg-gray-50 transition-colors",children:[m?"Hide":"Show"," Diff View"]}),e.jsx("button",{onClick:i,className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition-colors",children:"Reintegrate into AI"}),e.jsxs("button",{onClick:d,className:"text-xs bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700 transition-colors flex items-center gap-1",children:[e.jsx(ls,{className:"w-3 h-3"}),"Undo Changes"]})]}),m&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-2",children:"Original Code:"}),e.jsx("pre",{className:"bg-gray-100 p-3 rounded border h-40 overflow-auto font-mono",children:a})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-2",children:"Modified Code:"}),e.jsx("pre",{className:"bg-green-50 p-3 rounded border h-40 overflow-auto font-mono",children:o})]})]}),e.jsx("div",{className:"space-y-1",children:r.map((h,f)=>e.jsxs("div",{className:`p-2 rounded text-xs ${h.type==="added"?"bg-green-50 border border-green-200":h.type==="removed"?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:[e.jsxs("div",{className:"font-medium mb-1",children:["Line ",h.line,": ",h.type==="added"?"Added":h.type==="removed"?"Removed":"Changed"]}),h.type!=="added"&&e.jsxs("div",{className:"text-red-700",children:["- ",h.original]}),h.type!=="removed"&&e.jsxs("div",{className:"text-green-700",children:["+ ",h.modified]})]},f))})]})})]})}function kd({onSearch:t,onSelectResult:s,placeholder:r="Search routines, logic, variables..."}){const[a,o]=l.useState(""),[n,i]=l.useState([]),[d,m]=l.useState(!1),[u,h]=l.useState(-1),f=l.useRef(null),k=l.useRef(null),v=C=>{if(!C.trim()){i([]),m(!1);return}const p=[{id:"1",type:"routine",title:"Conveyor_2_Start",description:"Motor starter routine for conveyor 2",line:45,routine:"Main",preview:"IF Start_Button AND NOT E_Stop THEN Conveyor_2_Run := TRUE;",confidence:95},{id:"2",type:"block",title:"Overload Protection Logic",description:"Motor overload detection and response",line:78,routine:"Safety_Check",preview:"IF Motor_Current > Max_Current THEN Overload_Fault := TRUE;",confidence:87},{id:"3",type:"variable",title:"Conveyor_2_Status",description:"Boolean status indicator for conveyor 2",line:12,routine:"Main",preview:"VAR Conveyor_2_Status : BOOL := FALSE;",confidence:92}].filter(y=>y.title.toLowerCase().includes(C.toLowerCase())||y.description.toLowerCase().includes(C.toLowerCase())||y.preview.toLowerCase().includes(C.toLowerCase()));i(p),m(p.length>0),h(-1)},x=C=>{if(!(!d||n.length===0))switch(C.key){case"ArrowDown":C.preventDefault(),h(p=>Math.min(p+1,n.length-1));break;case"ArrowUp":C.preventDefault(),h(p=>Math.max(p-1,-1));break;case"Enter":C.preventDefault(),u>=0&&N(n[u]);break;case"Escape":m(!1),h(-1),f.current?.blur();break}},N=C=>{s(C),o(C.title),m(!1),h(-1)},b=C=>{switch(C){case"routine":return e.jsx(Xe,{className:"w-4 h-4 text-blue-500"});case"block":return e.jsx(xs,{className:"w-4 h-4 text-green-500"});case"variable":return e.jsx(fs,{className:"w-4 h-4 text-purple-500"});case"comment":return e.jsx(br,{className:"w-4 h-4 text-gray-500"});default:return e.jsx(Tt,{className:"w-4 h-4 text-gray-500"})}};return l.useEffect(()=>{const C=p=>{k.current&&!k.current.contains(p.target)&&m(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),e.jsxs("div",{ref:k,className:"relative w-full max-w-md",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted"}),e.jsx("input",{ref:f,type:"text",value:a,onChange:C=>{o(C.target.value),v(C.target.value)},onKeyDown:x,onFocus:()=>a.trim()&&m(n.length>0),placeholder:r,className:"w-full pl-10 pr-4 py-2 border border-light rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all"})]}),d&&n.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-light rounded-md shadow-lg z-50 max-h-64 overflow-y-auto",children:n.map((C,p)=>e.jsx("div",{onClick:()=>N(C),className:`p-3 cursor-pointer transition-colors ${p===u?"bg-accent-light":"hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[b(C.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-primary truncate",children:C.title}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-1 rounded",children:[C.confidence,"%"]})]}),e.jsx("div",{className:"text-xs text-muted mb-1",children:C.description}),e.jsxs("div",{className:"text-xs text-muted",children:[e.jsx("span",{className:"font-mono",children:C.routine})," • Line ",C.line]}),e.jsx("div",{className:"text-xs font-mono bg-gray-50 p-1 rounded mt-1 truncate",children:C.preview})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(br,{className:"w-3 h-3 text-muted"})})]})},C.id))}),d&&a.trim()&&n.length===0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-light rounded-md shadow-lg z-50 p-3",children:e.jsxs("div",{className:"text-center text-muted text-sm",children:[e.jsx(Tt,{className:"w-5 h-5 mx-auto mb-1 opacity-50"}),'No results found for "',a,'"']})})]})}function Cd(t={}){const{autoConnect:s=!0,reconnectInterval:r=3e3,maxReconnectAttempts:a=5,debounceMs:o=500,onTagsUpdated:n,onError:i,onConnectionChange:d}=t,[m,u]=l.useState(!1),[h,f]=l.useState(!1),[k,v]=l.useState(null),[x,N]=l.useState(0),[b,C]=l.useState(null),[p,y]=l.useState(0),[w,S]=l.useState(!1),T=l.useRef(null),j=l.useRef(null),c=l.useRef(null),g=l.useCallback(()=>H.getToken(),[]),A=l.useCallback(()=>{const U=g();if(!U)throw new Error("No authentication token found");return`wss://pandaura-backend-production.up.railway.app/ws/tags?token=${encodeURIComponent(U)}`},[g]),O=l.useCallback(()=>window.location.origin,[]),D=l.useCallback(U=>T.current?.readyState===WebSocket.OPEN?(T.current.send(JSON.stringify(U)),!0):!1,[]),R=l.useCallback(U=>{try{console.log("📨 Received WebSocket message:",U.data);const Z=JSON.parse(U.data);switch(console.log("📨 Parsed message:",Z),Z.type){case"tags_updated":C(Date.now()),y(W=>Math.max(0,W-1)),n?.(Z);break;case"sync_queued":y(W=>W+1);break;case"error":v(Z.error||"Unknown error"),y(W=>Math.max(0,W-1)),i?.(Z.error||"Unknown error");break;case"pong":break}}catch(Z){console.error("Failed to parse WebSocket message:",Z),v("Failed to parse server response")}},[n,i]),V=l.useCallback(()=>{if(T.current?.readyState===WebSocket.OPEN||h||w){console.log(`🚫 Connection blocked: open=${T.current?.readyState===WebSocket.OPEN}, connecting=${h}, disabled=${w}`);return}if(x>=a){console.log(`🚫 Circuit breaker activated: ${x}/${a} attempts exhausted`),S(!0),v(`Connection failed after ${a} attempts. Please refresh the page.`);return}try{f(!0),v(null);const U=A(),Z=O();console.log(`🔗 Connecting to WebSocket: ${U}`),console.log(`🌐 Browser origin: ${Z}`),console.log("🔗 Environment VITE_WS_BASE_URL: wss://pandaura-backend-production.up.railway.app");const W=new WebSocket(U);T.current=W,W.onopen=()=>{if(console.log("🔌 TagSync WebSocket connected successfully!"),console.log("🔌 WebSocket readyState:",W.readyState),console.log("🔌 WebSocket URL:",W.url),u(!0),f(!1),N(0),v(null),d?.(!0),c.current&&T.current?.readyState===WebSocket.OPEN){console.log(`🔄 Re-subscribing to project: ${c.current}`);try{T.current.send(JSON.stringify({type:"subscribe",projectId:c.current})),console.log("📤 Subscription message sent successfully")}catch(Y){console.error("❌ Failed to send subscription message:",Y)}}},W.onmessage=R,W.onclose=Y=>{console.log("🔌 TagSync WebSocket disconnected:",Y.code,Y.reason),u(!1),f(!1),d?.(!1),Y.code!==1e3&&x<a&&!h&&T.current===W?(console.log(`🔄 Scheduling reconnection attempt ${x+1}/${a} in ${r}ms`),N(le=>le+1),j.current=setTimeout(()=>{T.current===W&&!h&&(console.log(`🔄 Attempting reconnection ${x}/${a}`),V())},r*Math.pow(2,x))):console.log(`❌ Not reconnecting: code=${Y.code}, attempts=${x}/${a}, connecting=${h}`)},W.onerror=Y=>{console.error("🔌 TagSync WebSocket error:",Y),v("WebSocket connection error"),f(!1)}}catch(U){console.error("Failed to create WebSocket connection:",U),v(U instanceof Error?U.message:"Connection failed"),f(!1)}},[h,A,O,R,x,a,r,d]),M=l.useCallback(()=>{console.log("🔌 Manually disconnecting WebSocket"),j.current&&(clearTimeout(j.current),j.current=null),T.current&&(T.current.close(1e3,"Client disconnect"),T.current=null),u(!1),f(!1),N(0),S(!1),c.current=null},[]),L=l.useCallback(()=>{console.log("🔄 Resetting connection state"),M(),v(null),setTimeout(()=>{V()},1e3)},[M,V]),B=l.useCallback((U,Z,W)=>{D({type:"sync_tags",projectId:U,vendor:Z,stCode:W,debounceMs:o})||v("Not connected to sync service")},[D,o]),z=l.useCallback(U=>{c.current=U,D({type:"subscribe",projectId:U})||v("Not connected to sync service")},[D]),J=l.useCallback(()=>{c.current=null,D({type:"unsubscribe"})||v("Not connected to sync service")},[D]),ie=l.useCallback(()=>{D({type:"ping"})},[D]);return l.useEffect(()=>(s&&!w&&(console.log("🔄 Auto-connecting to WebSocket..."),V()),()=>{M()}),[s,w]),l.useEffect(()=>{if(!m)return;const U=setInterval(()=>{ie()},3e4);return()=>clearInterval(U)},[m,ie]),{isConnected:m,isConnecting:h,lastError:k,connectionAttempts:x,syncTags:B,subscribe:z,unsubscribe:J,ping:ie,connect:V,disconnect:M,resetConnection:L,lastSyncTime:b,queuedSyncs:p,isDisabled:w}}const tn=l.createContext(void 0);function kt({children:t}){const{projectId:s}=Lt(),[r,a]=l.useState(null),[o,n]=l.useState([]),[i,d]=l.useState(new Set),[m,u]=l.useState(new Set);l.useEffect(()=>{let y=null;if(s)y=s,localStorage.setItem("currentProjectId",y);else{const w=localStorage.getItem("currentProjectId");w&&(y=w)}a(y)},[s]);const v=Cd({autoConnect:!1,debounceMs:500,onTagsUpdated:y=>{y.tags&&n(y.tags),i.forEach(w=>{try{w(y)}catch(S){console.error("Error in tag update callback:",S)}})},onError:y=>{console.error("TagSync error:",y)},onConnectionChange:y=>{console.log(`TagSync connection ${y?"established":"lost"}`)}});l.useEffect(()=>{r?(console.log(`🔄 ProjectSyncContext: Connecting to tag sync for project ID: ${r}`),console.log(`🔄 TagSync state: connected=${v.isConnected}, connecting=${v.isConnecting}`),setTimeout(()=>{v.connect(),setTimeout(()=>{v.subscribe(r)},100)},100)):(console.log("🔄 ProjectSyncContext: Disconnecting from tag sync (no project ID)"),v.unsubscribe(),v.disconnect(),n([]))},[r]);const x=(y,w)=>{if(!r){console.warn("Cannot sync tags: no project ID available");return}v.syncTags(r,y,w)},N=l.useCallback(async()=>{if(!r)return console.warn("Cannot load tags: no project ID available"),[];if(m.has(r))return console.log(`📂 Tags already loaded for project ${r}, returning cached tags`),o;try{console.log(`📂 Loading existing tags for project ${r}`);const y=localStorage.getItem("authToken");if(!y)throw new Error("No authentication token found");const w=await fetch(`/api/v1/tags?projectId=${r}&pageSize=1000`,{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"},credentials:"include"});if(!w.ok)throw new Error(`Failed to load tags: ${w.statusText}`);const T=(await w.json()).tags||[];return console.log(`📂 Loaded ${T.length} existing tags for project ${r}`),n(T),u(j=>new Set(j).add(r)),T}catch(y){return console.error("Error loading existing tags:",y),[]}},[r,m,o]),b=y=>{d(w=>new Set(w).add(y))},C=y=>{d(w=>{const S=new Set(w);return S.delete(y),S})},p={currentProjectId:r,isConnected:v.isConnected,isConnecting:v.isConnecting,lastError:v.lastError,lastSyncTime:v.lastSyncTime,queuedSyncs:v.queuedSyncs,syncTags:x,loadExistingTags:N,latestTags:o,onTagsUpdated:b,offTagsUpdated:C,connect:v.connect,disconnect:v.disconnect,connectionAttempts:v.connectionAttempts};return e.jsx(tn.Provider,{value:p,children:t})}function sn(){return l.useContext(tn)||null}function rn(){const t=sn();if(!t)return{isConnected:!1,isConnecting:!1,lastError:null,lastSyncTime:null,queuedSyncs:0,syncTags:()=>console.warn("useTagSyncOnly: Not connected to ProjectSyncProvider"),latestTags:[],onTagsUpdated:()=>{},offTagsUpdated:()=>{},connect:()=>console.warn("useTagSyncOnly: Not connected to ProjectSyncProvider"),disconnect:()=>console.warn("useTagSyncOnly: Not connected to ProjectSyncProvider"),connectionAttempts:0};const{isConnected:s,isConnecting:r,lastError:a,lastSyncTime:o,queuedSyncs:n,syncTags:i,latestTags:d,onTagsUpdated:m,offTagsUpdated:u,connect:h,disconnect:f,connectionAttempts:k}=t;return{isConnected:s,isConnecting:r,lastError:a,lastSyncTime:o,queuedSyncs:n,syncTags:i,latestTags:d,onTagsUpdated:m,offTagsUpdated:u,connect:h,disconnect:f,connectionAttempts:k}}function Ad({isOpen:t,onClose:s,onSave:r,isSaving:a}){const[o,n]=l.useState(""),i=()=>{o.trim()&&(r(o.trim()),n(""))},d=m=>{m.key==="Enter"&&m.ctrlKey&&i()};return e.jsx(Ae,{isOpen:t,onClose:s,title:"Save Version",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"version-message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Version Message"}),e.jsx("textarea",{id:"version-message",value:o,onChange:m=>n(m.target.value),onKeyPress:d,placeholder:"Describe the changes in this version...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,disabled:a}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Press Ctrl+Enter to save quickly"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(F,{variant:"outline",onClick:s,disabled:a,children:"Cancel"}),e.jsx(F,{onClick:i,disabled:!o.trim()||a,icon:ze,children:a?"Saving...":"Save Version"})]})]})})}function Td({projectId:t,currentState:s,onVersionCreated:r,onRollback:a,className:o=""}){const[n,i]=l.useState(!1),[d,m]=l.useState(!1),[u,h]=l.useState(!1),{versions:f,isLoading:k,createVersion:v,rollbackToVersion:x,canCreateVersion:N,lastVersionTime:b}=Bt({projectId:t,autoCreateVersions:!0}),C=async w=>{if(t){h(!0);try{const S=await v(w,s);console.log("Version created:",S),i(!1),r?.(S)}catch(S){console.error("Failed to create version:",S),alert("Failed to save version. Please try again.")}finally{h(!1)}}},p=async w=>{try{await x(w),a?.(w)}catch(S){console.error("Failed to rollback:",S),alert("Failed to rollback to version. Please try again.")}},y=()=>{if(!b)return"No versions yet";const S=new Date().getTime()-b.getTime(),T=Math.floor(S/(1e3*60)),j=Math.floor(T/60),c=Math.floor(j/24);return T<1?"Just now":T<60?`${T}m ago`:j<24?`${j}h ago`:`${c}d ago`};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`flex items-center gap-2 ${o}`,children:[e.jsx(F,{size:"sm",variant:"outline",icon:ze,onClick:()=>i(!0),disabled:!N,title:N?"Save current state as a new version":"Please wait before creating another version",children:"Save Version"}),e.jsxs(F,{size:"sm",variant:"ghost",icon:na,onClick:()=>m(!0),title:"View version history",children:["History (",f.length,")"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(ht,{className:"w-3 h-3"}),e.jsxs("span",{children:["Last: ",y()]})]})]}),e.jsx(Ad,{isOpen:n,onClose:()=>i(!1),onSave:C,isSaving:u}),d&&e.jsx(Ae,{isOpen:d,onClose:()=>m(!1),title:"Version History",size:"lg",children:e.jsx("div",{className:"space-y-4",children:k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Loading versions..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(uo,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No versions saved yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create your first version to track changes"})]}):e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:f.map((w,S)=>e.jsx("div",{className:`p-3 border rounded-lg ${S===0?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-medium",children:["Version ",w.version_number]}),S===0&&e.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-full",children:"Current"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${w.is_auto?"bg-gray-100 text-gray-600":"bg-green-100 text-green-600"}`,children:w.is_auto?"Auto":"Manual"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:new Date(w.snapshot_info.timestamp*1e3).toLocaleString()}),w.message&&e.jsx("p",{className:"text-sm text-gray-800",children:w.message})]}),S>0&&e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{window.confirm(`Rollback to version ${w.version_number}?`)&&(p(w.version_number),m(!1))},children:"Rollback"})]})},w.id))})})})]})}function Ed({projectId:t}){const[s,r]=l.useState(!1),[a,o]=l.useState(null),[n,i]=l.useState(null),d=async()=>{r(!0),i(null),o(null);try{console.log("Testing version history API for project:",t);const h=await se.getVersionHistory(t);console.log("Version history result:",h),o(h)}catch(h){console.error("Version history error:",h),i(h.message||"Unknown error")}finally{r(!1)}},m=async()=>{r(!0),i(null),o(null);try{console.log("Testing create version API for project:",t);const h=await se.createVersion(t,{state:{test:"debug version",timestamp:Date.now()},message:"Debug test version"});console.log("Create version result:",h),o({versionNumber:h})}catch(h){console.error("Create version error:",h),i(h.message||"Unknown error")}finally{r(!1)}},u=async()=>{r(!0),i(null),o(null);try{console.log("Testing auto-save API for project:",t),await se.createAutoSaveVersion(t,{test:"debug auto-save",timestamp:Date.now()}),console.log("Auto-save completed successfully"),o({success:!0,message:"Auto-save completed"})}catch(h){console.error("Auto-save error:",h),i(h.message||"Unknown error")}finally{r(!1)}};return e.jsxs("div",{className:"p-4 border border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Version Control API Debug"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Project ID: ",t]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("button",{onClick:d,disabled:s,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 mr-2",children:"Test Get Version History"}),e.jsx("button",{onClick:m,disabled:s,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 mr-2",children:"Test Create Version"}),e.jsx("button",{onClick:u,disabled:s,className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:"Test Auto-Save"})]}),s&&e.jsx("div",{className:"text-blue-600",children:"Loading..."}),n&&e.jsxs("div",{className:"text-red-600 bg-red-50 p-3 rounded border",children:[e.jsx("strong",{children:"Error:"})," ",n]}),a&&e.jsxs("div",{className:"text-green-600 bg-green-50 p-3 rounded border",children:[e.jsx("strong",{children:"Result:"}),e.jsx("pre",{className:"mt-2 text-sm overflow-auto",children:JSON.stringify(a,null,2)})]})]})}function Pd(t){const s=t.data_type||t.type||"BOOL",r=t.address?` // address=${t.address}`:"",a=t.description?` ${t.description}`:"",o=t.default_value?` := ${t.default_value}`:"";return`  ${t.name} : ${s}${o};${r}${a}`}function $r(t){if(t.length===0)return`PROGRAM Main
    VAR
        // Add your variables here
    END_VAR

    // Add your logic here

END_PROGRAM`;const s=t.reduce((o,n)=>{const i=n.scope||"Local";return o[i]||(o[i]=[]),o[i].push(n),o},{});return`PROGRAM Main
${Object.entries(s).map(([o,n])=>{const i=o==="Local"?"VAR":`VAR_${o.toUpperCase()}`,d=n.sort((m,u)=>m.name.localeCompare(u.name)).map(m=>Pd(m)).join(`
`);return`    ${i}
${d}
    END_VAR`}).join(`

`)}

    // Add your logic here

END_PROGRAM`}const Vr=["Rockwell","Siemens","Beckhoff"];function Ls({sessionMode:t=!1}){const{getModuleState:s,saveModuleState:r}=or(),{isConnected:a,isConnecting:o,lastError:n,lastSyncTime:i,queuedSyncs:d,syncTags:m,connectionAttempts:u}=rn(),h=sn(),f=h?.currentProjectId||null,k=h?.loadExistingTags||(()=>Promise.resolve([])),v=h?.latestTags||[];l.useEffect(()=>{console.log(`🔍 LogicStudio: Connection state changed - connected: ${a}, connecting: ${o}, error: ${n}`),console.log(`🔍 LogicStudio: Project ID: ${f}`)},[a,o,n,f]);const x=l.useRef(null);l.useEffect(()=>{f&&a&&x.current!==f&&(console.log(`📂 Loading existing tags for project ${f}`),x.current=f,k().then(I=>{if(I.length>0){console.log(`📂 Found ${I.length} existing tags:`,I);const re=$r(I);console.log("📂 Generated ST code from existing tags:",re),console.log("📂 Current editor code:",p.substring(0,100)+"..."),console.log("📂 Editor code length:",p.length),y(re),Me.current=re,console.log(`📂 Populated editor with ${I.length} existing tags`)}else{console.log(`📂 No existing tags found for project ${f}`),console.log("📂 Setting editor to empty PROGRAM structure");const re=`PROGRAM Main
    VAR
        // Add your variables here
    END_VAR

    // Add your logic here

END_PROGRAM`;y(re),Me.current=re,console.log("📂 Set editor to empty PROGRAM structure")}}).catch(I=>{console.error("Failed to load existing tags:",I),x.current=null}))},[f,a,k]);const N=s("LogicStudio"),[b,C]=l.useState(N.prompt||""),[p,y]=l.useState(N.editorCode||`PROGRAM Main
  VAR
    Start_Button    : BOOL;
    Stop_Button     : BOOL;
    Emergency_Stop  : BOOL;
    Motor_Contactor : BOOL;
    Motor_Running   : BOOL;
    Safety_OK       : BOOL;
  END_VAR

  // Safety Circuit
  Safety_OK := NOT Emergency_Stop;

  // Motor Control Logic
  IF Start_Button AND Safety_OK AND NOT Stop_Button THEN
    Motor_Contactor := TRUE;
  ELSIF Stop_Button OR NOT Safety_OK THEN
    Motor_Contactor := FALSE;
  END_IF;

  Motor_Running := Motor_Contactor;

END_PROGRAM`),[w,S]=l.useState(N.vendor),[T,j]=l.useState(!1),[c,g]=l.useState(N.showPendingChanges||!1),[A,O]=l.useState(N.showAISuggestions!==void 0?N.showAISuggestions:!0),[D,R]=l.useState(N.vendorContextEnabled||!1),[V,M]=l.useState(N.isCollapsed||!1),[L,B]=l.useState(!1),[z,J]=l.useState(N.collapseLevel||0),ie=l.useRef(null);l.useRef(null);const U=l.useRef(null),Z=[{line:15,original:"MotorStart := TRUE;",modified:"MotorStart := Start_Button AND NOT E_Stop;",type:"changed"},{line:23,original:"",modified:"// Added safety interlock for conveyor",type:"added"}],W=l.useCallback(async I=>{try{const re=/^\s*(\w+)\s*:\s*(\w+)(?:\s*:=\s*[^;]+)?;/gm,Ie=[...I.matchAll(re)].map(we=>we[1]),$e=v.map(we=>we.name),qe=Ie.filter(we=>!$e.includes(we));qe.length>0&&(console.log(`🔍 Found ${qe.length} new variables: ${qe.join(", ")}`),console.log("🔄 Syncing with project vendor (no manual selection needed)")),console.log("🔄 Syncing tags with project vendor"),m(w.toLowerCase(),I)}catch(re){console.error("Error in tag sync:",re),m(w.toLowerCase(),I)}},[w,m,v]),Y=f?parseInt(f):null,{updateProjectState:le,isSaving:G,lastSaved:ae,saveError:Ue,hasUnsavedChanges:ft,saveNow:Ht}=Ha(Y||0,{module:"LogicStudio",prompt:b,editorCode:p,vendor:w,showPendingChanges:c,showAISuggestions:A,vendorContextEnabled:D,isCollapsed:V,collapseLevel:z,lastActivity:new Date().toISOString()});Ba(ft&&!t,Ht),l.useEffect(()=>{!t&&Y&&le({module:"LogicStudio",prompt:b,editorCode:p,vendor:w,showPendingChanges:c,showAISuggestions:A,vendorContextEnabled:D,isCollapsed:V,collapseLevel:z,lastActivity:new Date().toISOString()})},[t,Y,le,b,p,w,c,A,D,V,z]);const{getVersionData:bt}=Bt({projectId:Y||0,autoCreateVersions:!1});l.useEffect(()=>{const I=async Qe=>{const Ie=Qe,{projectId:$e,targetVersion:qe,rolledBackTo:we}=Ie.detail;if($e===Y&&Y){console.log("Logic Studio: Handling enhanced rollback to version",we);try{const Ne=await se.getVersionSnapshot(Y,we);if(Ne&&Ne.autosaveState){const X=Ne.autosaveState;X.module==="LogicStudio"&&(C(X.prompt||""),y(X.editorCode||""),S(X.vendor||"siemens"),g(X.showPendingChanges||!1),O(X.showAISuggestions||!1),R(X.vendorContextEnabled||!1),M(X.isCollapsed||!1),J(X.collapseLevel||0),console.log("Logic Studio state restored from enhanced version snapshot",we))}if(Ne&&Ne.moduleStates&&Ne.moduleStates.LogicStudio){const X=Ne.moduleStates.LogicStudio;C(X.prompt||""),y(X.editorCode||""),S(X.vendor||"siemens"),g(X.showPendingChanges||!1),O(X.showAISuggestions||!1),R(X.vendorContextEnabled||!1),M(X.isCollapsed||!1),J(X.collapseLevel||0),console.log("Logic Studio state restored from module-specific state in version",we)}}catch(Ne){console.error("Failed to restore Logic Studio state from enhanced version:",Ne);try{const X=await bt(we);X&&X.module==="LogicStudio"&&(C(X.prompt||""),y(X.editorCode||""),S(X.vendor||"siemens"),g(X.showPendingChanges||!1),O(X.showAISuggestions||!1),R(X.vendorContextEnabled||!1),M(X.isCollapsed||!1),J(X.collapseLevel||0),console.log("Logic Studio state restored using legacy method"))}catch(X){console.error("Legacy restore method also failed:",X)}}}},re=Qe=>{const Ie=Qe,{projectId:$e,action:qe}=Ie.detail;$e===Y&&qe==="rollback"&&(console.log("Logic Studio: Project state changed due to rollback, refreshing..."),window.location.reload())};return window.addEventListener("pandaura:project-rollback",I),window.addEventListener("pandaura:project-state-changed",re),()=>{window.removeEventListener("pandaura:project-rollback",I),window.removeEventListener("pandaura:project-state-changed",re)}},[Y,bt]);const Gt=l.useCallback((()=>{let I;return()=>{t&&(clearTimeout(I),I=setTimeout(()=>{r("LogicStudio",{prompt:b,editorCode:p,vendor:w,showPendingChanges:c,showAISuggestions:A,vendorContextEnabled:D,isCollapsed:V,collapseLevel:z})},1e3))}})(),[t,r,b,p,w,c,A,D,V,z]),Me=l.useRef(""),Be=l.useCallback((()=>{let I;return()=>{!t&&a&&p.trim()&&(p!==Me.current?(clearTimeout(I),I=setTimeout(()=>{console.log("🔄 Syncing tags from Logic Studio - code changed"),console.log("🔄 Previous code length:",Me.current.length),console.log("🔄 New code length:",p.length),Me.current=p,W(p)},1500)):console.log("🔄 Skipping tag sync - code unchanged"))}})(),[t,a,p,w,m]);l.useEffect(()=>{Gt()},[Gt]),l.useEffect(()=>{console.log("🔄 Editor code changed, triggering debounced sync..."),console.log(`🔄 Current code length: ${p.length}`),console.log(`🔄 Session mode: ${t}, Connected: ${a}`),Be()},[p,Be]),l.useEffect(()=>{const I=re=>{ie.current&&!ie.current.contains(re.target)&&j(!1),U.current&&!U.current.contains(re.target)&&B(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]);const yt=l.useCallback(()=>{if(!b.trim()){alert("Please enter a description of the logic you want to generate.");return}console.log("Generating logic from prompt:",b);const I=`// Generated from: "${b}"
PROGRAM Generated_Logic
  VAR
    // Auto-generated variables based on prompt
    Input_Signal : BOOL;
    Output_Signal : BOOL;
    Process_Active : BOOL;
  END_VAR

  // Generated logic based on your description
  IF Input_Signal THEN
    Process_Active := TRUE;
    Output_Signal := Process_Active;
  ELSE
    Process_Active := FALSE;
    Output_Signal := FALSE;
  END_IF;

END_PROGRAM`;y(I),C(""),alert("Logic generated successfully! Review the code in the editor above.")},[b]),Wt=l.useCallback(I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),yt())},[yt]);return e.jsxs("div",{className:"flex flex-col h-full bg-background text-primary",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-bold text-primary",children:"Logic Studio"}),!t&&e.jsx("div",{className:"flex items-center gap-2",children:o?e.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[e.jsx(ht,{className:"w-4 h-4 animate-pulse"}),e.jsx("span",{className:"text-xs",children:"Connecting..."})]}):a?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(ma,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Live Sync"}),d>0&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-1 rounded",children:d})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(ua,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Offline"}),u>0&&e.jsxs("span",{className:"text-xs",children:["(",u,")"]})]})}),!t&&Y&&e.jsx(Ga,{isSaving:G,lastSaved:ae,saveError:Ue,hasUnsavedChanges:ft,onManualSave:Ht,className:"text-xs"}),!t&&Y&&e.jsx(Td,{projectId:Y,currentState:{module:"LogicStudio",prompt:b,editorCode:p,vendor:w,showPendingChanges:c,showAISuggestions:A,vendorContextEnabled:D,isCollapsed:V,collapseLevel:z,lastActivity:new Date().toISOString()},onVersionCreated:I=>{console.log("Version created in Logic Studio:",I)},onRollback:I=>{console.log("Rollback completed in Logic Studio:",I),window.location.reload()},className:"border-l border-gray-200 pl-3"}),!t&&e.jsx("button",{onClick:()=>{console.log("🔄 Refreshing tags from database..."),k().then(I=>{if(I.length>0){const re=$r(I);y(re),Me.current=re,console.log(`🔄 Refreshed editor with ${I.length} tags`)}else{const re=`PROGRAM Main
    VAR
        // Add your variables here
    END_VAR

    // Add your logic here

END_PROGRAM`;y(re),Me.current=re,console.log("🔄 No tags found, set empty program structure")}}).catch(I=>{console.error("Failed to refresh tags:",I)})},className:"bg-white border border-light px-2 py-2 rounded-md text-sm hover:bg-accent-light transition-colors cursor-pointer",title:"Refresh tags from database",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",ref:U,children:[e.jsxs("button",{onClick:()=>B(!L),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors text-sm text-gray-600",title:"Collapse Interface",children:[e.jsx(tr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Layout"}),V?e.jsx(Mt,{className:"w-3 h-3"}):e.jsx(hs,{className:"w-3 h-3"})]}),L&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-light rounded-lg shadow-lg p-4 z-20 w-64",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-primary mb-2",children:"Interface Layout"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Adjust the interface to your workflow needs"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"radio",name:"layout",checked:z===0,onChange:()=>{J(0),M(!1)},className:"mr-2"}),"Full Interface"]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"All panels and features visible"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"radio",name:"layout",checked:z===1,onChange:()=>{J(1),M(!0)},className:"mr-2"}),"Compact"]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"Hide side panels, keep core features"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"radio",name:"layout",checked:z===2,onChange:()=>{J(2),M(!0)},className:"mr-2"}),"Minimal"]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"Editor-focused, minimal UI"})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>B(!1),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors",children:"Apply Layout"})})]})]})]}),e.jsx("div",{className:"text-sm text-secondary",children:"Project: Motor_Auto.ap14"})]}),e.jsxs("main",{className:`flex-1 flex flex-col ${z===2?"gap-3 p-3":"gap-6 p-6"} will-change-scroll`,style:{scrollBehavior:"smooth"},children:[z<2&&e.jsx("div",{className:"flex justify-end",children:e.jsx(kd,{onSearch:I=>(console.log("Searching for:",I),[]),onSelectResult:I=>{console.log("Selected result:",I)}})}),e.jsx("div",{className:"flex-1 min-h-[400px]",children:e.jsx("div",{className:"h-full border border-light rounded-md overflow-hidden shadow-sm",children:e.jsx(vd,{initialCode:p,vendorType:w,onChange:I=>y(I)})})}),z===0&&e.jsx(Sd,{isEnabled:c,onToggle:g,diffs:Z,originalCode:"PROGRAM Main\\n  VAR\\n    MotorStart : BOOL;\\n  END_VAR\\n  MotorStart := TRUE;\\nEND_PROGRAM",modifiedCode:"PROGRAM Main\\n  VAR\\n    MotorStart : BOOL;\\n  END_VAR\\n  // Added safety interlock for conveyor\\n  MotorStart := Start_Button AND NOT E_Stop;\\nEND_PROGRAM",aiSummary:"User added safety interlock logic and documentation. Changes improve safety compliance by checking emergency stop conditions.",onReintegrate:()=>console.log("Reintegrating changes with AI..."),onRevert:()=>{console.log("Reverting changes..."),g(!1)}}),e.jsxs("div",{className:`bg-white border border-light rounded-lg shadow-sm ${z===2?"p-2":"p-4"}`,children:[e.jsxs("div",{className:`flex ${z===2?"gap-2":"gap-3"} items-end`,children:[e.jsx("textarea",{className:`flex-1 border border-light rounded-md px-4 py-3 bg-surface shadow-sm text-sm text-primary placeholder-muted resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all ${z===2?"min-h-[40px] max-h-[80px]":"min-h-[60px] max-h-[120px]"}`,placeholder:z===2?"Describe logic...":"Describe your logic requirements in natural language...",value:b,onChange:I=>C(I.target.value),onKeyPress:Wt}),z<2?e.jsxs("div",{className:"relative",ref:ie,children:[e.jsxs("button",{onClick:()=>j(!T),className:"flex items-center gap-2 border border-light bg-white px-4 py-3 rounded-md shadow-sm text-sm text-primary hover:bg-accent-light transition-all min-h-[60px] whitespace-nowrap",children:["Vendor: ",w,e.jsx(st,{className:"w-4 h-4"})]}),T&&e.jsx("div",{className:"absolute bottom-full mb-1 w-48 bg-surface border border-light rounded-md shadow-lg z-10",children:Vr.map(I=>e.jsx("div",{onClick:()=>{S(I),j(!1)},className:"px-4 py-2 text-sm hover:bg-accent-light cursor-pointer",children:I},I))})]}):e.jsx("select",{value:w,onChange:I=>S(I.target.value),className:"border border-light bg-white px-3 py-2 rounded-md shadow-sm text-sm text-primary min-h-[40px]",children:Vr.map(I=>e.jsx("option",{value:I,children:I},I))}),z<2&&e.jsx("button",{onClick:()=>{console.log(`Exporting logic to ${w} format`),alert(`✅ Exporting logic to ${w} format...

Your structured text will be downloaded shortly in ${w}-compatible format.`)},className:"bg-primary text-white px-4 py-3 rounded-md shadow-sm text-sm hover:bg-secondary transition-all min-h-[60px] whitespace-nowrap",title:"Export current logic to vendor-specific format",children:"📤 Export Logic"}),e.jsx("button",{onClick:()=>{console.log("Opening document uploader...")},className:`border border-light bg-white rounded-md shadow-sm hover:bg-accent-light transition-all text-sm ${z===2?"p-2 min-h-[40px]":"p-3 min-h-[60px]"}`,title:"Upload any project documents to improve logic accuracy.",children:e.jsx(ra,{className:`text-primary ${z===2?"w-4 h-4":"w-5 h-5"}`})}),e.jsx("button",{onClick:yt,className:`bg-primary text-white rounded-md shadow-sm text-sm hover:bg-secondary transition-all whitespace-nowrap ${z===2?"px-4 py-2 min-h-[40px]":"px-6 py-3 min-h-[60px]"}`,disabled:!b.trim(),children:z===2?"Generate":"Generate Logic"})]}),z<2&&e.jsx("div",{className:"text-xs text-muted text-center mt-3",children:"🟢 Define Prompt → 🟡 Upload Docs → 🟡 Choose Vendor → ⚪ Review/Edit Logic"})]}),A&&z===0&&e.jsx(Nd,{suggestions:["IF Safety_OK AND Start_Button THEN","Conveyor_Speed := Target_Speed;","Motor_Fault := Overload OR Overcurrent;"],onClose:()=>O(!1)}),z<2&&e.jsxs("div",{className:"bg-white border border-light rounded-md p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-primary mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[z===0&&e.jsxs("button",{onClick:()=>g(!c),className:"text-xs bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded transition-colors",children:[c?"📋 Hide":"📋 Show"," Pending Changes"]}),!A&&z===0&&e.jsx("button",{onClick:()=>O(!0),className:"text-xs bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded transition-colors",children:"✨ Show AI Suggestions"}),z===1&&e.jsx("button",{onClick:()=>{J(0),M(!1)},className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 px-3 py-2 rounded transition-colors",children:"🔧 Show All Features"})]})]})]}),z<2&&e.jsx(wd,{}),!t&&Y&&e.jsx("div",{className:"mt-4",children:e.jsx(Ed,{projectId:Y})})]})}function Ms({sessionMode:t=!1}){const[s,r]=l.useState("logic-studio"),[a,o]=l.useState(!1),[n,i]=l.useState([]),[d,m]=l.useState(null),[u,h]=l.useState(!1),[f,k]=l.useState({companyName:"",projectName:"",projectId:"",contactName:"",contactEmail:"",siteAddress:"",deliveryDate:"",integratorCompany:"Pandaura Automation Systems"}),[v,x]=l.useState([{id:"functional-desc",title:"Functional Description",description:"Comprehensive system operation description",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF","TXT"],selected:!1},{id:"sequence-ops",title:"Sequence of Operations",description:"Step-by-step operational procedures",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF"],selected:!1},{id:"tag-database",title:"Tag Database",description:"Complete I/O and variable listing",status:"ready",source:"Tag Database Manager",formats:["XLSX","CSV"],selected:!1},{id:"io-map",title:"I/O Map",description:"Physical input/output assignments",status:"ready",source:"Logic Studio Analysis",formats:["XLSX","PDF"],selected:!1},{id:"logic-summary",title:"Logic Summary Report",description:"High-level logic overview and statistics",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF"],selected:!1},{id:"hmi-tags",title:"HMI Tag List",description:"Human Machine Interface tag definitions",status:"pending",source:"Auto-detected from Logic",formats:["XLSX","CSV"],selected:!1},{id:"alarm-list",title:"Alarm List",description:"System alarm definitions and responses",status:"ready",source:"Logic Studio Analysis",formats:["XLSX","DOCX"],selected:!1},{id:"revision-history",title:"Revision History / Change Log",description:"Project version control and modifications",status:"ready",source:"Auto-generated",formats:["DOCX","PDF"],selected:!1}]),N=j=>{r(j),o(j==="import")},b=j=>{if(!j)return;const c=Array.from(j).map(g=>({name:g.name,tag:C(g.name),status:"pending",type:p(g.name)}));i(g=>[...g,...c]),setTimeout(()=>{i(g=>g.map(A=>c.some(O=>O.name===A.name)?{...A,status:"analyzed"}:A))},2e3)},C=j=>{const c=j.toLowerCase();return c.includes(".st")||c.includes(".acd")||c.includes(".s7p")?"[Logic]":c.includes(".xlsx")||c.includes(".csv")?"[I/O List]":c.includes(".docx")||c.includes(".pdf")?"[Functional Spec]":"[Document]"},p=j=>{const c=j.toLowerCase();return c.includes(".st")||c.includes(".acd")||c.includes(".s7p")?"logic":c.includes(".xlsx")||c.includes(".csv")?"io":c.includes(".docx")||c.includes(".pdf")?"spec":"doc"},y=j=>{x(c=>c.map(g=>g.id===j?{...g,selected:!g.selected}:g))},w=()=>{const j=v.every(c=>c.selected);x(c=>c.map(g=>({...g,selected:!j})))},S=()=>{const j=v.filter(c=>c.selected);if(j.length===0){alert("Please select documents to export");return}console.log("Exporting documents:",j.map(c=>c.title)),alert(`Generating ${j.length} document(s)...
Download will begin shortly.`)},T=d?v.find(j=>j.id===d):null;return e.jsxs("div",{className:"flex flex-col h-full bg-background",children:[e.jsx("header",{className:"bg-white border-b border-light px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"AutoDocs"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{value:s,onChange:j=>N(j.target.value),className:"border border-light rounded px-4 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"logic-studio",children:"Use Logic from Logic Studio"}),e.jsx("option",{value:"import",children:"Import Logic / Docs"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:w,className:"text-sm text-muted hover:text-primary px-3 py-2",children:v.every(j=>j.selected)?"Deselect All":"Select All"}),e.jsxs("button",{onClick:S,className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Export Selected"]})]})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>h(!u),className:"flex items-center gap-2 w-full p-3 bg-white border border-light rounded-md hover:bg-gray-50 transition-colors",children:[u?e.jsx(Vo,{className:"w-4 h-4"}):e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Add Client Information (Optional)"})]}),u&&e.jsx("div",{className:"mt-3 p-4 bg-white border border-light rounded-md",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Client Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:f.companyName,onChange:j=>k(c=>({...c,companyName:j.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Acme Manufacturing"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Project Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:f.projectName,onChange:j=>k(c=>({...c,projectName:j.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Batch Mixing Control System"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:"Project ID / Reference"}),e.jsx("input",{type:"text",value:f.projectId,onChange:j=>k(c=>({...c,projectId:j.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., PRJ-2025-001"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Date of Delivery ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:f.deliveryDate,onChange:j=>k(c=>({...c,deliveryDate:j.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:"Site Address / Location"}),e.jsx("textarea",{value:f.siteAddress,onChange:j=>k(c=>({...c,siteAddress:j.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",rows:2,placeholder:"Installation site address..."})]})]})})]}),a&&e.jsxs("div",{className:"mb-6 p-4 bg-white border border-light rounded-md",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Smart Upload Panel"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-4",children:[e.jsx(It,{className:"w-8 h-8 text-muted mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-muted mb-2",children:["Drag & drop files here or"," ",e.jsx("button",{className:"text-accent hover:underline",children:"browse files"})]}),e.jsx("p",{className:"text-xs text-muted",children:"Supported: .ACD, .S7P, .XML, .ST, .TXT, .DOCX, .PDF, .XLSX, .CSV"}),e.jsx("input",{type:"file",multiple:!0,onChange:j=>b(j.target.files),className:"hidden",accept:".acd,.s7p,.xml,.st,.txt,.docx,.pdf,.xlsx,.csv"})]}),n.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Uploaded Files:"}),n.map((j,c)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:j.name}),e.jsx("span",{className:"text-xs bg-accent-light text-accent px-2 py-1 rounded",children:j.tag}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${j.status==="analyzed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:j.status==="analyzed"?"Analyzed":"Pending"})]}),e.jsx("button",{onClick:()=>i(g=>g.filter((A,O)=>O!==c)),className:"text-muted hover:text-red-500",children:e.jsx(Re,{className:"w-4 h-4"})})]},c))]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(j=>e.jsxs("div",{className:`p-4 bg-white border rounded-md cursor-pointer transition-all ${j.selected?"border-accent bg-accent-light":"border-light hover:border-gray-300"}`,onClick:()=>y(j.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:j.selected,onChange:()=>{},className:"accent-primary"}),e.jsx("h3",{className:"font-medium text-sm",children:j.title})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:c=>{c.stopPropagation(),m(d===j.id?null:j.id)},className:"text-muted hover:text-primary",title:"Preview",children:e.jsx(ut,{className:"w-4 h-4"})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),console.log(`Generating ${j.title}...`),alert(`Generating ${j.title}...
This will create the document using current project data.`)},className:"text-accent hover:text-purple-600",title:"Generate",children:e.jsx(fs,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`flex items-center gap-1 text-xs ${j.status==="ready"?"text-green-600":"text-yellow-600"}`,children:[j.status==="ready"?e.jsx(Zs,{className:"w-3 h-3"}):e.jsx(tr,{className:"w-3 h-3"}),j.status==="ready"?"Ready to Generate":"Pending Input"]}),e.jsxs("div",{className:"text-xs text-muted",children:["Generated from: ",j.source]}),e.jsxs("div",{className:"text-xs text-muted",children:["Format: ",j.formats.join(", ")]})]}),e.jsxs("button",{onClick:c=>{c.stopPropagation(),console.log(`Exporting ${j.title}`),alert(`Generating ${j.title}...`)},className:"mt-3 w-full bg-gray-100 hover:bg-gray-200 text-primary px-3 py-1 rounded text-xs transition-colors flex items-center justify-center gap-1",children:[e.jsx(Je,{className:"w-3 h-3"}),"Export"]})]},j.id))})]}),d&&T&&e.jsxs("div",{className:"w-2/5 bg-white border-l border-light p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:T.title}),e.jsxs("p",{className:"text-sm text-muted",children:["Source: ",T.source]})]}),e.jsx("button",{onClick:()=>m(null),className:"text-muted hover:text-primary",children:e.jsx(Re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border text-sm",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Document Preview:"}),e.jsxs("div",{className:"space-y-2 text-xs font-mono",children:[e.jsx("div",{children:"1. SYSTEM OVERVIEW"}),e.jsxs("div",{className:"ml-4",children:["1.1 Project: ",f.projectName||"Motor Control System"]}),e.jsxs("div",{className:"ml-4",children:["1.2 Client: ",f.companyName||"Industrial Client"]}),e.jsxs("div",{className:"ml-4",children:["1.3 Delivery Date: ",f.deliveryDate||"TBD"]}),e.jsx("div",{children:"2. FUNCTIONAL DESCRIPTION"}),e.jsx("div",{className:"ml-4",children:"2.1 The system controls motor operation with safety interlocks..."}),e.jsx("div",{className:"ml-4",children:"2.2 Emergency stop functionality provides immediate shutdown..."}),e.jsx("div",{children:"3. SEQUENCE OF OPERATIONS"}),e.jsx("div",{className:"ml-4",children:"3.1 System startup sequence..."}),e.jsxs("div",{className:"text-muted",children:["... (continues for ",Math.floor(Math.random()*20)+10," pages)"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full bg-accent text-white px-4 py-2 rounded text-sm hover:bg-purple-600 transition-colors",children:"Regenerate with AI Edits"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{className:"w-full border border-light rounded px-4 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{children:"Export as..."}),T.formats.map(j=>e.jsx("option",{value:j,children:j},j))]})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",className:"accent-primary"}),"Include in ZIP Export"]})]})]})]})]})}function ot(t){const s=t.headers.get("Content-Disposition");if(console.log("🔍 Response headers:",Object.fromEntries(t.headers.entries())),console.log("🔍 Content-Disposition header:",s),s){const r=s.match(/filename="([^"]+)"/);if(r)return console.log("🔍 Extracted filename (quoted):",r[1]),r[1];const a=s.match(/filename=([^;]+)/);if(a){const o=a[1].trim();return console.log("🔍 Extracted filename (unquoted):",o),o}}return console.log("🔍 Using fallback filename: export.csv"),"export.csv"}function Dd(t,s){const r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}nr();const ee=`${gt.apiBaseUrl}/api/v1`;console.log("🔗 TagsAPI initialized with base URL:",ee);function me(){const t=H.getToken();return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}class oe{static async getTags(s={}){const r=new URLSearchParams;Object.entries(s).forEach(([d,m])=>{m!=null&&m!==""&&r.append(d,m.toString())});const a=r.toString(),o=`${ee}/tags${a?`?${a}`:""}`,n=await fetch(o,{headers:me()});if(!n.ok){const d=await n.json().catch(()=>({error:"Network error"}));throw new Error(d.error||"Failed to fetch tags")}const i=await n.json();return{success:!0,data:{tags:Array.isArray(i)?i:[],pagination:{page:1,pageSize:Array.isArray(i)?i.length:0,total:Array.isArray(i)?i.length:0,totalPages:1}}}}static async createTag(s){const r=await fetch(`${ee}/tags`,{method:"POST",headers:me(),body:JSON.stringify(s)});if(!r.ok){const o=await r.json().catch(()=>({error:"Network error"}));let n=o.error||"Failed to create tag";throw o.details&&Array.isArray(o.details)&&o.details.length>0&&(n+=": "+o.details.join(", ")),new Error(n)}return{success:!0,data:(await r.json()).tag}}static async getTag(s){const r=await fetch(`${ee}/tags/${s}`,{headers:me()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to fetch tag")}return r.json()}static async updateTag(s,r){const a=await fetch(`${ee}/tags/${s}`,{method:"PUT",headers:me(),body:JSON.stringify(r)});if(!a.ok){const n=await a.json().catch(()=>({error:"Network error"}));let i=n.error||"Failed to update tag";throw n.details&&Array.isArray(n.details)&&n.details.length>0&&(i+=": "+n.details.join(", ")),new Error(i)}return{success:!0,data:(await a.json()).tag}}static async deleteTag(s){const r=await fetch(`${ee}/tags/${s}`,{method:"DELETE",headers:me()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to delete tag")}return r.json()}static async autoGenerateTags(s){const r=await fetch(`${ee}/tags/autogenerate`,{method:"POST",headers:me(),body:JSON.stringify(s)});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to generate tags")}return r.json()}static async exportTags(s){const r=await fetch(`${ee}/tags/export`,{method:"POST",headers:me(),body:JSON.stringify(s)});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export tags")}return r.json()}static async exportVendorTags(s,r,a="json"){let o;r==="beckhoff"?a==="csv"||a==="xlsx"?o=`${ee}/tags/projects/${s}/export/beckhoff/csv`:a==="xml"?o=`${ee}/tags/projects/${s}/export/beckhoff/xml`:o=`${ee}/tags/projects/${s}/export/beckhoff/csv`:o=`${ee}/tags/projects/${s}/export/${r}/formatted`;const n=await fetch(o,{method:"GET",headers:me()});if(!n.ok){const i=await n.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export vendor-specific tags")}return n.blob()}static async exportBeckhoffCsv(s){const r=await fetch(`${ee}/tags/projects/${s}/export/beckhoff/csv`,{method:"GET",headers:me()});if(!r.ok){const n=await r.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to export Beckhoff CSV")}const a=await r.blob(),o=ot(r);return{blob:a,filename:o}}static async exportBeckhoffXml(s){const r=await fetch(`${ee}/tags/projects/${s}/export/beckhoff/xml`,{method:"GET",headers:me()});if(!r.ok){const n=await r.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to export Beckhoff XML")}const a=await r.blob(),o=ot(r);return{blob:a,filename:o}}static async exportRockwellCsv(s){const r=await fetch(`${ee}/tags/projects/${s}/export/rockwell/csv`,{method:"GET",headers:me()});if(!r.ok){const n=await r.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to export Rockwell CSV")}const a=await r.blob(),o=ot(r);return{blob:a,filename:o}}static async exportRockwellL5X(s){const r=await fetch(`${ee}/tags/projects/${s}/export/rockwell/l5x`,{method:"GET",headers:me()});if(!r.ok){const n=await r.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to export Rockwell L5X")}const a=await r.blob(),o=ot(r);return{blob:a,filename:o}}static async exportSiemensCsv(s){const r=await fetch(`${ee}/tags/projects/${s}/export/siemens/csv`,{method:"GET",headers:me()});if(!r.ok){const n=await r.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to export Siemens CSV")}const a=await r.blob(),o=ot(r);return{blob:a,filename:o}}static async exportSiemensXml(s){const r=await fetch(`${ee}/tags/projects/${s}/export/siemens/xml`,{method:"GET",headers:me()});if(!r.ok){const n=await r.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to export Siemens XML")}const a=await r.blob(),o=ot(r);return{blob:a,filename:o}}static async importBeckhoffCsv(s,r){const a=new FormData;return a.append("file",r),await(await fetch(`${ee}/tags/projects/${s}/import/beckhoff/csv`,{method:"POST",headers:{Authorization:`Bearer ${H.getToken()}`},body:a})).json().catch(()=>({success:!1,error:"Network error"}))}static async importBeckhoffXml(s,r){const a=new FormData;return a.append("file",r),await(await fetch(`${ee}/tags/projects/${s}/import/beckhoff/xml`,{method:"POST",headers:{Authorization:`Bearer ${H.getToken()}`},body:a})).json().catch(()=>({success:!1,error:"Network error"}))}static async importRockwellCsv(s,r){const a=new FormData;return a.append("file",r),await(await fetch(`${ee}/tags/projects/${s}/import/rockwell/csv`,{method:"POST",headers:{Authorization:`Bearer ${H.getToken()}`},body:a})).json().catch(()=>({success:!1,error:"Network error"}))}static async importRockwellL5X(s,r){const a=new FormData;return a.append("file",r),await(await fetch(`${ee}/tags/projects/${s}/import/rockwell/l5x`,{method:"POST",headers:{Authorization:`Bearer ${H.getToken()}`},body:a})).json().catch(()=>({success:!1,error:"Network error"}))}static async importSiemensCsv(s,r){const a=new FormData;return a.append("file",r),await(await fetch(`${ee}/tags/projects/${s}/import/siemens/csv`,{method:"POST",headers:{Authorization:`Bearer ${H.getToken()}`},body:a})).json().catch(()=>({success:!1,error:"Network error"}))}static async importSiemensXml(s,r){const a=new FormData;a.append("file",r);const o=await fetch(`${ee}/tags/projects/${s}/import/siemens/xml`,{method:"POST",headers:{Authorization:`Bearer ${H.getToken()}`},body:a});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to import Siemens XML")}return o.json()}static async formatTagsForVendor(s,r,a){const o=await fetch(`${ee}/tags/format/${r}`,{method:"POST",headers:me(),body:JSON.stringify({projectId:s,tags:a})});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to format tags for vendor")}return o.json()}static async validateAddressesForVendor(s,r){const a=await fetch(`${ee}/tags/validate-addresses/${s}`,{method:"POST",headers:me(),body:JSON.stringify({addresses:r})});if(!a.ok){const o=await a.json().catch(()=>({error:"Network error"}));throw new Error(o.error||"Failed to validate addresses")}return a.json()}static async getTagStats(s){const r=await fetch(`${ee}/tags/stats/${s}`,{headers:me()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to fetch tag statistics")}return r.json()}}const an=l.createContext(void 0),Od=({children:t})=>{const[s,r]=l.useState([]),[a,o]=l.useState(!1),[n,i]=l.useState(null),[d,m]=l.useState({}),[u,h]=l.useState({page:1,pageSize:50,total:0,totalPages:0}),f=l.useCallback(y=>{m(w=>({...w,...y}))},[]),k=l.useCallback(async y=>{o(!0),i(null);try{const w=y||d,S=await oe.getTags(w);r(S.data.tags),h(S.data.pagination),y&&m(T=>({...T,...y}))}catch(w){const S=w instanceof Error?w.message:"Failed to fetch tags";i(S),console.error("Error fetching tags:",w)}finally{o(!1)}},[d]),v=l.useCallback(async y=>{i(null);try{const S=(await oe.createTag(y)).data;return r(T=>[S,...T]),h(T=>({...T,total:T.total+1})),S}catch(w){const S=w instanceof Error?w.message:"Failed to create tag";throw i(S),w}},[]),x=l.useCallback(async(y,w)=>{i(null);try{const T=(await oe.updateTag(y,w)).data;return r(j=>j.map(c=>c.id===y?T:c)),T}catch(S){const T=S instanceof Error?S.message:"Failed to update tag";throw i(T),S}},[]),N=l.useCallback(async y=>{i(null);try{await oe.deleteTag(y),r(w=>w.filter(S=>S.id!==y)),h(w=>({...w,total:Math.max(0,w.total-1)}))}catch(w){const S=w instanceof Error?w.message:"Failed to delete tag";throw i(S),w}},[]),b=l.useCallback(async()=>{await k(d)},[k,d]),C=l.useCallback(()=>{i(null)},[]),p={tags:s,loading:a,error:n,filters:d,pagination:u,fetchTags:k,createTag:v,updateTag:x,deleteTag:N,setFilters:f,clearError:C,refreshTags:b};return e.jsx(an.Provider,{value:p,children:t})},Rd=()=>{const t=l.useContext(an);if(!t)throw new Error("useTags must be used within a TagsProvider");return t},zr=[{vendor:"rockwell",formats:["csv","xlsx","l5x"],displayName:"Rockwell (Allen-Bradley)"},{vendor:"siemens",formats:["csv","xlsx","xml"],displayName:"Siemens (TIA Portal)"},{vendor:"beckhoff",formats:["csv","xlsx","xml"],displayName:"Beckhoff (TwinCAT)"}];function Ld({isOpen:t,onClose:s,projectId:r,projectName:a,tags:o}){const[n,i]=l.useState({step:"select"}),d=p=>o.filter(y=>y.vendor===p).length,m=o.length;l.useEffect(()=>{t&&i({step:"select"})},[t]);const u=p=>{i(y=>({...y,selectedVendor:p}))},h=p=>{i(y=>({...y,selectedFormat:p}))},f=()=>{i(p=>({...p,step:"confirm"}))},k=async()=>{if(!n.selectedVendor||!n.selectedFormat)return;const p=d(n.selectedVendor);if(p===0){i(y=>({...y,step:"error",errorMessage:`No ${n.selectedVendor} tags found in this project. Please import or create ${n.selectedVendor} tags first.`}));return}i(y=>({...y,step:"progress"}));try{p>1e3&&await new Promise(S=>setTimeout(S,1e3));let y;n.selectedVendor==="beckhoff"?n.selectedFormat==="csv"?y=await oe.exportBeckhoffCsv(r):n.selectedFormat==="xml"?y=await oe.exportBeckhoffXml(r):y=await oe.exportBeckhoffCsv(r):n.selectedVendor==="siemens"?n.selectedFormat==="csv"?y=await oe.exportSiemensCsv(r):n.selectedFormat==="xml"?y=await oe.exportSiemensXml(r):y=await oe.exportSiemensCsv(r):n.selectedVendor==="rockwell"?n.selectedFormat==="csv"?y=await oe.exportRockwellCsv(r):n.selectedFormat==="l5x"?y=await oe.exportRockwellL5X(r):y=await oe.exportRockwellCsv(r):y={blob:await oe.exportVendorTags(r,n.selectedVendor,n.selectedFormat),filename:`${a}-${n.selectedVendor}-tags.${n.selectedFormat}`};const w=window.URL.createObjectURL(y.blob);i(S=>({...S,step:"success",downloadUrl:w,filename:y.filename}))}catch(y){let w="Unknown error occurred";y instanceof Error?w=y.message:typeof y=="string"&&(w=y),(w.includes("Failed to fetch")||w.includes("NetworkError"))&&(w="Network error occurred. Please check your connection and try again."),i(S=>({...S,step:"error",errorMessage:w}))}},v=async()=>{if(n.downloadUrl&&n.filename)try{const y=await(await fetch(n.downloadUrl)).blob();Dd(y,n.filename),window.URL.revokeObjectURL(n.downloadUrl)}catch(p){console.error("Download failed:",p);const y=document.createElement("a");y.href=n.downloadUrl,y.download=n.filename,document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(n.downloadUrl)}},x=()=>{i(p=>({...p,step:"select"}))},N=()=>{i(p=>({...p,step:"select"}))},b=n.selectedVendor&&n.selectedFormat,C=zr.find(p=>p.vendor===n.selectedVendor);return m===0?e.jsx(Ae,{isOpen:t,onClose:s,title:"Export Tags",size:"md",children:e.jsxs("div",{className:"flex flex-col items-center py-8 text-center",children:[e.jsx(pe,{className:"w-16 h-16 text-amber-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Tags to Export"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please generate or import tags before exporting."}),e.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary-dark transition-colors",children:"Close"})]})}):e.jsx(Ae,{isOpen:t,onClose:s,title:n.step==="select"?"Export Your Tags":n.step==="confirm"?"Confirm Export":n.step==="progress"?"Exporting Tags":n.step==="success"?"Export Complete!":"Export Failed",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[n.step==="select"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Choose your export vendor and format:"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Vendor"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:zr.map(p=>{const y=d(p.vendor);return e.jsxs("div",{onClick:()=>u(p.vendor),className:`border rounded-lg p-3 cursor-pointer transition-colors ${n.selectedVendor===p.vendor?"border-primary bg-primary/5":y===0?"border-gray-200 bg-gray-50 opacity-60 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,style:{pointerEvents:y===0?"none":"auto"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:p.displayName}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Formats: ",p.formats.map(w=>w.toUpperCase()).join(", ")]})]}),e.jsxs("div",{className:`text-sm font-medium ${y===0?"text-gray-400":"text-blue-600"}`,children:[y," tags"]})]}),y===0&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"No tags available for this vendor"})]},p.vendor)})})]}),n.selectedVendor&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:C?.formats.map(p=>e.jsxs("div",{onClick:()=>h(p),className:`border rounded-lg p-3 cursor-pointer transition-colors text-center ${n.selectedFormat===p?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"font-medium",children:p.toUpperCase()}),p==="l5x"&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Rockwell Studio 5000 format"}),p==="xml"&&n.selectedVendor==="siemens"&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TIA Portal XML"}),p==="xml"&&n.selectedVendor==="beckhoff"&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TwinCAT XML"})]},p))})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(pe,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Select the format compatible with your PLC programming environment."]})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:f,disabled:!b,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"})]})]}),n.step==="confirm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsxs("div",{className:"text-lg font-medium text-gray-900 mb-4",children:["You are about to export ",d(n.selectedVendor)," ",C?.displayName," tags for project '",a,"' in ",n.selectedFormat?.toUpperCase()," format."]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Click Export to start."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:N,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Back"}),e.jsxs("button",{onClick:k,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4"}),"Export"]})]})]}),n.step==="progress"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(zs,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Preparing your export file..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Please do not close this window."})]}),n.step==="success"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ke,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Export complete!"}),e.jsxs("div",{className:"text-gray-600 mb-6",children:["Your file ",n.filename," is ready to download."]}),e.jsxs("button",{onClick:v,className:"bg-primary text-white px-6 py-3 rounded-md hover:bg-primary-dark transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(oo,{className:"w-5 h-5"}),"Download Now"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"})})]}),n.step==="error"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(pe,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Export failed."}),e.jsxs("div",{className:"text-gray-600 mb-2",children:[e.jsx("strong",{children:"Reason:"})," ",n.errorMessage]}),e.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"Please try again or contact support if the problem persists."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"}),e.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Try Again"})]})]})]})})}const Ct=[{vendor:"rockwell",formats:["csv","l5x"],displayName:"Rockwell (Allen-Bradley Studio 5000)",description:"Import tags from Studio 5000 CSV exports or L5X XML files",supportedHeaders:["Tag Name","Data Type","Scope","Description","External Access","Default Value","Address"]},{vendor:"siemens",formats:["csv","xlsx","xml"],displayName:"Siemens (TIA Portal)",description:"Import tags from TIA Portal CSV/XLSX exports or PLCOpen XML"},{vendor:"beckhoff",formats:["csv","xml"],displayName:"Beckhoff (TwinCAT)",description:"Import tags from TwinCAT CSV exports or ADS XML files",supportedHeaders:["Name","DataType","Address","Comment","InitialValue","Scope","AccessMode"]}];function Md({isOpen:t,onClose:s,projectId:r,projectName:a,onSuccess:o}){const[n,i]=l.useState({step:"upload"}),d=l.useRef(null);l.useEffect(()=>{t&&i({step:"upload"})},[t]);const m=p=>{i(y=>({...y,selectedVendor:p}))},u=async p=>{!n.selectedFile||!n.selectedVendor||(i(y=>({...y,selectedFormat:p,step:"progress"})),await h(n.selectedVendor,p,n.selectedFile))},h=async(p,y,w)=>{i(S=>({...S,step:"progress"}));try{let S;if(p==="beckhoff")if(y==="csv")S=await oe.importBeckhoffCsv(r,w);else if(y==="xml")S=await oe.importBeckhoffXml(r,w);else throw new Error("Unsupported format for Beckhoff");else if(p==="siemens")if(y==="csv")S=await oe.importSiemensCsv(r,w);else if(y==="xml")S=await oe.importSiemensXml(r,w);else throw y==="xlsx"?new Error("XLSX import for Siemens is not implemented on the server"):new Error("Unsupported format for Siemens");else if(p==="rockwell")if(y==="csv")S=await oe.importRockwellCsv(r,w);else if(y==="l5x")S=await oe.importRockwellL5X(r,w);else throw new Error("Unsupported format for Rockwell");else throw new Error("Unsupported vendor");if(!S||S.success===!1){i(T=>({...T,step:"error",importResult:S,errorMessage:S&&S.error||"Import failed on server"}));return}if(S.errors&&S.errors.length>0&&!S.errorReport){const T=["Row,Errors"];S.errors.forEach(j=>{T.push(`${j.row},"${j.errors.join(", ")}"`)}),S.errorReport=btoa(T.join(`
`))}i(T=>({...T,step:"success",importResult:S})),o&&S.inserted&&o(S.inserted),window.dispatchEvent(new CustomEvent("pandaura:tags-imported",{detail:{projectId:r,importedCount:S.inserted}}))}catch(S){let T="Unknown error occurred";S instanceof Error?T=S.message:typeof S=="string"&&(T=S),i(j=>({...j,step:"error",errorMessage:T}))}},f=async p=>{const y=p.target.files?.[0];if(y){i(w=>({...w,selectedFile:y,step:"detect"}));try{const w=[];let S;const T=y.name.split(".").pop()?.toLowerCase();T==="csv"?S="csv":T==="xml"?S="xml":T==="xlsx"?S="xlsx":T==="l5x"&&(S="l5x");const c=(await y.text()).toLowerCase();(c.includes("rockwell")||c.includes("studio 5000")||c.includes("allen-bradley"))&&w.push("rockwell"),(c.includes("siemens")||c.includes("tia portal"))&&w.push("siemens"),(c.includes("beckhoff")||c.includes("twincat"))&&w.push("beckhoff"),w.length===1&&S?i(g=>({...g,selectedVendor:w[0],detectedVendors:w,detectedFormat:S,step:"manual-select"})):i(g=>({...g,detectedVendors:w,detectedFormat:S,step:"manual-select"}))}catch(w){console.error("Error detecting file format:",w),i(S=>({...S,step:"manual-select"}))}}},k=()=>{i({step:"upload"}),d.current&&(d.current.value="")},v=()=>{i(p=>({...p,step:"upload"}))},x=Ct.find(p=>p.vendor===n.selectedVendor),N=n.detectedVendors&&n.detectedVendors.length>0?n.detectedVendors[0]:void 0,b=N?Ct.find(p=>p.vendor===N)?.displayName||N:void 0,C=n.detectedFormat?n.detectedFormat.toUpperCase():void 0;return e.jsx(Ae,{isOpen:t,onClose:s,title:n.step==="upload"?"Import Tags":n.step==="detect"?"Detecting Format...":n.step==="manual-select"?"Select Format":n.step==="progress"?"Importing Tags":n.step==="success"?"Import Complete!":"Import Failed",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[n.step==="upload"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload your tag file"}),e.jsxs("div",{className:"text-gray-600",children:[e.jsx("p",{className:"mb-4",children:"Supported formats:"}),e.jsxs("ul",{className:"text-left mx-auto max-w-md space-y-2",children:[e.jsx("li",{children:"● Rockwell: .csv (Studio 5000 Tag Database), .l5x (XML)"}),e.jsx("li",{children:"● Siemens: .csv, .xlsx, .xml"}),e.jsx("li",{children:"● Beckhoff: .csv, .xml"})]}),e.jsx("p",{className:"mt-4 text-sm italic",children:"Tip: Export your tags from your PLC software in one of these formats."})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>d.current?.click(),children:[e.jsx("input",{ref:d,type:"file",accept:".csv,.xlsx,.xml,.l5x",onChange:f,className:"hidden"}),e.jsx(It,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Choose file to upload"}),e.jsx("div",{className:"text-gray-600",children:"Click to browse or drag and drop your tag file"})]})})]}),n.step==="detect"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(zs,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Analyzing your file..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Please wait while we detect the file format."})]}),n.step==="manual-select"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"File Format Detection"}),e.jsx("p",{className:"text-gray-600",children:n.detectedVendors?.length===0?"We couldn't identify your file's vendor/format. Please select the vendor and format manually:":N&&C?`Detected vendor: ${b} — format ${C}. Please confirm to proceed.`:"Multiple possible vendors detected. Please confirm the correct vendor and format (other options are disabled until you change the file):"})]}),e.jsx("div",{className:"space-y-4",children:n.detectedVendors&&n.detectedVendors.length===1&&n.detectedFormat?e.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Detected file"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:Ct.find(p=>p.vendor===n.detectedVendors[0])?.displayName}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Format: ",e.jsx("span",{className:"font-medium",children:n.detectedFormat.toUpperCase()})]})]}),e.jsx("div",{className:"text-xs text-green-700 bg-green-50 px-2 py-1 rounded",children:"Detected"})]})]}),e.jsx("div",{className:"mt-2 text-sm text-gray-700",children:"The importer detected the vendor and format for your file. Other vendors and formats are disabled to avoid accidental imports."}),e.jsx("div",{className:"mt-4 flex items-center justify-end",children:e.jsxs("button",{onClick:()=>u(n.detectedFormat),className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:["Confirm & Import ",n.detectedFormat.toUpperCase()]})}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 text-xs text-gray-500",children:Ct.filter(p=>p.vendor!==n.detectedVendors[0]).map(p=>e.jsxs("div",{className:"p-2 border rounded bg-white opacity-50",children:[p.displayName," — Not detected"]},p.vendor))})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Vendor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Ct.map(p=>e.jsxs("button",{onClick:()=>m(p.vendor),className:`
                            p-4 border-2 rounded-lg text-left transition-all
                            ${n.selectedVendor===p.vendor?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}
                          `,disabled:n.detectedVendors&&n.detectedVendors.length>0&&!n.detectedVendors.includes(p.vendor),children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.displayName}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:p.description}),n.detectedVendors?.includes(p.vendor)&&e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Detected in file"})]},p.vendor))})]}),n.selectedVendor&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x?.formats.map(p=>e.jsxs("button",{onClick:()=>u(p),className:`
                              p-3 border-2 rounded-lg text-center font-medium transition-all
                              ${n.selectedFormat===p?"border-primary bg-primary text-white":"border-gray-200 text-gray-700 hover:border-gray-300"}
                            `,disabled:n.detectedFormat&&n.detectedFormat!==p,children:[p.toUpperCase(),n.detectedFormat===p&&e.jsx("div",{className:"text-xs mt-1",children:"Detected"})]},p))})]})]})})]}),n.step==="progress"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(zs,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Importing your tags..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Please wait while your tags are being processed."})]}),n.step==="success"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ke,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import completed successfully!"}),e.jsxs("div",{className:"text-gray-600 mb-4",children:[n.importResult?.inserted||0,' tags were imported into "',a,'"']}),n.importResult?.errors&&n.importResult.errors.length>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-left mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(_t,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-yellow-800 mb-2",children:[n.importResult.errors.length," rows had issues:"]}),e.jsxs("div",{className:"text-sm text-yellow-700 space-y-1 max-h-32 overflow-y-auto",children:[n.importResult.errors.slice(0,5).map((p,y)=>e.jsxs("div",{children:["Row ",p.row,": ",p.errors.join(", ")]},y)),n.importResult.errors.length>5&&e.jsxs("div",{className:"text-yellow-600 italic",children:["... and ",n.importResult.errors.length-5," more"]})]}),n.importResult.errorReport&&e.jsx("div",{className:"mt-3",children:e.jsxs("a",{href:`data:text/csv;base64,${n.importResult.errorReport}`,download:"import-errors.csv",className:"inline-flex items-center text-sm text-yellow-700 hover:text-yellow-800",children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"Download Error Report"]})})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:k,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Import More"}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Done"})]})]}),n.step==="error"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(pe,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import failed"}),e.jsxs("div",{className:"text-gray-600 mb-2",children:[e.jsx("strong",{children:"Error:"})," ",n.errorMessage]})]}),n.importResult?.errors&&n.importResult.errors.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-left mb-4",children:[e.jsxs("div",{className:"font-medium text-yellow-800 mb-2",children:[n.importResult.errors.length," rows had issues:"]}),e.jsx("div",{className:"text-sm text-yellow-700 space-y-1 max-h-48 overflow-y-auto",children:n.importResult.errors.map((p,y)=>e.jsxs("div",{children:["Row ",p.row,": ",p.errors.join(", ")]},y))}),n.importResult.errorReport&&e.jsx("div",{className:"mt-3",children:e.jsxs("a",{href:`data:text/csv;base64,${n.importResult.errorReport}`,download:"import-errors.csv",className:"inline-flex items-center text-sm text-yellow-700 hover:text-yellow-800",children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"Download Error Report"]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:v,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Try Again"}),e.jsx("button",{onClick:k,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Upload New File"})]})]})]})]})})}const Fd=[{pattern:/^I:\d+\/\d+$/i,description:"Input: I:x/y (e.g., I:1/0)"},{pattern:/^O:\d+\/\d+$/i,description:"Output: O:x/y (e.g., O:2/0)"},{pattern:/^N\d+:\d+$/i,description:"Integer: Nx:y (e.g., N7:0)"},{pattern:/^F\d+:\d+$/i,description:"Float: Fx:y (e.g., F8:0)"},{pattern:/^B\d+:\d+$/i,description:"Binary: Bx:y (e.g., B3:0)"},{pattern:/^T\d+:\d+$/i,description:"Timer: Tx:y (e.g., T4:0)"},{pattern:/^C\d+:\d+$/i,description:"Counter: Cx:y (e.g., C5:0)"},{pattern:/^R\d+:\d+$/i,description:"Control: Rx:y (e.g., R6:0)"},{pattern:/^S\d+:\d+$/i,description:"String: Sx:y (e.g., S2:0)"},{pattern:/^[A-Za-z_][A-Za-z0-9_]*$/i,description:"Symbolic: MyTag_1"}],_d=[{pattern:/^I\d+\.\d+$/i,description:"Input: Ix.y (e.g., I0.0)"},{pattern:/^Q\d+\.\d+$/i,description:"Output: Qx.y (e.g., Q0.0)"},{pattern:/^M\d+\.\d+$/i,description:"Memory: Mx.y (e.g., M0.0)"},{pattern:/^DB\d+\.DB[BWDX]\d+$/i,description:"Data Block: DBx.DBYz (e.g., DB1.DBD0)"},{pattern:/^L\d+\.\d+$/i,description:"Local: Lx.y (e.g., L0.0)"},{pattern:/^[A-Za-z_][A-Za-z0-9_]*$/i,description:"Symbolic: MyTag_1"}],Id=[{pattern:/^%[IQMT]\d+(\.\d+)?$/i,description:"I/O: %Xx.y (e.g., %I0.0, %Q2)"},{pattern:/^%[IQMT][BWDL]\d+$/i,description:"Typed Memory: %XYz (e.g., %MW100)"},{pattern:/^GVL\.[a-zA-Z_][\w]*$/i,description:"GVL Reference: GVL.Variable"},{pattern:/^[a-zA-Z_][\w]*$/i,description:"Symbolic: MyVariable"}];function Ur(t,s){if(!t||!t.trim())return{isValid:!1,errorMessage:"Address is required"};const r=t.trim();let a=[],o="";switch(s.toLowerCase()){case"rockwell":a=Fd,o="Rockwell";break;case"siemens":a=_d,o="Siemens";break;case"beckhoff":a=Id,o="Beckhoff";break;default:return{isValid:!1,errorMessage:"Unsupported vendor"}}return a.some(({pattern:i})=>i.test(r))?{isValid:!0}:{isValid:!1,errorMessage:`Invalid ${o} address format: ${t}`,suggestedFormats:a.map(i=>i.description)}}function $d(t){switch(t.toLowerCase()){case"rockwell":return["I:1/0","O:2/0","N7:0","F8:0","MyTag_1"];case"siemens":return["I0.0","Q0.0","M0.0","DB1.DBD0","MyTag_1"];case"beckhoff":return["%I0.0","%Q2.1","%MW100","GVL.MyVar","MyVariable"];default:return[]}}function Vd(t){switch(t.toLowerCase()){case"rockwell":return"Rockwell Allen-Bradley addressing: I:x/y, O:x/y, Nx:y, Fx:y, or symbolic names";case"siemens":return"Siemens TIA Portal addressing: Ix.y, Qx.y, Mx.y, DBx.DBYz, or symbolic names";case"beckhoff":return"Beckhoff TwinCAT addressing: %Xx.y, %XYz, GVL.Variable, or symbolic names";default:return"Please select a vendor to see address format guidelines"}}const Oe={rockwell:{name:"Rockwell (Allen-Bradley)",dataTypes:["BOOL","INT","DINT","REAL","STRING"],scopes:["Local","Global","Input","Output"],description:"Studio 5000 Compatible Data Types",allowCustomTypes:!1},siemens:{name:"Siemens",dataTypes:["BOOL","INT","DINT","REAL","STRING"],scopes:["Input","Output","Memory"],description:"TIA Portal Compatible Data Types",allowCustomTypes:!1},beckhoff:{name:"Beckhoff",dataTypes:["BOOL","INT","DINT","REAL","STRING"],scopes:["Input","Output","Internal","Global","Local"],description:"TwinCAT Compatible Data Types + Custom Types",allowCustomTypes:!0}},zd=t=>Oe[t]?.dataTypes||[],Ud=t=>Oe[t]?.scopes||[],Br=(t,s)=>t==="beckhoff"?s.trim().length>0:zd(t).includes(s),Bd=(t,s)=>Ud(t).includes(s),qd=[{value:"rockwell",label:Oe.rockwell.name},{value:"siemens",label:Oe.siemens.name},{value:"beckhoff",label:Oe.beckhoff.name}],Fs=t=>Oe[t].dataTypes.map(s=>({value:s,label:s})),Hd=t=>Oe[t].scopes.map(s=>({value:s.toLowerCase(),label:s}));function Gd({isOpen:t,onClose:s,onSuccess:r,projectId:a,onCreate:o,customTypes:n=[],onCustomTypeAdded:i}){const{showToast:d}=rt(),[m,u]=l.useState(""),[h,f]=l.useState(!1),[k,v]=l.useState(n);l.useEffect(()=>{v(n)},[n]);const[x,N]=l.useState({name:"",description:"",type:"BOOL",address:"",default_value:"",vendor:"rockwell",scope:"global",tag_type:"memory",is_ai_generated:!1}),[b,C]=l.useState({}),[p,y]=l.useState(!1),w=()=>{const c={};if(x.name.trim()||(c.name="Tag name is required"),x.description.trim()||(c.description="Description is required"),Br(x.vendor,x.type)||(c.type=`Data type '${x.type}' is not supported by ${x.vendor.charAt(0).toUpperCase()+x.vendor.slice(1)}`),!x.address.trim())c.address="Address is required";else{const g=Ur(x.address,x.vendor);g.isValid||(c.address=g.errorMessage)}return C(c),Object.keys(c).length===0},S=async()=>{if(w()){y(!0);try{const c={...x,project_id:a,name:x.name.trim(),description:x.description.trim(),address:x.address.trim(),default_value:x.default_value?.trim()||""};await o(c),d({variant:"success",title:"Success!",message:`Tag "${x.name.trim()}" has been created successfully.`,duration:4e3}),r(),T()}catch(c){console.error("Failed to create tag:",c),d({variant:"error",title:"Error",message:c.message||"Failed to create tag. Please try again.",duration:5e3})}finally{y(!1)}}},T=()=>{N({name:"",description:"",type:"BOOL",address:"",default_value:"",vendor:"rockwell",scope:"global",tag_type:"memory",is_ai_generated:!1}),u(""),f(!1),C({}),y(!1),s()},j=(c,g)=>{if(N(A=>{const O={...A,[c]:g};if(c==="vendor"){const D=g;if(!Br(D,A.type)){const R=Oe[D].dataTypes[0]==="BOOL"?"BOOL":"INT";O.type=R}if(!Bd(D,A.scope)){const R=Oe[D].scopes[0].toLowerCase()==="global"?"global":"local";O.scope=R}(D==="siemens"||D==="rockwell"&&!["input","output","memory"].includes(A.tag_type))&&(O.tag_type="memory")}return O}),b[c]&&C(A=>({...A,[c]:void 0})),c==="vendor"&&x.address){const A=Ur(x.address,g);A.isValid||C(O=>({...O,address:A.errorMessage}))}};return e.jsx(Ae,{isOpen:t,onClose:T,title:"Create New Tag",size:"lg",actions:e.jsxs(e.Fragment,{children:[e.jsx(F,{variant:"secondary",onClick:T,disabled:p,children:"Cancel"}),e.jsx(F,{onClick:S,disabled:p,loading:p,children:p?"Creating...":"Create Tag"})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(_e,{label:"Vendor",options:qd,value:x.vendor,onChange:c=>j("vendor",c),required:!0})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(fe,{label:"Tag Name",placeholder:"Enter tag name (e.g., Motor_01_Start)",value:x.name,onChange:c=>j("name",c.target.value),error:b.name,required:!0})}),e.jsxs("div",{children:[e.jsx(fe,{label:"Address",placeholder:`Enter ${x.vendor} address`,value:x.address,onChange:c=>j("address",c.target.value),error:b.address,required:!0}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[e.jsx("div",{className:"mb-1",children:Vd(x.vendor)}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Examples:"})," ",$d(x.vendor).join(", ")]})]})]})]}),e.jsx("div",{children:e.jsx(Et,{label:"Description",placeholder:"Enter tag description",value:x.description,onChange:c=>j("description",c.target.value),error:b.description,rows:3,required:!0})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:x.vendor==="beckhoff"?e.jsxs("div",{children:[h?e.jsx(fe,{label:"Custom Data Type",placeholder:"Enter custom data type name (e.g., ST_CUSTOM_STRUCT)",value:m,onChange:c=>{const g=c.target.value.toUpperCase();u(g)},onBlur:c=>{const g=m.trim();g?(k.some(A=>A.value===g)||v(A=>[...A,{value:g,label:g}]),j("type",g),f(!1),u(""),n.some(A=>A.value===g)||i?.(g)):(f(!1),u(""),j("type",Fs(x.vendor)[0].value))},required:!0}):e.jsx(_e,{label:"Data Type",options:(()=>{const c=[...Fs(x.vendor),...k.map(g=>({value:g.value,label:g.label||g.value}))];return x.type&&!c.some(g=>g.value===x.type)&&x.type!=="custom"&&c.unshift({value:x.type,label:x.type}),c.push({value:"custom",label:"+ Add Custom Type"}),c})(),value:x.type,onChange:c=>{c==="custom"?f(!0):j("type",c)},required:!0}),x.type!=="custom"&&e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Common Types:"})," ",Oe[x.vendor].dataTypes.join(", ")]}),k.length>0&&e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Custom Types:"})," ",k.map(c=>c.value).join(", ")]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," You can add custom data types for Beckhoff PLCs"]})]})]}):e.jsxs("div",{children:[e.jsx(_e,{label:"Data Type",options:Fs(x.vendor),value:x.type,onChange:c=>j("type",c),required:!0}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Supported Types:"})," ",Oe[x.vendor].dataTypes.join(", ")]})})]})}),e.jsxs("div",{children:[e.jsx(_e,{label:"Scope",options:Hd(x.vendor),value:x.scope,onChange:c=>j("scope",c),required:!0}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:x.vendor==="siemens"?e.jsx("div",{children:"Scope defined by DB (Data Block), I (Inputs), Q (Outputs), M (Memory)"}):x.vendor==="rockwell"?e.jsx("div",{children:"Scope affects tag category in Studio 5000"}):e.jsx("div",{children:"Scope defines variable accessibility"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(_e,{label:"Tag Type",options:[{value:"input",label:"Input"},{value:"output",label:"Output"},{value:"memory",label:"Memory"},{value:"temp",label:"Temp"},{value:"constant",label:"Constant"}].filter(c=>x.vendor==="siemens"?["memory","input","output","temp"].includes(c.value):x.vendor==="rockwell"?["input","output","memory"].includes(c.value):!0),value:x.tag_type,onChange:c=>j("tag_type",c),required:!0})}),e.jsx("div",{children:e.jsx(fe,{label:"Default Value",placeholder:"Enter default value (optional)",value:x.default_value||"",onChange:c=>j("default_value",c.target.value)})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",x.name||"Not specified"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",x.address||"Not specified"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",x.type," (",x.vendor,")"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Scope:"})," ",x.scope]})]})]})]})})}const qr={rockwell:["BOOL","INT","DINT","REAL","STRING"],siemens:["BOOL","INT","DINT","REAL","STRING"],beckhoff:["BOOL","INT","DINT","REAL","STRING"]},Wd=t=>qr[t]||qr.rockwell,Yd=({sessionMode:t=!1})=>{const{projectId:s}=Lt(),r=de(),{showToast:a}=rt(),o=window.location.pathname.startsWith("/workspace/"),{isConnected:n,isConnecting:i,lastError:d,lastSyncTime:m,queuedSyncs:u,latestTags:h,onTagsUpdated:f,offTagsUpdated:k}=rn(),{tags:v,loading:x,error:N,filters:b,pagination:C,fetchTags:p,createTag:y,updateTag:w,deleteTag:S,setFilters:T,clearError:j,refreshTags:c}=Rd(),[g,A]=l.useState(!1),[O,D]=l.useState(null),[R,V]=l.useState({}),M=l.useRef({}),[L,B]=l.useState(null),[z,J]=l.useState([]),[ie,U]=l.useState(!1),[Z,W]=l.useState(!1),[Y,le]=l.useState(!1),[G,ae]=l.useState(null),[Ue,ft]=l.useState(!1),[Ht,bt]=l.useState(!1),[Gt,Me]=l.useState(!1),[Be,yt]=l.useState(null),[Wt,I]=l.useState(null),[re,Qe]=l.useState(!1),Ie=l.useRef(null),$e=l.useCallback(E=>{if(E.type==="tags_updated"&&E.success&&E.tags){if(console.log(`📡 Received real-time tag update: ${E.tags.length} tags`),I(Date.now()),L){const $=setTimeout(()=>{c().catch(ne=>{console.error("Failed to refresh tags:",ne),a({variant:"error",title:"Sync Error",message:"Failed to refresh tags. Please try again."})})},500);return()=>clearTimeout($)}a({variant:"success",title:"Tags Updated",message:`${E.parsedCount||E.tags.length} tags synced from Logic Studio`,duration:3e3})}else E.type==="tags_updated"&&!E.success&&(console.error("Tag sync failed:",E.error),a({variant:"error",title:"Sync Failed",message:E.error||"Failed to sync tags from Logic Studio",duration:5e3}))},[L,c,a]);l.useEffect(()=>{let E=!0,$;return(async()=>{if(E)try{f($e),$=setInterval(()=>{!n&&!i&&E&&(a({variant:"warning",title:"Sync Disconnected",message:"Tag sync connection lost. Attempting to reconnect...",duration:5e3}),Qe(!0))},3e4)}catch(he){console.error("Failed to initialize tag sync:",he),E&&a({variant:"error",title:"Sync Error",message:"Failed to initialize tag sync. Please try again.",duration:5e3})}})(),()=>{E=!1,$&&clearInterval($),k($e)}},[$e,f,k,n,i,a]);const qe=async E=>{try{const ne=(await se.getProjects()).find(he=>he.id===E);ne&&yt(ne)}catch($){console.error("Failed to load current project:",$)}};l.useEffect(()=>{const E=$=>{Ie.current&&!Ie.current.contains($.target)&&A(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),l.useEffect(()=>{let E=null;if(s)E=parseInt(s),localStorage.setItem("currentProjectId",E.toString());else{const $=localStorage.getItem("currentProjectId");$&&(E=parseInt($))}E&&!isNaN(E)?(B(E),T({projectId:E}),!s&&!t&&!o&&r(`/tag-database/${E}`,{replace:!0})):!t&&!o&&(B(null),we())},[s,T,r,t,o]);const we=async()=>{try{U(!0);const E=await se.getProjects();J(E)}catch(E){console.error("Failed to load projects:",E)}finally{U(!1)}};l.useEffect(()=>{L&&(p({projectId:L}),Be||qe(L))},[L]),l.useEffect(()=>{const E=$=>{const{projectId:ne,importedCount:he}=$.detail;ne===L&&Qe(!0)};return window.addEventListener("pandaura:tags-imported",E),()=>{window.removeEventListener("pandaura:tags-imported",E)}},[L]);const Ne=v.filter(E=>!(b.search&&!E.name.toLowerCase().includes(b.search.toLowerCase())&&!E.description.toLowerCase().includes(b.search.toLowerCase())||b.vendor&&b.vendor!=="all"&&E.vendor!==b.vendor||b.type&&b.type!=="all"&&E.type!==b.type||b.dataType&&b.dataType!=="all"&&E.data_type!==b.dataType||b.scope&&b.scope!=="all"&&E.scope!==b.scope||b.tagType&&b.tagType!=="all"&&E.tag_type!==b.tagType||b.isAIGenerated&&!E.is_ai_generated)),X=async E=>{const $=R[E];if(!$||Object.keys($).length===0)return;const ne=M.current[E];ne&&(clearTimeout(ne),delete M.current[E]);try{await w(E,$),a({variant:"success",title:"Tag Updated",message:"Changes saved",duration:3e3}),V(he=>{const Pe={...he};return delete Pe[E],Pe})}catch(he){console.error("Error flushing tag update:",he);const Pe=he instanceof Error?he.message:"Failed to update tag";a({variant:"error",title:"Update Failed",message:Pe,duration:5e3})}},He=(E,$,ne)=>{try{if(!v.find(Pe=>Pe.id===E))throw new Error("Tag not found");V(Pe=>({...Pe,[E]:{...Pe[E]||{},[$]:ne}}))}catch(he){console.error("Error updating tag field:",he);const Pe=he instanceof Error?he.message:"Failed to update tag field";a({variant:"error",title:"Update Failed",message:Pe,duration:5e3})}},on=E=>{ae(E),le(!0)},ln=async()=>{if(G){ft(!0);try{await S(G.id),a({variant:"success",title:"Tag Deleted",message:`Tag "${G.name}" has been successfully deleted.`,duration:4e3}),le(!1),ae(null)}catch(E){console.error("Error deleting tag:",E),a({variant:"error",title:"Delete Failed",message:E instanceof Error?E.message:"Failed to delete tag. Please try again.",duration:5e3})}finally{ft(!1)}}},dr=()=>{le(!1),ae(null)},cn=async E=>{try{await X(parseInt(E)),D(null)}catch($){console.error("Error saving tag:",$)}},dn=()=>{if(!L){a({variant:"error",title:"No Project Selected",message:"Please select a project first before adding tags.",duration:4e3});return}W(!0)},un=async E=>{try{await y(E),await c()}catch($){throw console.error("Error creating tag:",$),$}},mn=()=>{if(!L){a({variant:"error",message:"Please select a project first"});return}bt(!0),A(!1)},hn=()=>{if(!L){a({variant:"error",title:"No Project Selected",message:"Please select a project first before importing tags.",duration:3e3});return}Me(!0)},xn=E=>{a({variant:"success",title:"Import Successful",message:`Successfully imported ${E} tags.`,duration:5e3}),c()},pn=async E=>{if(!L){alert("Please select a project first"),a({variant:"error",message:"Please select a project first"});return}try{const $=await oe.exportTags({project_id:L,format:E});a({variant:"success",message:$.message}),A(!1)}catch($){console.error("Error exporting tags:",$),a({variant:"error",message:"Failed to export tags: "+($ instanceof Error?$.message:"Unknown error")})}},jt=(E,$)=>{const ne=$==="all"||$===""?void 0:$;if(E==="isAIGenerated"){T({isAIGenerated:ne==="true"?!0:ne==="false"?!1:void 0});return}if(E==="dataType"){T({dataType:ne});return}if(E==="tagType"){T({tagType:ne});return}T({[E]:ne})},gn=()=>{T({projectId:L||void 0,search:void 0,vendor:void 0,type:void 0,dataType:void 0,scope:void 0,tagType:void 0,isAIGenerated:void 0})};return e.jsxs("div",{className:"flex flex-col h-full bg-background text-primary",children:[N&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mx-6 mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:N}),e.jsx("button",{onClick:j,className:"text-red-500 hover:text-red-700",children:e.jsx(Re,{className:"w-4 h-4"})})]})}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-30 bg-white border-b border-light px-6 py-4 flex justify-between items-center shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-primary",children:"Tag Database Manager"}),L&&e.jsxs("div",{className:"text-sm text-secondary mt-1",children:["Project ID: ",L,z.length>0&&e.jsxs("span",{className:"ml-2",children:["-"," ",z.find(E=>E.id===L)?.project_name||"Unknown Project"]})]})]}),!t&&e.jsx("div",{className:"flex items-center gap-2",children:i?e.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[e.jsx(ht,{className:"w-4 h-4 animate-pulse"}),e.jsx("span",{className:"text-xs",children:"Connecting..."})]}):n?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(ma,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Live Sync"}),Wt&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(Updated"," ",Math.round((Date.now()-Wt)/1e3),"s ago)"]})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[e.jsx(ua,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Offline"})]})})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("button",{onClick:hn,disabled:x||!L,className:"bg-primary text-white px-4 py-2 rounded-md flex items-center gap-2 text-sm hover:bg-primary transition-colors cursor-pointer disabled:opacity-50",title:"Import Beckhoff tags from CSV or XML files",children:[e.jsx(It,{className:"w-4 h-4"}),"Import Tags"]}),e.jsx("div",{className:"relative",ref:Ie,children:g&&e.jsx("div",{className:"absolute right-0 mt-2 bg-white border border-light rounded-md shadow-md w-56 z-50",children:["Rockwell CSV","TIA XML","Beckhoff XLS"].map(E=>e.jsx("div",{onClick:()=>pn(E.toLowerCase()),className:"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer transition",children:E},E))})}),e.jsxs("button",{onClick:mn,disabled:x||!L||v.length===0,className:"bg-primary border border-light px-4 py-2 rounded-md flex items-center gap-2 text-sm hover:bg-primary transition-colors cursor-pointer disabled:opacity-50 text-white hover:text-white",title:v.length===0?"No tags to export. Please add tags first.":"Export tags in vendor-specific formats",children:[e.jsx(Je,{className:"w-4 h-4"}),"Export your tags"]}),e.jsx("button",{onClick:c,disabled:x,className:"bg-white border border-light px-2 py-2 rounded-md text-sm hover:bg-accent-light transition-colors cursor-pointer disabled:opacity-50",children:e.jsx(ye,{className:`w-4 h-4 ${x?"animate-spin":""}`})})]})]}),e.jsxs("div",{className:"sticky top-[64px] z-20 bg-white border-b border-light px-6 py-3 flex flex-wrap items-center gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search tags...",value:b.search||"",onChange:E=>jt("search",E.target.value),className:"border border-light rounded px-4 py-2 text-sm w-64 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsxs("select",{value:b.vendor||"all",onChange:E=>jt("vendor",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Vendors"}),e.jsx("option",{value:"rockwell",children:"Rockwell"}),e.jsx("option",{value:"siemens",children:"Siemens"}),e.jsx("option",{value:"beckhoff",children:"Beckhoff"})]}),e.jsxs("select",{value:b.tagType||"all",onChange:E=>jt("tagType",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Tag Types"}),e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"}),e.jsx("option",{value:"memory",children:"Memory"})]}),e.jsxs("select",{value:b.type||"all",onChange:E=>jt("type",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Data Types"}),e.jsx("option",{value:"BOOL",children:"BOOL"}),e.jsx("option",{value:"INT",children:"INT"}),e.jsx("option",{value:"REAL",children:"REAL"}),e.jsx("option",{value:"DINT",children:"DINT"}),e.jsx("option",{value:"STRING",children:"STRING"})]}),e.jsxs("select",{value:b.scope||"all",onChange:E=>jt("scope",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Scopes"}),e.jsx("option",{value:"global",children:"Global"}),e.jsx("option",{value:"local",children:"Local"}),e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.isAIGenerated||!1,onChange:E=>T({isAIGenerated:E.target.checked?!0:void 0}),className:"accent-primary cursor-pointer"}),"Show AI-generated only"]}),e.jsxs("button",{onClick:dn,disabled:x,className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(mt,{className:"w-4 h-4"}),"Add Tag"]})]}),x&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(ye,{className:"w-6 h-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-primary",children:"Loading tags..."})]}),e.jsxs("div",{className:"flex-1 px-6 py-4 pb-32 overflow-auto",children:[e.jsxs("div",{className:"bg-white border border-light rounded-md shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Tag Name"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Description"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Type"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Data Type"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Address"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Default"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Vendor"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Scope"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Actions"})]})}),e.jsx("tbody",{children:Ne.map(E=>e.jsxs("tr",{className:"border-b border-light hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[O===E.id?e.jsx("input",{type:"text",value:R[E.id]?.name??E.name,onChange:$=>He(E.id,"name",$.target.value),className:"border border-light rounded px-2 py-1 text-sm w-full font-mono",autoFocus:!0}):e.jsx("span",{className:"font-mono text-sm",children:E.name}),E.is_ai_generated&&e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-1 rounded",children:"AI"})]})}),e.jsx("td",{className:"p-3",children:O===E.id?e.jsx("input",{type:"text",value:R[E.id]?.description??E.description,onChange:$=>He(E.id,"description",$.target.value),className:"border border-light rounded px-2 py-1 text-sm w-full"}):e.jsx("span",{className:"text-sm text-muted",children:E.description})}),e.jsx("td",{className:"p-3",children:O===E.id?e.jsxs("select",{value:R[E.id]?.tag_type??E.tag_type,onChange:$=>He(E.id,"tag_type",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"}),e.jsx("option",{value:"memory",children:"Memory"})]}):e.jsx("span",{className:`text-xs px-2 py-1 rounded ${E.tag_type==="input"?"bg-blue-100 text-blue-700":E.tag_type==="output"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:E.tag_type.charAt(0).toUpperCase()+E.tag_type.slice(1)})}),e.jsx("td",{className:"p-3",children:O===E.id?e.jsx("select",{value:R[E.id]?.type??E.type,onChange:$=>He(E.id,"type",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:Wd(E.vendor).map($=>e.jsx("option",{value:$,children:$},$))}):e.jsx("span",{className:"text-sm font-mono",children:E.type})}),e.jsx("td",{className:"p-3",children:O===E.id?e.jsx("input",{type:"text",value:R[E.id]?.address??E.address,onChange:$=>He(E.id,"address",$.target.value),className:"border border-light rounded px-2 py-1 text-sm font-mono w-20"}):e.jsx("span",{className:"text-sm font-mono text-muted",children:E.address})}),e.jsx("td",{className:"p-3",children:O===E.id?e.jsx("input",{type:"text",value:R[E.id]?.default_value??E.default_value,onChange:$=>He(E.id,"default_value",$.target.value),className:"border border-light rounded px-2 py-1 text-sm font-mono w-16"}):e.jsx("span",{className:"text-sm font-mono text-muted",children:E.default_value})}),e.jsx("td",{className:"p-3",children:O===E.id?e.jsxs("select",{value:R[E.id]?.vendor??E.vendor,onChange:$=>He(E.id,"vendor",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"rockwell",children:"Rockwell"}),e.jsx("option",{value:"siemens",children:"Siemens"}),e.jsx("option",{value:"beckhoff",children:"Beckhoff"})]}):e.jsx("span",{className:`text-xs px-2 py-1 rounded ${E.vendor==="rockwell"?"bg-red-100 text-red-700":E.vendor==="siemens"?"bg-teal-100 text-teal-700":"bg-orange-100 text-orange-700"}`,children:E.vendor.charAt(0).toUpperCase()+E.vendor.slice(1)})}),e.jsx("td",{className:"p-3",children:O===E.id?e.jsxs("select",{value:R[E.id]?.scope??E.scope,onChange:$=>He(E.id,"scope",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"global",children:"Global"}),e.jsx("option",{value:"local",children:"Local"}),e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"})]}):e.jsx("span",{className:"text-sm",children:E.scope})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex gap-1",children:O===E.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>cn(E.id.toString()),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{V($=>{const ne={...$};return delete ne[E.id],ne}),D(null)},className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:e.jsx(Re,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D(E.id),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:e.jsx(ri,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>on(E),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:e.jsx(Ft,{className:"w-4 h-4"})})]})})})]},E.id))})]}),Ne.length===0&&!x&&e.jsxs("div",{className:"text-center py-8 text-muted",children:[e.jsx("div",{className:"mb-2",children:"No tags match your current filters"}),e.jsx("button",{onClick:gn,className:"text-accent hover:underline text-sm",children:"Clear all filters"})]})]}),C.total>0&&e.jsxs("div",{className:"mt-4 text-center text-sm text-muted",children:["Showing ",Ne.length," of ",C.total," tags (Page"," ",C.page," of ",C.totalPages,")"]})]}),e.jsx(Ae,{isOpen:Y,onClose:dr,title:"Confirm Delete",size:"md",actions:e.jsxs(e.Fragment,{children:[e.jsx(F,{variant:"outline",onClick:dr,disabled:Ue,children:"Cancel"}),e.jsx(F,{variant:"primary",onClick:ln,loading:Ue,className:"bg-red-600 hover:bg-red-700 text-white",children:Ue?"Deleting...":"Delete Tag"})]}),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(_t,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900 mb-2",children:["Are you sure you want to delete the tag"," ",e.jsxs("strong",{children:['"',G?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. The tag will be permanently removed from the database."}),G&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded border text-sm",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",G.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",G.address]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Vendor:"})," ",G.vendor]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Scope:"})," ",G.scope]})]})})]})]})}),L&&e.jsx(Gd,{isOpen:Z,onClose:()=>W(!1),onSuccess:()=>W(!1),projectId:L,onCreate:un}),L&&Be&&e.jsx(Ld,{isOpen:Ht,onClose:()=>bt(!1),projectId:L,projectName:Be.project_name,tags:v}),L&&Be&&e.jsx(Md,{isOpen:Gt,onClose:()=>Me(!1),projectId:L,projectName:Be.project_name,onSuccess:xn})]})]})},ts=t=>e.jsx(Od,{children:e.jsx(Yd,{...t})});function Jd(){const t=de(),s=Rt(),{user:r,organizations:a,selectedOrg:o,logout:n,isAuthenticated:i,isLoading:d}=Ee(),[m,u]=l.useState("overview"),[h,f]=l.useState(!1),[k,v]=l.useState(!1);l.useEffect(()=>{!d&&!i&&t("/signin",{replace:!0})},[d,i,t]);const[x,N]=l.useState({name:r?.fullName||"Loading...",email:r?.email||"Loading...",company:o?.org_name||"Loading...",timezone:"America/New_York",language:"English",tier:"Enterprise",lastLogin:"Loading..."});l.useEffect(()=>{r&&o&&N(D=>({...D,name:r.fullName,email:r.email,company:o.org_name||"Unknown Organization",tier:o.role||"Enterprise"}))},[r,o]);const[b,C]=l.useState({defaultVendor:"Rockwell",defaultExportFormat:"PDF",documentBranding:!0,aiVerbosity:"Detailed",defaultModule:"Logic Studio",codeFontSize:14,notifications:{system:!0,aiUpdates:!0,docGeneration:!1}}),[p]=l.useState([{name:"Sarah Johnson",email:"sarah@example.com",role:"Admin",lastActive:"2 hours ago"},{name:"Mike Davis",email:"mike@example.com",role:"Engineer",lastActive:"1 day ago"},{name:"Lisa Chen",email:"lisa@example.com",role:"Viewer",lastActive:"3 days ago"}]),[y]=l.useState([{name:"Production API",created:"Jul 15, 2025",lastUsed:"Aug 4, 2025",key:"pk_live_..."},{name:"Development API",created:"Jun 22, 2025",lastUsed:"Aug 2, 2025",key:"pk_test_..."}]),w=D=>{console.log(`Saving ${D} changes`),alert(`${D} settings saved successfully!`)},S=()=>{const D=s.state?.from;if(D)t(D);else{const R=window.history.length>1;t(R?-1:"/home")}},T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:x.name,onChange:D=>N(R=>({...R,name:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:x.email,onChange:D=>N(R=>({...R,email:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:x.company,onChange:D=>N(R=>({...R,company:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",disabled:!0,placeholder:"Based on current organization"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Timezone"}),e.jsxs("select",{value:x.timezone,onChange:D=>N(R=>({...R,timezone:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"America/New_York",children:"Eastern Time (EST/EDT)"}),e.jsx("option",{value:"America/Chicago",children:"Central Time (CST/CDT)"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time (MST/MDT)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PST/PDT)"}),e.jsx("option",{value:"UTC",children:"UTC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Language"}),e.jsxs("select",{value:x.language,onChange:D=>N(R=>({...R,language:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Spanish",children:"Español"}),e.jsx("option",{value:"German",children:"Deutsch"}),e.jsx("option",{value:"French",children:"Français"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Logo (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(It,{className:"w-8 h-8 text-muted mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted",children:"Upload PNG logo for document exports"}),e.jsx("button",{className:"mt-2 text-accent hover:underline text-sm",children:"Browse Files"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"System alerts and maintenance notifications"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"AI model updates and new features"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"Document generation completion alerts"})]})]})]}),e.jsxs("button",{onClick:()=>w("Profile"),className:"mt-6 bg-primary text-white px-6 py-2 rounded flex items-center gap-2 hover:bg-secondary transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"}),"Save Changes"]})]}),e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Organization & Account Details"}),a.length>1&&e.jsxs("span",{className:"text-xs text-muted bg-blue-50 px-2 py-1 rounded",children:[a.length," organizations"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Current Organization"}),e.jsx("p",{className:"text-lg font-semibold text-blue-900",children:o?.org_name||"Loading..."}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:o?.industry||"Industry not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:"Your Role & Permissions"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${o?.role==="Admin"?"bg-red-100 text-red-800 border border-red-200":o?.role==="Editor"?"bg-blue-100 text-blue-800 border border-blue-200":o?.role==="Viewer"?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:o?.role||"Loading..."}),e.jsx("span",{className:"text-sm text-muted",children:o?.role==="Admin"?"Full system access":o?.role==="Editor"?"Create & modify content":o?.role==="Viewer"?"View-only access":""})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:"Account Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?.twoFactorEnabled?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${r?.twoFactorEnabled?"text-green-700":"text-red-700"}`,children:r?.twoFactorEnabled?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Account ID"}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:r?.userId?.substring(0,8)||"..."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:"Organization Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"Size:"}),e.jsx("span",{className:"font-medium",children:o?.size||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"License:"}),e.jsx("span",{className:"font-medium",children:"On-Premise"})]})]})]})]})]}),a&&a.length>1&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-light",children:[e.jsxs("h4",{className:"text-sm font-medium mb-3",children:["Your Organizations (",a.length,")"]}),e.jsx("div",{className:"space-y-2",children:a.map(D=>e.jsx("div",{className:`p-3 rounded-lg border ${D.org_id===o?.org_id?"border-accent bg-accent/5":"border-light"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:D.org_name}),e.jsx("p",{className:"text-sm text-muted",children:D.industry||"Industry not specified"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${D.role==="Admin"?"bg-red-100 text-red-700":D.role==="Editor"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:D.role}),D.org_id===o?.org_id&&e.jsx("p",{className:"text-xs text-accent mt-1",children:"Current"})]})]})},D.org_id))})]})]})]}),j=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Platform Preferences"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default PLC Vendor"}),e.jsxs("select",{value:b.defaultVendor,onChange:D=>C(R=>({...R,defaultVendor:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Rockwell",children:"Rockwell Automation"}),e.jsx("option",{value:"Siemens",children:"Siemens"}),e.jsx("option",{value:"Beckhoff",children:"Beckhoff"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Export Format"}),e.jsxs("select",{value:b.defaultExportFormat,onChange:D=>C(R=>({...R,defaultExportFormat:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"PDF",children:"PDF"}),e.jsx("option",{value:"DOCX",children:"Microsoft Word (DOCX)"}),e.jsx("option",{value:"ZIP",children:"ZIP Bundle"}),e.jsx("option",{value:"XLSX",children:"Excel (XLSX)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"AI Assistant Behavior"}),e.jsxs("select",{value:b.aiVerbosity,onChange:D=>C(R=>({...R,aiVerbosity:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Brief",children:"Brief replies"}),e.jsx("option",{value:"Detailed",children:"Detailed explanations"}),e.jsx("option",{value:"Verbose",children:"Verbose with examples"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Module on Login"}),e.jsxs("select",{value:b.defaultModule,onChange:D=>C(R=>({...R,defaultModule:D.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Pandaura AS",children:"Pandaura AS"}),e.jsx("option",{value:"Logic Studio",children:"Logic Studio"}),e.jsx("option",{value:"AutoDocs",children:"AutoDocs"}),e.jsx("option",{value:"Tag Database Manager",children:"Tag Database Manager"}),e.jsx("option",{value:"Projects",children:"Projects"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.documentBranding,onChange:D=>C(R=>({...R,documentBranding:D.target.checked})),className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"Include company branding on exported documents"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Code Editor Font Size"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"10",max:"20",value:b.codeFontSize,onChange:D=>C(R=>({...R,codeFontSize:parseInt(D.target.value)})),className:"flex-1"}),e.jsxs("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:[b.codeFontSize,"px"]})]})]}),e.jsxs("button",{onClick:()=>w("Preferences"),className:"mt-6 bg-primary text-white px-6 py-2 rounded flex items-center gap-2 hover:bg-secondary transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"}),"Save Preferences"]})]})}),c=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Team Management"}),e.jsx("span",{className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded",children:"Enterprise Plan"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Invite New Member"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",placeholder:"Enter email address...",className:"flex-1 border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsxs("select",{className:"border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Engineer",children:"Engineer"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Viewer",children:"Viewer"})]}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors",children:"Invite"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Team Members (3/10 seats used)"}),e.jsx("div",{className:"space-y-2",children:p.map((D,R)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:D.name}),e.jsx("div",{className:"text-xs text-muted",children:D.email})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs text-muted",children:D.lastActive}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:D.role}),e.jsx("button",{className:"text-muted hover:text-red-500",children:e.jsx(Us,{className:"w-4 h-4"})})]})]},R))})]})]})}),g=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Security & Authentication"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Change Password"}),e.jsxs("div",{className:"space-y-3 max-w-md",children:[e.jsx("input",{type:"password",placeholder:"Current password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsx("input",{type:"password",placeholder:"New password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors",children:"Update Password"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm",children:"2FA is enabled via TOTP app"})]}),e.jsx("button",{onClick:()=>v(!0),className:"text-sm text-green-600 hover:underline",children:"Manage"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Active Sessions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(la,{className:"w-4 h-4 text-muted"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Current Session"}),e.jsx("div",{className:"text-xs text-muted",children:"Chrome on macOS • 192.168.1.100"})]})]}),e.jsx("span",{className:"text-xs text-green-600",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zo,{className:"w-4 h-4 text-muted"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:"Mobile Browser"}),e.jsx("div",{className:"text-xs text-muted",children:"Safari on iOS • 2 hours ago"})]})]}),e.jsx("button",{className:"text-xs text-red-600 hover:underline",children:"Terminate"})]})]}),e.jsx("button",{className:"mt-3 text-sm text-red-600 hover:underline",children:"Sign Out Everywhere"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Session Timeout"}),e.jsxs("select",{className:"border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"30",children:"30 minutes"}),e.jsx("option",{value:"120",children:"2 hours"}),e.jsx("option",{value:"480",children:"8 hours"}),e.jsx("option",{value:"never",children:"Never"})]})]})]})]})}),A=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"API Keys"}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors",children:"Generate New Key"})]}),e.jsx("div",{className:"space-y-3",children:y.map((D,R)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-light rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:D.name}),e.jsxs("div",{className:"text-xs text-muted",children:["Created: ",D.created," • Last used: ",D.lastUsed]}),e.jsxs("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded mt-1 inline-block",children:[D.key,"••••••••••••••••"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-sm text-muted hover:text-primary",children:"Regenerate"}),e.jsx("button",{className:"text-sm text-red-600 hover:text-red-700",children:"Revoke"})]})]},R))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_t,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"On-Premise Security:"})," API keys are stored locally and encrypted. All API calls are processed within your network infrastructure."]})]})})]})}),O=[{id:"overview",label:"Overview",icon:ca},{id:"preferences",label:"Preferences",icon:tr},...x.tier!=="Individual"?[{id:"team",label:"Team Settings",icon:gs}]:[],{id:"billing",label:"Billing & Plan",icon:eo},{id:"api",label:"API Keys",icon:No},{id:"security",label:"Security / 2FA",icon:Ve}];return e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[d||!r?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted",children:"Loading profile..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white border-b border-light px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2 text-muted hover:text-primary",title:"Go back",children:[e.jsx(Te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center font-bold text-lg",children:x.name?x.name.split(" ").map(D=>D[0]).join(""):"??"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:x.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${o?.role==="Admin"?"bg-red-100 text-red-700":o?.role==="Editor"?"bg-blue-100 text-blue-700":o?.role==="Viewer"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:o?.role||x.tier}),o?.org_name&&e.jsxs("span",{children:["@ ",o.org_name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Last login: ",x.lastLogin]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"text-sm text-muted hover:text-primary",children:"Edit Profile"}),e.jsxs("button",{onClick:()=>{n(),t("/signin")},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",children:[e.jsx(Us,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("nav",{className:"w-64 bg-white border-r border-light p-4",children:e.jsx("div",{className:"space-y-1",children:O.map(D=>{const R=D.icon;return e.jsxs("button",{onClick:()=>u(D.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded text-left transition-colors ${m===D.id?"bg-accent-light text-accent":"text-muted hover:text-primary hover:bg-gray-50"}`,children:[e.jsx(R,{className:"w-4 h-4"}),D.label]},D.id)})})}),e.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[m==="overview"&&T(),m==="preferences"&&j(),m==="team"&&c(),m==="security"&&g(),m==="api"&&A(),m==="billing"&&e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Billing & Plan Management"}),e.jsx("p",{className:"text-muted mb-4",children:"On-premise deployments use local license management"}),e.jsx("div",{className:"text-sm text-left max-w-md mx-auto",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Role:"}),e.jsx("span",{className:"font-medium",children:o?.role||x.tier})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Organization:"}),e.jsx("span",{className:"font-medium",children:o?.org_name||"Loading..."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"License Type:"}),e.jsx("span",{className:"font-medium",children:"On-Premise"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Access Level:"}),e.jsx("span",{className:"font-medium",children:o?.role==="Admin"?"Full Access":o?.role==="Editor"?"Edit & View":o?.role==="Viewer"?"View Only":"Loading..."})]})]})})]})]})]})]}),e.jsx(za,{})]})}function Xd(){return e.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-48 w-auto animate-pulse filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("p",{className:"text-primary text-lg font-semibold animate-pulse",children:"Loading Pandaura..."})]})})}function Kd({email:t,onVerify:s,onBack:r,isLoading:a=!1}){const[o,n]=l.useState(""),[i,d]=l.useState(!1),[m,u]=l.useState(""),[h,f]=l.useState(0);l.useEffect(()=>{o.length===6&&!a&&k()},[o,a]);const k=async()=>{if(o.length!==6){u("Please enter a 6-digit code");return}u("");try{const N=await s(o,i);N.success||(f(b=>b+1),u(N.message||"Invalid authentication code"),n(""))}catch(N){f(b=>b+1),u(N.message||"Verification failed"),n("")}},v=N=>{const b=N.target.value.replace(/[^0-9]/g,"");b.length<=6&&(n(b),u(""))},x=N=>{N.key==="Enter"&&o.length===6&&!a&&k()};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[e.jsx("img",{src:ge,alt:"Pandaura AS Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mt-3",children:"Two-Factor Authentication"}),e.jsxs("p",{className:"text-sm text-muted text-center mt-2 max-w-md",children:["Enter the 6-digit code from your authenticator app for ",e.jsx("strong",{children:t})]})]}),e.jsx("div",{className:"w-full max-w-sm bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"twofa-code",name:"twofa-code",type:"text",inputMode:"numeric",pattern:"[0-9]*",required:!0,autoFocus:!0,autoComplete:"one-time-code",maxLength:6,value:o,onChange:v,onKeyPress:x,disabled:a,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all text-center text-2xl tracking-[0.5em] font-mono",placeholder:"000000"}),e.jsx("label",{htmlFor:"twofa-code",className:`absolute left-4 top-2 text-sm text-muted transition-all \r
                           peer-focus:text-xs peer-focus:text-secondary`,children:"Authentication Code"})]}),e.jsx("div",{className:"flex justify-center space-x-2",children:Array.from({length:6},(N,b)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${b<o.length?"bg-accent":"bg-light"}`},b))}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer text-sm text-muted mt-4",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:N=>d(N.target.checked),disabled:a,className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{children:"Trust this device for 30 days"})]})]}),m&&e.jsxs("div",{className:"text-error text-sm text-center bg-error-light border border-error/20 rounded-md p-3 flex items-center justify-center",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),m,h>0&&e.jsxs("span",{className:"ml-2 text-xs",children:["(Attempt ",h,"/5)"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"button",onClick:k,disabled:o.length!==6||a,className:"w-full bg-primary hover:bg-secondary disabled:bg-disabled disabled:text-muted text-white py-3 rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:a?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Verifying..."]}):"Verify & Sign In"}),e.jsxs("button",{type:"button",onClick:r,disabled:a,className:"w-full text-muted hover:text-primary text-sm transition-colors flex items-center justify-center",children:[e.jsx(Te,{className:"w-4 h-4 mr-1"}),"Back to login"]})]}),h>=3&&e.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Having trouble?"})," Make sure your device's time is synchronized and you're using the latest code from your authenticator app."]})})]})}),e.jsx("div",{className:"mt-8 pt-4 text-center space-x-4 text-xs text-muted z-10",children:e.jsx("span",{children:"Need help? Contact your system administrator"})})]})}function Qd({organizations:t,onOrgSelect:s,userEmail:r,isLoading:a=!1}){const[o,n]=l.useState(null),i=()=>{o&&s(o)},d=u=>{switch(u){case"Admin":return"text-red-600 bg-red-50 border-red-200";case"Editor":return"text-blue-600 bg-blue-50 border-blue-200";case"Viewer":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},m=u=>u?{startup:"1-10 employees",small:"11-50 employees",medium:"51-200 employees",large:"201-1000 employees",enterprise:"1000+ employees"}[u]||u:"";return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[e.jsx("img",{src:ge,alt:"Pandaura AS Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mt-3",children:"Select Organization"}),e.jsx("p",{className:"text-sm text-muted text-center mt-2 max-w-md",children:"You have access to multiple organizations. Choose which one to sign in to."}),e.jsxs("p",{className:"text-xs text-secondary text-center mt-1",children:["Signed in as: ",e.jsx("strong",{children:r})]})]}),e.jsx("div",{className:"w-full max-w-md bg-surface border border-light rounded-lg shadow-card z-10 p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:"Your Organizations"}),e.jsx("div",{className:"space-y-3",children:t.map(u=>e.jsx("div",{children:e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all hover:border-accent/50 ${o?.org_id===u.org_id?"border-accent bg-accent/5":"border-light bg-transparent"}`,children:[e.jsx("input",{type:"radio",name:"organization",value:u.org_id,checked:o?.org_id===u.org_id,onChange:()=>n(u),disabled:a,className:"sr-only"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Qs,{className:"w-8 h-8 text-accent"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-primary",children:u.org_name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium border ${d(u.role)}`,children:u.role}),u.industry&&e.jsx("span",{className:"text-xs text-muted",children:u.industry})]}),u.size&&e.jsxs("p",{className:"text-xs text-muted mt-1 flex items-center",children:[e.jsx(gs,{className:"w-3 h-3 mr-1"}),m(u.size)]})]})]}),o?.org_id===u.org_id&&e.jsx(Ye,{className:"w-5 h-5 text-accent flex-shrink-0"})]})})]})},u.org_id))}),e.jsx("div",{className:"pt-4",children:e.jsx(F,{onClick:i,disabled:!o||a,className:"w-full",children:a?"Signing in...":"Continue"})})]})}),e.jsx("div",{className:"mt-8 pt-4 text-center text-xs text-muted z-10",children:e.jsx("p",{children:"You can switch organizations later from your profile settings"})})]})}const Hr=["The future of automation isn't wired — it's written.","Logic is your language. We just make it speak faster.","Great integrators don't copy-paste. They build systems that last.","Your plant doesn't wait. Neither should your tools.","Structured text. Unstructured power.","You didn't choose automation for paperwork.","Code once. Deploy everywhere. Trust always.","Real engineers ship reliable logic.","Automation that adapts, not breaks.","Your vision. Our intelligence. Perfect integration."];function Zd(){const t=de(),{login:s,setSelectedOrg:r,organizations:a,isAuthenticated:o,isLoading:n}=Ee(),[i,d]=l.useState(""),[m,u]=l.useState(""),[h,f]=l.useState(!1),[k,v]=l.useState(!1),[x,N]=l.useState("credentials"),[b,C]=l.useState([]),[p,y]=l.useState(""),[w,S]=l.useState(!1),[T,j]=l.useState(!1);l.useEffect(()=>{!n&&o&&!T&&t("/home",{replace:!0})},[o,n,T,t]);const[c,g]=l.useState(""),[A,O]=l.useState([]);l.useEffect(()=>{let B;return T&&(console.log("🎉 Splash screen shown - starting 3 second timer"),B=window.setTimeout(()=>{console.log("🎉 Splash timeout completed - navigating to home"),j(!1),t("/home")},3e3)),()=>{B&&(console.log("🧹 Cleaning up splash timeout"),window.clearTimeout(B))}},[T,t]),l.useEffect(()=>{const B=Hr.filter(ie=>!A.includes(ie)),z=B.length>0?B:Hr,J=z[Math.floor(Math.random()*z.length)];g(J),O(ie=>[...ie,J])},[]);const D=async B=>{if(B.preventDefault(),!i.trim()||!m.trim()){y("Please enter both email and password.");return}S(!0),y("");try{const z=await s(i.trim(),m);z.requiresTwoFactor?N("twoFactor"):z.success?M():y(z.message||"Invalid credentials")}catch(z){console.error("Login error:",z),y(z.message||"Login failed. Please try again.")}finally{S(!1)}},R=async(B,z)=>{S(!0),y("");try{const J=await s(i.trim(),m,B);return J.success?(console.log("🔐 2FA verification successful"),z&&localStorage.setItem("pandaura_trusted_device","true"),console.log("🔐 About to call handleSuccessfulLogin"),M(),{success:!0}):{success:!1,message:J.message||"Invalid authentication code"}}catch(J){return console.error("2FA verification error:",J),{success:!1,message:J.message||"Verification failed"}}finally{console.log("🔐 Setting isLoading to false"),S(!1)}},V=B=>{r(B),N("complete"),t("/home")},M=()=>{console.log("🎉 handleSuccessfulLogin called - setting showSplash to true"),j(!0)},L=()=>{N("credentials"),y("")};return console.log("🔍 Render check - showSplash:",T,"currentStep:",x,"isLoading:",w),T?(console.log("🎉 Showing splash screen"),e.jsx(Xd,{})):x==="twoFactor"?(console.log("🔐 Showing 2FA screen"),e.jsx(Kd,{email:i,onVerify:R,onBack:L,isLoading:w})):x==="orgSelection"&&b.length>1?e.jsx(Qd,{organizations:b,onOrgSelect:V,userEmail:i,isLoading:w}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[e.jsx("img",{src:ge,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-3xl font-bold text-primary text-center mt-4",children:"Pandaura AS"}),e.jsx("h2",{className:"text-lg text-secondary text-center",children:"Industrial Automation Suite"}),c&&e.jsx("div",{className:"mt-4 text-center max-w-md animate-fade-in",children:e.jsxs("p",{className:"text-sm text-muted italic px-4 py-2 bg-surface/50 rounded-md border border-light/50",children:['"',c,'"']})})]}),e.jsxs("div",{className:"w-full max-w-sm bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary text-center mb-6",children:"Sign in to Pandaura AS"}),e.jsxs("form",{className:"space-y-6",onSubmit:D,autoComplete:"on",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"username",autoFocus:!0,value:i,onChange:B=>d(B.target.value),disabled:w,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all disabled:opacity-50",placeholder:" "}),e.jsx("label",{htmlFor:"email",className:`absolute left-4 top-2 text-sm text-muted transition-all \r
                         peer-focus:text-xs peer-focus:text-secondary peer-placeholder-shown:text-base peer-placeholder-shown:top-4 peer-placeholder-shown:text-disabled`,children:"Email Address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:k?"text":"password",required:!0,autoComplete:"current-password",value:m,onChange:B=>u(B.target.value),disabled:w,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all disabled:opacity-50",placeholder:" "}),e.jsx("label",{htmlFor:"password",className:`absolute left-4 top-2 text-sm text-muted transition-all \r
                         peer-focus:text-xs peer-focus:text-secondary peer-placeholder-shown:text-base peer-placeholder-shown:top-4 peer-placeholder-shown:text-disabled`,children:"Password"}),e.jsx("button",{type:"button",onClick:()=>v(B=>!B),disabled:w,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary transition-colors disabled:opacity-50",children:k?e.jsx(is,{className:"w-5 h-5"}):e.jsx(ut,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer text-sm text-muted",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:B=>f(B.target.checked),disabled:w,className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-accent hover:text-secondary transition-colors",onClick:()=>{alert("Password reset functionality will be implemented soon.")},children:"Forgot password?"})]}),p&&e.jsx("div",{className:"text-error text-sm text-center bg-error-light border border-error/20 rounded-md p-3",children:p}),e.jsx("button",{type:"submit",disabled:w,className:"w-full bg-primary hover:bg-secondary disabled:bg-disabled disabled:text-muted text-white py-3 rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:w?"Signing in...":"Continue"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-light"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-surface text-muted",children:"or continue with"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{type:"button",disabled:!0,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-light rounded-md shadow-sm bg-surface text-sm font-medium text-muted hover:bg-light disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qs,{className:"w-5 h-5 mr-2"}),"Enterprise SSO (Coming Soon)"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-light text-center space-x-4 text-xs text-muted",children:[e.jsx("button",{onClick:()=>t("/terms"),className:"hover:text-primary transition-colors",children:"Terms of Use"}),e.jsx("span",{children:"•"}),e.jsx("button",{onClick:()=>t("/privacy"),className:"hover:text-primary transition-colors",children:"Privacy Policy"})]})]}),e.jsxs("div",{className:"mt-8 text-center text-sm text-muted z-10",children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>t("/signup"),className:"text-accent hover:text-secondary font-medium transition-colors",children:"Sign up here"})]})]})}const ir=t=>{switch(t.toLowerCase()){case"completed":return"bg-green-100 text-green-700";case"in progress":return"bg-blue-100 text-blue-700";case"active":return"bg-blue-100 text-blue-700";case"archived":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},lr=t=>{if(!t||t==="N/A")return"bg-gray-100 text-gray-500";switch(t.toLowerCase()){case"rockwell":case"rockwell automation":return"bg-red-100 text-red-700";case"siemens":return"bg-teal-100 text-teal-700";case"beckhoff":return"bg-orange-100 text-orange-700";case"schneider":case"schneider electric":return"bg-green-100 text-green-700";case"omron":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}},cr=t=>!t||t==="N/A"?"bg-gray-100 text-gray-500":"bg-purple-100 text-purple-700";function eu({project:t,onOpenOverview:s,onDelete:r}){return e.jsx("div",{className:`bg-surface rounded-lg border border-light p-6 hover:shadow-sm transition-all ${t.status==="archived"?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ir(t.status)}`,children:t.status==="active"?"Active":t.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-secondary mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Client:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${cr(t.client)}`,children:t.client})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Vendor:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${lr(t.vendor)}`,children:t.vendor})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Modified:"})," ",t.lastModified]})]}),e.jsx("p",{className:"text-sm text-muted",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(F,{onClick:()=>s(t),size:"sm",icon:Ye,iconPosition:"right",children:"Open Overview"}),e.jsx(F,{onClick:()=>r(t),variant:"ghost",size:"sm",icon:Ft,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete Project"})]})]})})}function tu({projects:t,onOpenOverview:s,onDelete:r}){return e.jsx("div",{className:"bg-surface rounded-lg border border-light overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Project Name"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Client"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Vendor"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Last Modified"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{className:`border-b border-light hover:bg-gray-50 transition-colors ${a.status==="archived"?"opacity-60":""}`,children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:a.name}),e.jsx("p",{className:"text-sm text-muted mt-1",children:a.description})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${cr(a.client)}`,children:a.client})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${lr(a.vendor)}`,children:a.vendor})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ir(a.status)}`,children:a.status==="active"?"Active":a.status})}),e.jsx("td",{className:"p-4 text-secondary",children:a.lastModified}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{onClick:()=>s(a),size:"sm",icon:Ye,iconPosition:"right",children:"Open Overview"}),e.jsx(F,{onClick:()=>r(a),variant:"ghost",size:"sm",icon:Ft,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete Project"})]})})]},a.id))})]})})}const su=[{value:"all",label:"All Projects"},{value:"active",label:"Active"},{value:"archived",label:"Archived"}];function ru({onBack:t,onOpenProject:s,onDeleteProject:r,onNewProject:a,refreshTrigger:o=0,onRefreshComplete:n}){const{isAuthenticated:i,token:d,user:m}=Ee(),[u,h]=l.useState([]),[f,k]=l.useState(!0),[v,x]=l.useState(""),[N,b]=l.useState(""),[C,p]=l.useState("all"),[y,w]=l.useState("grid"),S=async()=>{if(!i||!d){console.log("ProjectsList: User not authenticated, skipping project load"),k(!1),x("Please log in to view projects");return}try{k(!0),x("");const g=(await se.getProjects()).map(us);console.log("ProjectsList: Loaded",g.length,"projects"),h(g),n&&n()}catch(c){console.error("Failed to load projects:",c),x(c.message||"Failed to load projects")}finally{k(!1)}};l.useEffect(()=>{i&&d&&S()},[o,i,d]);const T=c=>{r(c)},j=u.filter(c=>{const g=(c.name||"").toLowerCase().includes(N.toLowerCase())||(c.client||"").toLowerCase().includes(N.toLowerCase())||(c.description||"").toLowerCase().includes(N.toLowerCase()),A=C==="all"||c.status===C;return g&&A});return e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{onClick:t,variant:"ghost",icon:hs,size:"sm",children:"Back"}),e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects"}),e.jsxs("span",{className:"text-sm text-secondary px-2 py-1 bg-light rounded",children:[j.length," projects"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{onClick:S,variant:"ghost",icon:ye,disabled:f,size:"sm",children:f?"Loading...":"Refresh"}),e.jsxs("div",{className:"flex border border-light rounded overflow-hidden",children:[e.jsx("button",{onClick:()=>w("grid"),className:`p-2 ${y==="grid"?"bg-accent text-white":"bg-white text-muted hover:bg-gray-50"}`,title:"Card View",children:e.jsx(po,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w("list"),className:`p-2 ${y==="list"?"bg-accent text-white":"bg-white text-muted hover:bg-gray-50"}`,title:"Table View",children:e.jsx(Co,{className:"w-4 h-4"})})]}),e.jsx(F,{onClick:a,icon:mt,iconPosition:"left",children:"New Project"})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(fe,{type:"search",placeholder:"Search projects...",value:N,onChange:c=>b(c.target.value),icon:Tt,iconPosition:"left"})}),e.jsx("div",{className:"w-48",children:e.jsx(_e,{options:su,value:C,onChange:p,placeholder:"Filter projects"})})]}),v&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:v}),e.jsx(F,{onClick:S,variant:"ghost",size:"sm",children:"Retry"})]})}),f&&!v&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ye,{className:"w-8 h-8 text-secondary mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-secondary",children:"Loading projects..."})]}),!f&&!v&&e.jsx("div",{className:y==="grid"?"space-y-4":"",children:j.length===0?e.jsxs("div",{className:"text-center py-12 bg-surface rounded-lg border border-light",children:[e.jsx($s,{className:"w-16 h-16 text-muted mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary mb-2",children:"No projects found"}),e.jsx("p",{className:"text-secondary mb-4",children:N||C!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first project."}),!N&&C==="all"&&e.jsx(F,{onClick:a,icon:mt,iconPosition:"left",children:"Create New Project"})]}):y==="grid"?j.map(c=>e.jsx(eu,{project:c,onOpenOverview:s,onDelete:T},c.id)):e.jsx(tu,{projects:j,onOpenOverview:s,onDelete:T})})]})}function Gr(t){return t==null?"":typeof t=="string"?t:typeof t=="boolean"?t?"Yes":"No":typeof t=="object"?JSON.stringify(t,null,2):String(t)}function au({section:t,isExpanded:s,onToggle:r}){const a=t.icon;return e.jsxs("div",{className:"border border-gray-200 rounded-lg mb-3",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50 ${t.hasChanges?"bg-yellow-50 border-yellow-200":""}`,onClick:r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"font-medium",children:t.label}),t.hasChanges&&e.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full",children:"Changed"})]}),s?e.jsx(st,{className:"w-4 h-4 text-gray-400"}):e.jsx(Mt,{className:"w-4 h-4 text-gray-400"})]}),s&&e.jsx("div",{className:"border-t border-gray-200 p-3",children:t.hasChanges?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Version ",t.key==="from"?"From":"To"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2",children:e.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:Gr(t.fromValue)})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Version ",t.key==="to"?"To":"From"]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:e.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:Gr(t.toValue)})})]})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No changes in this section"})})]})}function nu({projectId:t,fromVersion:s,toVersion:r,isOpen:a,onClose:o}){const[n,i]=l.useState(null),[d,m]=l.useState(null),[u,h]=l.useState(!1),[f,k]=l.useState(null),[v,x]=l.useState(new Set),{getVersionData:N}=Bt({projectId:t,autoCreateVersions:!1});l.useEffect(()=>{a&&t&&s&&r&&b()},[a,t,s,r]);const b=async()=>{h(!0),k(null);try{const[S,T]=await Promise.all([N(s),N(r)]);i(S),m(T)}catch(S){k(S.message||"Failed to load version data")}finally{h(!1)}},C=S=>{const T=new Set(v);T.has(S)?T.delete(S):T.add(S),x(T)},y=(()=>{if(!n||!d)return[];const S=[];return(n.module==="LogicStudio"||d.module==="LogicStudio")&&(S.push({key:"editorCode",label:"PLC Code",icon:xs,fromValue:n.editorCode||"",toValue:d.editorCode||"",hasChanges:(n.editorCode||"")!==(d.editorCode||"")}),S.push({key:"prompt",label:"AI Prompt",icon:Bs,fromValue:n.prompt||"",toValue:d.prompt||"",hasChanges:(n.prompt||"")!==(d.prompt||"")}),S.push({key:"vendor",label:"PLC Vendor",icon:os,fromValue:n.vendor||"siemens",toValue:d.vendor||"siemens",hasChanges:(n.vendor||"siemens")!==(d.vendor||"siemens")})),(n.module==="TagManager"||d.module==="TagManager")&&S.push({key:"filters",label:"Tag Filters",icon:os,fromValue:n.filters||{},toValue:d.filters||{},hasChanges:JSON.stringify(n.filters||{})!==JSON.stringify(d.filters||{})}),(n.module==="AskPandaura"||d.module==="AskPandaura")&&S.push({key:"chatMessage",label:"Chat Message",icon:Bs,fromValue:n.chatMessage||"",toValue:d.chatMessage||"",hasChanges:(n.chatMessage||"")!==(d.chatMessage||"")}),S.push({key:"lastActivity",label:"Last Activity",icon:Xe,fromValue:n.lastActivity||"",toValue:d.lastActivity||"",hasChanges:(n.lastActivity||"")!==(d.lastActivity||"")}),S})(),w=y.filter(S=>S.hasChanges);return e.jsx(Ae,{isOpen:a,onClose:o,title:`Compare Versions ${s} → ${r}`,size:"xl",children:e.jsx("div",{className:"space-y-4",children:u?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Loading version data..."})]}):f?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"Failed to load version data"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:f}),e.jsx(F,{onClick:b,variant:"outline",children:"Try Again"})]}):y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No data available for comparison"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Comparison Summary"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:w.length})," section",w.length!==1?"s":""," changed out of ",e.jsx("strong",{children:y.length})," total sections"]}),w.length>0&&e.jsxs("p",{className:"mt-1",children:["Changed: ",w.map(S=>S.label).join(", ")]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const S=new Set(y.map(T=>T.key));x(S)},children:"Expand All"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>x(new Set),children:"Collapse All"}),e.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const S=new Set(w.map(T=>T.key));x(S)},children:"Show Changes Only"})]}),e.jsx("div",{className:"space-y-3",children:y.map(S=>e.jsx(au,{section:S,isExpanded:v.has(S.key),onToggle:()=>C(S.key)},S.key))})]})})})}function ou({versions:t,isLoading:s=!1,error:r=null,onViewDiff:a,onRollback:o,onDelete:n,onRefresh:i,projectId:d}){const[m,u]=l.useState(!1),[h,f]=l.useState(1),k=5,[v,x]=l.useState(!1),[N,b]=l.useState(null),C=[...t].sort((c,g)=>g.version_number-c.version_number),p=Math.ceil(C.length/k),y=(h-1)*k,w=y+k,S=C.slice(y,w),T=c=>{f(c)},j=c=>{try{return new Date(c).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return c}};return e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer border-b border-light hover:bg-background transition-colors",onClick:()=>u(!m),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"w-5 h-5 text-accent"}),e.jsx("h3",{className:"font-semibold text-primary",children:"Version History"}),e.jsxs("span",{className:"text-sm text-muted",children:["(",C.length," versions)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(F,{size:"sm",variant:"ghost",icon:ye,onClick:()=>{i()},className:`p-1 ${s?"animate-spin":""}`,title:"Refresh version history"}),m?e.jsx(qn,{className:"w-4 h-4 text-muted"}):e.jsx(st,{className:"w-4 h-4 text-muted"})]})]}),m&&e.jsx("div",{className:"p-4",children:s?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ye,{className:"w-8 h-8 text-muted mx-auto mb-3 animate-spin"}),e.jsx("p",{className:"text-secondary",children:"Loading version history..."})]}):r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pe,{className:"w-8 h-8 text-red-500 mx-auto mb-3"}),e.jsx("p",{className:"text-red-600 mb-2",children:"Failed to load version history"}),e.jsx("p",{className:"text-sm text-muted mb-4",children:r}),i&&e.jsx(F,{size:"sm",variant:"outline",icon:ye,onClick:i,children:"Try Again"})]}):C.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ht,{className:"w-12 h-12 text-muted mx-auto mb-3"}),e.jsx("p",{className:"text-secondary",children:"No version history available"}),e.jsx("p",{className:"text-sm text-muted mt-2",children:"Versions will appear here as you save your project"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 mb-4",children:S.map((c,g)=>{const A=y+g===0;return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-md border transition-colors ${A?"bg-accent-light border-accent":"bg-background border-light hover:border-accent"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-medium text-primary",children:["Version ",c.version_number]}),A&&e.jsx("span",{className:"bg-accent text-white text-xs px-2 py-0.5 rounded-full",children:"Current"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${c.is_auto?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:c.is_auto?"Auto-save":"Manual"})]}),e.jsxs("div",{className:"text-sm text-secondary mb-1",children:[e.jsxs("span",{className:"font-medium",children:["User ",c.user_id]})," • ",j(c.created_at)]}),c.message&&e.jsx("p",{className:"text-sm text-muted",children:c.message}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-muted mt-2",children:e.jsxs("span",{children:["Created ",new Date(c.created_at).toLocaleDateString()]})})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[g<C.length-1&&d&&e.jsx(F,{size:"sm",variant:"outline",icon:ut,onClick:()=>{const O=C[g+1];b({from:O.version_number,to:c.version_number}),x(!0)},title:"Compare with previous version",children:"Diff"}),a&&e.jsx(F,{size:"sm",variant:"outline",icon:ut,onClick:()=>a(c),title:"View Changes",children:"View"}),!A&&e.jsxs(e.Fragment,{children:[e.jsx(F,{size:"sm",variant:"ghost",icon:ls,onClick:()=>o(c),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Rollback to this version",children:"Rollback"}),n&&e.jsx(F,{size:"sm",variant:"ghost",icon:Ft,onClick:()=>{window.confirm(`Are you sure you want to delete version ${c.version_number}? This action cannot be undone.`)&&n(c)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete this version",children:"Delete"})]})]})]},c.id)})}),p>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-light",children:[e.jsxs("div",{className:"text-sm text-secondary",children:["Showing ",y+1,"-",Math.min(w,C.length)," of ",C.length," versions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{size:"sm",variant:"ghost",onClick:()=>T(h-1),disabled:h===1,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:p},(c,g)=>g+1).map(c=>e.jsx(F,{size:"sm",variant:h===c?"primary":"ghost",onClick:()=>T(c),className:"w-8 h-8 p-0",children:c},c))}),e.jsx(F,{size:"sm",variant:"ghost",onClick:()=>T(h+1),disabled:h===p,children:"Next"})]})]})]})}),d&&N&&e.jsx(nu,{projectId:d,fromVersion:N.from,toVersion:N.to,isOpen:v,onClose:()=>{x(!1),b(null)}})]})}const iu=t=>{if(!t)return"No state data available";try{return JSON.stringify(t,null,2)}catch{return"Invalid state data"}};function lu({version:t,onClose:s,onRollback:r,onExport:a}){const[o,n]=l.useState(!1),[i,d]=l.useState(!1);if(!t)return null;const m=()=>{r(t),n(!1),s()},u=()=>{a&&a(t)},h=f=>{try{return new Date(f).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return new Date().toLocaleString()}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{isOpen:!!t,onClose:s,title:`Version ${t.version_number} - Project State`,size:"lg",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-light",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-lg font-semibold text-primary",children:["Version ",t.version_number]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.is_auto?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:t.is_auto?"Auto-save":"Manual"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx(F,{size:"sm",variant:"outline",icon:Je,onClick:u,children:"Export"}),e.jsx(F,{size:"sm",variant:"outline",icon:ls,onClick:()=>n(!0),className:"text-orange-600 hover:text-orange-700",children:"Rollback"})]})]}),e.jsxs("div",{className:"text-sm text-secondary",children:[e.jsxs("span",{className:"font-medium",children:["User ",t.user_id]})," • ",h(t.created_at)]}),t.message&&e.jsx("p",{className:"text-sm text-primary mt-2",children:t.message})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-primary",children:"Project State"}),e.jsx(F,{size:"sm",variant:"outline",icon:xs,onClick:()=>d(!i),children:i?"Hide Details":"Show Details"})]}),e.jsxs("div",{className:"bg-background border border-light rounded-md p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Xe,{className:"w-5 h-5 text-accent"}),e.jsx("span",{className:"font-medium text-primary",children:"Version Snapshot"})]}),i?e.jsx("div",{className:"bg-surface rounded-md p-3 max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-xs text-primary whitespace-pre-wrap font-mono",children:iu(t.snapshot_info)})}):e.jsxs("div",{className:"text-sm text-secondary",children:[e.jsx("p",{children:"This version contains a snapshot of the project state at the time it was saved."}),e.jsx("p",{className:"mt-2",children:'Click "Show Details" to view the raw state data, or use "Rollback" to restore this version.'})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," This system stores complete project state snapshots rather than individual file changes. Rolling back will restore the entire project to this version's state."]})})]})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6",children:e.jsx(F,{variant:"ghost",onClick:s,children:"Close"})})]}),e.jsxs(Ae,{isOpen:o,onClose:()=>n(!1),title:"Confirm Rollback",size:"sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-secondary mb-4",children:["Are you sure you want to rollback to ",e.jsxs("strong",{children:["Version ",t.version_number]}),"?"]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Warning:"})," This action will create a new version with the rollback changes. Your current work will be preserved as the latest version."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(F,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(F,{variant:"danger",onClick:m,icon:ls,children:["Rollback to Version ",t.version_number]})]})]})]})}function cu(t){return e.jsx(Ge,{children:e.jsx(du,{...t})})}function du({project:t,onBack:s,onOpenWorkspace:r}){const[a,o]=l.useState(!1),[n,i]=l.useState(!1),[d,m]=l.useState(null),{project:u,isLoading:h,error:f,isDirty:k,lastSaved:v,autosave:x,save:N}=uc(t?.id||0),{versions:b,isLoading:C,error:p,rollbackToVersion:y,deleteVersion:w,refreshVersions:S}=Bt({projectId:t?.id||0,autoCreateVersions:!0}),{safeVersions:T,recentActivity:j}=l.useMemo(()=>{const M=b||[];return{safeVersions:M,recentActivity:M.slice(0,5).map(L=>({action:L.is_auto?"Auto-saved project":"Manually saved version",user:`User ${L.user_id}`,timestamp:new Date(L.created_at).toLocaleString(),details:L.message||`Version ${L.version_number} created`}))}},[b]),c=l.useCallback(async()=>{if(N)try{const M={currentView:"overview",savedAt:new Date().toISOString(),hasUnsavedChanges:!1};await N(M),o(!1),i(!1),console.log("Project saved successfully")}catch(M){console.error("Failed to save project:",M)}},[N]),g=l.useCallback(()=>{a||k?i(!0):r(t)},[a,k,r,t]),A=l.useCallback(()=>{i(!1),r(t)},[r,t]),O=l.useCallback(M=>{m(M)},[]),D=l.useCallback(async M=>{if(y)try{console.log("Rolling back to version:",M.version_number),await y(M.version_number),console.log("Rollback completed successfully")}catch(L){console.error("Rollback failed:",L);const B=L instanceof Error?L.message:"Failed to rollback to version. Please try again.";console.error(B)}},[y]),R=l.useCallback(async M=>{if(w)try{console.log("Deleting version:",M.version_number),await w(M.version_number),console.log("Version deleted successfully")}catch(L){console.error("Delete failed:",L);const B=L instanceof Error?L.message:"Failed to delete version. Please try again.";console.error(B)}},[w]);if(l.useEffect(()=>{if(!k||!x)return;const M=setTimeout(async()=>{const L={currentView:"overview",lastActivity:new Date().toISOString(),hasUnsavedChanges:a};await x(L),console.log("Auto-saved project state")},3e4);return()=>clearTimeout(M)},[k,a,x]),l.useEffect(()=>{const M=L=>{if(a||k)return L.preventDefault(),L.returnValue="You have unsaved changes. Are you sure you want to leave?",L.returnValue};return window.addEventListener("beforeunload",M),()=>window.removeEventListener("beforeunload",M)},[a,k]),l.useEffect(()=>{t?.id&&console.log("Project Overview - Version Control Debug:",{projectId:t.id,versionsLoading:C,versionsError:p,versionsCount:T.length,versions:T,recentActivityCount:j.length})},[t?.id,C,p,T,j]),!t)return e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"text-center py-12 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(pe,{className:"w-8 h-8 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-700 mb-2",children:"No Project Selected"}),e.jsx("p",{className:"text-red-600 mb-4",children:"No project data was provided."}),e.jsx(F,{onClick:s,children:"Back to Projects"})]})});if(h)return e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading project..."})]})});if(f)return e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"text-center py-12 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(pe,{className:"w-8 h-8 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-700 mb-2",children:"Failed to load project"}),e.jsx("p",{className:"text-red-600 mb-4",children:f}),e.jsx(F,{onClick:()=>window.location.reload(),children:"Try Again"})]})});const V=u||t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{onClick:s,variant:"ghost",icon:hs,size:"sm",children:"Back to Projects"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-primary",children:["Project: ",V.name]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-secondary",children:[e.jsxs("span",{children:["Last modified ",V.lastModified]}),k&&e.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[e.jsx(ht,{className:"w-4 h-4"}),e.jsx("span",{children:"Auto-saving..."})]}),v&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsxs("span",{children:["Saved ",v.toLocaleTimeString()]})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:(a||k)&&e.jsx(F,{onClick:c,variant:"secondary",icon:ze,iconPosition:"left",children:"Save Changes"})})]}),(a||k)&&e.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-orange-600"}),e.jsx("p",{className:"text-orange-700",children:"You have unsaved changes. These will be auto-saved every 30 seconds, or you can save them manually."})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Unsaved Changes"}),e.jsx("p",{className:"text-secondary mb-6",children:"You have unsaved changes. Would you like to save them before opening the workspace?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(F,{variant:"ghost",onClick:A,children:"Don't Save"}),e.jsx(F,{onClick:c,icon:ze,iconPosition:"left",children:"Save & Continue"})]})]})}),e.jsx(Ce,{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Name"}),e.jsx("p",{className:"text-primary",children:V.name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Client"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${cr(V.client)}`,children:V.client})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Type"}),e.jsx("p",{className:"text-primary w-fit",children:V.type})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Target PLC Vendor"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${lr(V.vendor)}`,children:V.vendor})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${ir(V.status)}`,children:V.status==="active"?"Active":V.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Description"}),e.jsx("p",{className:"text-primary",children:V.description})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(F,{onClick:g,size:"lg",icon:Ye,iconPosition:"right",className:"w-full py-4",children:"Open Full Project Workspace"})}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(ou,{versions:T,isLoading:C,error:p,projectId:t.id,onViewDiff:O,onRollback:D,onDelete:R,onRefresh:S}),e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-light",children:[e.jsx(pr,{className:"w-5 h-5 text-accent"}),e.jsx("h3",{className:"font-semibold text-primary",children:"Recent Activity"})]}),e.jsx("div",{className:"p-4",children:C?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-secondary",children:"Loading recent activity..."})]}):j.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pr,{className:"w-12 h-12 text-muted mx-auto mb-3"}),e.jsx("p",{className:"text-secondary",children:"No recent activity"}),e.jsx("p",{className:"text-xs text-muted mt-1",children:"Activity will appear here as you work on the project"})]}):e.jsx("div",{className:"space-y-3",children:j.map((M,L)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-md",children:[e.jsx("div",{className:"w-2 h-2 bg-accent rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-primary",children:M.action}),e.jsxs("p",{className:"text-xs text-muted",children:[M.user," • ",M.timestamp]}),M.details&&e.jsx("p",{className:"text-xs text-secondary mt-1",children:M.details})]})]},L))})})]})]})]}),e.jsx(lu,{version:d,onClose:()=>m(null),onRollback:M=>{D(M),m(null)}})]})}const uu=[{value:"",label:"Select project type"},{value:"new-installation",label:"New Installation"},{value:"migration",label:"Migration/Upgrade"},{value:"integration",label:"System Integration"},{value:"maintenance",label:"Maintenance/Support"},{value:"industrial-automation",label:"Industrial Automation"}],mu=[{value:"",label:"Select PLC vendor"},{value:"siemens",label:"Siemens"},{value:"rockwell",label:"Rockwell Automation"},{value:"beckhoff",label:"Beckhoff"}];function hu({isOpen:t,onClose:s,onSubmit:r,onSuccess:a}){const{showToast:o}=rt(),[n,i]=l.useState({name:"",client:"",type:"",vendor:"",description:""}),[d,m]=l.useState({}),[u,h]=l.useState(!1),[f,k]=l.useState(""),v=async()=>{const N={};if(n.name.trim()||(N.name="Project name is required"),n.vendor&&!["siemens","rockwell","beckhoff"].includes(n.vendor)&&(N.vendor="Please select a valid PLC vendor"),m(N),k(""),Object.keys(N).length===0){h(!0);try{const b={projectName:n.name.trim(),clientName:n.client.trim()||void 0,projectType:n.type||void 0,targetPLCVendor:n.vendor,description:n.description.trim()||void 0},C=await se.createProject(b);console.log("Project created successfully:",C),o({variant:"success",title:"Success!",message:`Project "${n.name.trim()}" has been created successfully.`,duration:4e3}),r(n),a&&a(),x()}catch(b){console.error("Failed to create project:",b),k(b.message||"Failed to create project. Please try again.")}finally{h(!1)}}},x=()=>{i({name:"",client:"",type:"",vendor:"",description:""}),m({}),s()};return e.jsxs(Ae,{isOpen:t,onClose:x,title:"Create New Project",size:"lg",children:[e.jsxs("div",{className:"space-y-4",children:[f&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:f}),e.jsx(fe,{label:"Project Name",required:!0,value:n.name,onChange:N=>i(b=>({...b,name:N.target.value})),placeholder:"Enter project name",error:d.name,disabled:u}),e.jsx(fe,{label:"Client Name",value:n.client,onChange:N=>i(b=>({...b,client:N.target.value})),placeholder:"Enter client name",disabled:u}),e.jsx(_e,{label:"Project Type",options:uu,value:n.type,onChange:N=>i(b=>({...b,type:N})),disabled:u}),e.jsx(_e,{label:"Target PLC Vendor",options:mu,value:n.vendor,onChange:N=>i(b=>({...b,vendor:N})),error:d.vendor,disabled:u}),e.jsx(Et,{label:"Brief Description",value:n.description,onChange:N=>i(b=>({...b,description:N.target.value})),placeholder:"Describe the project scope and objectives...",rows:3,disabled:u})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(F,{variant:"ghost",onClick:x,disabled:u,children:"Cancel"}),e.jsx(F,{onClick:v,disabled:u,children:u?"Creating...":"Create Project"})]})]})}function xu({project:t,onClose:s,onConfirm:r,onSuccess:a}){const{showToast:o}=rt(),[n,i]=l.useState(!1),d=async()=>{if(t)try{i(!0),await se.deleteProject(t.id),o({variant:"success",title:"Project Deleted",message:`Project "${t.name}" has been deleted successfully.`,duration:4e3}),r(t),a&&a(),s()}catch(m){console.error("Failed to delete project:",m),o({variant:"error",title:"Delete Failed",message:m.message||"Failed to delete project. Please try again.",duration:5e3})}finally{i(!1)}};return e.jsxs(Ae,{isOpen:!!t,onClose:s,title:"Delete Project",size:"sm",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-secondary",children:["Are you sure you want to delete ",e.jsx("strong",{children:t?.name}),"? This action cannot be undone and will permanently remove all project data, including version history and activity logs."]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(F,{variant:"ghost",onClick:s,disabled:n,children:"Cancel"}),e.jsx(F,{variant:"danger",onClick:d,disabled:n,children:n?"Deleting...":"Delete Project"})]})]})}function pu({tools:t,onBack:s}){const r=de();return e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(F,{onClick:s,variant:"ghost",icon:hs,size:"sm",children:"Back"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Quick Tools"}),e.jsx("p",{className:"text-secondary",children:"Single-use sessions for quick tasks and testing"})]})]}),e.jsx("div",{className:"grid gap-4",children:t.map(a=>e.jsxs("button",{onClick:()=>!a.comingSoon&&r(a.path),disabled:a.comingSoon,className:`flex items-center gap-4 p-6 bg-surface rounded-lg border border-light transition-all text-left relative ${a.comingSoon?"opacity-75 cursor-not-allowed":"hover:border-accent hover:shadow-sm"}`,children:[e.jsx("div",{className:`p-3 rounded-lg ${a.comingSoon?"bg-gray-100":"bg-accent-light"}`,children:e.jsx(a.icon,{className:`w-6 h-6 ${a.comingSoon?"text-gray-400":"text-accent"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:a.name}),a.comingSoon&&e.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full border border-green-200",children:"Coming Soon"})]}),e.jsx("p",{className:"text-secondary",children:a.description})]}),!a.comingSoon&&e.jsx(Ye,{className:"w-5 h-5 text-muted flex-shrink-0"})]},a.name))})]})}const gu=[{name:"Logic Studio",icon:aa,path:"/tool/logic",description:"Turn natural language into vendor-ready PLC code instantly.",comingSoon:!1},{name:"Tag Database Manager",icon:os,path:"/tool/tags",description:"Organize and maintain all your PLC tags in one place.",comingSoon:!1},{name:"AutoDocs",icon:Xe,path:"/tool/autodocs",description:"Auto-generate professional PLC documentation.",comingSoon:!1},{name:"SignalFlow",icon:fs,path:"/tool/signalflow",description:"Visualize and trace signal paths through your automation system.",comingSoon:!0},{name:"Pandaura AS Assistant",icon:er,path:"/tool/assistant",description:"Get instant help with automation documents, logic files, and real-time support.",comingSoon:!1}];function ss(){const t=de(),s=Rt(),{projectId:r}=Lt(),{isAuthenticated:a,isLoading:o,user:n,token:i}=Ee(),[d,m]=l.useState(!1),[u,h]=l.useState(null),[f,k]=l.useState(0),[v,x]=l.useState(null),[N,b]=l.useState(!1);be.useEffect(()=>{console.log("Home component mounted/updated"),console.log("Authentication state:",{isAuthenticated:a,isLoading:o,hasUser:!!n,hasToken:!!i,currentPath:s.pathname}),console.log("Token storage debug:",{contextToken:i?`${i.substring(0,10)}...`:"none",localStorageToken:localStorage.getItem("authToken")?`${localStorage.getItem("authToken").substring(0,10)}...`:"none",localStorageKeys:Object.keys(localStorage),userInfo:n?{userId:n.userId,email:n.email}:"none"})},[a,o,n,i,s.pathname]);const C=s.pathname==="/home/projects",p=s.pathname.startsWith("/home/projects/")&&r,y=s.pathname==="/home/quick-tools";l.useEffect(()=>{(async()=>{if(r&&a&&i){b(!0);try{console.log("Loading project with ID:",r);const g=await se.getProjects();console.log("All projects from API:",g.map(O=>({id:O.id,name:O.project_name})));const A=g.find(O=>O.id.toString()===r);A?(console.log("Found project:",A.project_name),x(us(A))):(console.warn("Project not found with ID:",r),console.log("Available project IDs:",g.map(O=>O.id)),x(null))}catch(g){console.error("Failed to load project:",g),x(null)}finally{b(!1)}}else console.log("Clearing selected project - projectId:",r,"isAuthenticated:",a,"hasToken:",!!i),x(null),b(!1)})()},[r,a,i]);const w=c=>{console.log("Creating project:",c),k(g=>g+1)},S=c=>{console.log("Delete confirmed for project:",c.name)},T=c=>{t(`/home/projects/${c.id}`)},j=c=>{if(!a){console.log("User not authenticated, redirecting to login"),t("/signin");return}console.log("User authenticated, navigating to workspace"),localStorage.setItem("currentProjectId",c.id.toString()),t(`/workspace/${c.id}/pandaura-as`,{state:{project:c}})};return p?(console.log("Project Overview View - Debug:",{projectId:r,isAuthenticated:a,isLoading:o,loadingProject:N,selectedProject:v?v.name:"null",pathname:s.pathname}),o?(console.log("Auth loading, showing spinner"),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading authentication..."})]})})):a?N?(console.log("Project loading, showing spinner"),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading project..."})]})})):v?(console.log("Rendering project overview for:",v.name),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(lt,{})})]}),e.jsx(cu,{project:v,onBack:()=>t("/home/projects"),onOpenWorkspace:j})]})):(console.log("Project not found, showing error state"),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(lt,{})})]}),e.jsx("div",{className:"flex items-center justify-center",style:{height:"calc(100vh - 88px)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx($s,{className:"w-16 h-16 text-muted mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary mb-2",children:"Project not found"}),e.jsxs("p",{className:"text-secondary mb-4",children:["The requested project (ID: ",r,") could not be found or you don't have access to it."]}),e.jsx(F,{onClick:()=>t("/home/projects"),children:"Back to Projects"})]})})]})):(console.log("Project overview accessed but user not authenticated, redirecting to signin"),setTimeout(()=>t("/signin"),100),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Redirecting to sign in..."})]})}))):C?o?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading authentication..."})]})}):a?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(lt,{})})]}),e.jsx(ru,{onBack:()=>t("/home"),onOpenProject:T,onDeleteProject:c=>h(c),onNewProject:()=>m(!0),refreshTrigger:f}),e.jsx(hu,{isOpen:d,onClose:()=>m(!1),onSubmit:w,onSuccess:()=>k(c=>c+1)}),e.jsx(xu,{project:u,onClose:()=>h(null),onConfirm:S,onSuccess:()=>k(c=>c+1)})]}):(console.log("Projects view accessed but user not authenticated, redirecting to signin"),setTimeout(()=>t("/signin"),100),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Redirecting to sign in..."})]})})):y?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(lt,{})})]}),e.jsx(pu,{tools:gu,onBack:()=>t("/home")})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:ge,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(lt,{})})]}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-primary mb-4",children:"Welcome to Pandaura AS"}),e.jsx("p",{className:"text-lg text-secondary max-w-2xl mx-auto",children:"Your complete industrial automation suite. Choose how you want to work today."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:[e.jsx(Ce,{variant:"elevated",icon:$s,title:"Projects",subtitle:"Manage your automation projects with full history and collaboration.",className:"text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-xs text-secondary bg-background rounded-md p-3 border border-light",children:"Access all modules with persistent project history, version control, and team collaboration features."})}),e.jsx(F,{onClick:()=>t("/home/projects"),className:"w-full py-4",icon:Ye,iconPosition:"right",size:"lg",children:"Browse Projects"})]})}),e.jsx(Ce,{variant:"elevated",icon:fs,title:"Quick Tools",subtitle:"Single-use sessions for quick tasks and testing.",className:"text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-xs text-secondary bg-background rounded-md p-3 border border-light",children:"These tools are available for one-time use. You can upload files, use all features, and export results — but your session will not be saved."})}),e.jsx(F,{onClick:()=>t("/home/quick-tools"),className:"w-full py-4",variant:"outline",icon:Ye,iconPosition:"right",size:"lg",children:"Launch Quick Tools"})]})})]}),e.jsxs("div",{className:"flex items-center justify-center mb-8",children:[e.jsx("div",{className:"h-px bg-light flex-1"}),e.jsx("span",{className:"px-4 text-sm text-muted",children:"Pandaura Labs"}),e.jsx("div",{className:"h-px bg-light flex-1"})]}),e.jsxs("div",{className:"text-center text-sm text-muted space-x-6",children:[e.jsx("span",{children:"© 2025"}),e.jsx("button",{onClick:()=>t("/feedback"),className:"hover:text-primary transition-colors",children:"Support"}),e.jsx("button",{onClick:()=>t("/terms"),className:"hover:text-primary transition-colors",children:"Terms"}),e.jsx("button",{onClick:()=>t("/privacy"),className:"hover:text-primary transition-colors",children:"Privacy"})]})]})]})}function fu(){de();const[t,s]=l.useState(""),[r,a]=l.useState(""),[o,n]=l.useState(""),[i,d]=l.useState(!1),[m,u]=l.useState("idle"),h=async v=>{if(v.preventDefault(),!(!t.trim()&&!r.trim()&&!o.trim())){d(!0),u("idle");try{await new Promise(N=>setTimeout(N,2e3));const x=f();console.log("Feedback submission:",x),u("success"),setTimeout(()=>{s(""),a(""),n(""),u("idle")},3e3)}catch{u("error")}finally{d(!1)}}},f=()=>{let v="";return t.trim()&&(v+=`— Feedback About the App —
`+t.trim()+`

`),r.trim()&&(v+=`— Feedback About the AI —
`+r.trim()+`

`),o.trim()&&(v+=`— Advanced Feedback —
`+o.trim()+`

`),v+=`Submitted on: ${new Date().toLocaleString()}
`,v+=`User Session: ${Math.random().toString(36).substr(2,9)}`,v},k=t.trim()||r.trim()||o.trim();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(nc,{title:"Feedback",subtitle:"Help us improve Pandaura AS",showBackButton:!0}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"We'd love to hear from you"}),e.jsx("p",{className:"text-muted",children:"Your feedback helps us build better automation tools. Share your thoughts in any or all sections below."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-8",children:[e.jsx(Ce,{title:"Your thoughts on the app",subtitle:"What's been working well? What's been frustrating? Tell us anything about your experience with Pandaura.",children:e.jsx(Et,{value:t,onChange:v=>s(v.target.value),placeholder:"Share your experience with the app...",rows:6,maxLength:2e3,helpText:"Optional • Be as detailed as you'd like",showCharCount:!0})}),e.jsx(Ce,{title:"Your thoughts on the AI",subtitle:"How helpful has the AI been for you? Any moments it surprised you—or totally missed the mark?",children:e.jsx(Et,{value:r,onChange:v=>a(v.target.value),placeholder:"Tell us about your AI assistant experience...",rows:6,maxLength:2e3,helpText:"Optional • We're always improving the AI",showCharCount:!0})}),e.jsx(Ce,{title:"Want to go deeper?",subtitle:"If you've got technical notes, feature requests, or specific examples — we'd love to hear them here.",children:e.jsx(Et,{value:o,onChange:v=>n(v.target.value),placeholder:"Share technical feedback, feature requests, or specific examples...",rows:6,maxLength:3e3,helpText:"Optional • Technical details welcome",showCharCount:!0})}),e.jsxs(Ce,{children:[m==="success"&&e.jsx(dt,{variant:"success",className:"mb-4",children:"Thanks — we seriously read every message. ✅"}),m==="error"&&e.jsx(dt,{variant:"error",className:"mb-4",children:"Something went wrong. Try again or email us directly at pandauracares@mail.com. ❌"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted",children:["Your feedback goes directly to ",e.jsx("span",{className:"font-mono",children:"pandauracares@mail.com"})]}),e.jsx(F,{type:"submit",disabled:!k||i,loading:i,icon:i?ia:ps,children:i?"Sending...":"Send Feedback"})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-xs text-muted",children:"All feedback is sent securely and never shared with third parties. We read everything and use it to improve Pandaura AS."})})]})]})}function bu(){const t=de(),[s,r]=l.useState(new Set),[a,o]=l.useState(!1),[n,i]=l.useState(""),[d,m]=l.useState(!1),u=k=>{const v=new Set(s);v.has(k)?v.delete(k):v.add(k),r(v)},h=k=>{k.preventDefault(),n.trim()&&(console.log("Privacy feedback:",n),m(!0),i(""),setTimeout(()=>{m(!1),o(!1)},2e3))},f=[{id:"data-collection",title:"What We Don't Collect",icon:"🔒",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"We don't collect your code. Ever."}),e.jsx("p",{className:"text-muted",children:"Pandaura AS runs entirely on-premise. Your PLC logic, structured text, tag databases, and any project files never leave your local machine. There's no cloud syncing, no background uploads, and no external servers involved."})]})},{id:"ai-privacy",title:"AI Model Privacy",icon:"🧠",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"The AI doesn't train on your data."}),e.jsx("p",{className:"text-muted",children:"The AI features built into Pandaura (like logic generation, signal tracing, and auto-documentation) do not learn from your inputs. Your prompts and results are used in real time to help you — and that's it. Nothing is saved, reused, or sent to a central server."})]})},{id:"file-uploads",title:"Uploaded Files",icon:"📂",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Uploaded files stay local."}),e.jsx("p",{className:"text-muted",children:"Files uploaded for context (like machine specs, manuals, or existing logic files) are only used during that session — they're never saved or transmitted elsewhere. Everything resets when the session ends or the app is closed."})]})},{id:"case-studies",title:"Case Study Consent",icon:"🤝",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Case studies are always opt-in."}),e.jsx("p",{className:"text-muted",children:"We'll only collect feedback or usage examples if you explicitly submit a case study. Even then, all identifying data must be removed by you. If anything sensitive is left in by mistake, we'll delete it immediately upon notice — no questions asked."})]})},{id:"diagnostics",title:"Troubleshooting & Diagnostics (Optional)",icon:"🔧",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"You're in control of diagnostics."}),e.jsx("p",{className:"text-muted",children:"If you reach out for support, you can choose whether or not to share technical logs. By default, no diagnostic data is collected or sent. You're always in full control of what you share."})]})},{id:"user-accounts",title:"User Accounts & Sessions",icon:"👤",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"No user tracking."}),e.jsx("p",{className:"text-muted",children:"Pandaura doesn't require a cloud login, and we don't track behavior. If we add optional features like user profiles or saved projects in the future, they'll also stay entirely local unless you opt in to share."})]})},{id:"feedback",title:"Feedback You Submit",icon:"📧",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Feedback goes straight to us — nowhere else."}),e.jsx("p",{className:"text-muted",children:"If you submit app or AI feedback, it's sent directly to our internal support email: pandauracares@mail.com. It's never sold, stored in the cloud, or analyzed by third parties. We read it. That's all."})]})},{id:"user-control",title:"Your Control, Always",icon:"✅",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"You can clear all local data at any time."}),e.jsx("p",{className:"text-muted",children:"We give you full control to reset, clear, or delete all project data stored locally. You'll always be able to start fresh — no hidden caches, no stored prompts, no buried files."})]})},{id:"contact",title:"Contacting Us",icon:"📞",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Questions about privacy? Reach out to us directly."}),e.jsxs("div",{className:"space-y-2 text-muted",children:[e.jsxs("p",{children:["Email: ",e.jsx("span",{className:"font-mono text-primary",children:"pandauracares@mail.com"})]}),e.jsxs("p",{children:["Case Study Privacy Team: ",e.jsx("span",{className:"font-mono text-primary",children:"privacy@pandauralabs.com"})]})]})]})}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Privacy Policy"}),e.jsx("p",{className:"text-sm text-secondary",children:e.jsx("button",{onClick:()=>t("/terms"),className:"hover:text-primary transition-colors underline",children:"View Terms of Use"})})]})]}),e.jsxs("button",{onClick:()=>o(!a),className:"p-3 hover:bg-background rounded-full transition-colors relative",title:"Privacy Feedback",children:[e.jsx(er,{className:"w-5 h-5 text-secondary"}),a&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-surface border border-light rounded-lg shadow-lg p-4 z-50",children:[e.jsx("h3",{className:"font-medium text-primary mb-2",children:"Have ideas for better privacy?"}),e.jsx("p",{className:"text-xs text-muted mb-3",children:"We take your trust seriously. If there's a privacy feature you think we should add, or if something feels unclear, let us know."}),d?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-green-600",children:"Thank you for your feedback! ✓"})}):e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsx("textarea",{value:n,onChange:k=>i(k.target.value),placeholder:"Your privacy feedback...",className:"w-full px-3 py-2 bg-background border border-light rounded text-sm resize-none focus:outline-none focus:ring-2 focus:ring-accent",rows:3,maxLength:500}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-muted",children:[n.length,"/500"]}),e.jsxs("button",{type:"submit",disabled:!n.trim(),className:"bg-primary text-white px-3 py-1 rounded text-xs hover:bg-secondary transition-colors disabled:opacity-50 flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),"Send"]})]})]}),e.jsx("p",{className:"text-xs text-muted mt-2",children:"Your message goes straight to our core team. All feedback welcome."})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsx("div",{className:"space-y-4 mb-8",children:f.map(k=>e.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>u(k.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:k.icon}),e.jsx("h2",{className:"text-lg font-semibold text-primary",children:k.title})]}),s.has(k.id)?e.jsx(st,{className:"w-5 h-5 text-secondary"}):e.jsx(Mt,{className:"w-5 h-5 text-secondary"})]}),s.has(k.id)&&e.jsx("div",{className:"px-6 pb-6 border-t border-light",children:e.jsx("div",{className:"pt-4",children:k.content})})]},k.id))}),e.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🔐"}),e.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:"We built Pandaura to be local-first — because we know your data is critical."}),e.jsx("p",{className:"text-muted",children:"You control your environment. You own your code. That will never change."})]})]})]})}function yu(){const t=de(),[s,r]=l.useState(new Set),a=i=>{const d=new Set(s);d.has(i)?d.delete(i):d.add(i),r(d)},o=()=>{console.log("Downloading Terms of Use PDF..."),alert("PDF download would be available in production version.")},n=[{id:"introduction",title:"Introduction",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Welcome to Pandaura AS. These Terms of Use govern your use of the Pandaura AS software platform, licensed and operated by Pandaura Labs AS. By using our software, you agree to the terms below. If you do not agree, you should not use the software."})})},{id:"scope",title:"Scope of Use",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Pandaura AS is licensed software designed for use in professional industrial automation environments. You may use the software solely within your organization for engineering, configuration, logic generation, and automation project development."})})},{id:"licensing",title:"Licensing & Ownership",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"Pandaura AS is licensed, not sold. All rights, title, and interest in the software—including AI-generated logic, interface design, and proprietary workflows—remain the property of Pandaura Labs AS."}),e.jsx("p",{className:"text-muted",children:"You may not reverse engineer, decompile, or resell the software without express written permission."})]})},{id:"responsibilities",title:"User Responsibilities",content:e.jsx("div",{className:"space-y-4",children:e.jsxs("ul",{className:"space-y-2 text-muted list-disc list-inside",children:[e.jsx("li",{children:"You are responsible for how the software is used within your organization."}),e.jsx("li",{children:"You must ensure only authorized users access the software."}),e.jsx("li",{children:"You agree not to use Pandaura AS for unlawful or unsafe automation tasks."})]})})},{id:"ai-content",title:"AI-Generated Content",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"Pandaura AS includes AI systems that assist in generating automation logic. While powerful, this logic may require review by qualified engineers."}),e.jsx("p",{className:"text-muted font-medium",children:"You remain solely responsible for validating and approving all outputs used in real-world environments."})]})},{id:"data-privacy",title:"Data & Privacy",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"Pandaura AS is a fully on-premise platform. We do not collect or transmit user data, logic, or documents externally."}),e.jsx("p",{className:"text-muted font-medium",children:"Your data remains 100% within your environment, under your control."})]})},{id:"updates",title:"Software Updates",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Any software updates or patches will be delivered offline, and it is your responsibility to apply them. Pandaura Labs is not liable for issues arising from the use of outdated software versions."})})},{id:"warranty",title:"Warranty Disclaimer",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted font-medium",children:'Pandaura AS is provided "as is" without warranties of any kind.'}),e.jsx("p",{className:"text-muted",children:"We do not guarantee uninterrupted operation, nor do we accept liability for logic errors, production downtime, or misconfigurations caused by user input or AI-generated suggestions."})]})},{id:"liability",title:"Limitation of Liability",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"To the maximum extent permitted by law, Pandaura Labs AS shall not be liable for any indirect, incidental, or consequential damages resulting from the use of Pandaura AS."}),e.jsx("p",{className:"text-muted",children:"Your sole remedy for dissatisfaction with the software is to stop using it."})]})},{id:"termination",title:"Termination",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Pandaura Labs reserves the right to revoke access or terminate licenses if terms are violated or if the software is used in breach of ethical or legal standards."})})},{id:"governing-law",title:"Governing Law",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"These Terms are governed by the laws of Norway. Any disputes shall be resolved in the appropriate courts of Oslo, Norway."})})},{id:"contact",title:"Contact",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"For licensing inquiries or enterprise agreements, please contact your Pandaura Labs representative directly."}),e.jsx("p",{className:"text-xs text-muted italic",children:"(Note: No public email or feedback form is provided on this page.)"})]})}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Terms of Use"}),e.jsx("p",{className:"text-sm text-secondary",children:e.jsx("button",{onClick:()=>t("/privacy"),className:"hover:text-primary transition-colors underline",children:"View Privacy Policy"})})]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-secondary transition-colors text-sm",children:[e.jsx(Je,{className:"w-4 h-4"}),"Download Terms of Use (PDF)"]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Terms of Use"}),e.jsx("p",{className:"text-sm text-muted",children:"Last Updated: August 5, 2025"})]}),e.jsx("div",{className:"space-y-4 mb-8",children:n.map(i=>e.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>a(i.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:i.title}),s.has(i.id)?e.jsx(st,{className:"w-5 h-5 text-secondary"}):e.jsx(Mt,{className:"w-5 h-5 text-secondary"})]}),s.has(i.id)&&e.jsx("div",{className:"px-6 pb-6 border-t border-light",children:e.jsx("div",{className:"pt-4",children:i.content})})]},i.id))}),e.jsx("div",{className:"text-center text-sm text-muted",children:e.jsx("p",{children:"For questions about these terms, please contact your Pandaura Labs representative."})})]})]})}function _s(){const t=de(),[s,r]=l.useState(null),[a]=l.useState([{id:"1",title:"Water Treatment Automation",status:"completed",lastModified:"2 days ago"},{id:"2",title:"Packaging Line Integration",status:"draft",lastModified:"1 week ago"}]),[o,n]=l.useState([{id:"overview",title:"Project Overview",description:"Basic project information and scope",isExpanded:!0},{id:"challenge",title:"Technical Challenge",description:"What made this project unique or difficult",isExpanded:!1},{id:"pandaura",title:"How Pandaura Helped",description:"Which features were used and their impact",isExpanded:!1},{id:"outcome",title:"Outcome & Results",description:"Final results and client feedback",isExpanded:!1},{id:"media",title:"Media Uploads",description:"Screenshots, PDFs, and documentation",isExpanded:!1},{id:"privacy",title:"Privacy & Security",description:"Data protection and sharing preferences",isExpanded:!1}]),[i,d]=l.useState(""),[m,u]=l.useState({title:"",company:"",industry:"",platforms:[],scope:"",timeline:"",challenge:"",uniqueAspects:"",featuresUsed:[],howPandauraHelped:"",aiUsed:"",timeSavings:"",outcome:"",clientQuote:"",metrics:"",removeClientData:!0,confirmNoSensitiveData:!1}),[h,f]=l.useState([]),k={selectProject:"Link this case study to an existing project for automatic data import",projectTitle:"Give your case study a clear, descriptive title that highlights the key achievement",plcPlatforms:"Select all PLC platforms that were used in this project",scopeSummary:"Briefly describe what the project covered - scope, systems involved, and scale",finalOutcome:"Describe the successful completion and measurable results of the project",uploadFiles:"Upload project documentation, screenshots, or technical diagrams (max 10MB each)"},v=({id:j,content:c})=>{const[g,A]=l.useState({x:0,y:0}),O=be.useRef(null),D=()=>{if(O.current){const R=O.current.getBoundingClientRect();A({x:R.left+R.width/2,y:R.top-10})}r(j)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:O,className:"relative inline-block",children:e.jsx(oa,{className:"w-4 h-4 inline ml-1 text-muted hover:text-primary cursor-help transition-colors",onMouseEnter:D,onMouseLeave:()=>r(null)})}),s===j&&e.jsxs("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-xs rounded-md whitespace-nowrap shadow-lg pointer-events-none",style:{left:`${g.x}px`,top:`${g.y}px`,transform:"translate(-50%, -100%)",zIndex:99999},children:[c,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})},x=j=>{n(c=>c.map(g=>g.id===j?{...g,isExpanded:!g.isExpanded}:g))},N=(j,c,g)=>{(j==="platforms"||j==="featuresUsed")&&u(A=>({...A,[j]:g?[...A[j],c]:A[j].filter(O=>O!==c)}))},b=j=>{j.target.files&&f(c=>[...c,...Array.from(j.target.files)])},C=j=>{f(c=>c.filter((g,A)=>A!==j))},p=()=>{console.log("Saving draft...",m),alert("Case study saved as draft locally.")},y=()=>{if(!m.confirmNoSensitiveData){alert("Please confirm that no sensitive client data is included before uploading.");return}console.log("Uploading to Case Study Hub...",m),window.confirm("Looks great. Once you submit, your case study will be visible to others on the Pandaura Case Study Hub. Just make sure you've removed anything private — you're always in full control.")&&alert("✅ Case study uploaded to Pandaura Case Study Hub!")},w=["Oil & Gas","Pharmaceutical","Food & Beverage","OEM","Automotive","Water Treatment","Power Generation","Manufacturing","Chemical","Other"],S=["Rockwell","Siemens","Beckhoff","Schneider","Omron","ABB","Other"],T=["Logic Studio","Tag Manager","SignalFlow","AutoDocs","Assistant / Mini"];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Create a Case Study"}),e.jsx("p",{className:"text-sm text-secondary",children:"Generate professional case studies from your projects"})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-surface border border-light rounded-lg p-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Project Selection"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Select Project (Optional)",e.jsx(v,{id:"selectProject",content:k.selectProject})]}),e.jsxs("select",{value:i,onChange:j=>d(j.target.value),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"",children:"Start from scratch"}),e.jsx("option",{value:"water-treatment",children:"Water Treatment Plant"}),e.jsx("option",{value:"packaging-line",children:"Packaging Line Control"}),e.jsx("option",{value:"hvac-system",children:"HVAC System Integration"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>{console.log("Starting new case study...")},className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary transition-colors",children:[e.jsx(mt,{className:"w-4 h-4"}),"Start New Case Study"]})})]}),a.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-secondary mb-3",children:"Recent Case Studies"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:a.map(j=>e.jsx("button",{className:"text-left p-3 bg-background border border-light rounded-md hover:border-accent transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary",children:j.title}),e.jsxs("p",{className:"text-xs text-muted",children:[j.status," • ",j.lastModified]})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${j.status==="completed"?"bg-green-500":"bg-yellow-500"}`})]})},j.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[o.map(j=>e.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>x(j.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:j.title}),e.jsx("p",{className:"text-sm text-muted",children:j.description})]}),j.isExpanded?e.jsx(st,{className:"w-5 h-5 text-secondary"}):e.jsx(Mt,{className:"w-5 h-5 text-secondary"})]}),j.isExpanded&&e.jsx("div",{className:"px-6 pb-6 border-t border-light",children:e.jsxs("div",{className:"pt-6 space-y-4",children:[j.id==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Project Title",e.jsx(v,{id:"projectTitle",content:k.projectTitle})]}),e.jsx("input",{type:"text",value:m.title,onChange:c=>u(g=>({...g,title:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Smart Water Treatment Integration"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Integrator Name / Company (Optional)"}),e.jsx("input",{type:"text",value:m.company,onChange:c=>u(g=>({...g,company:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"Your company name"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Client Industry"}),e.jsxs("select",{value:m.industry,onChange:c=>u(g=>({...g,industry:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"",children:"Select industry..."}),w.map(c=>e.jsx("option",{value:c,children:c},c))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Timeline (Optional)"}),e.jsx("input",{type:"text",value:m.timeline,onChange:c=>u(g=>({...g,timeline:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., 3 months, Q1 2024"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["PLC Platforms Used",e.jsx(v,{id:"plcPlatforms",content:k.plcPlatforms})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:S.map(c=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.platforms.includes(c),onChange:g=>N("platforms",c,g.target.checked),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{className:"text-sm text-primary",children:c})]},c))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Scope Summary",e.jsx(v,{id:"scopeSummary",content:k.scopeSummary})]}),e.jsx("textarea",{value:m.scope,onChange:c=>u(g=>({...g,scope:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the overall project scope and objectives..."})]})]}),j.id==="challenge"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What was the original challenge or complexity?"}),e.jsx("textarea",{value:m.challenge,onChange:c=>u(g=>({...g,challenge:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the technical challenges you faced..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What made this project unique or difficult?"}),e.jsx("textarea",{value:m.uniqueAspects,onChange:c=>u(g=>({...g,uniqueAspects:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"What set this project apart from typical automation work..."})]})]}),j.id==="pandaura"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Which Pandaura AS features were used?"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:T.map(c=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.featuresUsed.includes(c),onChange:g=>N("featuresUsed",c,g.target.checked),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{className:"text-sm text-primary",children:c})]},c))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Describe how Pandaura made the project easier or faster"}),e.jsx("textarea",{value:m.howPandauraHelped,onChange:c=>u(g=>({...g,howPandauraHelped:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Explain the specific ways Pandaura helped..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Any AI-generated logic or documents used?"}),e.jsx("textarea",{value:m.aiUsed,onChange:c=>u(g=>({...g,aiUsed:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Describe AI assistance received..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Time savings or value gained? (Optional)"}),e.jsx("textarea",{value:m.timeSavings,onChange:c=>u(g=>({...g,timeSavings:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Quantify benefits if possible..."})]})]})]}),j.id==="outcome"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Final project outcome",e.jsx(v,{id:"finalOutcome",content:k.finalOutcome})]}),e.jsx("textarea",{value:m.outcome,onChange:c=>u(g=>({...g,outcome:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the successful outcome and results..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What did the client say? (Optional quote/testimonial)"}),e.jsx("textarea",{value:m.clientQuote,onChange:c=>u(g=>({...g,clientQuote:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Client feedback or testimonial..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Did Pandaura reduce time, errors, or handoff problems?"}),e.jsx("textarea",{value:m.metrics,onChange:c=>u(g=>({...g,metrics:c.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Specific improvements achieved..."})]})]})]}),j.id==="media"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Upload Files (Optional)",e.jsx(v,{id:"uploadFiles",content:k.uploadFiles})]}),e.jsxs("div",{className:"border-2 border-dashed border-light rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",multiple:!0,onChange:b,className:"hidden",id:"file-upload",accept:".jpg,.jpeg,.png,.pdf,.doc,.docx"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(jo,{className:"w-8 h-8 text-muted"}),e.jsx(Xe,{className:"w-8 h-8 text-muted"})]})}),e.jsx("p",{className:"text-primary",children:"Click to upload files"}),e.jsx("p",{className:"text-xs text-muted",children:"Screenshots, PDFs, exported logic blocks"}),e.jsx("p",{className:"text-xs text-muted",children:"Max 10MB per file • JPG, PNG, PDF, DOC"})]})})]})]}),h.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-secondary mb-2",children:"Uploaded Files"}),e.jsx("div",{className:"space-y-2",children:h.map((c,g)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background border border-light rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xe,{className:"w-4 h-4 text-muted"}),e.jsx("span",{className:"text-sm text-primary",children:c.name}),e.jsxs("span",{className:"text-xs text-muted",children:["(",(c.size/1024).toFixed(1)," KB)"]})]}),e.jsx("button",{onClick:()=>C(g),className:"text-error hover:text-error-dark transition-colors",children:e.jsx(Ft,{className:"w-4 h-4"})})]},g))})]})]}),j.id==="privacy"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-accent/5 border border-accent/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary mb-2",children:"Privacy & Security Controls"}),e.jsx("p",{className:"text-sm text-muted",children:"You're always in control. Please double-check that any identifying info is removed — we'll never expose sensitive details."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.removeClientData,onChange:c=>u(g=>({...g,removeClientData:c.target.checked})),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2 mt-1"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-primary",children:"Remove client-identifying data"}),e.jsx("p",{className:"text-xs text-muted",children:"Automatically sanitize client names and sensitive information (recommended)"})]})]}),e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m.confirmNoSensitiveData,onChange:c=>u(g=>({...g,confirmNoSensitiveData:c.target.checked})),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2 mt-1"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-primary",children:"I confirm this case study contains no confidential or sensitive client data"}),e.jsx("p",{className:"text-xs text-muted",children:"Required before uploading to public Case Study Hub"})]})]})]})]})]})})]},j.id)),e.jsxs("div",{className:"bg-surface border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-6 py-3 bg-background border border-light rounded-md hover:border-accent transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"}),"Save Draft"]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-md hover:bg-secondary transition-colors",children:[e.jsx(It,{className:"w-4 h-4"}),"Upload to Case Study Hub"]})]}),e.jsx("p",{className:"text-xs text-muted mt-3 text-center",children:"Drafts are stored locally only. Uploading shares your case study publicly with the automation community."})]})]})]})]})}function ju(){const t=Ee(),[s,r]=l.useState({auth:{isAuthenticated:!1,token:null,user:null},api:{canConnect:!1,error:null},projects:{count:0,data:[],error:null}}),[a,o]=l.useState(!1),[n,i]=l.useState(""),d=async()=>{o(!0),i("");try{const u={projectName:`Test Project ${Date.now()}`,clientName:"Debug Client",projectType:"industrial-automation",targetPLCVendor:"siemens",description:"This is a test project created from the debug page"},h=await se.createProject(u);console.log("Created test project:",h),await m()}catch(u){console.error("Failed to create test project:",u),i(u.message||"Failed to create project")}finally{o(!1)}},m=async()=>{const u={auth:{isAuthenticated:t.isAuthenticated,token:t.token,user:t.user},api:{canConnect:!1,error:null},projects:{count:0,data:[],error:null}};if(t.isAuthenticated&&t.token)try{const h=await se.getProjects();u.api.canConnect=!0,u.projects.count=h.length,u.projects.data=h}catch(h){u.api.error=h.message,u.projects.error=h.message}else u.api.error="Not authenticated",u.projects.error="Not authenticated";r(u)};return l.useEffect(()=>{m()},[t.isAuthenticated,t.token]),e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects Debug Dashboard"}),e.jsx(Ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Authentication Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s.auth.isAuthenticated?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{children:["Authenticated: ",s.auth.isAuthenticated?"Yes":"No"]})]}),e.jsx("div",{children:e.jsxs("span",{children:["User: ",s.auth.user?.email||"None"]})}),e.jsx("div",{children:e.jsxs("span",{children:["Token: ",s.auth.token?"Present":"Missing"]})})]})]})}),e.jsx(Ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"API Connection"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s.api.canConnect?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{children:["API Connection: ",s.api.canConnect?"Working":"Failed"]})]}),s.api.error&&e.jsxs(dt,{variant:"error",children:["API Error: ",s.api.error]})]})]})}),e.jsx(Ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Projects (",s.projects.count,")"]}),s.projects.error?e.jsxs(dt,{variant:"error",children:["Projects Error: ",s.projects.error]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["Total Projects: ",s.projects.count]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(F,{onClick:m,variant:"secondary",size:"sm",children:"Refresh"}),e.jsx(F,{onClick:d,disabled:!s.auth.isAuthenticated||a,children:a?"Creating...":"Create Test Project"})]})]}),n&&e.jsxs(dt,{variant:"error",children:["Create Project Error: ",n]}),s.projects.data.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Project List:"}),s.projects.data.map((u,h)=>e.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:u.project_name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Client: ",u.client_name||"N/A"," | Type: ",u.project_type||"N/A"," | Vendor: ",u.target_plc_vendor||"N/A"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(u.created_at).toLocaleString()]})]},u.id||h))]})]})]})}),e.jsx(Ce,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"1. Make sure you're logged in (authentication status should be green)"}),e.jsx("p",{children:"2. Check that the API connection is working (should be green)"}),e.jsx("p",{children:"3. Create a test project using the button above"}),e.jsx("p",{children:"4. Navigate to /home/projects to see your projects"}),e.jsx("p",{children:"5. Click on a project to view the Project Overview screen"})]})]})})]})})}const nn=l.createContext(void 0),Wr={orgChoice:null,organizationCreated:!1},vu=({children:t})=>{const[s,r]=l.useState(Wr),a=(i,d)=>{r(m=>({...m,[i]:d}))},o=()=>{r(Wr)},n=!!(s.orgChoice&&s.accountData?.fullName&&s.accountData?.email&&s.accountData?.password&&(s.orgChoice==="join"?s.inviteData:s.orgData)&&s.securityData?.verified&&s.consentData?.termsAccepted&&s.consentData?.privacyAccepted&&s.environmentData&&s.organizationCreated);return e.jsx(nn.Provider,{value:{signUpData:s,updateSignUpData:a,clearSignUpData:o,isComplete:n},children:t})},Ke=()=>{const t=l.useContext(nn);if(!t)throw new Error("useSignUp must be used within SignUpProvider");return t};function Yr({nextStep:t}){const s=de();return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:ge,alt:"Pandaura AS Logo",className:"h-20 w-auto filter-none mb-6",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-2",children:"Welcome to Pandaura AS"}),e.jsx("p",{className:"text-secondary text-center mb-8",children:"Your complete industrial automation platform for PLCs, SCADA, and robotics"}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx(F,{onClick:t,className:"w-full",size:"lg",children:"Create Organization / Join Team"}),e.jsx(F,{onClick:()=>s("/signin"),variant:"outline",className:"w-full",size:"lg",children:"Sign In"})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-muted",children:e.jsx("p",{children:"Secure • On-Premise • Zero Trust"})})]})})})}function wu({nextStep:t,prevStep:s,onOrgChoice:r}){const{signUpData:a}=Ke(),[o,n]=l.useState(a.orgChoice),[i,d]=l.useState(a.inviteData?.code||""),[m,u]=l.useState(!1),[h,f]=l.useState(""),{validateInvite:k}=Ee(),v=()=>{r("create"),t()},x=async()=>{if(!i.trim()){f("Please enter an invite code");return}u(!0),f("");try{const b=await k(i.trim());b.valid?(r("join",{code:i.trim(),orgName:b.orgName,role:b.role,email:b.email}),t()):f(b.message||"Invalid or expired invite code")}catch{f("Failed to validate invite code. Please try again.")}finally{u(!1)}},N=b=>{navigator.clipboard.writeText(b),d(b)};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Get Started"})]}),e.jsx("p",{className:"text-secondary mb-6",children:"Choose how you'd like to begin with Pandaura AS:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${o==="create"?"border-accent bg-accent-light":"border-light hover:border-accent/50"}`,onClick:()=>n("create"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-md mr-4 ${o==="create"?"bg-accent text-white":"bg-gray-100 text-secondary"}`,children:e.jsx(Qs,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-primary",children:"Create New Organization"}),e.jsx("p",{className:"text-sm text-secondary",children:"Start fresh and set up your team's automation workspace"})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${o==="join"?"border-accent bg-accent-light":"border-light hover:border-accent/50"}`,onClick:()=>n("join"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-md mr-4 ${o==="join"?"bg-accent text-white":"bg-gray-100 text-secondary"}`,children:e.jsx(gs,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-primary",children:"Join Existing Team"}),e.jsx("p",{className:"text-sm text-secondary",children:"Use an invite code to join your organization"})]})]})})]}),o==="join"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"For Testing - Sample Invite Codes:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm text-blue-800",children:"TESTCODE123"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Viewer role • test@example.com"})]}),e.jsx("button",{onClick:()=>N("TESTCODE123"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:e.jsx(Cs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm text-blue-800",children:"ADMINCODE456"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Admin role • admin@example.com"})]}),e.jsx("button",{onClick:()=>N("ADMINCODE456"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:e.jsx(Cs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm text-blue-800",children:"EDITORCODE789"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Editor role • editor@example.com"})]}),e.jsx("button",{onClick:()=>N("EDITORCODE789"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:e.jsx(Cs,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Click the copy icon to use any of these test codes."})]}),e.jsxs("div",{children:[e.jsx(fe,{label:"Invite Code",placeholder:"Enter your invite code or paste invite link",value:i,onChange:b=>d(b.target.value),error:h,disabled:m}),e.jsx("p",{className:"text-xs text-muted mt-2",children:"Contact your organization admin for an invite code"})]}),e.jsx(F,{onClick:x,disabled:!i.trim()||m,className:"w-full",loading:m,children:m?"Validating...":"Validate & Continue"})]}),o==="create"&&e.jsx("div",{className:"mt-6",children:e.jsx(F,{onClick:v,className:"w-full",children:"Continue to Organization Setup"})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:e.jsx("p",{children:"Need help? Contact your administrator or check your email for an invite."})})]})})}const Nu=[{value:"manufacturing",label:"Manufacturing"},{value:"automotive",label:"Automotive"},{value:"food-beverage",label:"Food & Beverage"},{value:"oil-gas",label:"Oil & Gas"},{value:"pharmaceuticals",label:"Pharmaceuticals"},{value:"water-treatment",label:"Water Treatment"},{value:"power-energy",label:"Power & Energy"},{value:"mining",label:"Mining"},{value:"chemical",label:"Chemical"},{value:"other",label:"Other"}],Su=[{value:"1-10",label:"1-10 employees"},{value:"11-50",label:"11-50 employees"},{value:"51-200",label:"51-200 employees"},{value:"201-1000",label:"201-1000 employees"},{value:"1000+",label:"1000+ employees"}];function ku({nextStep:t,prevStep:s,onOrgData:r,isJoining:a=!1,inviteData:o}){const{signUpData:n}=Ke(),[i,d]=l.useState({orgName:o?.orgName||n.orgData?.orgName||"",industry:n.orgData?.industry||"",size:n.orgData?.size||""}),[m,u]=l.useState({});l.useEffect(()=>{n.orgData&&d(v=>({...v,orgName:o?.orgName||n.orgData?.orgName||v.orgName,industry:n.orgData?.industry||v.industry,size:n.orgData?.size||v.size}))},[n.orgData,o?.orgName]);const h=(v,x)=>{d(N=>({...N,[v]:x})),m[v]&&u(N=>({...N,[v]:""}))},f=()=>{const v={};return!a&&!i.orgName.trim()&&(v.orgName="Organization name is required"),i.industry||(v.industry="Please select your industry"),i.size||(v.size="Please select organization size"),u(v),Object.keys(v).length===0},k=()=>{f()&&(r(i),t())};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:a?"Organization Details":"Create Organization"})]}),a&&e.jsxs("div",{className:"mb-6 p-4 bg-accent-light rounded-lg",children:[e.jsxs("p",{className:"text-sm text-primary",children:[e.jsx("strong",{children:"Joining:"})," ",o?.orgName]}),e.jsxs("p",{className:"text-sm text-secondary",children:["Role: ",o?.role]})]}),e.jsxs("div",{className:"space-y-4",children:[!a&&e.jsx(fe,{label:"Organization / Company Name",placeholder:"Enter your organization name",value:i.orgName,onChange:v=>h("orgName",v.target.value),error:m.orgName,required:!0}),e.jsx(_e,{label:"Industry Sector",placeholder:"Select your industry",options:Nu,value:i.industry,onChange:v=>h("industry",v),error:m.industry,required:!0}),e.jsx(_e,{label:"Organization Size",placeholder:"Select organization size",options:Su,value:i.size,onChange:v=>h("size",v),error:m.size,required:!0})]}),e.jsx("div",{className:"mt-8",children:e.jsx(F,{onClick:k,className:"w-full",size:"lg",children:"Continue to Account Setup"})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:e.jsx("p",{children:"This information helps us customize your automation workspace"})})]})})}function Jr(t){return/.+@.+\..+/.test(t)}function Xr(t){return{length:t.length>=12,uppercase:/[A-Z]/.test(t),lowercase:/[a-z]/.test(t),number:/[0-9]/.test(t),special:/[^A-Za-z0-9]/.test(t)}}function Kr({nextStep:t,prevStep:s,onAccountData:r,isJoining:a=!1,inviteData:o}){const[n,i]=l.useState({fullName:"",email:"",password:"",confirmPassword:""}),[d,m]=l.useState({}),[u,h]=l.useState(!1),[f,k]=l.useState(!1),[v,x]=l.useState(!1),{createOrganization:N,acceptInvite:b}=Ee(),{signUpData:C,updateSignUpData:p}=Ke(),{showToast:y}=rt();be.useEffect(()=>{C.accountData&&i(c=>({...c,fullName:C.accountData?.fullName||c.fullName,email:C.accountData?.email||c.email,password:C.accountData?.password||c.password,confirmPassword:C.accountData?.confirmPassword||c.confirmPassword}))},[C.accountData]);const w=(c,g)=>{const A={...n,[c]:g};if(i(A),p("accountData",{fullName:A.fullName,email:A.email,password:A.password,confirmPassword:A.confirmPassword}),d[c]&&m(O=>({...O,[c]:""})),c==="email"&&g&&!Jr(g)&&m(O=>({...O,email:"Please enter a valid email address"})),c==="confirmPassword"||c==="password"&&A.confirmPassword){const O=c==="password"?g:A.password,D=c==="confirmPassword"?g:A.confirmPassword;m(D&&O!==D?R=>({...R,confirmPassword:"Passwords do not match"}):R=>({...R,confirmPassword:""}))}},S=()=>{const c={};if(n.fullName.trim()||(c.fullName="Full name is required"),n.email.trim()?Jr(n.email)||(c.email="Please enter a valid email address"):c.email="Email is required",!n.password)c.password="Password is required";else{const g=Xr(n.password);Object.values(g).every(Boolean)||(c.password="Password does not meet all requirements")}return n.confirmPassword?n.password!==n.confirmPassword&&(c.confirmPassword="Passwords do not match"):c.confirmPassword="Please confirm your password",m(c),Object.keys(c).length===0},T=async()=>{if(S()){x(!0);try{if(p("accountData",{fullName:n.fullName,email:n.email,password:n.password,confirmPassword:n.confirmPassword}),r(n),C.orgChoice==="create"&&C.orgData&&!a){const c=await N({orgName:C.orgData.orgName,industry:C.orgData.industry,size:C.orgData.size,fullName:n.fullName,email:n.email,password:n.password});c.success?(y({variant:"success",title:"Organization Created!",message:`Welcome to ${C.orgData.orgName}! Your organization has been successfully created.`,duration:5e3}),p("organizationCreated",!0),t()):y({variant:"error",title:"Organization Creation Failed",message:c.message||"Failed to create organization. Please try again.",duration:5e3})}else if(C.orgChoice==="join"&&C.inviteData&&a){const c=await b({code:C.inviteData.code,fullName:n.fullName,email:n.email,password:n.password});c.success?(y({variant:"success",title:"Welcome to the Team!",message:`Successfully joined ${C.inviteData.orgName}! Your account has been created.`,duration:5e3}),p("organizationCreated",!0),t()):y({variant:"error",title:"Join Organization Failed",message:c.message||"Failed to join organization. Please try again.",duration:5e3})}else t()}catch(c){console.error("Organization creation error:",c),y({variant:"error",title:"Error",message:"An unexpected error occurred. Please try again.",duration:5e3})}finally{x(!1)}}},j=Xr(n.password);return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Account Setup"})]}),a&&o&&e.jsxs("div",{className:"mb-6 p-4 bg-accent-light rounded-lg",children:[e.jsxs("p",{className:"text-sm text-primary",children:[e.jsx("strong",{children:"Joining:"})," ",o.orgName]}),e.jsxs("p",{className:"text-sm text-secondary",children:["Role: ",o.role]}),e.jsx("p",{className:"text-xs text-secondary mt-2",children:"You can use any email address for your account."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(fe,{label:"Full Name",placeholder:"Enter your full name",value:n.fullName,onChange:c=>w("fullName",c.target.value),error:d.fullName,required:!0}),e.jsx(fe,{label:"Work Email",type:"email",placeholder:"Enter your work email",value:n.email,onChange:c=>w("email",c.target.value),error:d.email,required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{label:"Create Password",type:u?"text":"password",placeholder:"Create a strong password",value:n.password,onChange:c=>w("password",c.target.value),error:d.password,required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-8 text-secondary hover:text-primary transition-colors",children:u?e.jsx(is,{className:"w-5 h-5"}):e.jsx(ut,{className:"w-5 h-5"})})]}),n.password&&e.jsxs("div",{className:"text-xs space-y-1 p-3 bg-gray-50 rounded-md",children:[e.jsx("p",{className:"font-medium text-secondary mb-2",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[e.jsxs("div",{className:`flex items-center ${j.length?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:j.length?"✓":"○"}),"At least 12 characters"]}),e.jsxs("div",{className:`flex items-center ${j.uppercase?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:j.uppercase?"✓":"○"}),"Uppercase letter"]}),e.jsxs("div",{className:`flex items-center ${j.lowercase?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:j.lowercase?"✓":"○"}),"Lowercase letter"]}),e.jsxs("div",{className:`flex items-center ${j.number?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:j.number?"✓":"○"}),"Number"]}),e.jsxs("div",{className:`flex items-center ${j.special?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:j.special?"✓":"○"}),"Special character"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(fe,{label:"Confirm Password",type:f?"text":"password",placeholder:"Confirm your password",value:n.confirmPassword,onChange:c=>w("confirmPassword",c.target.value),error:d.confirmPassword,required:!0}),e.jsx("button",{type:"button",onClick:()=>k(!f),className:"absolute right-3 top-8 text-secondary hover:text-primary transition-colors",children:f?e.jsx(is,{className:"w-5 h-5"}):e.jsx(ut,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(F,{onClick:T,className:"w-full",size:"lg",disabled:v,children:v?"Creating Organization...":"Continue to Security Setup"})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:e.jsx("p",{children:"Strong passwords help protect your automation workspace"})})]})})}function Qr({nextStep:t,prevStep:s,onSecurityData:r}){const{signUpData:a,updateSignUpData:o}=Ke(),{setupTwoFactor:n,verifyTwoFactor:i,login:d,logout:m,isAuthenticated:u,token:h}=Ee(),{showToast:f}=rt(),[k,v]=l.useState(a.securityData?.method||null),[x,N]=l.useState(a.securityData?.code||""),[b,C]=l.useState(a.securityData?.secret||""),[p,y]=l.useState(a.securityData?.qrCodeUrl||""),[w,S]=l.useState(""),[T,j]=l.useState(!1),[c,g]=l.useState(!1),[A,O]=l.useState(a.securityData?.verified||!1),[D,R]=l.useState(!1),[V,M]=l.useState(0),[L,B]=l.useState(0),[z,J]=l.useState(!1);l.useEffect(()=>{k==="totp"&&!b&&!p&&a.accountData&&ie()},[k,b,p,a.accountData]);const ie=async()=>{if(!a.accountData?.email||!a.accountData?.password){S("Account credentials not available. Please go back and complete account creation.");return}if(a.orgChoice==="create"&&!a.organizationCreated){S("Organization not yet created. Please go back and complete the previous step.");return}j(!0),S("");try{let G=!u||!h;if(console.log("🔍 Authentication check:",{isAuthenticated:u,hasToken:!!h,orgChoice:a.orgChoice,organizationCreated:a.organizationCreated,needsLogin:G}),G){R(!0),console.log("🔐 User not authenticated, logging in...");const Ue=await d(a.accountData.email,a.accountData.password);if(!Ue.success)throw new Error(Ue.message||"Failed to authenticate");R(!1),console.log("✅ Login successful for 2FA setup")}else console.log("✅ User already authenticated, proceeding with 2FA setup");console.log("🔒 Calling setupTwoFactor...");const ae=await n();console.log("✅ setupTwoFactor result:",ae),C(ae.secret),y(ae.qrCodeUrl),o("securityData",{...a.securityData,method:"totp",secret:ae.secret,qrCodeUrl:ae.qrCodeUrl,code:x}),f({variant:"success",title:"2FA Setup Initiated",message:"Please scan the QR code with your authenticator app."})}catch(G){console.error("2FA setup error:",G),console.error("Error details:",{message:G.message,response:G.response?.data,status:G.response?.status,config:G.config}),M(ae=>ae+1),S(G.message||"Failed to setup 2FA. Please try again."),f({variant:"error",title:"2FA Setup Failed",message:`Attempt ${V+1}/3: Unable to generate QR code. ${V>=2?"Please contact support if issue persists.":"Please try again."}`})}finally{j(!1),R(!1)}},U=()=>{C(""),y(""),S(""),ie()},Z=async()=>{if(x.length!==6){S("Please enter a 6-digit code");return}g(!0),S("");try{const G=await i(x);if(G.success){O(!0);const ae={method:k,secret:b,qrCodeUrl:p,code:x,verified:!0};o("securityData",ae),r(ae),f({variant:"success",title:"2FA Verified",message:"Two-factor authentication has been successfully enabled."}),setTimeout(()=>{t()},1500)}else throw new Error(G.message)}catch(G){console.error("2FA verification error:",G),B(ae=>ae+1),S(G.message||"Invalid verification code. Please try again."),f({variant:"error",title:"Verification Failed",message:`Attempt ${L+1}/5: Invalid code. ${L>=4?"Please check your authenticator app setup.":"Please check your authenticator app and try again."}`})}finally{g(!1)}},W=G=>{v(G),S(""),N(""),O(!1),G==="sms"&&o("securityData",{method:"sms",code:"",verified:!1})},Y=()=>{if(!k){S("Please select a security method.");return}if(k==="totp"&&!A){S("Please verify your 2FA setup before continuing.");return}if(k==="sms"&&x.length!==6){S("Please enter the 6-digit SMS code.");return}const G={method:k,secret:b,qrCodeUrl:p,code:x,verified:k==="sms"||A};o("securityData",G),r(G),t()},le=k==="totp"?A:k==="sms"&&x.length===6;return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Secure Your Account"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-3 text-base font-medium text-secondary",children:"Choose your security method:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-center border-2 rounded-lg px-4 py-3 cursor-pointer transition-all ${k==="totp"?"border-accent bg-accent/5":"border-gray-200 bg-transparent hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",name:"method",value:"totp",checked:k==="totp",onChange:()=>W("totp"),className:"hidden"}),e.jsx("span",{className:"mr-3",children:k==="totp"?e.jsx(ke,{className:"w-5 h-5 text-accent"}):e.jsx(fr,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-base font-medium text-primary",children:"Authenticator App (TOTP)"}),e.jsx("p",{className:"text-sm text-secondary mt-1",children:"Recommended - Use Google Authenticator or similar app"})]}),A&&k==="totp"&&e.jsx(ke,{className:"w-5 h-5 text-green-600 ml-2"})]}),e.jsxs("label",{className:`flex items-center border-2 rounded-lg px-4 py-3 cursor-pointer transition-all ${k==="sms"?"border-accent bg-accent/5":"border-gray-200 bg-transparent hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",name:"method",value:"sms",checked:k==="sms",onChange:()=>W("sms"),className:"hidden"}),e.jsx("span",{className:"mr-3",children:k==="sms"?e.jsx(ke,{className:"w-5 h-5 text-accent"}):e.jsx(fr,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-base font-medium text-primary",children:"SMS Backup Code"}),e.jsx("p",{className:"text-sm text-secondary mt-1",children:"Receive codes via text message"})]})]})]})]}),k==="totp"&&e.jsxs("div",{className:"space-y-4",children:[!b&&!p&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(F,{onClick:ie,disabled:T||!a.accountData?.email,className:"w-full",children:T?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2 animate-spin"}),D?"Authenticating...":"Setting up 2FA..."]}):"Setup Authenticator App"}),!a.accountData?.email&&e.jsxs("p",{className:"text-sm text-yellow-600 mt-2 flex items-center justify-center",children:[e.jsx(pe,{className:"w-4 h-4 mr-1"}),"Account credentials not available"]})]}),p&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-sm text-secondary",children:"Scan this QR code with your authenticator app:"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-48 h-48 border-2 border-gray-200 rounded-lg flex items-center justify-center bg-white",children:e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=192x192&data=${encodeURIComponent(p)}`,alt:"2FA QR Code",className:"w-44 h-44"})})}),V>0&&V<3&&e.jsx("div",{className:"mt-4",children:e.jsxs(F,{onClick:U,variant:"outline",size:"sm",disabled:T,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Retry QR Code Generation"]})})]}),p&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(fe,{label:"Verification Code",placeholder:"Enter 6-digit code",value:x,onChange:G=>{const ae=G.target.value.replace(/\D/g,"");N(ae),S("")},maxLength:6,error:w,disabled:A,className:"text-center text-lg font-mono"}),!A&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{onClick:Z,disabled:x.length!==6||c,className:"w-full",variant:A?"success":"primary",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify & Enable 2FA"}),L>0&&L<5&&e.jsxs("p",{className:"text-sm text-yellow-600 text-center",children:["Attempt ",L,"/5 - Double-check the code in your authenticator app"]}),L>=3&&!A&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Having trouble?"})," Make sure your device's time is synchronized and you're using the latest code."]})})]}),A&&e.jsx("div",{className:"text-center py-2",children:e.jsxs("div",{className:"inline-flex items-center text-green-600",children:[e.jsx(ke,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"2FA Successfully Enabled!"})]})})]})]}),k==="sms"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," SMS-based 2FA is available as a backup option. For this demo, enter any 6-digit code to continue."]})}),e.jsx(fe,{label:"SMS Verification Code",placeholder:"Enter 6-digit SMS code",value:x,onChange:G=>{const ae=G.target.value.replace(/\D/g,"");N(ae),S("")},maxLength:6,error:w,className:"text-center text-lg font-mono"})]}),w&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),w]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(F,{variant:"secondary",onClick:s,disabled:c,children:"Back"}),e.jsx(F,{onClick:Y,disabled:!le||c,children:k==="totp"&&A?"Continue":"Next"})]})]})]})})}function Zr({nextStep:t,prevStep:s,onConsentData:r}){const{signUpData:a}=Ke(),[o,n]=l.useState(a.consentData?.termsAccepted||!1),[i,d]=l.useState(a.consentData?.privacyAccepted||!1),[m,u]=l.useState({}),h=()=>{const f={};o||(f.consent1="You must acknowledge zero-trust policy."),i||(f.consent2="You must agree to the EULA."),u(f),Object.keys(f).length===0&&(r({termsAccepted:o,privacyAccepted:i}),t())};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-fit bg-background relative overflow-hidden py-0 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsx("div",{className:"z-10 mb-8 flex flex-col items-center",children:e.jsx("img",{src:ge,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsxs("div",{className:"w-[600px] max-w-lg bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary text-center mb-6",children:"Zero-Trust Ready Consent"}),e.jsxs("form",{className:"space-y-6",onSubmit:f=>{f.preventDefault(),h()},children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:f=>n(f.target.checked),className:"accent-accent w-[15px] h-[15px] mt-1"}),e.jsx("span",{className:"text-primary text-base",children:"I acknowledge Pandaura AS uses role-based access and activity monitoring in accordance with zero-trust security principles."})]}),m.consent1&&e.jsx("p",{className:"text-error text-sm mt-2",children:m.consent1})]}),e.jsx("div",{className:"relative",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:f=>d(f.target.checked),className:"accent-accent w-[15px] h-[15px] mt-1"}),e.jsx("span",{className:"text-primary text-base",children:"I agree to the End User License Agreement."})]})}),e.jsx("a",{href:"/eula",target:"_blank",rel:"noopener noreferrer",className:"text-[#9090ee] underline ml-2 text-sm",children:"View EULA"}),m.consent2&&e.jsx("p",{className:"text-error text-sm mt-2",children:m.consent2}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 text-muted font-medium transition-all",onClick:s,children:"Back"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:"Next"})]})]})]})]})}function Cu(){const t=localStorage.getItem("pandaura_instance_id");if(t)return t;const s="INST-"+Math.random().toString(36).substr(2,9).toUpperCase();return localStorage.setItem("pandaura_instance_id",s),s}function Au(){const t=document.createElement("canvas"),s=t.getContext("2d");s.textBaseline="top",s.font="14px Arial",s.fillText("Device fingerprint",2,2);const r=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,Intl.DateTimeFormat().resolvedOptions().timeZone,t.toDataURL()].join("|");let a=0;for(let o=0;o<r.length;o++){const n=r.charCodeAt(o);a=(a<<5)-a+n,a=a&a}return Math.abs(a).toString(36)}function ea({nextStep:t,prevStep:s,onEnvironmentData:r}){const{signUpData:a,updateSignUpData:o}=Ke(),{showToast:n}=rt(),[i,d]=l.useState(a.environmentData?.instanceId||""),[m,u]=l.useState(a.environmentData?.fingerprint||""),[h,f]=l.useState(!1),[k,v]=l.useState(""),[x,N]=l.useState(a.environmentData?.bound||!1),[b,C]=l.useState(0),[p,y]=l.useState(!1),[w,S]=l.useState(!1);l.useEffect(()=>{const g=Cu(),A=Au();d(g),u(A);const O=a.orgChoice==="create";S(O),o("environmentData",{...a.environmentData,instanceId:g,fingerprint:A})},[]);const T=async()=>{f(!0),v("");try{console.log("Starting device binding for email:",a.accountData?.email);const g=await fetch(`${gt.apiBaseUrl}/api/v1/auth/signup-device-bind`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({instanceId:i,deviceFingerprintHash:m,email:a.accountData?.email})});if(!g.ok){const O=await g.json().catch(()=>({}));throw new Error(O.message||"Failed to bind device")}N(!0),C(0);const A={instanceId:i,fingerprint:m,bound:!0,bindingTimestamp:new Date().toISOString(),isOrgCreator:w};o("environmentData",A),r(A),n({variant:"success",title:"Device Bound Successfully",message:"Your account is now securely bound to this device."}),setTimeout(()=>{t()},2e3)}catch(g){console.error("Device binding error:",g),C(A=>A+1),v(g.message||"Failed to bind device. Please try again."),n({variant:"error",title:"Device Binding Failed",message:`Attempt ${b+1}/3: ${g.message||"Device binding failed"}`})}finally{f(!1)}},j=()=>{v(""),N(!1),T()},c=()=>{if(!w){v("Manual override is only available for organization creators."),n({variant:"error",title:"Access Denied",message:"Manual override is restricted to organization creators only."});return}const g={instanceId:i,fingerprint:m,bound:!0,manualOverride:!0,bindingTimestamp:new Date().toISOString(),isOrgCreator:w};o("environmentData",g),r(g),n({variant:"success",title:"Manual Override Applied",message:"Device binding bypassed by organization creator."}),t()};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(Te,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Environment Binding"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center",children:e.jsx(Ve,{className:"w-8 h-8 text-accent"})})}),e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Secure Your Account"}),e.jsx("p",{className:"text-sm text-secondary",children:w?"As an organization creator, bind your device for enhanced security.":"Bind your account to this device and environment to prevent unauthorized access."}),w&&e.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx(Ve,{className:"w-3 h-3 inline mr-1"}),"Organization Creator: Manual override available if binding fails"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(la,{className:"w-5 h-5 text-secondary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Device Instance"}),e.jsx("p",{className:"text-xs text-secondary font-mono",children:i})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-secondary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Device Fingerprint"}),e.jsxs("p",{className:"text-xs text-secondary font-mono",children:[m.substring(0,16),"..."]})]})]})]}),x?e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Device Successfully Bound"}),e.jsx("p",{className:"text-xs text-green-600",children:"Your account is now secured to this environment"})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{onClick:T,disabled:h,className:"w-full",size:"lg",children:h?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2 animate-spin"}),"Binding Device..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Bind This Device"]})}),b>0&&b<3&&!x&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(F,{onClick:j,variant:"outline",className:"w-full",disabled:h,children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Retry Device Binding"]}),e.jsxs("p",{className:"text-sm text-yellow-600 text-center",children:["Attempt ",b,"/3 failed. Please try again."]})]}),(b>=3||w)&&!x&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800",children:b>=3?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Multiple binding attempts failed."}),w?" As an organization creator, you can use manual override.":" Please contact support."]}):e.jsx(e.Fragment,{children:"Organization creators can use manual override if needed."})})}),(b>=3||w)&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>y(!p),className:"text-sm text-accent hover:text-accent-dark underline",children:[p?"Hide":"Show"," organization creator options"]}),p&&e.jsxs("div",{className:"p-3 bg-gray-50 border rounded-lg space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-secondary",children:"Organization Creator Options:"}),e.jsx(F,{onClick:c,variant:"outline",size:"sm",className:"w-full border-yellow-300 text-yellow-700 hover:bg-yellow-50",disabled:!w,children:w?"Manual Override (Creator)":"Override Not Available"}),e.jsxs("p",{className:"text-xs text-yellow-600",children:["⚠️ ",w?"As organization creator, you can bypass device binding. Use with caution.":"Manual override is only available to organization creators."]})]})]})]})]}),k&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),k]})}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-secondary",children:"Device binding prevents credential reuse on unauthorized devices"})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(F,{variant:"secondary",onClick:s,disabled:h,children:"Back"}),x&&e.jsx(F,{onClick:t,children:"Continue to Finish"})]})]})]})]})]})})}function ta({onComplete:t,isLoading:s}){const{signUpData:r}=Ke(),a=()=>r.orgChoice==="create"?r.orgData?.orgName||"your organization":r.orgChoice==="join"?r.inviteData?.orgName||"the organization":"your organization",o=()=>r.orgChoice==="join"?r.inviteData?.role||"Member":"Admin",n=()=>r.securityData?.verified?"2FA Authentication enabled":r.securityData?.method==="sms"?"SMS backup authentication configured":"Basic authentication",i=()=>r.environmentData?.bound?r.environmentData.manualOverride?"Device binding overridden by administrator":"Device securely bound to account":"Device binding skipped";return e.jsx("div",{className:"w-full max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ke,{className:"w-12 h-12 text-green-600"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary mb-2",children:"Welcome to Pandaura AS!"}),e.jsxs("p",{className:"text-lg text-secondary",children:["Account created and joined ",e.jsx("strong",{children:a()})]}),e.jsx("p",{className:"text-sm text-secondary mt-1",children:"You're ready to collaborate with your team."})]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wide",children:"Setup Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(gs,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:a()}),e.jsxs("p",{className:"text-xs text-blue-600",children:["Role: ",o()]})]}),e.jsx(ke,{className:"w-4 h-4 text-green-600"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(Ve,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Security Setup"}),e.jsx("p",{className:"text-xs text-green-600",children:n()})]}),e.jsx(ke,{className:"w-4 h-4 text-green-600"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[e.jsx(Ve,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Device Security"}),e.jsx("p",{className:"text-xs text-purple-600",children:i()})]}),e.jsx(ke,{className:"w-4 h-4 text-green-600"})]})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg mb-8",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Account Email:"}),e.jsx("span",{className:"text-sm text-primary",children:r.accountData?.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Full Name:"}),e.jsx("span",{className:"text-sm text-primary",children:r.accountData?.fullName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Organization:"}),e.jsx("span",{className:"text-sm text-primary",children:a()})]}),r.environmentData?.instanceId&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Device Instance:"}),e.jsx("span",{className:"text-xs font-mono text-secondary",children:r.environmentData.instanceId})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{onClick:t,disabled:s,className:"w-full",size:"lg",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Finalizing Setup..."]}):e.jsxs(e.Fragment,{children:["Go to Dashboard",e.jsx(Ye,{className:"w-4 h-4 ml-2"})]})}),e.jsx("p",{className:"text-center text-xs text-secondary",children:"Your organization context and team permissions are now active."})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Security Notice:"})," Your account has been configured with enhanced security features.",r.securityData?.verified&&" Keep your authenticator app accessible for future logins.",r.environmentData?.bound&&" Your device binding helps protect against unauthorized access."]})})]})})}function Tu(){const[t,s]=l.useState(0),[r,a]=l.useState(!1),{createOrganization:o,acceptInvite:n,login:i,isAuthenticated:d,isLoading:m}=Ee(),{signUpData:u,updateSignUpData:h,clearSignUpData:f,isComplete:k}=Ke(),v=de();l.useEffect(()=>{!m&&!d?console.log("🔍 SignUp: User not authenticated, staying in signup flow"):!m&&d&&u.orgChoice&&console.log("🔍 SignUp: User is authenticated and in signup flow, continuing with steps")},[d,m,u.orgChoice]);const x=()=>s(g=>g+1),N=()=>s(g=>Math.max(g-1,0)),b=(g,A)=>{h("orgChoice",g),g==="join"&&A&&h("inviteData",A)},C=g=>{h("orgData",g)},p=g=>{h("accountData",g)},y=g=>{h("securityData",g)},w=g=>{h("consentData",g)},S=g=>{h("environmentData",g)},T=()=>{console.log("🧹 SignUp: Clearing all signup data including localStorage for future sessions"),f(),localStorage.removeItem("pandaura_instance_id"),console.log("✅ SignUp: All signup data cleared - form will be empty on next visit")},j=async()=>{if(!u.accountData)throw new Error("Account data is required");a(!0);try{if(u.organizationCreated){T(),v("/home",{replace:!0});return}if(u.orgChoice==="create"){if(!u.orgData)throw new Error("Organization data is required");const g=await o({orgName:u.orgData.orgName,industry:u.orgData.industry,size:u.orgData.size,fullName:u.accountData.fullName,email:u.accountData.email,password:u.accountData.password});if(g.success)T(),v("/home",{replace:!0});else throw new Error(g.message||"Failed to create organization")}else if(u.orgChoice==="join"){if(!u.inviteData)throw new Error("Invite data is required");const g=await n({code:u.inviteData.code,fullName:u.accountData.fullName,email:u.accountData.email,password:u.accountData.password});if(g.success)T(),v("/home",{replace:!0});else throw new Error(g.message||"Failed to join organization")}}catch(g){console.error("Sign up error:",g),alert("Sign up failed. Please try again.")}finally{a(!1)}},c=()=>{switch(t){case 0:return e.jsx(Yr,{nextStep:x});case 1:return e.jsx(wu,{nextStep:x,prevStep:N,onOrgChoice:b});case 2:return u.orgChoice==="join"?e.jsx(Kr,{nextStep:x,prevStep:N,onAccountData:p,isJoining:!0,inviteData:u.inviteData}):e.jsx(ku,{nextStep:x,prevStep:N,onOrgData:C,isJoining:!1,inviteData:u.inviteData});case 3:return u.orgChoice==="join"?e.jsx(Qr,{nextStep:x,prevStep:N,onSecurityData:y}):e.jsx(Kr,{nextStep:x,prevStep:N,onAccountData:p,isJoining:!1,inviteData:u.inviteData});case 4:return u.orgChoice==="join"?e.jsx(Zr,{nextStep:x,prevStep:N,onConsentData:w}):e.jsx(Qr,{nextStep:x,prevStep:N,onSecurityData:y});case 5:return u.orgChoice==="join"?e.jsx(ea,{nextStep:x,prevStep:N,onEnvironmentData:S}):e.jsx(Zr,{nextStep:x,prevStep:N,onConsentData:w});case 6:return u.orgChoice==="join"?e.jsx(ta,{onComplete:j,isLoading:r}):e.jsx(ea,{nextStep:x,prevStep:N,onEnvironmentData:S});case 7:return e.jsx(ta,{onComplete:j,isLoading:r});default:return e.jsx(Yr,{nextStep:x})}};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-8 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 w-full max-w-md",children:[t>0&&t<7&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsxs("span",{className:"text-sm text-secondary",children:["Step ",t," of 6"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${t/6*100}%`}})})]}),c()]})]})}function Eu(){const{isAuthenticated:t,isLoading:s}=Ee();return s?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted",children:"Loading..."})]})}):e.jsx(Is,{to:"/signup",replace:!0})}function Pu(){return be.useEffect(()=>{nr()},[]),e.jsx(Xl,{children:e.jsx(vu,{children:e.jsx(lc,{children:e.jsx(Kl,{children:e.jsx(jn,{children:e.jsxs(vn,{children:[e.jsx(Q,{path:"/",element:e.jsx(Eu,{})}),e.jsx(Q,{path:"/signup",element:e.jsx(Tu,{})}),e.jsx(Q,{path:"/signin",element:e.jsx(Zd,{})}),e.jsx(Q,{path:"/eula",element:e.jsx(ec,{})}),e.jsx(Q,{path:"/home",element:e.jsx(ue,{children:e.jsx(ss,{})})}),e.jsx(Q,{path:"/home/projects",element:e.jsx(ue,{children:e.jsx(ss,{})})}),e.jsx(Q,{path:"/home/projects/:projectId",element:e.jsx(ue,{children:e.jsx(ss,{})})}),e.jsx(Q,{path:"/home/quick-tools",element:e.jsx(ue,{children:e.jsx(ss,{})})}),e.jsx(Q,{path:"/debug/projects",element:e.jsx(ue,{children:e.jsx(ju,{})})}),e.jsx(Q,{path:"/app",element:e.jsx(Is,{to:"/pandaura-as",replace:!0})}),e.jsx(Q,{path:"/pandaura-as",element:e.jsx(ue,{children:e.jsx(De,{children:e.jsx(Ps,{})})})}),e.jsx(Q,{path:"/logic-studio",element:e.jsx(ue,{children:e.jsx(De,{children:e.jsx(Ge,{children:e.jsx(Ls,{})})})})}),e.jsx(Q,{path:"/autodocs",element:e.jsx(ue,{children:e.jsx(De,{children:e.jsx(Ms,{})})})}),e.jsx(Q,{path:"/tag-database",element:e.jsx(ue,{children:e.jsx(De,{children:e.jsx(Ge,{children:e.jsx(ts,{})})})})}),e.jsx(Q,{path:"/tag-database/:projectId",element:e.jsx(ue,{children:e.jsx(De,{children:e.jsx(Ge,{children:e.jsx(ts,{})})})})}),e.jsx(Q,{path:"/case-studies",element:e.jsx(ue,{children:e.jsx(De,{children:e.jsx(_s,{})})})}),e.jsx(Q,{path:"/workspace/:projectId/pandaura-as",element:e.jsx(ue,{children:e.jsx(kt,{children:e.jsx(De,{children:e.jsx(Ps,{})})})})}),e.jsx(Q,{path:"/workspace/:projectId/logic-studio",element:e.jsx(ue,{children:e.jsx(kt,{children:e.jsx(De,{children:e.jsx(Ge,{children:e.jsx(Ls,{})})})})})}),e.jsx(Q,{path:"/workspace/:projectId/autodocs",element:e.jsx(ue,{children:e.jsx(kt,{children:e.jsx(De,{children:e.jsx(Ms,{})})})})}),e.jsx(Q,{path:"/workspace/:projectId/tag-database",element:e.jsx(ue,{children:e.jsx(kt,{children:e.jsx(De,{children:e.jsx(Ge,{children:e.jsx(ts,{})})})})})}),e.jsx(Q,{path:"/workspace/:projectId/case-studies",element:e.jsx(ue,{children:e.jsx(kt,{children:e.jsx(De,{children:e.jsx(_s,{})})})})}),e.jsx(Q,{path:"/tool/logic",element:e.jsx(St,{children:e.jsx(Ge,{children:e.jsx(Ls,{sessionMode:!0})})})}),e.jsx(Q,{path:"/tool/tags",element:e.jsx(St,{children:e.jsx(Ge,{children:e.jsx(ts,{sessionMode:!0})})})}),e.jsx(Q,{path:"/tool/autodocs",element:e.jsx(St,{children:e.jsx(Ms,{sessionMode:!0})})}),e.jsx(Q,{path:"/tool/signalflow",element:e.jsx(St,{children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"SignalFlow (Coming Soon)"}),e.jsx("p",{className:"text-muted mt-2",children:"Signal path visualization and tracing"})]})})}),e.jsx(Q,{path:"/tool/assistant",element:e.jsx(St,{children:e.jsx(Ps,{sessionMode:!0})})}),e.jsx(Q,{path:"/profile",element:e.jsx(ue,{children:e.jsx(Jd,{})})}),e.jsx(Q,{path:"/feedback",element:e.jsx(fu,{})}),e.jsx(Q,{path:"/privacy",element:e.jsx(bu,{})}),e.jsx(Q,{path:"/terms",element:e.jsx(yu,{})}),e.jsx(Q,{path:"/case-study-library",element:e.jsx(_s,{})}),e.jsx(Q,{path:"*",element:e.jsx(Is,{to:"/signin",replace:!0})})]})})})})})})}nr();Cn.createRoot(document.getElementById("root")).render(e.jsx(be.StrictMode,{children:e.jsx(Pu,{})}));
