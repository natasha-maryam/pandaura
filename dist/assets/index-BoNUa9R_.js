import{r as Cc,a as Ac,g as Qs}from"./vendor-DavUf6mE.js";import{r as f,R as Ge,u as He,a as Rr,b as Wn,c as Ec,B as Tc,d as Pc,e as je,N as Es}from"./router-CtzKmtvq.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Yr={exports:{}},Sn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta;function Dc(){if(Ta)return Sn;Ta=1;var e=Cc(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,c){var u,m={},p=null,h=null;c!==void 0&&(p=""+c),d.key!==void 0&&(p=""+d.key),d.ref!==void 0&&(h=d.ref);for(u in d)s.call(d,u)&&!i.hasOwnProperty(u)&&(m[u]=d[u]);if(l&&l.defaultProps)for(u in d=l.defaultProps,d)m[u]===void 0&&(m[u]=d[u]);return{$$typeof:n,type:l,key:p,ref:h,props:m,_owner:a.current}}return Sn.Fragment=r,Sn.jsx=o,Sn.jsxs=o,Sn}var Pa;function Ic(){return Pa||(Pa=1,Yr.exports=Dc()),Yr.exports}var t=Ic(),sr={},Da;function Rc(){if(Da)return sr;Da=1;var e=Ac();return sr.createRoot=e.createRoot,sr.hydrateRoot=e.hydrateRoot,sr}var Fc=Rc();const Lc=Qs(Fc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mc=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,s)=>s?s.toUpperCase():r.toLowerCase()),Ia=e=>{const n=Mc(e);return n.charAt(0).toUpperCase()+n.slice(1)},go=(...e)=>e.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim(),_c=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=f.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},d)=>f.createElement("svg",{ref:d,...zc,width:n,height:n,stroke:e,strokeWidth:s?Number(r)*24/Number(n):r,className:go("lucide",a),...!i&&!_c(l)&&{"aria-hidden":"true"},...l},[...o.map(([c,u])=>f.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(e,n)=>{const r=f.forwardRef(({className:s,...a},i)=>f.createElement($c,{ref:i,iconNode:n,className:go(`lucide-${Oc(Ia(e))}`,`lucide-${e}`,s),...a}));return r.displayName=Ia(e),r};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ra=ee("activity",Bc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ht=ee("arrow-left",Uc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],$t=ee("arrow-right",Vc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Fa=ee("bot",Hc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Mt=ee("brain",qc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ks=ee("building-2",Wc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Zs=ee("check",Gc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ut=ee("chevron-down",Jc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fr=ee("chevron-left",Xc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yn=ee("chevron-right",Yc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Kc=ee("chevron-up",Qc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ze=ee("circle-alert",Zc);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],et=ee("circle-check-big",ed);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],La=ee("circle-x",td);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Oa=ee("circle",nd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],It=ee("clock",rd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ea=ee("cloud-upload",sd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],_t=ee("code",ad);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Qr=ee("copy",id);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],yo=ee("cpu",od);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],cd=ee("credit-card",ld);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],cn=ee("database",dd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Bt=ee("download",ud);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vr=ee("eye-off",md);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mn=ee("eye",hd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],fd=ee("file-down",pd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ke=ee("file-text",xd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Ts=ee("folder-open",gd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],bd=ee("git-branch",yd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],wd=ee("git-compare",jd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Nd=ee("grid-3x3",vd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],bo=ee("history",kd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Cd=ee("house",Sd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Lr=ee("image",Ad);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jo=ee("info",Ed);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Pd=ee("key",Td);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ps=ee("lightbulb",Dd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Rd=ee("list",Id);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hn=ee("loader-circle",Fd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],wo=ee("loader",Ld);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ds=ee("log-out",Od);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ma=ee("map-pin",Md);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],zd=ee("maximize-2",_d);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],ta=ee("message-circle",$d);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],pn=ee("message-square",Bd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Vd=ee("minimize-2",Ud);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=[["path",{d:"M5 12h14",key:"1ays0h"}]],qd=ee("minus",Hd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],vo=ee("monitor",Wd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],fn=ee("plus",Gd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ue=ee("refresh-cw",Jd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Nr=ee("rotate-ccw",Xd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Dt=ee("save",Yd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],On=ee("search",Qd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Gn=ee("send",Kd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Or=ee("settings",Zd);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Pt=ee("shield",eu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],nu=ee("smartphone",tu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],su=ee("sparkles",ru);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],iu=ee("square-pen",au);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],lu=ee("tag",ou);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],du=ee("test-tube",cu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],bn=ee("trash-2",uu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Jn=ee("triangle-alert",mu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],jn=ee("upload",hu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],No=ee("user",pu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mr=ee("users",fu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],ko=ee("wand-sparkles",xu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],So=ee("wifi-off",gu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Co=ee("wifi",yu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ye=ee("x",bu);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Vt=ee("zap",ju),Ve="/assets/logo-CwhF-OLf.png",Is=({className:e=""})=>t.jsx("div",{className:`flex items-center gap-1 ${e}`,children:t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),t.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})});function Ao(){const[e,n]=f.useState(!1),[r,s]=f.useState(!1),[a,i]=f.useState(""),[o,l]=f.useState(!1),[d,c]=f.useState([{id:"1",text:"Pandaura AS (Mini) is your smart co-engineer. It adapts to whatever page you're on and helps with tips, training, logic guidance, and more — always context-aware, always available.",sender:"pandaura",timestamp:new Date().toLocaleTimeString()}]),u=f.useRef(null),m=f.useRef(null),p=()=>{m.current?.scrollIntoView({behavior:"smooth"})};f.useEffect(()=>{p()},[d]),f.useEffect(()=>{const g=b=>{if(u.current&&!u.current.contains(b.target)){const N=document.querySelector("[data-pandaura-orb]");N&&!N.contains(b.target)&&n(!1)}};return e&&document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[e]);const h=()=>{if(!a.trim())return;const g={id:Date.now().toString(),text:a,sender:"user",timestamp:new Date().toLocaleTimeString()};c(b=>[...b,g]),i(""),l(!0),setTimeout(()=>{l(!1);const b=["I understand you're working on that. Let me help you with the PLC logic structure. Would you like me to explain the safety interlocks?","That's a great question about motor control. In industrial automation, we typically use three-wire control circuits for safety. Let me walk you through it.","For tag management, I recommend organizing your variables by function: Inputs (I_), Outputs (O_), and Memory (M_). This follows industry best practices.","I can help you generate the structured text code for that. Which PLC vendor are you targeting - Rockwell, Siemens, or Beckhoff?","Let me analyze your logic. Based on what you've described, you'll need to consider emergency stop circuits, guard door interlocks, and overload protection."],N=b[Math.floor(Math.random()*b.length)],j={id:(Date.now()+1).toString(),text:N,sender:"pandaura",timestamp:new Date().toLocaleTimeString()};c(v=>[...v,j])},2e3)},x=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),h())};return t.jsxs(t.Fragment,{children:[t.jsx("button",{"data-pandaura-orb":!0,onClick:()=>n(!e),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary rounded-full flex items-center justify-center shadow-lg hover:scale-105 transition-transform z-50",title:"Ask Pandaura AS (Mini)",children:t.jsx(Fa,{className:"w-6 h-6 text-white"})}),e&&t.jsxs("div",{ref:u,className:`fixed bottom-24 right-6 bg-white border border-light rounded-lg shadow-xl z-50 transition-all duration-300 ${r?"w-80 h-16":"w-80 h-96"}`,children:[t.jsxs("div",{className:"bg-primary text-white p-3 rounded-t-lg flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Fa,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Pandaura AS (Mini)"}),t.jsx("span",{className:"text-xs bg-green-500 px-1 rounded",children:"Online"})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>s(!r),className:"hover:bg-white hover:bg-opacity-20 p-1 rounded",children:r?t.jsx(zd,{className:"w-3 h-3"}):t.jsx(Vd,{className:"w-3 h-3"})}),t.jsx("button",{onClick:()=>n(!1),className:"hover:bg-white hover:bg-opacity-20 p-1 rounded",children:t.jsx(Ye,{className:"w-3 h-3"})})]})]}),!r&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"h-64 overflow-y-auto p-3 space-y-3",children:[d.map(g=>t.jsx("div",{className:`flex ${g.sender==="user"?"justify-end":"justify-start"}`,children:t.jsxs("div",{className:`max-w-[80%] rounded-lg p-2 text-sm ${g.sender==="user"?"bg-primary text-white":"bg-gray-100 text-primary"}`,children:[t.jsx("div",{children:g.text}),t.jsx("div",{className:`text-xs mt-1 ${g.sender==="user"?"text-blue-200":"text-gray-500"}`,children:g.timestamp})]})},g.id)),o&&t.jsx("div",{className:"flex justify-start",children:t.jsxs("div",{className:"bg-gray-100 text-primary rounded-lg p-2 text-sm flex items-center gap-2",children:[t.jsx("img",{src:Ve,alt:"Pandaura",className:"w-4 h-4 rounded-full object-cover"}),t.jsx(Is,{})]})}),t.jsx("div",{ref:m})]}),t.jsx("div",{className:"border-t border-light p-3",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("textarea",{value:a,onChange:g=>i(g.target.value),onKeyPress:x,placeholder:"Ask about PLCs, automation, tags...",className:"flex-1 border border-light rounded px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-accent",rows:1}),t.jsx("button",{onClick:h,disabled:!a.trim(),className:"bg-primary text-white p-2 rounded hover:bg-secondary transition-colors disabled:opacity-50",children:t.jsx(Gn,{className:"w-4 h-4"})})]})})]})]})]})}const Eo=f.createContext(void 0),na=()=>{const e=f.useContext(Eo);if(!e)throw new Error("useModuleState must be used within a ModuleStateProvider");return e},wu=({children:e})=>{const[n,r]=f.useState({}),s=f.useCallback(d=>n[d]||{},[n]),a=f.useCallback((d,c)=>{r(u=>{const m=u[d]||{},p={...m,...c};return JSON.stringify(m)===JSON.stringify(p)?u:{...u,[d]:p}})},[]),i=f.useCallback(d=>{r(c=>{if(!c[d])return c;const u={...c};return delete u[d],u})},[]),o=f.useCallback((d,c)=>{const u=setTimeout(()=>{try{const m=JSON.parse(localStorage.getItem("pandaura_module_states")||"{}");m[d]=c,localStorage.setItem("pandaura_module_states",JSON.stringify(m))}catch(m){console.warn("Failed to save module state to localStorage:",m)}},100);return a(d,c),()=>clearTimeout(u)},[a]);Ge.useEffect(()=>{try{const d=JSON.parse(localStorage.getItem("pandaura_module_states")||"{}");r(d)}catch(d){console.warn("Failed to load module states from localStorage:",d)}},[]);const l=f.useMemo(()=>({getModuleState:s,setModuleState:a,clearModuleState:i,saveModuleState:o}),[s,a,i,o]);return t.jsx(Eo.Provider,{value:l,children:e})},To=!1,Po=!0;console.log("🔍 Environment Detection:",{"import.meta.env.DEV":!1,"import.meta.env.PROD":!0,"import.meta.env.MODE":"production",VITE_DEPLOYMENT_MODE:"production",isDevelopment:To,isProduction:Po});const vu=()=>(console.log("✅ Using explicit API URL:","https://pandaura-backend-production.up.railway.app"),"https://pandaura-backend-production.up.railway.app"),Kt={apiBaseUrl:vu(),deploymentMode:"production",appTitle:"Pandaura AS",features:{analytics:!0,externalFonts:!0,cdnAssets:!0},upload:{maxFileSize:parseInt("10485760"),endpoint:"/api/v1/upload",allowedTypes:["pdf","docx","txt","png","jpg","jpeg"]},auth:{type:"local",sessionTimeout:parseInt("28800000")},network:{timeout:3e4,retries:3},onPremise:{showStatus:!0,offlineMode:!0,localOnly:!0}},Nu=()=>{const e=window.location.hostname,n=window.location.port;return{hostname:e,port:n,isLocal:e==="localhost"||e==="127.0.0.1",displayUrl:n?`${e}:${n}`:e}},ra=()=>{console.log("🔍 Environment Debug:",{isDevelopment:To,isProduction:Po,"import.meta.env.DEV":!1,"import.meta.env.PROD":!0,"import.meta.env.MODE":"production",VITE_API_BASE_URL:"https://pandaura-backend-production.up.railway.app","Final API URL":Kt.apiBaseUrl})};function ku({hasUnsavedChanges:e,onSave:n,message:r="You have unsaved changes. Do you want to save before leaving?"}){const s=He();return Rr(),f.useEffect(()=>{const i=o=>{if(e){if(n&&"sendBeacon"in navigator)try{const l=JSON.stringify({emergency_save:!0,timestamp:Date.now()});navigator.sendBeacon("/api/v1/emergency-save",l),console.log("Attempting beacon save before unload")}catch(l){console.warn("Beacon save failed:",l)}return o.preventDefault(),o.returnValue="",r}};return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)},[e,r,n]),{handleNavigation:f.useCallback(async i=>{if(!e){s(i);return}const o=window.confirm(r);if(o&&n)try{await n()?s(i):console.error("Save failed, navigation cancelled")}catch(l){console.error("Save error during navigation:",l)}else o||s(i)},[e,r,n,s]),hasUnsavedChanges:e}}function Do(e,n){return ku({hasUnsavedChanges:e,onSave:n,message:"You have unsaved project changes. Save before leaving?"})}function Io(e,n){return function(){return e.apply(n,arguments)}}const{toString:Su}=Object.prototype,{getPrototypeOf:sa}=Object,{iterator:_r,toStringTag:Ro}=Symbol,zr=(e=>n=>{const r=Su.call(n);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),bt=e=>(e=e.toLowerCase(),n=>zr(n)===e),$r=e=>n=>typeof n===e,{isArray:wn}=Array,Un=$r("undefined");function Xn(e){return e!==null&&!Un(e)&&e.constructor!==null&&!Un(e.constructor)&&tt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Fo=bt("ArrayBuffer");function Cu(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&Fo(e.buffer),n}const Au=$r("string"),tt=$r("function"),Lo=$r("number"),Yn=e=>e!==null&&typeof e=="object",Eu=e=>e===!0||e===!1,yr=e=>{if(zr(e)!=="object")return!1;const n=sa(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Ro in e)&&!(_r in e)},Tu=e=>{if(!Yn(e)||Xn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Pu=bt("Date"),Du=bt("File"),Iu=bt("Blob"),Ru=bt("FileList"),Fu=e=>Yn(e)&&tt(e.pipe),Lu=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||tt(e.append)&&((n=zr(e))==="formdata"||n==="object"&&tt(e.toString)&&e.toString()==="[object FormData]"))},Ou=bt("URLSearchParams"),[Mu,_u,zu,$u]=["ReadableStream","Request","Response","Headers"].map(bt),Bu=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qn(e,n,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),wn(e))for(s=0,a=e.length;s<a;s++)n.call(null,e[s],s,e);else{if(Xn(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],n.call(null,e[l],l,e)}}function Oo(e,n){if(Xn(e))return null;n=n.toLowerCase();const r=Object.keys(e);let s=r.length,a;for(;s-- >0;)if(a=r[s],n===a.toLowerCase())return a;return null}const Jt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Mo=e=>!Un(e)&&e!==Jt;function Rs(){const{caseless:e}=Mo(this)&&this||{},n={},r=(s,a)=>{const i=e&&Oo(n,a)||a;yr(n[i])&&yr(s)?n[i]=Rs(n[i],s):yr(s)?n[i]=Rs({},s):wn(s)?n[i]=s.slice():n[i]=s};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&Qn(arguments[s],r);return n}const Uu=(e,n,r,{allOwnKeys:s}={})=>(Qn(n,(a,i)=>{r&&tt(a)?e[i]=Io(a,r):e[i]=a},{allOwnKeys:s}),e),Vu=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Hu=(e,n,r,s)=>{e.prototype=Object.create(n.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),r&&Object.assign(e.prototype,r)},qu=(e,n,r,s)=>{let a,i,o;const l={};if(n=n||{},e==null)return n;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!s||s(o,e,n))&&!l[o]&&(n[o]=e[o],l[o]=!0);e=r!==!1&&sa(e)}while(e&&(!r||r(e,n))&&e!==Object.prototype);return n},Wu=(e,n,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=n.length;const s=e.indexOf(n,r);return s!==-1&&s===r},Gu=e=>{if(!e)return null;if(wn(e))return e;let n=e.length;if(!Lo(n))return null;const r=new Array(n);for(;n-- >0;)r[n]=e[n];return r},Ju=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&sa(Uint8Array)),Xu=(e,n)=>{const s=(e&&e[_r]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;n.call(e,i[0],i[1])}},Yu=(e,n)=>{let r;const s=[];for(;(r=e.exec(n))!==null;)s.push(r);return s},Qu=bt("HTMLFormElement"),Ku=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,a){return s.toUpperCase()+a}),_a=(({hasOwnProperty:e})=>(n,r)=>e.call(n,r))(Object.prototype),Zu=bt("RegExp"),_o=(e,n)=>{const r=Object.getOwnPropertyDescriptors(e),s={};Qn(r,(a,i)=>{let o;(o=n(a,i,e))!==!1&&(s[i]=o||a)}),Object.defineProperties(e,s)},em=e=>{_o(e,(n,r)=>{if(tt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(tt(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},tm=(e,n)=>{const r={},s=a=>{a.forEach(i=>{r[i]=!0})};return wn(e)?s(e):s(String(e).split(n)),r},nm=()=>{},rm=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function sm(e){return!!(e&&tt(e.append)&&e[Ro]==="FormData"&&e[_r])}const am=e=>{const n=new Array(10),r=(s,a)=>{if(Yn(s)){if(n.indexOf(s)>=0)return;if(Xn(s))return s;if(!("toJSON"in s)){n[a]=s;const i=wn(s)?[]:{};return Qn(s,(o,l)=>{const d=r(o,a+1);!Un(d)&&(i[l]=d)}),n[a]=void 0,i}}return s};return r(e,0)},im=bt("AsyncFunction"),om=e=>e&&(Yn(e)||tt(e))&&tt(e.then)&&tt(e.catch),zo=((e,n)=>e?setImmediate:n?((r,s)=>(Jt.addEventListener("message",({source:a,data:i})=>{a===Jt&&i===r&&s.length&&s.shift()()},!1),a=>{s.push(a),Jt.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",tt(Jt.postMessage)),lm=typeof queueMicrotask<"u"?queueMicrotask.bind(Jt):typeof process<"u"&&process.nextTick||zo,cm=e=>e!=null&&tt(e[_r]),z={isArray:wn,isArrayBuffer:Fo,isBuffer:Xn,isFormData:Lu,isArrayBufferView:Cu,isString:Au,isNumber:Lo,isBoolean:Eu,isObject:Yn,isPlainObject:yr,isEmptyObject:Tu,isReadableStream:Mu,isRequest:_u,isResponse:zu,isHeaders:$u,isUndefined:Un,isDate:Pu,isFile:Du,isBlob:Iu,isRegExp:Zu,isFunction:tt,isStream:Fu,isURLSearchParams:Ou,isTypedArray:Ju,isFileList:Ru,forEach:Qn,merge:Rs,extend:Uu,trim:Bu,stripBOM:Vu,inherits:Hu,toFlatObject:qu,kindOf:zr,kindOfTest:bt,endsWith:Wu,toArray:Gu,forEachEntry:Xu,matchAll:Yu,isHTMLForm:Qu,hasOwnProperty:_a,hasOwnProp:_a,reduceDescriptors:_o,freezeMethods:em,toObjectSet:tm,toCamelCase:Ku,noop:nm,toFiniteNumber:rm,findKey:Oo,global:Jt,isContextDefined:Mo,isSpecCompliantForm:sm,toJSONObject:am,isAsyncFn:im,isThenable:om,setImmediate:zo,asap:lm,isIterable:cm};function he(e,n,r,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}z.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const $o=he.prototype,Bo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Bo[e]={value:e}});Object.defineProperties(he,Bo);Object.defineProperty($o,"isAxiosError",{value:!0});he.from=(e,n,r,s,a,i)=>{const o=Object.create($o);return z.toFlatObject(e,o,function(d){return d!==Error.prototype},l=>l!=="isAxiosError"),he.call(o,e.message,n,r,s,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const dm=null;function Fs(e){return z.isPlainObject(e)||z.isArray(e)}function Uo(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function za(e,n,r){return e?e.concat(n).map(function(a,i){return a=Uo(a),!r&&i?"["+a+"]":a}).join(r?".":""):n}function um(e){return z.isArray(e)&&!e.some(Fs)}const mm=z.toFlatObject(z,{},null,function(n){return/^is[A-Z]/.test(n)});function Br(e,n,r){if(!z.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,r=z.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!z.isUndefined(b[g])});const s=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(n);if(!z.isFunction(a))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(z.isDate(x))return x.toISOString();if(z.isBoolean(x))return x.toString();if(!d&&z.isBlob(x))throw new he("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(x)||z.isTypedArray(x)?d&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,g,b){let N=x;if(x&&!b&&typeof x=="object"){if(z.endsWith(g,"{}"))g=s?g:g.slice(0,-2),x=JSON.stringify(x);else if(z.isArray(x)&&um(x)||(z.isFileList(x)||z.endsWith(g,"[]"))&&(N=z.toArray(x)))return g=Uo(g),N.forEach(function(v,E){!(z.isUndefined(v)||v===null)&&n.append(o===!0?za([g],E,i):o===null?g:g+"[]",c(v))}),!1}return Fs(x)?!0:(n.append(za(b,g,i),c(x)),!1)}const m=[],p=Object.assign(mm,{defaultVisitor:u,convertValue:c,isVisitable:Fs});function h(x,g){if(!z.isUndefined(x)){if(m.indexOf(x)!==-1)throw Error("Circular reference detected in "+g.join("."));m.push(x),z.forEach(x,function(N,j){(!(z.isUndefined(N)||N===null)&&a.call(n,N,z.isString(j)?j.trim():j,g,p))===!0&&h(N,g?g.concat(j):[j])}),m.pop()}}if(!z.isObject(e))throw new TypeError("data must be an object");return h(e),n}function $a(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function aa(e,n){this._pairs=[],e&&Br(e,this,n)}const Vo=aa.prototype;Vo.append=function(n,r){this._pairs.push([n,r])};Vo.toString=function(n){const r=n?function(s){return n.call(this,s,$a)}:$a;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function hm(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ho(e,n,r){if(!n)return e;const s=r&&r.encode||hm;z.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(n,r):i=z.isURLSearchParams(n)?n.toString():new aa(n,r).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ba{constructor(){this.handlers=[]}use(n,r,s){return this.handlers.push({fulfilled:n,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){z.forEach(this.handlers,function(s){s!==null&&n(s)})}}const qo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pm=typeof URLSearchParams<"u"?URLSearchParams:aa,fm=typeof FormData<"u"?FormData:null,xm=typeof Blob<"u"?Blob:null,gm={isBrowser:!0,classes:{URLSearchParams:pm,FormData:fm,Blob:xm},protocols:["http","https","file","blob","url","data"]},ia=typeof window<"u"&&typeof document<"u",Ls=typeof navigator=="object"&&navigator||void 0,ym=ia&&(!Ls||["ReactNative","NativeScript","NS"].indexOf(Ls.product)<0),bm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jm=ia&&window.location.href||"http://localhost",wm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ia,hasStandardBrowserEnv:ym,hasStandardBrowserWebWorkerEnv:bm,navigator:Ls,origin:jm},Symbol.toStringTag,{value:"Module"})),qe={...wm,...gm};function vm(e,n){return Br(e,new qe.classes.URLSearchParams,{visitor:function(r,s,a,i){return qe.isNode&&z.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...n})}function Nm(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function km(e){const n={},r=Object.keys(e);let s;const a=r.length;let i;for(s=0;s<a;s++)i=r[s],n[i]=e[i];return n}function Wo(e){function n(r,s,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),d=i>=r.length;return o=!o&&z.isArray(a)?a.length:o,d?(z.hasOwnProp(a,o)?a[o]=[a[o],s]:a[o]=s,!l):((!a[o]||!z.isObject(a[o]))&&(a[o]=[]),n(r,s,a[o],i)&&z.isArray(a[o])&&(a[o]=km(a[o])),!l)}if(z.isFormData(e)&&z.isFunction(e.entries)){const r={};return z.forEachEntry(e,(s,a)=>{n(Nm(s),a,r,0)}),r}return null}function Sm(e,n,r){if(z.isString(e))try{return(n||JSON.parse)(e),z.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const Kn={transitional:qo,adapter:["xhr","http","fetch"],transformRequest:[function(n,r){const s=r.getContentType()||"",a=s.indexOf("application/json")>-1,i=z.isObject(n);if(i&&z.isHTMLForm(n)&&(n=new FormData(n)),z.isFormData(n))return a?JSON.stringify(Wo(n)):n;if(z.isArrayBuffer(n)||z.isBuffer(n)||z.isStream(n)||z.isFile(n)||z.isBlob(n)||z.isReadableStream(n))return n;if(z.isArrayBufferView(n))return n.buffer;if(z.isURLSearchParams(n))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return vm(n,this.formSerializer).toString();if((l=z.isFileList(n))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Br(l?{"files[]":n}:n,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),Sm(n)):n}],transformResponse:[function(n){const r=this.transitional||Kn.transitional,s=r&&r.forcedJSONParsing,a=this.responseType==="json";if(z.isResponse(n)||z.isReadableStream(n))return n;if(n&&z.isString(n)&&(s&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(n)}catch(l){if(o)throw l.name==="SyntaxError"?he.from(l,he.ERR_BAD_RESPONSE,this,null,this.response):l}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qe.classes.FormData,Blob:qe.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{Kn.headers[e]={}});const Cm=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Am=e=>{const n={};let r,s,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),s=o.substring(a+1).trim(),!(!r||n[r]&&Cm[r])&&(r==="set-cookie"?n[r]?n[r].push(s):n[r]=[s]:n[r]=n[r]?n[r]+", "+s:s)}),n},Ua=Symbol("internals");function Cn(e){return e&&String(e).trim().toLowerCase()}function br(e){return e===!1||e==null?e:z.isArray(e)?e.map(br):String(e)}function Em(e){const n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)n[s[1]]=s[2];return n}const Tm=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Kr(e,n,r,s,a){if(z.isFunction(s))return s.call(this,n,r);if(a&&(n=r),!!z.isString(n)){if(z.isString(s))return n.indexOf(s)!==-1;if(z.isRegExp(s))return s.test(n)}}function Pm(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,r,s)=>r.toUpperCase()+s)}function Dm(e,n){const r=z.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(a,i,o){return this[s].call(this,n,a,i,o)},configurable:!0})})}let nt=class{constructor(n){n&&this.set(n)}set(n,r,s){const a=this;function i(l,d,c){const u=Cn(d);if(!u)throw new Error("header name must be a non-empty string");const m=z.findKey(a,u);(!m||a[m]===void 0||c===!0||c===void 0&&a[m]!==!1)&&(a[m||d]=br(l))}const o=(l,d)=>z.forEach(l,(c,u)=>i(c,u,d));if(z.isPlainObject(n)||n instanceof this.constructor)o(n,r);else if(z.isString(n)&&(n=n.trim())&&!Tm(n))o(Am(n),r);else if(z.isObject(n)&&z.isIterable(n)){let l={},d,c;for(const u of n){if(!z.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[c=u[0]]=(d=l[c])?z.isArray(d)?[...d,u[1]]:[d,u[1]]:u[1]}o(l,r)}else n!=null&&i(r,n,s);return this}get(n,r){if(n=Cn(n),n){const s=z.findKey(this,n);if(s){const a=this[s];if(!r)return a;if(r===!0)return Em(a);if(z.isFunction(r))return r.call(this,a,s);if(z.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,r){if(n=Cn(n),n){const s=z.findKey(this,n);return!!(s&&this[s]!==void 0&&(!r||Kr(this,this[s],s,r)))}return!1}delete(n,r){const s=this;let a=!1;function i(o){if(o=Cn(o),o){const l=z.findKey(s,o);l&&(!r||Kr(s,s[l],l,r))&&(delete s[l],a=!0)}}return z.isArray(n)?n.forEach(i):i(n),a}clear(n){const r=Object.keys(this);let s=r.length,a=!1;for(;s--;){const i=r[s];(!n||Kr(this,this[i],i,n,!0))&&(delete this[i],a=!0)}return a}normalize(n){const r=this,s={};return z.forEach(this,(a,i)=>{const o=z.findKey(s,i);if(o){r[o]=br(a),delete r[i];return}const l=n?Pm(i):String(i).trim();l!==i&&delete r[i],r[l]=br(a),s[l]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const r=Object.create(null);return z.forEach(this,(s,a)=>{s!=null&&s!==!1&&(r[a]=n&&z.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,r])=>n+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...r){const s=new this(n);return r.forEach(a=>s.set(a)),s}static accessor(n){const s=(this[Ua]=this[Ua]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=Cn(o);s[l]||(Dm(a,o),s[l]=!0)}return z.isArray(n)?n.forEach(i):i(n),this}};nt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(nt.prototype,({value:e},n)=>{let r=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(s){this[r]=s}}});z.freezeMethods(nt);function Zr(e,n){const r=this||Kn,s=n||r,a=nt.from(s.headers);let i=s.data;return z.forEach(e,function(l){i=l.call(r,i,a.normalize(),n?n.status:void 0)}),a.normalize(),i}function Go(e){return!!(e&&e.__CANCEL__)}function vn(e,n,r){he.call(this,e??"canceled",he.ERR_CANCELED,n,r),this.name="CanceledError"}z.inherits(vn,he,{__CANCEL__:!0});function Jo(e,n,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):n(new he("Request failed with status code "+r.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Im(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function Rm(e,n){e=e||10;const r=new Array(e),s=new Array(e);let a=0,i=0,o;return n=n!==void 0?n:1e3,function(d){const c=Date.now(),u=s[i];o||(o=c),r[a]=d,s[a]=c;let m=i,p=0;for(;m!==a;)p+=r[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),c-o<n)return;const h=u&&c-u;return h?Math.round(p*1e3/h):void 0}}function Fm(e,n){let r=0,s=1e3/n,a,i;const o=(c,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const u=Date.now(),m=u-r;m>=s?o(c,u):(a=c,i||(i=setTimeout(()=>{i=null,o(a)},s-m)))},()=>a&&o(a)]}const kr=(e,n,r=3)=>{let s=0;const a=Rm(50,250);return Fm(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,d=o-s,c=a(d),u=o<=l;s=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:d,rate:c||void 0,estimated:c&&l&&u?(l-o)/c:void 0,event:i,lengthComputable:l!=null,[n?"download":"upload"]:!0};e(m)},r)},Va=(e,n)=>{const r=e!=null;return[s=>n[0]({lengthComputable:r,total:e,loaded:s}),n[1]]},Ha=e=>(...n)=>z.asap(()=>e(...n)),Lm=qe.hasStandardBrowserEnv?((e,n)=>r=>(r=new URL(r,qe.origin),e.protocol===r.protocol&&e.host===r.host&&(n||e.port===r.port)))(new URL(qe.origin),qe.navigator&&/(msie|trident)/i.test(qe.navigator.userAgent)):()=>!0,Om=qe.hasStandardBrowserEnv?{write(e,n,r,s,a,i){const o=[e+"="+encodeURIComponent(n)];z.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),z.isString(s)&&o.push("path="+s),z.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Mm(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function _m(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function Xo(e,n,r){let s=!Mm(n);return e&&(s||r==!1)?_m(e,n):n}const qa=e=>e instanceof nt?{...e}:e;function Yt(e,n){n=n||{};const r={};function s(c,u,m,p){return z.isPlainObject(c)&&z.isPlainObject(u)?z.merge.call({caseless:p},c,u):z.isPlainObject(u)?z.merge({},u):z.isArray(u)?u.slice():u}function a(c,u,m,p){if(z.isUndefined(u)){if(!z.isUndefined(c))return s(void 0,c,m,p)}else return s(c,u,m,p)}function i(c,u){if(!z.isUndefined(u))return s(void 0,u)}function o(c,u){if(z.isUndefined(u)){if(!z.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function l(c,u,m){if(m in n)return s(c,u);if(m in e)return s(void 0,c)}const d={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u,m)=>a(qa(c),qa(u),m,!0)};return z.forEach(Object.keys({...e,...n}),function(u){const m=d[u]||a,p=m(e[u],n[u],u);z.isUndefined(p)&&m!==l||(r[u]=p)}),r}const Yo=e=>{const n=Yt({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=n;n.headers=o=nt.from(o),n.url=Ho(Xo(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let d;if(z.isFormData(r)){if(qe.hasStandardBrowserEnv||qe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((d=o.getContentType())!==!1){const[c,...u]=d?d.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(qe.hasStandardBrowserEnv&&(s&&z.isFunction(s)&&(s=s(n)),s||s!==!1&&Lm(n.url))){const c=a&&i&&Om.read(i);c&&o.set(a,c)}return n},zm=typeof XMLHttpRequest<"u",$m=zm&&function(e){return new Promise(function(r,s){const a=Yo(e);let i=a.data;const o=nt.from(a.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:c}=a,u,m,p,h,x;function g(){h&&h(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.url,!0),b.timeout=a.timeout;function N(){if(!b)return;const v=nt.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:v,config:e,request:b};Jo(function(S){r(S),g()},function(S){s(S),g()},k),b=null}"onloadend"in b?b.onloadend=N:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(N)},b.onabort=function(){b&&(s(new he("Request aborted",he.ECONNABORTED,e,b)),b=null)},b.onerror=function(){s(new he("Network Error",he.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let E=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const k=a.transitional||qo;a.timeoutErrorMessage&&(E=a.timeoutErrorMessage),s(new he(E,k.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&z.forEach(o.toJSON(),function(E,k){b.setRequestHeader(k,E)}),z.isUndefined(a.withCredentials)||(b.withCredentials=!!a.withCredentials),l&&l!=="json"&&(b.responseType=a.responseType),c&&([p,x]=kr(c,!0),b.addEventListener("progress",p)),d&&b.upload&&([m,h]=kr(d),b.upload.addEventListener("progress",m),b.upload.addEventListener("loadend",h)),(a.cancelToken||a.signal)&&(u=v=>{b&&(s(!v||v.type?new vn(null,e,b):v),b.abort(),b=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const j=Im(a.url);if(j&&qe.protocols.indexOf(j)===-1){s(new he("Unsupported protocol "+j+":",he.ERR_BAD_REQUEST,e));return}b.send(i||null)})},Bm=(e,n)=>{const{length:r}=e=e?e.filter(Boolean):[];if(n||r){let s=new AbortController,a;const i=function(c){if(!a){a=!0,l();const u=c instanceof Error?c:this.reason;s.abort(u instanceof he?u:new vn(u instanceof Error?u.message:u))}};let o=n&&setTimeout(()=>{o=null,i(new he(`timeout ${n} of ms exceeded`,he.ETIMEDOUT))},n);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:d}=s;return d.unsubscribe=()=>z.asap(l),d}},Um=function*(e,n){let r=e.byteLength;if(r<n){yield e;return}let s=0,a;for(;s<r;)a=s+n,yield e.slice(s,a),s=a},Vm=async function*(e,n){for await(const r of Hm(e))yield*Um(r,n)},Hm=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:r,value:s}=await n.read();if(r)break;yield s}}finally{await n.cancel()}},Wa=(e,n,r,s)=>{const a=Vm(e,n);let i=0,o,l=d=>{o||(o=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:c,value:u}=await a.next();if(c){l(),d.close();return}let m=u.byteLength;if(r){let p=i+=m;r(p)}d.enqueue(new Uint8Array(u))}catch(c){throw l(c),c}},cancel(d){return l(d),a.return()}},{highWaterMark:2})},Ur=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Qo=Ur&&typeof ReadableStream=="function",qm=Ur&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Ko=(e,...n)=>{try{return!!e(...n)}catch{return!1}},Wm=Qo&&Ko(()=>{let e=!1;const n=new Request(qe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),Ga=64*1024,Os=Qo&&Ko(()=>z.isReadableStream(new Response("").body)),Sr={stream:Os&&(e=>e.body)};Ur&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!Sr[n]&&(Sr[n]=z.isFunction(e[n])?r=>r[n]():(r,s)=>{throw new he(`Response type '${n}' is not supported`,he.ERR_NOT_SUPPORT,s)})})})(new Response);const Gm=async e=>{if(e==null)return 0;if(z.isBlob(e))return e.size;if(z.isSpecCompliantForm(e))return(await new Request(qe.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(z.isArrayBufferView(e)||z.isArrayBuffer(e))return e.byteLength;if(z.isURLSearchParams(e)&&(e=e+""),z.isString(e))return(await qm(e)).byteLength},Jm=async(e,n)=>{const r=z.toFiniteNumber(e.getContentLength());return r??Gm(n)},Xm=Ur&&(async e=>{let{url:n,method:r,data:s,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:d,responseType:c,headers:u,withCredentials:m="same-origin",fetchOptions:p}=Yo(e);c=c?(c+"").toLowerCase():"text";let h=Bm([a,i&&i.toAbortSignal()],o),x;const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let b;try{if(d&&Wm&&r!=="get"&&r!=="head"&&(b=await Jm(u,s))!==0){let k=new Request(n,{method:"POST",body:s,duplex:"half"}),C;if(z.isFormData(s)&&(C=k.headers.get("content-type"))&&u.setContentType(C),k.body){const[S,y]=Va(b,kr(Ha(d)));s=Wa(k.body,Ga,S,y)}}z.isString(m)||(m=m?"include":"omit");const N="credentials"in Request.prototype;x=new Request(n,{...p,signal:h,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:N?m:void 0});let j=await fetch(x,p);const v=Os&&(c==="stream"||c==="response");if(Os&&(l||v&&g)){const k={};["status","statusText","headers"].forEach(A=>{k[A]=j[A]});const C=z.toFiniteNumber(j.headers.get("content-length")),[S,y]=l&&Va(C,kr(Ha(l),!0))||[];j=new Response(Wa(j.body,Ga,S,()=>{y&&y(),g&&g()}),k)}c=c||"text";let E=await Sr[z.findKey(Sr,c)||"text"](j,e);return!v&&g&&g(),await new Promise((k,C)=>{Jo(k,C,{data:E,headers:nt.from(j.headers),status:j.status,statusText:j.statusText,config:e,request:x})})}catch(N){throw g&&g(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new he("Network Error",he.ERR_NETWORK,e,x),{cause:N.cause||N}):he.from(N,N&&N.code,e,x)}}),Ms={http:dm,xhr:$m,fetch:Xm};z.forEach(Ms,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const Ja=e=>`- ${e}`,Ym=e=>z.isFunction(e)||e===null||e===!1,Zo={getAdapter:e=>{e=z.isArray(e)?e:[e];const{length:n}=e;let r,s;const a={};for(let i=0;i<n;i++){r=e[i];let o;if(s=r,!Ym(r)&&(s=Ms[(o=String(r)).toLowerCase()],s===void 0))throw new he(`Unknown adapter '${o}'`);if(s)break;a[o||"#"+i]=s}if(!s){const i=Object.entries(a).map(([l,d])=>`adapter ${l} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=n?i.length>1?`since :
`+i.map(Ja).join(`
`):" "+Ja(i[0]):"as no adapter specified";throw new he("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Ms};function es(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vn(null,e)}function Xa(e){return es(e),e.headers=nt.from(e.headers),e.data=Zr.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Zo.getAdapter(e.adapter||Kn.adapter)(e).then(function(s){return es(e),s.data=Zr.call(e,e.transformResponse,s),s.headers=nt.from(s.headers),s},function(s){return Go(s)||(es(e),s&&s.response&&(s.response.data=Zr.call(e,e.transformResponse,s.response),s.response.headers=nt.from(s.response.headers))),Promise.reject(s)})}const el="1.11.0",Vr={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{Vr[e]=function(s){return typeof s===e||"a"+(n<1?"n ":" ")+e}});const Ya={};Vr.transitional=function(n,r,s){function a(i,o){return"[Axios v"+el+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(n===!1)throw new he(a(o," has been removed"+(r?" in "+r:"")),he.ERR_DEPRECATED);return r&&!Ya[o]&&(Ya[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),n?n(i,o,l):!0}};Vr.spelling=function(n){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function Qm(e,n,r){if(typeof e!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],o=n[i];if(o){const l=e[i],d=l===void 0||o(l,i,e);if(d!==!0)throw new he("option "+i+" must be "+d,he.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new he("Unknown option "+i,he.ERR_BAD_OPTION)}}const jr={assertOptions:Qm,validators:Vr},vt=jr.validators;let Xt=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Ba,response:new Ba}}async request(n,r){try{return await this._request(n,r)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(n,r){typeof n=="string"?(r=r||{},r.url=n):r=n||{},r=Yt(this.defaults,r);const{transitional:s,paramsSerializer:a,headers:i}=r;s!==void 0&&jr.assertOptions(s,{silentJSONParsing:vt.transitional(vt.boolean),forcedJSONParsing:vt.transitional(vt.boolean),clarifyTimeoutError:vt.transitional(vt.boolean)},!1),a!=null&&(z.isFunction(a)?r.paramsSerializer={serialize:a}:jr.assertOptions(a,{encode:vt.function,serialize:vt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),jr.assertOptions(r,{baseUrl:vt.spelling("baseURL"),withXsrfToken:vt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&z.merge(i.common,i[r.method]);i&&z.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=nt.concat(o,i);const l=[];let d=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(d=d&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,m=0,p;if(!d){const x=[Xa.bind(this),void 0];for(x.unshift(...l),x.push(...c),p=x.length,u=Promise.resolve(r);m<p;)u=u.then(x[m++],x[m++]);return u}p=l.length;let h=r;for(m=0;m<p;){const x=l[m++],g=l[m++];try{h=x(h)}catch(b){g.call(this,b);break}}try{u=Xa.call(this,h)}catch(x){return Promise.reject(x)}for(m=0,p=c.length;m<p;)u=u.then(c[m++],c[m++]);return u}getUri(n){n=Yt(this.defaults,n);const r=Xo(n.baseURL,n.url,n.allowAbsoluteUrls);return Ho(r,n.params,n.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(n){Xt.prototype[n]=function(r,s){return this.request(Yt(s||{},{method:n,url:r,data:(s||{}).data}))}});z.forEach(["post","put","patch"],function(n){function r(s){return function(i,o,l){return this.request(Yt(l||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Xt.prototype[n]=r(),Xt.prototype[n+"Form"]=r(!0)});let Km=class tl{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(a);return o.cancel=function(){s.unsubscribe(i)},o},n(function(i,o,l){s.reason||(s.reason=new vn(i,o,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const r=this._listeners.indexOf(n);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const n=new AbortController,r=s=>{n.abort(s)};return this.subscribe(r),n.signal.unsubscribe=()=>this.unsubscribe(r),n.signal}static source(){let n;return{token:new tl(function(a){n=a}),cancel:n}}};function Zm(e){return function(r){return e.apply(null,r)}}function eh(e){return z.isObject(e)&&e.isAxiosError===!0}const _s={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_s).forEach(([e,n])=>{_s[n]=e});function nl(e){const n=new Xt(e),r=Io(Xt.prototype.request,n);return z.extend(r,Xt.prototype,n,{allOwnKeys:!0}),z.extend(r,n,null,{allOwnKeys:!0}),r.create=function(a){return nl(Yt(e,a))},r}const we=nl(Kn);we.Axios=Xt;we.CanceledError=vn;we.CancelToken=Km;we.isCancel=Go;we.VERSION=el;we.toFormData=Br;we.AxiosError=he;we.Cancel=we.CanceledError;we.all=function(n){return Promise.all(n)};we.spread=Zm;we.isAxiosError=eh;we.mergeConfig=Yt;we.AxiosHeaders=nt;we.formToJSON=e=>Wo(z.isHTMLForm(e)?new FormData(e):e);we.getAdapter=Zo.getAdapter;we.HttpStatusCode=_s;we.default=we;const{Axios:w0,AxiosError:v0,CanceledError:N0,isCancel:k0,CancelToken:S0,VERSION:C0,all:A0,Cancel:E0,isAxiosError:T0,spread:P0,toFormData:D0,AxiosHeaders:I0,HttpStatusCode:R0,formToJSON:F0,getAdapter:L0,mergeConfig:O0}=we;/*! js-cookie v3.0.5 | MIT */function ar(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)e[s]=r[s]}return e}var th={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function zs(e,n){function r(a,i,o){if(!(typeof document>"u")){o=ar({},n,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var d in o)o[d]&&(l+="; "+d,o[d]!==!0&&(l+="="+o[d].split(";")[0]));return document.cookie=a+"="+e.write(i,a)+l}}function s(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var i=document.cookie?document.cookie.split("; "):[],o={},l=0;l<i.length;l++){var d=i[l].split("="),c=d.slice(1).join("=");try{var u=decodeURIComponent(d[0]);if(o[u]=e.read(c,u),a===u)break}catch{}}return a?o[a]:o}}return Object.create({set:r,get:s,remove:function(a,i){r(a,"",ar({},i,{expires:-1}))},withAttributes:function(a){return zs(this.converter,ar({},this.attributes,a))},withConverter:function(a){return zs(ar({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}var Ee=zs(th,{path:"/"});const en="pandaura_auth_token",tn="pandaura_auth_user",ir="pandaura_auth_orgs",or="pandaura_auth_selected_org",An="pandaura_auth_login_time",sn={expires:30,secure:!1,sameSite:"lax",path:"/"};console.log("🍪 AuthStorage: Cookie options configured:",sn);const Cr=24,fe={setToken:e=>{console.log("🍪 AuthStorage: Setting token cookie"),Ee.set(en,e,sn),Ee.set(An,Date.now().toString(),sn),console.log("🍪 AuthStorage: Token cookie set, verifying...",!!Ee.get(en))},getToken:()=>{const e=Ee.get(en)||null;return console.log("🍪 AuthStorage: Getting token cookie:",e?`${e.substring(0,10)}...`:"null"),e},removeToken:()=>{console.log("🍪 AuthStorage: Removing token cookie"),Ee.remove(en,{path:"/"}),Ee.remove(An,{path:"/"})},setUser:e=>{console.log("🍪 AuthStorage: Setting user cookie",e.email),Ee.set(tn,JSON.stringify(e),sn),console.log("🍪 AuthStorage: User cookie set, verifying...",!!Ee.get(tn))},getUser:()=>{const e=Ee.get(tn);if(!e)return console.log("🍪 AuthStorage: No user cookie found"),null;try{const n=JSON.parse(e);return console.log("🍪 AuthStorage: Getting user cookie:",n.email),n}catch(n){return console.error("🍪 AuthStorage: Failed to parse user cookie:",n),null}},removeUser:()=>{console.log("🍪 AuthStorage: Removing user cookie"),Ee.remove(tn,{path:"/"})},setOrganizations:e=>{console.log("🍪 AuthStorage: Setting organizations cookie",e.length,"orgs"),Ee.set(ir,JSON.stringify(e),sn)},getOrganizations:()=>{const e=Ee.get(ir);if(!e)return console.log("🍪 AuthStorage: No organizations cookie found"),[];try{const n=JSON.parse(e);return console.log("🍪 AuthStorage: Getting organizations cookie:",n.length,"orgs"),n}catch(n){return console.error("🍪 AuthStorage: Failed to parse organizations cookie:",n),[]}},removeOrganizations:()=>{console.log("🍪 AuthStorage: Removing organizations cookie"),Ee.remove(ir,{path:"/"})},setSelectedOrg:e=>{console.log("🍪 AuthStorage: Setting selected org cookie",e.org_name),Ee.set(or,JSON.stringify(e),sn)},getSelectedOrg:()=>{const e=Ee.get(or);if(!e)return console.log("🍪 AuthStorage: No selected org cookie found"),null;try{const n=JSON.parse(e);return console.log("🍪 AuthStorage: Getting selected org cookie:",n.org_name),n}catch(n){return console.error("🍪 AuthStorage: Failed to parse selected org cookie:",n),null}},removeSelectedOrg:()=>{console.log("🍪 AuthStorage: Removing selected org cookie"),Ee.remove(or,{path:"/"})},clearAll:()=>{console.log("🍪 AuthStorage: Clearing all auth cookies"),Ee.remove(en,{path:"/"}),Ee.remove(tn,{path:"/"}),Ee.remove(ir,{path:"/"}),Ee.remove(or,{path:"/"}),Ee.remove(An,{path:"/"}),console.log("🍪 AuthStorage: All cookies cleared")},hasAuthData:()=>{const e=Ee.get(en),n=Ee.get(tn),r=Ee.get(An);let s=!1;if(r){const i=parseInt(r,10);s=(Date.now()-i)/(1e3*60*60)>Cr}const a=!!(e&&n)&&!s;return console.log("🍪 AuthStorage: Checking auth data:",{hasToken:!!e,hasUser:!!n,expired:s,hasAuth:a}),a},isSessionExpired:()=>{const e=Ee.get(An);if(!e)return!0;const n=parseInt(e,10);return(Date.now()-n)/(1e3*60*60)>Cr}},nh=Object.freeze(Object.defineProperty({__proto__:null,SESSION_EXPIRY_HOURS:Cr,authStorage:fe},Symbol.toStringTag,{value:"Module"})),rl=f.createContext(void 0),rh=`${Kt.apiBaseUrl}/api/v1`;we.defaults.baseURL=rh;const sh=({children:e})=>{const[n,r]=f.useState(null),[s,a]=f.useState(null),[i,o]=f.useState([]),[l,d]=f.useState(null),[c,u]=f.useState(!0),[m,p]=f.useState(!1),[h,x]=f.useState(!1),g=!!s&&!!n&&!h,b=A=>{d(A),A?fe.setSelectedOrg(A):fe.removeSelectedOrg()};f.useEffect(()=>{console.log("🔍 AuthContext: Authentication state changed:",{isAuthenticated:g,hasToken:!!s,hasUser:!!n,userEmail:n?.email,isLoading:c})},[g,s,n,c]),f.useEffect(()=>{console.log("🔍 AuthContext: Token effect triggered, token:",s?`${s.substring(0,10)}...`:"null","isInitialized:",m),s?(we.defaults.headers.common.Authorization=`Bearer ${s}`,console.log("🔍 AuthContext: Setting token to cookies..."),fe.setToken(s)):m?(delete we.defaults.headers.common.Authorization,console.log("🔍 AuthContext: Removing token from cookies (post-initialization)..."),fe.removeToken()):(delete we.defaults.headers.common.Authorization,console.log("🔍 AuthContext: Removing auth header only (during initialization)..."))},[s,m]),f.useEffect(()=>{let A=!0;console.log("🔍 AuthContext: Starting initialization...");const w=fe.getToken(),F=fe.getUser(),T=fe.getOrganizations(),R=fe.getSelectedOrg();if(console.log("🔍 AuthContext: Raw cookie data:",{storedToken:w,storedUser:F,storedOrgs:T,storedSelectedOrg:R}),console.log("🔍 AuthContext: Stored data analysis:",{hasToken:!!w,hasUser:!!F,hasOrgs:T&&T.length>0,hasSelectedOrg:!!R,tokenPrefix:w?`${w.substring(0,10)}...`:"none",userEmail:F?.email||"none"}),w&&F)if(fe.isSessionExpired())x(!0),j();else try{A&&(r(F),a(w),T&&T.length>0&&o(T),R&&d(R))}catch{A&&fe.clearAll()}return A&&(console.log("🔍 AuthContext: Setting loading to false and marking as initialized"),u(!1),p(!0)),()=>{console.log("🔍 AuthContext: Cleanup called"),A=!1}},[]);const N=async(A,w,F)=>{try{const T=await we.post("/auth/login",{email:A,password:w,twoFactorToken:F});if(T.data.requiresTwoFactor)return{requiresTwoFactor:!0,success:!1,message:T.data.message};const{token:R,userId:M,fullName:O,email:$,twoFactorEnabled:H,orgId:re,role:le,orgName:D,organizations:B}=T.data;a(R);const oe={userId:M,fullName:O||"",email:$||A,twoFactorEnabled:H||!1};r(oe),fe.setUser(oe);const P=B.map(ve=>({org_id:ve.org_id,org_name:ve.org_name,role:ve.role,industry:ve.industry,size:ve.size}));o(P),fe.setOrganizations(P);const xe=P.find(ve=>ve.org_id===re)||P[0];return d(xe),fe.setSelectedOrg(xe),{success:!0,message:"Login successful"}}catch(T){return console.error("Login error:",T),{success:!1,message:T.response?.data?.error||"Login failed"}}},j=()=>{console.log("🔍 AuthContext: Logging out user"),a(null),r(null),o([]),d(null),fe.clearAll(),console.log("🔍 AuthContext: Logout complete, cookies cleared")},v=async A=>{try{const w=await we.post("/auth/orgs",A),{token:F,userId:T,orgId:R,role:M}=w.data;a(F);const O={userId:T,fullName:A.fullName,email:A.email,twoFactorEnabled:!1};r(O);const $={org_id:R,org_name:A.orgName,role:M,industry:A.industry,size:A.size};return o([$]),d($),fe.setUser(O),fe.setOrganizations([$]),fe.setSelectedOrg($),{success:!0,message:"Organization created successfully"}}catch(w){return console.error("Create organization error:",w),{success:!1,message:w.response?.data?.error||"Failed to create organization"}}},E=async A=>{try{const w=await we.get(`/auth/invites/validate?code=${A}`);return{valid:w.data.valid,orgName:w.data.orgName,role:w.data.role,email:w.data.email}}catch(w){return console.error("Validate invite error:",w),{valid:!1,message:w.response?.data?.error||"Invalid invite code"}}},k=async A=>{try{const w=await we.post("/auth/invites/accept",A),{token:F,userId:T,orgId:R,role:M}=w.data;a(F);const O={userId:T,fullName:A.fullName,email:A.email,twoFactorEnabled:!1};r(O);const H=(await we.get(`/auth/users/${T}/orgs`,{headers:{Authorization:`Bearer ${F}`}})).data.map(le=>({org_id:le.org_id,org_name:le.org_name,role:le.role,industry:le.industry,size:le.size}));o(H);const re=H.find(le=>le.org_id===R)||H[0];return d(re),fe.setUser(O),fe.setOrganizations(H),fe.setSelectedOrg(re),{success:!0,message:"Successfully joined organization"}}catch(w){return console.error("Accept invite error:",w),{success:!1,message:w.response?.data?.error||"Failed to accept invite"}}},C=async()=>{try{const A=s||fe.getToken();if(!A)throw new Error("No authentication token available");const w=await we.post("/auth/setup-2fa",{},{headers:{Authorization:`Bearer ${A}`}});return{secret:w.data.secret,qrCodeUrl:w.data.qrCode||w.data.otpauth_url}}catch(A){throw console.error("Setup 2FA error:",A),new Error(A.response?.data?.error||"Failed to setup 2FA")}},S=async A=>{try{return await we.post("/auth/verify-2fa",{token:A}),n&&r({...n,twoFactorEnabled:!0}),{success:!0,message:"2FA enabled successfully"}}catch(w){return{success:!1,message:w.response?.data?.error||"2FA verification failed"}}},y=async(A,w)=>{try{return await we.post("/auth/device-bind",{instanceId:A,deviceFingerprintHash:w}),{success:!0,message:"Device bound successfully"}}catch(F){return{success:!1,message:F.response?.data?.error||"Device binding failed"}}};return h?t.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-surface",children:t.jsxs("div",{className:"bg-white border border-error/30 rounded-lg shadow-lg p-8 max-w-md text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-error mb-4",children:"Session Expired"}),t.jsxs("p",{className:"text-muted mb-6",children:["For security purposes, you must log in once every ",Cr," hours."]}),t.jsx("a",{href:"/signin",className:"inline-block px-6 py-2 bg-primary text-white rounded hover:bg-secondary transition-colors font-semibold",children:"Go to Login"})]})}):t.jsx(rl.Provider,{value:{user:n,token:s,organizations:i,selectedOrg:l,isAuthenticated:g,isLoading:c,setSelectedOrg:b,login:N,logout:j,createOrganization:v,validateInvite:E,acceptInvite:k,setupTwoFactor:C,verifyTwoFactor:S,bindDevice:y},children:e})},pt=()=>{const e=f.useContext(rl);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},lr=[{name:"Logic Studio",path:"/logic-studio",icon:yo},{name:"Tag Database Manager",path:"/tag-database",icon:cn},{name:"AutoDocs",path:"/autodocs",icon:Ke},{name:"Pandaura AS",path:"/pandaura-as",icon:ta}];function xt({children:e}){const[n,r]=f.useState(!1),[s,a]=f.useState(!1),i=He(),o=Rr(),{projectId:l}=Wn(),{saveModuleState:d}=na(),{logout:c}=pt(),u=f.useRef(null),m=f.useRef(null),p=o.pathname.startsWith("/workspace/"),[h,x]=f.useState(!1),g=f.useCallback(async()=>{try{return console.log("Performing fallback save before navigation"),!0}catch(T){return console.error("Failed to save before navigation:",T),!1}},[]),{handleNavigation:b}=Do(h&&p,g);f.useEffect(()=>{const T=R=>{x(R.detail.hasChanges)};return window.addEventListener("pandaura:unsaved-changes",T),()=>{window.removeEventListener("pandaura:unsaved-changes",T)}},[]),f.useEffect(()=>{const T=R=>{const M=R.target;if(m.current&&!m.current.contains(M)){const O=document.querySelector("[data-profile-dropdown]");(!O||!O.contains(M))&&a(!1)}};return s&&document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[s]);const N=()=>{if(!m.current)return{top:0,left:0};const T=m.current.getBoundingClientRect();return{top:T.top,left:T.right+8}},j=()=>{if(!s)return null;const T=N();return Ec.createPortal(t.jsx("div",{"data-profile-dropdown":!0,className:"fixed w-48 bg-white rounded-lg shadow-xl border border-light z-[9999]",style:{top:T.top,left:T.left},children:t.jsxs("div",{className:"py-2",children:[t.jsx("div",{onClick:()=>{console.log("Navigating to profile..."),i("/profile",{state:{from:o.pathname}}),a(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-muted hover:text-primary hover:bg-gray-100 cursor-pointer transition-colors",children:"👤 Profile"}),t.jsx("div",{onClick:()=>{console.log("Navigating to feedback..."),i("/feedback"),a(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-muted hover:text-primary hover:bg-gray-100 cursor-pointer transition-colors",children:"💬 Feedback"}),t.jsx("div",{onClick:()=>{console.log("Navigating to privacy..."),i("/privacy"),a(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-muted hover:text-primary hover:bg-gray-100 cursor-pointer transition-colors",children:"🔐 Privacy"}),t.jsx("div",{onClick:()=>{console.log("Navigating to case study library..."),i("/case-study-library"),a(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-muted hover:text-primary hover:bg-gray-100 cursor-pointer transition-colors",children:"📂 Case Studies"}),t.jsxs("div",{onClick:()=>{c(),i("/signin"),a(!1)},className:"flex items-center gap-2 px-4 py-2 text-sm text-muted hover:text-primary hover:bg-gray-100 cursor-pointer transition-colors border-t border-light mt-1",children:[t.jsx(Ds,{className:"w-4 h-4"}),"Log Out"]})]})}),document.body)},v=f.useMemo(()=>{if(p&&l){const T=lr.map(R=>({...R,path:`/workspace/${l}${R.path}`}));return console.log("🔧 SharedLayout: Using project-specific tool paths:",{projectId:l,originalPaths:lr.map(R=>R.path),projectPaths:T.map(R=>R.path)}),T}return console.log("🔧 SharedLayout: Using standard tool paths"),lr},[p,l]),E=()=>{const T=o.pathname,R=v.find(O=>O.path===T);return R?R.name:lr.find(O=>T.includes(O.path.substring(1)))?.name||"Pandaura AS"},k=f.useCallback(T=>{console.log("🔧 SharedLayout: Navigating to tool:",{toolPath:T,currentPath:o.pathname,projectId:l,isProjectWorkspace:p}),p&&h?b(T):i(T)},[i,o.pathname,l,p,h,b]),C=f.useCallback(()=>{p&&h?b("/home"):r(!0)},[p,h,b]),S=f.useCallback(async()=>{const T=E();console.log(`Auto-saving ${T} progress...`),await g()&&(r(!1),i("/home"))},[i,g]),y=f.useCallback(()=>{r(!1),i("/home")},[i]),A=()=>{const T=Nu();return t.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:C,className:"hover:opacity-80 transition-opacity",title:"Go to Home",children:t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),t.jsxs("div",{className:"flex flex-col text-xs",children:[t.jsx("span",{className:"text-primary font-medium",children:Kt.appTitle}),t.jsxs("span",{className:"text-muted",children:["Running on ",T.displayUrl," (Offline Mode)"]})]})]}),t.jsx("div",{className:"flex items-center space-x-4",children:t.jsx("div",{className:"bg-yellow-100 border border-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs",children:"Offline Mode"})})]})},w=f.useMemo(()=>t.jsxs("div",{ref:u,className:"h-full bg-gray-light border-r border-light p-2 space-y-4 transition-all duration-200 will-change-transform w-16",style:{scrollBehavior:"smooth"},children:[t.jsx("div",{className:"space-y-2 pb-4 border-b border-light/50",children:t.jsx("div",{ref:m,className:"relative",children:t.jsx("div",{onClick:()=>{console.log("Profile icon clicked, current state:",s),a(!s)},className:"flex items-center justify-center cursor-pointer py-3 rounded-md transition-colors duration-150 hover:bg-gray hover:text-primary hover:shadow-sm",title:"User Profile",children:t.jsx(No,{className:"w-6 h-6 min-w-[1.5rem] min-h-[1.5rem]"})})})}),v.map(T=>{const R=T.icon,M=E()===T.name;return t.jsx("div",{children:t.jsx("div",{onClick:()=>k(T.path),className:`flex items-center justify-center cursor-pointer py-3 rounded-md transition-colors duration-150 ${M?" text-primary shadow-sm":"hover:bg-gray hover:text-primary hover:shadow-sm"}`,title:T.name,children:t.jsx(R,{className:"w-6 h-6 min-w-[1.5rem] min-h-[1.5rem]"})})},T.name)})]}),[o.pathname,k,i,c,s]),F=()=>n&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg w-96 p-6 shadow-xl",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Save Current Progress?"}),t.jsx("button",{onClick:()=>r(!1),className:"text-secondary hover:text-primary",children:t.jsx(Ye,{className:"w-5 h-5"})})]}),t.jsx("p",{className:"text-sm text-secondary mb-6",children:"Do you want to save your current progress before returning to the Home screen?"}),t.jsxs("div",{className:"flex gap-3 justify-end",children:[t.jsx("button",{onClick:y,className:"px-4 py-2 border border-light rounded-md text-sm hover:bg-gray-100 transition-colors",children:"Don't Save"}),t.jsx("button",{onClick:S,className:"px-4 py-2 bg-primary text-white rounded-md text-sm hover:bg-secondary transition-colors",children:"Save & Go Home"})]})]})});return t.jsxs("div",{className:"flex flex-col h-screen bg-background text-primary",children:[A(),t.jsxs("div",{className:"flex flex-1 overflow-hidden min-w-0",children:[w,t.jsx("div",{className:"flex-1 overflow-y-auto will-change-scroll",style:{scrollBehavior:"smooth"},children:e})]}),t.jsx(Ao,{}),t.jsx(j,{}),F()]})}function ah(){return t.jsxs("div",{className:"max-w-2xl mx-auto py-18 px-6",children:[t.jsx("div",{className:"z-10 mb-2 flex flex-col items-center",children:t.jsx("img",{src:Ve,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),t.jsx("h1",{className:"text-3xl font-bold mb-6 text-primary",children:"End User License Agreement (EULA)"}),t.jsxs("div",{className:"space-y-6 text-base text-gray-800",children:[t.jsx("p",{children:'This End User License Agreement ("Agreement") is a legal agreement between you ("User") and Pandaura AS ("Company") for the use of the Pandaura AS software and services ("Software").'}),t.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"1. License Grant"}),t.jsx("p",{children:"The Company grants you a non-exclusive, non-transferable, limited license to use the Software in accordance with the terms of this Agreement."}),t.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"2. Restrictions"}),t.jsxs("ul",{className:"list-disc ml-6",children:[t.jsx("li",{children:"You may not copy, modify, distribute, sell, or lease any part of the Software."}),t.jsx("li",{children:"You may not reverse engineer or attempt to extract the source code of the Software."})]}),t.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"3. Termination"}),t.jsx("p",{children:"The Company may terminate your license if you fail to comply with any term of this Agreement. Upon termination, you must cease all use of the Software."}),t.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"4. Limitation of Liability"}),t.jsx("p",{children:'The Software is provided "as is" without warranty of any kind. The Company shall not be liable for any damages arising from the use or inability to use the Software.'}),t.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"5. Governing Law"}),t.jsx("p",{children:"This Agreement shall be governed by the laws of Norway, without regard to its conflict of law principles."}),t.jsx("h2",{className:"text-xl font-semibold mt-8 mb-2",children:"6. Contact"}),t.jsx("p",{children:"For any questions regarding this Agreement, please contact Pandaura AS at support@pandaura.com."})]})]})}function En({children:e}){const n=He();return t.jsxs("div",{className:"flex flex-col h-screen bg-background text-primary",children:[t.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>n(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Back to Home",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-12 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),t.jsx("div",{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"Quick Session"}),t.jsx("span",{className:"text-xs text-muted",children:"One-time use"})]})})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[t.jsx(Jn,{className:"w-4 h-4 text-yellow-600"}),t.jsx("span",{className:"text-xs text-yellow-800",children:"Session data will not be saved"})]}),t.jsxs("button",{onClick:()=>n("/home"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-secondary transition-colors text-sm",children:[t.jsx(Cd,{className:"w-4 h-4"}),"Home"]})]})]}),t.jsx("div",{className:"bg-accent/5 border-b border-accent/20 px-6 py-3",children:t.jsx("div",{className:"max-w-6xl mx-auto",children:t.jsxs("p",{className:"text-sm text-accent-dark",children:[t.jsx("strong",{children:"Quick Session Mode:"})," You can upload files, use all features, and export results — but your session will not be saved. For persistent projects,",t.jsx("button",{onClick:()=>n("/app"),className:"underline hover:text-primary transition-colors ml-1",children:"start a full project workflow"}),"."]})})}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:e})]})}function Be({children:e,redirectTo:n="/signin"}){const{isAuthenticated:r,isLoading:s,user:a,token:i}=pt(),o=He(),[l,d]=Ge.useState(!1);return f.useEffect(()=>{console.log("🛡️ ProtectedRoute: Auth check started",{isLoading:s,isAuthenticated:r,hasToken:!!i,hasUser:!!a,userEmail:a?.email,redirectTo:n,currentPath:window.location.pathname,cookies_token:!!fe.getToken(),cookies_user:!!fe.getUser(),hasInitialized:l,timestamp:new Date().toISOString()});const c=fe.getToken(),u=fe.getUser();if(console.log("🛡️ ProtectedRoute: Direct cookie check:",{cookieToken:c?`${c.substring(0,10)}...`:null,cookieUser:u?u.email:null,cookieHasAuthData:fe.hasAuthData()}),!s&&!l&&(console.log("🛡️ ProtectedRoute: Setting initialization complete"),d(!0)),!s&&l&&!r){console.log("🛡️ ProtectedRoute: Not authenticated after initialization, starting redirect timer");const m=setTimeout(()=>{const p=fe.hasAuthData(),h={token:fe.getToken(),user:fe.getUser(),hasAuthData:p};console.log("🛡️ ProtectedRoute: Final check before redirect:",{isAuthenticated:r,hasStoredAuth:p,finalCookieCheck:h,contextState:{hasToken:!!i,hasUser:!!a}}),!r&&!p?(console.log("🚨 ProtectedRoute: Redirecting to signin - final auth check failed",{reason:i?a?"Unknown":"No user":"No token",hasCookieToken:!!fe.getToken(),hasCookieUser:!!fe.getUser(),redirectingTo:n}),o(n,{replace:!0})):!r&&p&&(console.log("🤔 ProtectedRoute: Cookies have auth data but context does not - potential race condition"),setTimeout(()=>{r||(console.log("🚨 ProtectedRoute: Context still not updated, forcing redirect"),o(n,{replace:!0}))},500))},300);return()=>clearTimeout(m)}},[s,r,o,n,i,a,l]),s||!l?t.jsx("div",{className:"flex-1 flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-muted",children:s?"Loading authentication...":"Initializing..."})]})}):r?t.jsx(t.Fragment,{children:e}):null}const ih={primary:"bg-primary hover:bg-secondary text-white",secondary:"bg-secondary hover:bg-primary text-white",outline:"border border-light bg-white hover:bg-accent-light text-primary hover:border-accent",ghost:"hover:bg-accent-light text-primary",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white"},oh={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};function J({children:e,onClick:n,type:r="button",variant:s="primary",size:a="md",disabled:i=!1,loading:o=!1,icon:l,iconPosition:d="left",className:c="",title:u}){const p=`inline-flex items-center justify-center rounded-md font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${ih[s]} ${oh[a]} ${c}`;return t.jsxs("button",{type:r,onClick:n,disabled:i||o,className:p,title:u,children:[o&&t.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l&&d==="left"&&!o&&t.jsx(l,{className:`w-4 h-4 ${e?"mr-2":""}`}),e,l&&d==="right"&&!o&&t.jsx(l,{className:`w-4 h-4 ${e?"ml-2":""}`})]})}function Qe({id:e,name:n,type:r="text",value:s,onChange:a,placeholder:i,label:o,required:l=!1,disabled:d=!1,autoFocus:c=!1,autoComplete:u,maxLength:m,pattern:p,icon:h,onBlur:x,iconPosition:g="right",onIconClick:b,error:N,helpText:j,className:v=""}){const E=e||n,w=`w-full px-4 py-3 bg-surface text-primary border rounded-md shadow-sm outline-none transition-all focus:ring-2 focus:ring-accent focus:border-accent ${!!N?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-light"} ${d?"opacity-50 cursor-not-allowed":""} ${h?g==="left"?"pl-12":"pr-12":""} ${v}`;return t.jsxs("div",{className:"w-full",children:[o&&t.jsxs("label",{htmlFor:E,className:"block text-sm font-medium text-secondary mb-2",children:[o,l&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[h&&g==="left"&&t.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:t.jsx(h,{className:"w-5 h-5 text-muted"})}),t.jsx("input",{id:E,name:n,type:r,value:s,onChange:a,onBlur:x,placeholder:i,required:l,disabled:d,autoFocus:c,autoComplete:u,maxLength:m,pattern:p,className:w}),h&&g==="right"&&t.jsx("button",{type:"button",onClick:b,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary transition-colors",disabled:d,children:t.jsx(h,{className:"w-5 h-5"})})]}),N&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:N}),j&&!N&&t.jsx("p",{className:"mt-1 text-sm text-muted",children:j})]})}function Mn({id:e,name:n,value:r,onChange:s,placeholder:a,label:i,required:o=!1,disabled:l=!1,autoFocus:d=!1,rows:c=4,maxLength:u,error:m,helpText:p,className:h="",showCharCount:x=!1}){const g=e||n,k=`w-full px-4 py-3 bg-background border rounded-md text-primary placeholder-muted resize-none outline-none transition-all focus:ring-2 focus:ring-accent focus:border-accent ${!!m?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-light"} ${l?"opacity-50 cursor-not-allowed":""} ${h}`;return t.jsxs("div",{className:"w-full",children:[i&&t.jsxs("label",{htmlFor:g,className:"block text-sm font-medium text-secondary mb-2",children:[i,o&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("textarea",{id:g,name:n,value:r,onChange:s,placeholder:a,required:o,disabled:l,autoFocus:d,rows:c,maxLength:u,className:k}),t.jsxs("div",{className:"flex justify-between items-center mt-2",children:[t.jsxs("div",{children:[m&&t.jsx("p",{className:"text-sm text-red-600",children:m}),p&&!m&&t.jsx("p",{className:"text-sm text-muted",children:p})]}),(x||u)&&t.jsxs("span",{className:"text-xs text-muted",children:[r.length,u&&`/${u}`]})]})]})}const lh={sm:"p-4",md:"p-6",lg:"p-8"},ch={default:"bg-surface border border-light",elevated:"bg-surface border border-light shadow-card",bordered:"bg-background border-2 border-light"};function De({children:e,title:n,subtitle:r,icon:s,className:a="",padding:i="md",variant:o="default"}){const d=`rounded-lg ${ch[o]} ${lh[i]} ${a}`;return t.jsxs("div",{className:d,children:[(n||r||s)&&t.jsxs("div",{className:"mb-6",children:[s&&t.jsx("div",{className:"w-12 h-12 bg-accent/10 rounded-full flex items-center justify-center mb-4",children:t.jsx(s,{className:"w-6 h-6 text-accent"})}),n&&t.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:n}),r&&t.jsx("p",{className:"text-sm text-muted",children:r})]}),e]})}function kt({options:e,value:n,onChange:r,placeholder:s="Select an option",label:a,disabled:i=!1,error:o,className:l="",required:d=!1}){const[c,u]=f.useState(!1),m=f.useRef(null),p=e.find(b=>b.value===n);f.useEffect(()=>{const b=N=>{m.current&&!m.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const h=b=>{r(b),u(!1)},g=`w-full flex items-center justify-between px-4 py-3 bg-surface text-primary border rounded-md shadow-sm outline-none transition-all ${!!o?"border-red-500":"border-light"} ${i?"opacity-50 cursor-not-allowed":"hover:border-accent focus:ring-2 focus:ring-accent focus:border-accent cursor-pointer"} ${l}`;return t.jsxs("div",{className:"w-full",children:[a&&t.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:[a," ",d&&t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsxs("div",{className:"relative",ref:m,children:[t.jsxs("button",{type:"button",onClick:()=>!i&&u(!c),className:g,disabled:i,children:[t.jsxs("div",{className:"flex items-center",children:[p?.icon&&t.jsx(p.icon,{className:"w-4 h-4 mr-2 text-muted"}),t.jsx("span",{className:p?"text-primary":"text-muted",children:p?p.label:s})]}),t.jsx(Ut,{className:`w-4 h-4 text-muted transition-transform ${c?"rotate-180":""}`})]}),c&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-surface border border-light rounded-md shadow-lg max-h-60 overflow-auto",children:e.map(b=>t.jsxs("button",{type:"button",onClick:()=>!b.disabled&&h(b.value),className:`w-full flex items-center px-4 py-3 text-left transition-colors ${b.disabled?"opacity-50 cursor-not-allowed":"hover:bg-accent-light cursor-pointer"} ${b.value===n?"bg-accent-light text-primary":"text-primary"}`,disabled:b.disabled,children:[b.icon&&t.jsx(b.icon,{className:"w-4 h-4 mr-2 text-muted"}),b.label]},b.value))})]}),o&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:o})]})}function dh({title:e,subtitle:n,showBackButton:r=!1,backTo:s,actions:a,icon:i,className:o=""}){const l=He(),d=()=>{l(s||-1)};return t.jsx("header",{className:`bg-surface border-b border-light px-6 py-4 ${o}`,children:t.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[r&&t.jsx(J,{variant:"ghost",size:"sm",onClick:d,icon:ht,title:"Go back"}),t.jsxs("div",{className:"flex items-center gap-3",children:[i&&t.jsx("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:t.jsx(i,{className:"w-5 h-5 text-accent"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:e}),n&&t.jsx("p",{className:"text-sm text-secondary",children:n})]})]})]}),a&&t.jsx("div",{className:"flex items-center gap-3",children:a})]})})}const uh={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};function lt({isOpen:e,onClose:n,title:r,children:s,size:a="md",showCloseButton:i=!0,closeOnOverlayClick:o=!0,actions:l}){return f.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),f.useEffect(()=>{const d=c=>{c.key==="Escape"&&n()};return e&&document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[e,n]),e?t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:o?n:void 0}),t.jsxs("div",{className:`relative bg-surface rounded-lg shadow-xl w-full ${uh[a]} z-10`,children:[(r||i)&&t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light",children:[r&&t.jsx("h2",{className:"text-lg font-semibold text-primary",children:r}),i&&t.jsx(J,{variant:"ghost",size:"sm",onClick:n,icon:Ye,title:"Close"})]}),t.jsx("div",{className:"p-6",children:s}),l&&t.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-light",children:l})]})]})}):null}const mh={success:{icon:et,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",titleColor:"text-green-800",textColor:"text-green-700"},error:{icon:ze,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",titleColor:"text-red-800",textColor:"text-red-700"},warning:{icon:Jn,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-600",titleColor:"text-yellow-800",textColor:"text-yellow-700"},info:{icon:jo,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",titleColor:"text-blue-800",textColor:"text-blue-700"}};function dn({variant:e,title:n,children:r,onClose:s,className:a=""}){const i=mh[e],o=i.icon;return t.jsx("div",{className:`p-4 rounded-md border ${i.bgColor} ${i.borderColor} ${a}`,children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(o,{className:`w-5 h-5 ${i.iconColor}`})}),t.jsxs("div",{className:"ml-3 flex-1",children:[n&&t.jsx("h3",{className:`text-sm font-medium ${i.titleColor} mb-1`,children:n}),t.jsx("div",{className:`text-sm ${i.textColor}`,children:r})]}),s&&t.jsx("div",{className:"ml-auto pl-3",children:t.jsx("button",{type:"button",onClick:s,className:`inline-flex rounded-md p-1.5 ${i.textColor} hover:${i.bgColor} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-green-50 focus:ring-green-600`,children:t.jsx(Ye,{className:"w-4 h-4"})})})]})})}const sl=Ge.createContext(void 0),hh=({children:e})=>{const[n,r]=f.useState([]),s=i=>{const o=Math.random().toString(36).substr(2,9),l={...i,id:o};r(c=>[...c,l]);const d=i.duration||5e3;setTimeout(()=>{a(o)},d)},a=i=>{r(o=>o.filter(l=>l.id!==i))};return t.jsxs(sl.Provider,{value:{toasts:n,showToast:s,removeToast:a},children:[e,t.jsx(ph,{toasts:n,removeToast:a})]})},ph=({toasts:e,removeToast:n})=>e.length===0?null:t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(r=>t.jsx(dn,{variant:r.variant,title:r.title,onClose:()=>n(r.id),className:"min-w-80 shadow-lg animate-slide-in",children:r.message},r.id))}),St=()=>{const e=Ge.useContext(sl);if(!e)throw new Error("useToast must be used within ToastProvider");return e};class Ot extends f.Component{state={hasError:!1,error:null,errorInfo:null};static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("ErrorBoundary caught an error:",n,r),this.setState({error:n,errorInfo:r})}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const n=this.state.error?.message?.includes("useContext")||this.state.error?.message?.includes("must be used within");return t.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:t.jsxs("div",{className:"text-center p-8 max-w-lg",children:[t.jsx(ze,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:n?"Context Error":"Something went wrong"}),t.jsxs("div",{className:"text-sm text-gray-600 mb-6",children:[n?t.jsxs("div",{children:[t.jsx("p",{className:"mb-2",children:"A component is trying to access data that isn't available."}),t.jsx("p",{className:"mb-2",children:"This usually happens when a component is not properly wrapped with its required provider."})]}):t.jsx("p",{className:"mb-2",children:"An error occurred while rendering this component."}),this.state.error&&t.jsxs("details",{className:"mt-4",children:[t.jsx("summary",{className:"cursor-pointer text-blue-600 hover:text-blue-800",children:"Show error details"}),t.jsx("pre",{className:"text-left bg-gray-50 p-4 rounded-md overflow-auto text-xs mt-2",children:this.state.error.toString()})]})]}),t.jsxs("div",{className:"space-x-4",children:[t.jsx(J,{onClick:this.handleRetry,children:"Try Again"}),t.jsx(J,{variant:"ghost",onClick:()=>window.location.reload(),children:"Reload Page"})]})]})})}return this.props.children}}function fh(e,n){const r={};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}const xh=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gh=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,yh={};function Qa(e,n){return(yh.jsx?gh:xh).test(e)}const bh=/[ \t\n\f\r]/g;function jh(e){return typeof e=="object"?e.type==="text"?Ka(e.value):!1:Ka(e)}function Ka(e){return e.replace(bh,"")===""}class Zn{constructor(n,r,s){this.normal=r,this.property=n,s&&(this.space=s)}}Zn.prototype.normal={};Zn.prototype.property={};Zn.prototype.space=void 0;function al(e,n){const r={},s={};for(const a of e)Object.assign(r,a.property),Object.assign(s,a.normal);return new Zn(r,s,n)}function $s(e){return e.toLowerCase()}class rt{constructor(n,r){this.attribute=r,this.property=n}}rt.prototype.attribute="";rt.prototype.booleanish=!1;rt.prototype.boolean=!1;rt.prototype.commaOrSpaceSeparated=!1;rt.prototype.commaSeparated=!1;rt.prototype.defined=!1;rt.prototype.mustUseProperty=!1;rt.prototype.number=!1;rt.prototype.overloadedBoolean=!1;rt.prototype.property="";rt.prototype.spaceSeparated=!1;rt.prototype.space=void 0;let wh=0;const pe=Zt(),Oe=Zt(),Bs=Zt(),W=Zt(),Ce=Zt(),un=Zt(),at=Zt();function Zt(){return 2**++wh}const Us=Object.freeze(Object.defineProperty({__proto__:null,boolean:pe,booleanish:Oe,commaOrSpaceSeparated:at,commaSeparated:un,number:W,overloadedBoolean:Bs,spaceSeparated:Ce},Symbol.toStringTag,{value:"Module"})),ts=Object.keys(Us);class oa extends rt{constructor(n,r,s,a){let i=-1;if(super(n,r),Za(this,"space",a),typeof s=="number")for(;++i<ts.length;){const o=ts[i];Za(this,ts[i],(s&Us[o])===Us[o])}}}oa.prototype.defined=!0;function Za(e,n,r){r&&(e[n]=r)}function Nn(e){const n={},r={};for(const[s,a]of Object.entries(e.properties)){const i=new oa(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(i.mustUseProperty=!0),n[s]=i,r[$s(s)]=s,r[$s(i.attribute)]=s}return new Zn(n,r,e.space)}const il=Nn({properties:{ariaActiveDescendant:null,ariaAtomic:Oe,ariaAutoComplete:null,ariaBusy:Oe,ariaChecked:Oe,ariaColCount:W,ariaColIndex:W,ariaColSpan:W,ariaControls:Ce,ariaCurrent:null,ariaDescribedBy:Ce,ariaDetails:null,ariaDisabled:Oe,ariaDropEffect:Ce,ariaErrorMessage:null,ariaExpanded:Oe,ariaFlowTo:Ce,ariaGrabbed:Oe,ariaHasPopup:null,ariaHidden:Oe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ce,ariaLevel:W,ariaLive:null,ariaModal:Oe,ariaMultiLine:Oe,ariaMultiSelectable:Oe,ariaOrientation:null,ariaOwns:Ce,ariaPlaceholder:null,ariaPosInSet:W,ariaPressed:Oe,ariaReadOnly:Oe,ariaRelevant:null,ariaRequired:Oe,ariaRoleDescription:Ce,ariaRowCount:W,ariaRowIndex:W,ariaRowSpan:W,ariaSelected:Oe,ariaSetSize:W,ariaSort:null,ariaValueMax:W,ariaValueMin:W,ariaValueNow:W,ariaValueText:null,role:null},transform(e,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function ol(e,n){return n in e?e[n]:n}function ll(e,n){return ol(e,n.toLowerCase())}const vh=Nn({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:un,acceptCharset:Ce,accessKey:Ce,action:null,allow:null,allowFullScreen:pe,allowPaymentRequest:pe,allowUserMedia:pe,alt:null,as:null,async:pe,autoCapitalize:null,autoComplete:Ce,autoFocus:pe,autoPlay:pe,blocking:Ce,capture:null,charSet:null,checked:pe,cite:null,className:Ce,cols:W,colSpan:null,content:null,contentEditable:Oe,controls:pe,controlsList:Ce,coords:W|un,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pe,defer:pe,dir:null,dirName:null,disabled:pe,download:Bs,draggable:Oe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pe,formTarget:null,headers:Ce,height:W,hidden:Bs,high:W,href:null,hrefLang:null,htmlFor:Ce,httpEquiv:Ce,id:null,imageSizes:null,imageSrcSet:null,inert:pe,inputMode:null,integrity:null,is:null,isMap:pe,itemId:null,itemProp:Ce,itemRef:Ce,itemScope:pe,itemType:Ce,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pe,low:W,manifest:null,max:null,maxLength:W,media:null,method:null,min:null,minLength:W,multiple:pe,muted:pe,name:null,nonce:null,noModule:pe,noValidate:pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pe,optimum:W,pattern:null,ping:Ce,placeholder:null,playsInline:pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pe,referrerPolicy:null,rel:Ce,required:pe,reversed:pe,rows:W,rowSpan:W,sandbox:Ce,scope:null,scoped:pe,seamless:pe,selected:pe,shadowRootClonable:pe,shadowRootDelegatesFocus:pe,shadowRootMode:null,shape:null,size:W,sizes:null,slot:null,span:W,spellCheck:Oe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:W,step:null,style:null,tabIndex:W,target:null,title:null,translate:null,type:null,typeMustMatch:pe,useMap:null,value:Oe,width:W,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ce,axis:null,background:null,bgColor:null,border:W,borderColor:null,bottomMargin:W,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pe,declare:pe,event:null,face:null,frame:null,frameBorder:null,hSpace:W,leftMargin:W,link:null,longDesc:null,lowSrc:null,marginHeight:W,marginWidth:W,noResize:pe,noHref:pe,noShade:pe,noWrap:pe,object:null,profile:null,prompt:null,rev:null,rightMargin:W,rules:null,scheme:null,scrolling:Oe,standby:null,summary:null,text:null,topMargin:W,valueType:null,version:null,vAlign:null,vLink:null,vSpace:W,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pe,disableRemotePlayback:pe,prefix:null,property:null,results:W,security:null,unselectable:null},space:"html",transform:ll}),Nh=Nn({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:at,accentHeight:W,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:W,amplitude:W,arabicForm:null,ascent:W,attributeName:null,attributeType:null,azimuth:W,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:W,by:null,calcMode:null,capHeight:W,className:Ce,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:W,diffuseConstant:W,direction:null,display:null,dur:null,divisor:W,dominantBaseline:null,download:pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:W,enableBackground:null,end:null,event:null,exponent:W,externalResourcesRequired:null,fill:null,fillOpacity:W,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:un,g2:un,glyphName:un,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:W,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:W,horizOriginX:W,horizOriginY:W,id:null,ideographic:W,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:W,k:W,k1:W,k2:W,k3:W,k4:W,kernelMatrix:at,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:W,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:W,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:W,overlineThickness:W,paintOrder:null,panose1:null,path:null,pathLength:W,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ce,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:W,pointsAtY:W,pointsAtZ:W,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:at,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:at,rev:at,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:at,requiredFeatures:at,requiredFonts:at,requiredFormats:at,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:W,specularExponent:W,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:W,strikethroughThickness:W,string:null,stroke:null,strokeDashArray:at,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:W,strokeOpacity:W,strokeWidth:null,style:null,surfaceScale:W,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:at,tabIndex:W,tableValues:null,target:null,targetX:W,targetY:W,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:at,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:W,underlineThickness:W,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:W,values:null,vAlphabetic:W,vMathematical:W,vectorEffect:null,vHanging:W,vIdeographic:W,version:null,vertAdvY:W,vertOriginX:W,vertOriginY:W,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:W,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ol}),cl=Nn({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,n){return"xlink:"+n.slice(5).toLowerCase()}}),dl=Nn({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ll}),ul=Nn({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,n){return"xml:"+n.slice(3).toLowerCase()}}),kh={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Sh=/[A-Z]/g,ei=/-[a-z]/g,Ch=/^data[-\w.:]+$/i;function Ah(e,n){const r=$s(n);let s=n,a=rt;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&Ch.test(n)){if(n.charAt(4)==="-"){const i=n.slice(5).replace(ei,Th);s="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=n.slice(4);if(!ei.test(i)){let o=i.replace(Sh,Eh);o.charAt(0)!=="-"&&(o="-"+o),n="data"+o}}a=oa}return new a(s,n)}function Eh(e){return"-"+e.toLowerCase()}function Th(e){return e.charAt(1).toUpperCase()}const Ph=al([il,vh,cl,dl,ul],"html"),la=al([il,Nh,cl,dl,ul],"svg");function Dh(e){return e.join(" ").trim()}var nn={},ns,ti;function Ih(){if(ti)return ns;ti=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,s=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,i=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,l=/^\s+|\s+$/g,d=`
`,c="/",u="*",m="",p="comment",h="declaration";ns=function(g,b){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];b=b||{};var N=1,j=1;function v(R){var M=R.match(n);M&&(N+=M.length);var O=R.lastIndexOf(d);j=~O?R.length-O:j+R.length}function E(){var R={line:N,column:j};return function(M){return M.position=new k(R),y(),M}}function k(R){this.start=R,this.end={line:N,column:j},this.source=b.source}k.prototype.content=g;function C(R){var M=new Error(b.source+":"+N+":"+j+": "+R);if(M.reason=R,M.filename=b.source,M.line=N,M.column=j,M.source=g,!b.silent)throw M}function S(R){var M=R.exec(g);if(M){var O=M[0];return v(O),g=g.slice(O.length),M}}function y(){S(r)}function A(R){var M;for(R=R||[];M=w();)M!==!1&&R.push(M);return R}function w(){var R=E();if(!(c!=g.charAt(0)||u!=g.charAt(1))){for(var M=2;m!=g.charAt(M)&&(u!=g.charAt(M)||c!=g.charAt(M+1));)++M;if(M+=2,m===g.charAt(M-1))return C("End of comment missing");var O=g.slice(2,M-2);return j+=2,v(O),g=g.slice(M),j+=2,R({type:p,comment:O})}}function F(){var R=E(),M=S(s);if(M){if(w(),!S(a))return C("property missing ':'");var O=S(i),$=R({type:h,property:x(M[0].replace(e,m)),value:O?x(O[0].replace(e,m)):m});return S(o),$}}function T(){var R=[];A(R);for(var M;M=F();)M!==!1&&(R.push(M),A(R));return R}return y(),T()};function x(g){return g?g.replace(l,m):m}return ns}var ni;function Rh(){if(ni)return nn;ni=1;var e=nn&&nn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(nn,"__esModule",{value:!0}),nn.default=r;var n=e(Ih());function r(s,a){var i=null;if(!s||typeof s!="string")return i;var o=(0,n.default)(s),l=typeof a=="function";return o.forEach(function(d){if(d.type==="declaration"){var c=d.property,u=d.value;l?a(c,u,d):u&&(i=i||{},i[c]=u)}}),i}return nn}var Tn={},ri;function Fh(){if(ri)return Tn;ri=1,Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,r=/^[^-]+$/,s=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,i=function(c){return!c||r.test(c)||e.test(c)},o=function(c,u){return u.toUpperCase()},l=function(c,u){return"".concat(u,"-")},d=function(c,u){return u===void 0&&(u={}),i(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(a,l):c=c.replace(s,l),c.replace(n,o))};return Tn.camelCase=d,Tn}var Pn,si;function Lh(){if(si)return Pn;si=1;var e=Pn&&Pn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},n=e(Rh()),r=Fh();function s(a,i){var o={};return!a||typeof a!="string"||(0,n.default)(a,function(l,d){l&&d&&(o[(0,r.camelCase)(l,i)]=d)}),o}return s.default=s,Pn=s,Pn}var Oh=Lh();const Mh=Qs(Oh),ml=hl("end"),ca=hl("start");function hl(e){return n;function n(r){const s=r&&r.position&&r.position[e]||{};if(typeof s.line=="number"&&s.line>0&&typeof s.column=="number"&&s.column>0)return{line:s.line,column:s.column,offset:typeof s.offset=="number"&&s.offset>-1?s.offset:void 0}}}function _h(e){const n=ca(e),r=ml(e);if(n&&r)return{start:n,end:r}}function _n(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?ai(e.position):"start"in e||"end"in e?ai(e):"line"in e||"column"in e?Vs(e):""}function Vs(e){return ii(e&&e.line)+":"+ii(e&&e.column)}function ai(e){return Vs(e&&e.start)+"-"+Vs(e&&e.end)}function ii(e){return e&&typeof e=="number"?e:1}class Je extends Error{constructor(n,r,s){super(),typeof r=="string"&&(s=r,r=void 0);let a="",i={},o=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof n=="string"?a=n:!i.cause&&n&&(o=!0,a=n.message,i.cause=n),!i.ruleId&&!i.source&&typeof s=="string"){const d=s.indexOf(":");d===-1?i.ruleId=s:(i.source=s.slice(0,d),i.ruleId=s.slice(d+1))}if(!i.place&&i.ancestors&&i.ancestors){const d=i.ancestors[i.ancestors.length-1];d&&(i.place=d.position)}const l=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=_n(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Je.prototype.file="";Je.prototype.name="";Je.prototype.reason="";Je.prototype.message="";Je.prototype.stack="";Je.prototype.column=void 0;Je.prototype.line=void 0;Je.prototype.ancestors=void 0;Je.prototype.cause=void 0;Je.prototype.fatal=void 0;Je.prototype.place=void 0;Je.prototype.ruleId=void 0;Je.prototype.source=void 0;const da={}.hasOwnProperty,zh=new Map,$h=/[A-Z]/g,Bh=new Set(["table","tbody","thead","tfoot","tr"]),Uh=new Set(["td","th"]),pl="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Vh(e,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=n.filePath||void 0;let s;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=Qh(r,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");s=Yh(r,n.jsx,n.jsxs)}const a={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:s,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?la:Ph,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},i=fl(a,e,void 0);return i&&typeof i!="string"?i:a.create(e,a.Fragment,{children:i||void 0},void 0)}function fl(e,n,r){if(n.type==="element")return Hh(e,n,r);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return qh(e,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return Gh(e,n,r);if(n.type==="mdxjsEsm")return Wh(e,n);if(n.type==="root")return Jh(e,n,r);if(n.type==="text")return Xh(e,n)}function Hh(e,n,r){const s=e.schema;let a=s;n.tagName.toLowerCase()==="svg"&&s.space==="html"&&(a=la,e.schema=a),e.ancestors.push(n);const i=gl(e,n.tagName,!1),o=Kh(e,n);let l=ma(e,n);return Bh.has(n.tagName)&&(l=l.filter(function(d){return typeof d=="string"?!jh(d):!0})),xl(e,o,i,n),ua(o,l),e.ancestors.pop(),e.schema=s,e.create(n,i,o,r)}function qh(e,n){if(n.data&&n.data.estree&&e.evaluater){const s=n.data.estree.body[0];return s.type,e.evaluater.evaluateExpression(s.expression)}Vn(e,n.position)}function Wh(e,n){if(n.data&&n.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(n.data.estree);Vn(e,n.position)}function Gh(e,n,r){const s=e.schema;let a=s;n.name==="svg"&&s.space==="html"&&(a=la,e.schema=a),e.ancestors.push(n);const i=n.name===null?e.Fragment:gl(e,n.name,!0),o=Zh(e,n),l=ma(e,n);return xl(e,o,i,n),ua(o,l),e.ancestors.pop(),e.schema=s,e.create(n,i,o,r)}function Jh(e,n,r){const s={};return ua(s,ma(e,n)),e.create(n,e.Fragment,s,r)}function Xh(e,n){return n.value}function xl(e,n,r,s){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(n.node=s)}function ua(e,n){if(n.length>0){const r=n.length>1?n:n[0];r&&(e.children=r)}}function Yh(e,n,r){return s;function s(a,i,o,l){const c=Array.isArray(o.children)?r:n;return l?c(i,o,l):c(i,o)}}function Qh(e,n){return r;function r(s,a,i,o){const l=Array.isArray(i.children),d=ca(s);return n(a,i,o,l,{columnNumber:d?d.column-1:void 0,fileName:e,lineNumber:d?d.line:void 0},void 0)}}function Kh(e,n){const r={};let s,a;for(a in n.properties)if(a!=="children"&&da.call(n.properties,a)){const i=ep(e,a,n.properties[a]);if(i){const[o,l]=i;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&Uh.has(n.tagName)?s=l:r[o]=l}}if(s){const i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=s}return r}function Zh(e,n){const r={};for(const s of n.attributes)if(s.type==="mdxJsxExpressionAttribute")if(s.data&&s.data.estree&&e.evaluater){const i=s.data.estree.body[0];i.type;const o=i.expression;o.type;const l=o.properties[0];l.type,Object.assign(r,e.evaluater.evaluateExpression(l.argument))}else Vn(e,n.position);else{const a=s.name;let i;if(s.value&&typeof s.value=="object")if(s.value.data&&s.value.data.estree&&e.evaluater){const l=s.value.data.estree.body[0];l.type,i=e.evaluater.evaluateExpression(l.expression)}else Vn(e,n.position);else i=s.value===null?!0:s.value;r[a]=i}return r}function ma(e,n){const r=[];let s=-1;const a=e.passKeys?new Map:zh;for(;++s<n.children.length;){const i=n.children[s];let o;if(e.passKeys){const d=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(d){const c=a.get(d)||0;o=d+"-"+c,a.set(d,c+1)}}const l=fl(e,i,o);l!==void 0&&r.push(l)}return r}function ep(e,n,r){const s=Ah(e.schema,n);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=s.commaSeparated?fh(r):Dh(r)),s.property==="style"){let a=typeof r=="object"?r:tp(e,String(r));return e.stylePropertyNameCase==="css"&&(a=np(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&s.space?kh[s.property]||s.property:s.attribute,r]}}function tp(e,n){try{return Mh(n,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const s=r,a=new Je("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=pl+"#cannot-parse-style-attribute",a}}function gl(e,n,r){let s;if(!r)s={type:"Literal",value:n};else if(n.includes(".")){const a=n.split(".");let i=-1,o;for(;++i<a.length;){const l=Qa(a[i])?{type:"Identifier",name:a[i]}:{type:"Literal",value:a[i]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(i&&l.type==="Literal"),optional:!1}:l}s=o}else s=Qa(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(s.type==="Literal"){const a=s.value;return da.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(s);Vn(e)}function Vn(e,n){const r=new Je("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=pl+"#cannot-handle-mdx-estrees-without-createevaluater",r}function np(e){const n={};let r;for(r in e)da.call(e,r)&&(n[rp(r)]=e[r]);return n}function rp(e){let n=e.replace($h,sp);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function sp(e){return"-"+e.toLowerCase()}const rs={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ap={};function ha(e,n){const r=ap,s=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,a=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return yl(e,s,a)}function yl(e,n,r){if(ip(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(n&&"alt"in e&&e.alt)return e.alt;if("children"in e)return oi(e.children,n,r)}return Array.isArray(e)?oi(e,n,r):""}function oi(e,n,r){const s=[];let a=-1;for(;++a<e.length;)s[a]=yl(e[a],n,r);return s.join("")}function ip(e){return!!(e&&typeof e=="object")}const li=document.createElement("i");function pa(e){const n="&"+e+";";li.innerHTML=n;const r=li.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===n?!1:r}function ot(e,n,r,s){const a=e.length;let i=0,o;if(n<0?n=-n>a?0:a+n:n=n>a?a:n,r=r>0?r:0,s.length<1e4)o=Array.from(s),o.unshift(n,r),e.splice(...o);else for(r&&e.splice(n,r);i<s.length;)o=s.slice(i,i+1e4),o.unshift(n,0),e.splice(...o),i+=1e4,n+=1e4}function mt(e,n){return e.length>0?(ot(e,e.length,0,n),e):n}const ci={}.hasOwnProperty;function bl(e){const n={};let r=-1;for(;++r<e.length;)op(n,e[r]);return n}function op(e,n){let r;for(r in n){const a=(ci.call(e,r)?e[r]:void 0)||(e[r]={}),i=n[r];let o;if(i)for(o in i){ci.call(a,o)||(a[o]=[]);const l=i[o];lp(a[o],Array.isArray(l)?l:l?[l]:[])}}}function lp(e,n){let r=-1;const s=[];for(;++r<n.length;)(n[r].add==="after"?e:s).push(n[r]);ot(e,0,0,s)}function jl(e,n){const r=Number.parseInt(e,n);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"�":String.fromCodePoint(r)}function yt(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Xe=Ht(/[A-Za-z]/),We=Ht(/[\dA-Za-z]/),cp=Ht(/[#-'*+\--9=?A-Z^-~]/);function Ar(e){return e!==null&&(e<32||e===127)}const Hs=Ht(/\d/),dp=Ht(/[\dA-Fa-f]/),up=Ht(/[!-/:-@[-`{-~]/);function ie(e){return e!==null&&e<-2}function ke(e){return e!==null&&(e<0||e===32)}function ge(e){return e===-2||e===-1||e===32}const Hr=Ht(new RegExp("\\p{P}|\\p{S}","u")),Qt=Ht(/\s/);function Ht(e){return n;function n(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function kn(e){const n=[];let r=-1,s=0,a=0;for(;++r<e.length;){const i=e.charCodeAt(r);let o="";if(i===37&&We(e.charCodeAt(r+1))&&We(e.charCodeAt(r+2)))a=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(o=String.fromCharCode(i));else if(i>55295&&i<57344){const l=e.charCodeAt(r+1);i<56320&&l>56319&&l<57344?(o=String.fromCharCode(i,l),a=1):o="�"}else o=String.fromCharCode(i);o&&(n.push(e.slice(s,r),encodeURIComponent(o)),s=r+a+1,o=""),a&&(r+=a,a=0)}return n.join("")+e.slice(s)}function ye(e,n,r,s){const a=s?s-1:Number.POSITIVE_INFINITY;let i=0;return o;function o(d){return ge(d)?(e.enter(r),l(d)):n(d)}function l(d){return ge(d)&&i++<a?(e.consume(d),l):(e.exit(r),n(d))}}const mp={tokenize:hp};function hp(e){const n=e.attempt(this.parser.constructs.contentInitial,s,a);let r;return n;function s(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),ye(e,n,"linePrefix")}function a(l){return e.enter("paragraph"),i(l)}function i(l){const d=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=d),r=d,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return ie(l)?(e.consume(l),e.exit("chunkText"),i):(e.consume(l),o)}}const pp={tokenize:fp},di={tokenize:xp};function fp(e){const n=this,r=[];let s=0,a,i,o;return l;function l(v){if(s<r.length){const E=r[s];return n.containerState=E[1],e.attempt(E[0].continuation,d,c)(v)}return c(v)}function d(v){if(s++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,a&&j();const E=n.events.length;let k=E,C;for(;k--;)if(n.events[k][0]==="exit"&&n.events[k][1].type==="chunkFlow"){C=n.events[k][1].end;break}N(s);let S=E;for(;S<n.events.length;)n.events[S][1].end={...C},S++;return ot(n.events,k+1,0,n.events.slice(E)),n.events.length=S,c(v)}return l(v)}function c(v){if(s===r.length){if(!a)return p(v);if(a.currentConstruct&&a.currentConstruct.concrete)return x(v);n.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return n.containerState={},e.check(di,u,m)(v)}function u(v){return a&&j(),N(s),p(v)}function m(v){return n.parser.lazy[n.now().line]=s!==r.length,o=n.now().offset,x(v)}function p(v){return n.containerState={},e.attempt(di,h,x)(v)}function h(v){return s++,r.push([n.currentConstruct,n.containerState]),p(v)}function x(v){if(v===null){a&&j(),N(0),e.consume(v);return}return a=a||n.parser.flow(n.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:i}),g(v)}function g(v){if(v===null){b(e.exit("chunkFlow"),!0),N(0),e.consume(v);return}return ie(v)?(e.consume(v),b(e.exit("chunkFlow")),s=0,n.interrupt=void 0,l):(e.consume(v),g)}function b(v,E){const k=n.sliceStream(v);if(E&&k.push(null),v.previous=i,i&&(i.next=v),i=v,a.defineSkip(v.start),a.write(k),n.parser.lazy[v.start.line]){let C=a.events.length;for(;C--;)if(a.events[C][1].start.offset<o&&(!a.events[C][1].end||a.events[C][1].end.offset>o))return;const S=n.events.length;let y=S,A,w;for(;y--;)if(n.events[y][0]==="exit"&&n.events[y][1].type==="chunkFlow"){if(A){w=n.events[y][1].end;break}A=!0}for(N(s),C=S;C<n.events.length;)n.events[C][1].end={...w},C++;ot(n.events,y+1,0,n.events.slice(S)),n.events.length=C}}function N(v){let E=r.length;for(;E-- >v;){const k=r[E];n.containerState=k[1],k[0].exit.call(n,e)}r.length=v}function j(){a.write([null]),i=void 0,a=void 0,n.containerState._closeFlow=void 0}}function xp(e,n,r){return ye(e,e.attempt(this.parser.constructs.document,n,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function xn(e){if(e===null||ke(e)||Qt(e))return 1;if(Hr(e))return 2}function qr(e,n,r){const s=[];let a=-1;for(;++a<e.length;){const i=e[a].resolveAll;i&&!s.includes(i)&&(n=i(n,r),s.push(i))}return n}const qs={name:"attention",resolveAll:gp,tokenize:yp};function gp(e,n){let r=-1,s,a,i,o,l,d,c,u;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(s=r;s--;)if(e[s][0]==="exit"&&e[s][1].type==="attentionSequence"&&e[s][1]._open&&n.sliceSerialize(e[s][1]).charCodeAt(0)===n.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[s][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[s][1].end.offset-e[s][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;d=e[s][1].end.offset-e[s][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;const m={...e[s][1].end},p={...e[r][1].start};ui(m,-d),ui(p,d),o={type:d>1?"strongSequence":"emphasisSequence",start:m,end:{...e[s][1].end}},l={type:d>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:p},i={type:d>1?"strongText":"emphasisText",start:{...e[s][1].end},end:{...e[r][1].start}},a={type:d>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[s][1].end={...o.start},e[r][1].start={...l.end},c=[],e[s][1].end.offset-e[s][1].start.offset&&(c=mt(c,[["enter",e[s][1],n],["exit",e[s][1],n]])),c=mt(c,[["enter",a,n],["enter",o,n],["exit",o,n],["enter",i,n]]),c=mt(c,qr(n.parser.constructs.insideSpan.null,e.slice(s+1,r),n)),c=mt(c,[["exit",i,n],["enter",l,n],["exit",l,n],["exit",a,n]]),e[r][1].end.offset-e[r][1].start.offset?(u=2,c=mt(c,[["enter",e[r][1],n],["exit",e[r][1],n]])):u=0,ot(e,s-1,r-s+3,c),r=s+c.length-u-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function yp(e,n){const r=this.parser.constructs.attentionMarkers.null,s=this.previous,a=xn(s);let i;return o;function o(d){return i=d,e.enter("attentionSequence"),l(d)}function l(d){if(d===i)return e.consume(d),l;const c=e.exit("attentionSequence"),u=xn(d),m=!u||u===2&&a||r.includes(d),p=!a||a===2&&u||r.includes(s);return c._open=!!(i===42?m:m&&(a||!p)),c._close=!!(i===42?p:p&&(u||!m)),n(d)}}function ui(e,n){e.column+=n,e.offset+=n,e._bufferIndex+=n}const bp={name:"autolink",tokenize:jp};function jp(e,n,r){let s=0;return a;function a(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(h){return Xe(h)?(e.consume(h),o):h===64?r(h):c(h)}function o(h){return h===43||h===45||h===46||We(h)?(s=1,l(h)):c(h)}function l(h){return h===58?(e.consume(h),s=0,d):(h===43||h===45||h===46||We(h))&&s++<32?(e.consume(h),l):(s=0,c(h))}function d(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),n):h===null||h===32||h===60||Ar(h)?r(h):(e.consume(h),d)}function c(h){return h===64?(e.consume(h),u):cp(h)?(e.consume(h),c):r(h)}function u(h){return We(h)?m(h):r(h)}function m(h){return h===46?(e.consume(h),s=0,u):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),n):p(h)}function p(h){if((h===45||We(h))&&s++<63){const x=h===45?p:m;return e.consume(h),x}return r(h)}}const er={partial:!0,tokenize:wp};function wp(e,n,r){return s;function s(i){return ge(i)?ye(e,a,"linePrefix")(i):a(i)}function a(i){return i===null||ie(i)?n(i):r(i)}}const wl={continuation:{tokenize:Np},exit:kp,name:"blockQuote",tokenize:vp};function vp(e,n,r){const s=this;return a;function a(o){if(o===62){const l=s.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),i}return r(o)}function i(o){return ge(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),n):(e.exit("blockQuotePrefix"),n(o))}}function Np(e,n,r){const s=this;return a;function a(o){return ge(o)?ye(e,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):i(o)}function i(o){return e.attempt(wl,n,r)(o)}}function kp(e){e.exit("blockQuote")}const vl={name:"characterEscape",tokenize:Sp};function Sp(e,n,r){return s;function s(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),a}function a(i){return up(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),n):r(i)}}const Nl={name:"characterReference",tokenize:Cp};function Cp(e,n,r){const s=this;let a=0,i,o;return l;function l(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),d}function d(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),c):(e.enter("characterReferenceValue"),i=31,o=We,u(m))}function c(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=dp,u):(e.enter("characterReferenceValue"),i=7,o=Hs,u(m))}function u(m){if(m===59&&a){const p=e.exit("characterReferenceValue");return o===We&&!pa(s.sliceSerialize(p))?r(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),n)}return o(m)&&a++<i?(e.consume(m),u):r(m)}}const mi={partial:!0,tokenize:Ep},hi={concrete:!0,name:"codeFenced",tokenize:Ap};function Ap(e,n,r){const s=this,a={partial:!0,tokenize:k};let i=0,o=0,l;return d;function d(C){return c(C)}function c(C){const S=s.events[s.events.length-1];return i=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===l?(o++,e.consume(C),u):o<3?r(C):(e.exit("codeFencedFenceSequence"),ge(C)?ye(e,m,"whitespace")(C):m(C))}function m(C){return C===null||ie(C)?(e.exit("codeFencedFence"),s.interrupt?n(C):e.check(mi,g,E)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||ie(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(C)):ge(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ye(e,h,"whitespace")(C)):C===96&&C===l?r(C):(e.consume(C),p)}function h(C){return C===null||ie(C)?m(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),x(C))}function x(C){return C===null||ie(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(C)):C===96&&C===l?r(C):(e.consume(C),x)}function g(C){return e.attempt(a,E,b)(C)}function b(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),N}function N(C){return i>0&&ge(C)?ye(e,j,"linePrefix",i+1)(C):j(C)}function j(C){return C===null||ie(C)?e.check(mi,g,E)(C):(e.enter("codeFlowValue"),v(C))}function v(C){return C===null||ie(C)?(e.exit("codeFlowValue"),j(C)):(e.consume(C),v)}function E(C){return e.exit("codeFenced"),n(C)}function k(C,S,y){let A=0;return w;function w(O){return C.enter("lineEnding"),C.consume(O),C.exit("lineEnding"),F}function F(O){return C.enter("codeFencedFence"),ge(O)?ye(C,T,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):T(O)}function T(O){return O===l?(C.enter("codeFencedFenceSequence"),R(O)):y(O)}function R(O){return O===l?(A++,C.consume(O),R):A>=o?(C.exit("codeFencedFenceSequence"),ge(O)?ye(C,M,"whitespace")(O):M(O)):y(O)}function M(O){return O===null||ie(O)?(C.exit("codeFencedFence"),S(O)):y(O)}}}function Ep(e,n,r){const s=this;return a;function a(o){return o===null?r(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i)}function i(o){return s.parser.lazy[s.now().line]?r(o):n(o)}}const ss={name:"codeIndented",tokenize:Pp},Tp={partial:!0,tokenize:Dp};function Pp(e,n,r){const s=this;return a;function a(c){return e.enter("codeIndented"),ye(e,i,"linePrefix",5)(c)}function i(c){const u=s.events[s.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):r(c)}function o(c){return c===null?d(c):ie(c)?e.attempt(Tp,o,d)(c):(e.enter("codeFlowValue"),l(c))}function l(c){return c===null||ie(c)?(e.exit("codeFlowValue"),o(c)):(e.consume(c),l)}function d(c){return e.exit("codeIndented"),n(c)}}function Dp(e,n,r){const s=this;return a;function a(o){return s.parser.lazy[s.now().line]?r(o):ie(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):ye(e,i,"linePrefix",5)(o)}function i(o){const l=s.events[s.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?n(o):ie(o)?a(o):r(o)}}const Ip={name:"codeText",previous:Fp,resolve:Rp,tokenize:Lp};function Rp(e){let n=e.length-4,r=3,s,a;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[n][1].type==="lineEnding"||e[n][1].type==="space")){for(s=r;++s<n;)if(e[s][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[n][1].type="codeTextPadding",r+=2,n-=2;break}}for(s=r-1,n++;++s<=n;)a===void 0?s!==n&&e[s][1].type!=="lineEnding"&&(a=s):(s===n||e[s][1].type==="lineEnding")&&(e[a][1].type="codeTextData",s!==a+2&&(e[a][1].end=e[s-1][1].end,e.splice(a+2,s-a-2),n-=s-a-2,s=a+2),a=void 0);return e}function Fp(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Lp(e,n,r){let s=0,a,i;return o;function o(m){return e.enter("codeText"),e.enter("codeTextSequence"),l(m)}function l(m){return m===96?(e.consume(m),s++,l):(e.exit("codeTextSequence"),d(m))}function d(m){return m===null?r(m):m===32?(e.enter("space"),e.consume(m),e.exit("space"),d):m===96?(i=e.enter("codeTextSequence"),a=0,u(m)):ie(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("codeTextData"),c(m))}function c(m){return m===null||m===32||m===96||ie(m)?(e.exit("codeTextData"),d(m)):(e.consume(m),c)}function u(m){return m===96?(e.consume(m),a++,u):a===s?(e.exit("codeTextSequence"),e.exit("codeText"),n(m)):(i.type="codeTextData",c(m))}}class Op{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,r){const s=r??Number.POSITIVE_INFINITY;return s<this.left.length?this.left.slice(n,s):n>this.left.length?this.right.slice(this.right.length-s+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-s+this.left.length).reverse())}splice(n,r,s){const a=r||0;this.setCursor(Math.trunc(n));const i=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return s&&Dn(this.left,s),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),Dn(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),Dn(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const r=this.left.splice(n,Number.POSITIVE_INFINITY);Dn(this.right,r.reverse())}else{const r=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);Dn(this.left,r.reverse())}}}function Dn(e,n){let r=0;if(n.length<1e4)e.push(...n);else for(;r<n.length;)e.push(...n.slice(r,r+1e4)),r+=1e4}function kl(e){const n={};let r=-1,s,a,i,o,l,d,c;const u=new Op(e);for(;++r<u.length;){for(;r in n;)r=n[r];if(s=u.get(r),r&&s[1].type==="chunkFlow"&&u.get(r-1)[1].type==="listItemPrefix"&&(d=s[1]._tokenizer.events,i=0,i<d.length&&d[i][1].type==="lineEndingBlank"&&(i+=2),i<d.length&&d[i][1].type==="content"))for(;++i<d.length&&d[i][1].type!=="content";)d[i][1].type==="chunkText"&&(d[i][1]._isInFirstContentOfListItem=!0,i++);if(s[0]==="enter")s[1].contentType&&(Object.assign(n,Mp(u,r)),r=n[r],c=!0);else if(s[1]._container){for(i=r,a=void 0;i--;)if(o=u.get(i),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(u.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=i);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(s[1].end={...u.get(a)[1].start},l=u.slice(a,r),l.unshift(s),u.splice(a,r-a+1,l))}}return ot(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function Mp(e,n){const r=e.get(n)[1],s=e.get(n)[2];let a=n-1;const i=[];let o=r._tokenizer;o||(o=s.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,d=[],c={};let u,m,p=-1,h=r,x=0,g=0;const b=[g];for(;h;){for(;e.get(++a)[1]!==h;);i.push(a),h._tokenizer||(u=s.sliceStream(h),h.next||u.push(null),m&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=h,h=h.next}for(h=r;++p<l.length;)l[p][0]==="exit"&&l[p-1][0]==="enter"&&l[p][1].type===l[p-1][1].type&&l[p][1].start.line!==l[p][1].end.line&&(g=p+1,b.push(g),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):b.pop(),p=b.length;p--;){const N=l.slice(b[p],b[p+1]),j=i.pop();d.push([j,j+N.length-1]),e.splice(j,2,N)}for(d.reverse(),p=-1;++p<d.length;)c[x+d[p][0]]=x+d[p][1],x+=d[p][1]-d[p][0]-1;return c}const _p={resolve:$p,tokenize:Bp},zp={partial:!0,tokenize:Up};function $p(e){return kl(e),e}function Bp(e,n){let r;return s;function s(l){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?i(l):ie(l)?e.check(zp,o,i)(l):(e.consume(l),a)}function i(l){return e.exit("chunkContent"),e.exit("content"),n(l)}function o(l){return e.consume(l),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,a}}function Up(e,n,r){const s=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ye(e,i,"linePrefix")}function i(o){if(o===null||ie(o))return r(o);const l=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?n(o):e.interrupt(s.parser.constructs.flow,r,n)(o)}}function Sl(e,n,r,s,a,i,o,l,d){const c=d||Number.POSITIVE_INFINITY;let u=0;return m;function m(N){return N===60?(e.enter(s),e.enter(a),e.enter(i),e.consume(N),e.exit(i),p):N===null||N===32||N===41||Ar(N)?r(N):(e.enter(s),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),g(N))}function p(N){return N===62?(e.enter(i),e.consume(N),e.exit(i),e.exit(a),e.exit(s),n):(e.enter(l),e.enter("chunkString",{contentType:"string"}),h(N))}function h(N){return N===62?(e.exit("chunkString"),e.exit(l),p(N)):N===null||N===60||ie(N)?r(N):(e.consume(N),N===92?x:h)}function x(N){return N===60||N===62||N===92?(e.consume(N),h):h(N)}function g(N){return!u&&(N===null||N===41||ke(N))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(s),n(N)):u<c&&N===40?(e.consume(N),u++,g):N===41?(e.consume(N),u--,g):N===null||N===32||N===40||Ar(N)?r(N):(e.consume(N),N===92?b:g)}function b(N){return N===40||N===41||N===92?(e.consume(N),g):g(N)}}function Cl(e,n,r,s,a,i){const o=this;let l=0,d;return c;function c(h){return e.enter(s),e.enter(a),e.consume(h),e.exit(a),e.enter(i),u}function u(h){return l>999||h===null||h===91||h===93&&!d||h===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?r(h):h===93?(e.exit(i),e.enter(a),e.consume(h),e.exit(a),e.exit(s),n):ie(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),m(h))}function m(h){return h===null||h===91||h===93||ie(h)||l++>999?(e.exit("chunkString"),u(h)):(e.consume(h),d||(d=!ge(h)),h===92?p:m)}function p(h){return h===91||h===92||h===93?(e.consume(h),l++,m):m(h)}}function Al(e,n,r,s,a,i){let o;return l;function l(p){return p===34||p===39||p===40?(e.enter(s),e.enter(a),e.consume(p),e.exit(a),o=p===40?41:p,d):r(p)}function d(p){return p===o?(e.enter(a),e.consume(p),e.exit(a),e.exit(s),n):(e.enter(i),c(p))}function c(p){return p===o?(e.exit(i),d(o)):p===null?r(p):ie(p)?(e.enter("lineEnding"),e.consume(p),e.exit("lineEnding"),ye(e,c,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(p))}function u(p){return p===o||p===null||ie(p)?(e.exit("chunkString"),c(p)):(e.consume(p),p===92?m:u)}function m(p){return p===o||p===92?(e.consume(p),u):u(p)}}function zn(e,n){let r;return s;function s(a){return ie(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),r=!0,s):ge(a)?ye(e,s,r?"linePrefix":"lineSuffix")(a):n(a)}}const Vp={name:"definition",tokenize:qp},Hp={partial:!0,tokenize:Wp};function qp(e,n,r){const s=this;let a;return i;function i(h){return e.enter("definition"),o(h)}function o(h){return Cl.call(s,e,l,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function l(h){return a=yt(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),d):r(h)}function d(h){return ke(h)?zn(e,c)(h):c(h)}function c(h){return Sl(e,u,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function u(h){return e.attempt(Hp,m,m)(h)}function m(h){return ge(h)?ye(e,p,"whitespace")(h):p(h)}function p(h){return h===null||ie(h)?(e.exit("definition"),s.parser.defined.push(a),n(h)):r(h)}}function Wp(e,n,r){return s;function s(l){return ke(l)?zn(e,a)(l):r(l)}function a(l){return Al(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function i(l){return ge(l)?ye(e,o,"whitespace")(l):o(l)}function o(l){return l===null||ie(l)?n(l):r(l)}}const Gp={name:"hardBreakEscape",tokenize:Jp};function Jp(e,n,r){return s;function s(i){return e.enter("hardBreakEscape"),e.consume(i),a}function a(i){return ie(i)?(e.exit("hardBreakEscape"),n(i)):r(i)}}const Xp={name:"headingAtx",resolve:Yp,tokenize:Qp};function Yp(e,n){let r=e.length-2,s=3,a,i;return e[s][1].type==="whitespace"&&(s+=2),r-2>s&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(s===r-1||r-4>s&&e[r-2][1].type==="whitespace")&&(r-=s+1===r?2:4),r>s&&(a={type:"atxHeadingText",start:e[s][1].start,end:e[r][1].end},i={type:"chunkText",start:e[s][1].start,end:e[r][1].end,contentType:"text"},ot(e,s,r-s+1,[["enter",a,n],["enter",i,n],["exit",i,n],["exit",a,n]])),e}function Qp(e,n,r){let s=0;return a;function a(u){return e.enter("atxHeading"),i(u)}function i(u){return e.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&s++<6?(e.consume(u),o):u===null||ke(u)?(e.exit("atxHeadingSequence"),l(u)):r(u)}function l(u){return u===35?(e.enter("atxHeadingSequence"),d(u)):u===null||ie(u)?(e.exit("atxHeading"),n(u)):ge(u)?ye(e,l,"whitespace")(u):(e.enter("atxHeadingText"),c(u))}function d(u){return u===35?(e.consume(u),d):(e.exit("atxHeadingSequence"),l(u))}function c(u){return u===null||u===35||ke(u)?(e.exit("atxHeadingText"),l(u)):(e.consume(u),c)}}const Kp=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],pi=["pre","script","style","textarea"],Zp={concrete:!0,name:"htmlFlow",resolveTo:nf,tokenize:rf},ef={partial:!0,tokenize:af},tf={partial:!0,tokenize:sf};function nf(e){let n=e.length;for(;n--&&!(e[n][0]==="enter"&&e[n][1].type==="htmlFlow"););return n>1&&e[n-2][1].type==="linePrefix"&&(e[n][1].start=e[n-2][1].start,e[n+1][1].start=e[n-2][1].start,e.splice(n-2,2)),e}function rf(e,n,r){const s=this;let a,i,o,l,d;return c;function c(P){return u(P)}function u(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),m}function m(P){return P===33?(e.consume(P),p):P===47?(e.consume(P),i=!0,g):P===63?(e.consume(P),a=3,s.interrupt?n:D):Xe(P)?(e.consume(P),o=String.fromCharCode(P),b):r(P)}function p(P){return P===45?(e.consume(P),a=2,h):P===91?(e.consume(P),a=5,l=0,x):Xe(P)?(e.consume(P),a=4,s.interrupt?n:D):r(P)}function h(P){return P===45?(e.consume(P),s.interrupt?n:D):r(P)}function x(P){const xe="CDATA[";return P===xe.charCodeAt(l++)?(e.consume(P),l===xe.length?s.interrupt?n:T:x):r(P)}function g(P){return Xe(P)?(e.consume(P),o=String.fromCharCode(P),b):r(P)}function b(P){if(P===null||P===47||P===62||ke(P)){const xe=P===47,ve=o.toLowerCase();return!xe&&!i&&pi.includes(ve)?(a=1,s.interrupt?n(P):T(P)):Kp.includes(o.toLowerCase())?(a=6,xe?(e.consume(P),N):s.interrupt?n(P):T(P)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?r(P):i?j(P):v(P))}return P===45||We(P)?(e.consume(P),o+=String.fromCharCode(P),b):r(P)}function N(P){return P===62?(e.consume(P),s.interrupt?n:T):r(P)}function j(P){return ge(P)?(e.consume(P),j):w(P)}function v(P){return P===47?(e.consume(P),w):P===58||P===95||Xe(P)?(e.consume(P),E):ge(P)?(e.consume(P),v):w(P)}function E(P){return P===45||P===46||P===58||P===95||We(P)?(e.consume(P),E):k(P)}function k(P){return P===61?(e.consume(P),C):ge(P)?(e.consume(P),k):v(P)}function C(P){return P===null||P===60||P===61||P===62||P===96?r(P):P===34||P===39?(e.consume(P),d=P,S):ge(P)?(e.consume(P),C):y(P)}function S(P){return P===d?(e.consume(P),d=null,A):P===null||ie(P)?r(P):(e.consume(P),S)}function y(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||ke(P)?k(P):(e.consume(P),y)}function A(P){return P===47||P===62||ge(P)?v(P):r(P)}function w(P){return P===62?(e.consume(P),F):r(P)}function F(P){return P===null||ie(P)?T(P):ge(P)?(e.consume(P),F):r(P)}function T(P){return P===45&&a===2?(e.consume(P),$):P===60&&a===1?(e.consume(P),H):P===62&&a===4?(e.consume(P),B):P===63&&a===3?(e.consume(P),D):P===93&&a===5?(e.consume(P),le):ie(P)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(ef,oe,R)(P)):P===null||ie(P)?(e.exit("htmlFlowData"),R(P)):(e.consume(P),T)}function R(P){return e.check(tf,M,oe)(P)}function M(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),O}function O(P){return P===null||ie(P)?R(P):(e.enter("htmlFlowData"),T(P))}function $(P){return P===45?(e.consume(P),D):T(P)}function H(P){return P===47?(e.consume(P),o="",re):T(P)}function re(P){if(P===62){const xe=o.toLowerCase();return pi.includes(xe)?(e.consume(P),B):T(P)}return Xe(P)&&o.length<8?(e.consume(P),o+=String.fromCharCode(P),re):T(P)}function le(P){return P===93?(e.consume(P),D):T(P)}function D(P){return P===62?(e.consume(P),B):P===45&&a===2?(e.consume(P),D):T(P)}function B(P){return P===null||ie(P)?(e.exit("htmlFlowData"),oe(P)):(e.consume(P),B)}function oe(P){return e.exit("htmlFlow"),n(P)}}function sf(e,n,r){const s=this;return a;function a(o){return ie(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):r(o)}function i(o){return s.parser.lazy[s.now().line]?r(o):n(o)}}function af(e,n,r){return s;function s(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(er,n,r)}}const of={name:"htmlText",tokenize:lf};function lf(e,n,r){const s=this;let a,i,o;return l;function l(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),d}function d(D){return D===33?(e.consume(D),c):D===47?(e.consume(D),k):D===63?(e.consume(D),v):Xe(D)?(e.consume(D),y):r(D)}function c(D){return D===45?(e.consume(D),u):D===91?(e.consume(D),i=0,x):Xe(D)?(e.consume(D),j):r(D)}function u(D){return D===45?(e.consume(D),h):r(D)}function m(D){return D===null?r(D):D===45?(e.consume(D),p):ie(D)?(o=m,H(D)):(e.consume(D),m)}function p(D){return D===45?(e.consume(D),h):m(D)}function h(D){return D===62?$(D):D===45?p(D):m(D)}function x(D){const B="CDATA[";return D===B.charCodeAt(i++)?(e.consume(D),i===B.length?g:x):r(D)}function g(D){return D===null?r(D):D===93?(e.consume(D),b):ie(D)?(o=g,H(D)):(e.consume(D),g)}function b(D){return D===93?(e.consume(D),N):g(D)}function N(D){return D===62?$(D):D===93?(e.consume(D),N):g(D)}function j(D){return D===null||D===62?$(D):ie(D)?(o=j,H(D)):(e.consume(D),j)}function v(D){return D===null?r(D):D===63?(e.consume(D),E):ie(D)?(o=v,H(D)):(e.consume(D),v)}function E(D){return D===62?$(D):v(D)}function k(D){return Xe(D)?(e.consume(D),C):r(D)}function C(D){return D===45||We(D)?(e.consume(D),C):S(D)}function S(D){return ie(D)?(o=S,H(D)):ge(D)?(e.consume(D),S):$(D)}function y(D){return D===45||We(D)?(e.consume(D),y):D===47||D===62||ke(D)?A(D):r(D)}function A(D){return D===47?(e.consume(D),$):D===58||D===95||Xe(D)?(e.consume(D),w):ie(D)?(o=A,H(D)):ge(D)?(e.consume(D),A):$(D)}function w(D){return D===45||D===46||D===58||D===95||We(D)?(e.consume(D),w):F(D)}function F(D){return D===61?(e.consume(D),T):ie(D)?(o=F,H(D)):ge(D)?(e.consume(D),F):A(D)}function T(D){return D===null||D===60||D===61||D===62||D===96?r(D):D===34||D===39?(e.consume(D),a=D,R):ie(D)?(o=T,H(D)):ge(D)?(e.consume(D),T):(e.consume(D),M)}function R(D){return D===a?(e.consume(D),a=void 0,O):D===null?r(D):ie(D)?(o=R,H(D)):(e.consume(D),R)}function M(D){return D===null||D===34||D===39||D===60||D===61||D===96?r(D):D===47||D===62||ke(D)?A(D):(e.consume(D),M)}function O(D){return D===47||D===62||ke(D)?A(D):r(D)}function $(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),n):r(D)}function H(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),re}function re(D){return ge(D)?ye(e,le,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):le(D)}function le(D){return e.enter("htmlTextData"),o(D)}}const fa={name:"labelEnd",resolveAll:mf,resolveTo:hf,tokenize:pf},cf={tokenize:ff},df={tokenize:xf},uf={tokenize:gf};function mf(e){let n=-1;const r=[];for(;++n<e.length;){const s=e[n][1];if(r.push(e[n]),s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd"){const a=s.type==="labelImage"?4:2;s.type="data",n+=a}}return e.length!==r.length&&ot(e,0,e.length,r),e}function hf(e,n){let r=e.length,s=0,a,i,o,l;for(;r--;)if(a=e[r][1],i){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[r][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[r][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(i=r,a.type!=="labelLink")){s=2;break}}else a.type==="labelEnd"&&(o=r);const d={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[i][1].start},end:{...e[o][1].end}},u={type:"labelText",start:{...e[i+s+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",d,n],["enter",c,n]],l=mt(l,e.slice(i+1,i+s+3)),l=mt(l,[["enter",u,n]]),l=mt(l,qr(n.parser.constructs.insideSpan.null,e.slice(i+s+4,o-3),n)),l=mt(l,[["exit",u,n],e[o-2],e[o-1],["exit",c,n]]),l=mt(l,e.slice(o+1)),l=mt(l,[["exit",d,n]]),ot(e,i,e.length,l),e}function pf(e,n,r){const s=this;let a=s.events.length,i,o;for(;a--;)if((s.events[a][1].type==="labelImage"||s.events[a][1].type==="labelLink")&&!s.events[a][1]._balanced){i=s.events[a][1];break}return l;function l(p){return i?i._inactive?m(p):(o=s.parser.defined.includes(yt(s.sliceSerialize({start:i.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(p),e.exit("labelMarker"),e.exit("labelEnd"),d):r(p)}function d(p){return p===40?e.attempt(cf,u,o?u:m)(p):p===91?e.attempt(df,u,o?c:m)(p):o?u(p):m(p)}function c(p){return e.attempt(uf,u,m)(p)}function u(p){return n(p)}function m(p){return i._balanced=!0,r(p)}}function ff(e,n,r){return s;function s(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),a}function a(m){return ke(m)?zn(e,i)(m):i(m)}function i(m){return m===41?u(m):Sl(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return ke(m)?zn(e,d)(m):u(m)}function l(m){return r(m)}function d(m){return m===34||m===39||m===40?Al(e,c,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):u(m)}function c(m){return ke(m)?zn(e,u)(m):u(m)}function u(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),n):r(m)}}function xf(e,n,r){const s=this;return a;function a(l){return Cl.call(s,e,i,o,"reference","referenceMarker","referenceString")(l)}function i(l){return s.parser.defined.includes(yt(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?n(l):r(l)}function o(l){return r(l)}}function gf(e,n,r){return s;function s(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),a}function a(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),n):r(i)}}const yf={name:"labelStartImage",resolveAll:fa.resolveAll,tokenize:bf};function bf(e,n,r){const s=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),i}function i(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):r(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(l):n(l)}}const jf={name:"labelStartLink",resolveAll:fa.resolveAll,tokenize:wf};function wf(e,n,r){const s=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),i}function i(o){return o===94&&"_hiddenFootnoteSupport"in s.parser.constructs?r(o):n(o)}}const as={name:"lineEnding",tokenize:vf};function vf(e,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),ye(e,n,"linePrefix")}}const wr={name:"thematicBreak",tokenize:Nf};function Nf(e,n,r){let s=0,a;return i;function i(c){return e.enter("thematicBreak"),o(c)}function o(c){return a=c,l(c)}function l(c){return c===a?(e.enter("thematicBreakSequence"),d(c)):s>=3&&(c===null||ie(c))?(e.exit("thematicBreak"),n(c)):r(c)}function d(c){return c===a?(e.consume(c),s++,d):(e.exit("thematicBreakSequence"),ge(c)?ye(e,l,"whitespace")(c):l(c))}}const Ze={continuation:{tokenize:Af},exit:Tf,name:"list",tokenize:Cf},kf={partial:!0,tokenize:Pf},Sf={partial:!0,tokenize:Ef};function Cf(e,n,r){const s=this,a=s.events[s.events.length-1];let i=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(h){const x=s.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!s.containerState.marker||h===s.containerState.marker:Hs(h)){if(s.containerState.type||(s.containerState.type=x,e.enter(x,{_container:!0})),x==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(wr,r,c)(h):c(h);if(!s.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),d(h)}return r(h)}function d(h){return Hs(h)&&++o<10?(e.consume(h),d):(!s.interrupt||o<2)&&(s.containerState.marker?h===s.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),c(h)):r(h)}function c(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||h,e.check(er,s.interrupt?r:u,e.attempt(kf,p,m))}function u(h){return s.containerState.initialBlankLine=!0,i++,p(h)}function m(h){return ge(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),p):r(h)}function p(h){return s.containerState.size=i+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,n(h)}}function Af(e,n,r){const s=this;return s.containerState._closeFlow=void 0,e.check(er,a,i);function a(l){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,ye(e,n,"listItemIndent",s.containerState.size+1)(l)}function i(l){return s.containerState.furtherBlankLines||!ge(l)?(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,o(l)):(s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(Sf,n,o)(l))}function o(l){return s.containerState._closeFlow=!0,s.interrupt=void 0,ye(e,e.attempt(Ze,n,r),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function Ef(e,n,r){const s=this;return ye(e,a,"listItemIndent",s.containerState.size+1);function a(i){const o=s.events[s.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===s.containerState.size?n(i):r(i)}}function Tf(e){e.exit(this.containerState.type)}function Pf(e,n,r){const s=this;return ye(e,a,"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(i){const o=s.events[s.events.length-1];return!ge(i)&&o&&o[1].type==="listItemPrefixWhitespace"?n(i):r(i)}}const fi={name:"setextUnderline",resolveTo:Df,tokenize:If};function Df(e,n){let r=e.length,s,a,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){s=r;break}e[r][1].type==="paragraph"&&(a=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);const o={type:"setextHeading",start:{...e[s][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",i?(e.splice(a,0,["enter",o,n]),e.splice(i+1,0,["exit",e[s][1],n]),e[s][1].end={...e[i][1].end}):e[s][1]=o,e.push(["exit",o,n]),e}function If(e,n,r){const s=this;let a;return i;function i(c){let u=s.events.length,m;for(;u--;)if(s.events[u][1].type!=="lineEnding"&&s.events[u][1].type!=="linePrefix"&&s.events[u][1].type!=="content"){m=s.events[u][1].type==="paragraph";break}return!s.parser.lazy[s.now().line]&&(s.interrupt||m)?(e.enter("setextHeadingLine"),a=c,o(c)):r(c)}function o(c){return e.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===a?(e.consume(c),l):(e.exit("setextHeadingLineSequence"),ge(c)?ye(e,d,"lineSuffix")(c):d(c))}function d(c){return c===null||ie(c)?(e.exit("setextHeadingLine"),n(c)):r(c)}}const Rf={tokenize:Ff};function Ff(e){const n=this,r=e.attempt(er,s,e.attempt(this.parser.constructs.flowInitial,a,ye(e,e.attempt(this.parser.constructs.flow,a,e.attempt(_p,a)),"linePrefix")));return r;function s(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),n.currentConstruct=void 0,r}function a(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n.currentConstruct=void 0,r}}const Lf={resolveAll:Tl()},Of=El("string"),Mf=El("text");function El(e){return{resolveAll:Tl(e==="text"?_f:void 0),tokenize:n};function n(r){const s=this,a=this.parser.constructs[e],i=r.attempt(a,o,l);return o;function o(u){return c(u)?i(u):l(u)}function l(u){if(u===null){r.consume(u);return}return r.enter("data"),r.consume(u),d}function d(u){return c(u)?(r.exit("data"),i(u)):(r.consume(u),d)}function c(u){if(u===null)return!0;const m=a[u];let p=-1;if(m)for(;++p<m.length;){const h=m[p];if(!h.previous||h.previous.call(s,s.previous))return!0}return!1}}}function Tl(e){return n;function n(r,s){let a=-1,i;for(;++a<=r.length;)i===void 0?r[a]&&r[a][1].type==="data"&&(i=a,a++):(!r[a]||r[a][1].type!=="data")&&(a!==i+2&&(r[i][1].end=r[a-1][1].end,r.splice(i+2,a-i-2),a=i+2),i=void 0);return e?e(r,s):r}}function _f(e,n){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){const s=e[r-1][1],a=n.sliceStream(s);let i=a.length,o=-1,l=0,d;for(;i--;){const c=a[i];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(c===-2)d=!0,l++;else if(c!==-1){i++;break}}if(n._contentTypeTextTrailing&&r===e.length&&(l=0),l){const c={type:r===e.length||d||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:s.start._bufferIndex+o,_index:s.start._index+i,line:s.end.line,column:s.end.column-l,offset:s.end.offset-l},end:{...s.end}};s.end={...c.start},s.start.offset===s.end.offset?Object.assign(s,c):(e.splice(r,0,["enter",c,n],["exit",c,n]),r+=2)}r++}return e}const zf={42:Ze,43:Ze,45:Ze,48:Ze,49:Ze,50:Ze,51:Ze,52:Ze,53:Ze,54:Ze,55:Ze,56:Ze,57:Ze,62:wl},$f={91:Vp},Bf={[-2]:ss,[-1]:ss,32:ss},Uf={35:Xp,42:wr,45:[fi,wr],60:Zp,61:fi,95:wr,96:hi,126:hi},Vf={38:Nl,92:vl},Hf={[-5]:as,[-4]:as,[-3]:as,33:yf,38:Nl,42:qs,60:[bp,of],91:jf,92:[Gp,vl],93:fa,95:qs,96:Ip},qf={null:[qs,Lf]},Wf={null:[42,95]},Gf={null:[]},Jf=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Wf,contentInitial:$f,disable:Gf,document:zf,flow:Uf,flowInitial:Bf,insideSpan:qf,string:Vf,text:Hf},Symbol.toStringTag,{value:"Module"}));function Xf(e,n,r){let s={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0};const a={},i=[];let o=[],l=[];const d={attempt:S(k),check:S(C),consume:j,enter:v,exit:E,interrupt:S(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:x,parser:e,previous:null,sliceSerialize:p,sliceStream:h,write:m};let u=n.tokenize.call(c,d);return n.resolveAll&&i.push(n),c;function m(F){return o=mt(o,F),b(),o[o.length-1]!==null?[]:(y(n,0),c.events=qr(i,c.events,c),c.events)}function p(F,T){return Qf(h(F),T)}function h(F){return Yf(o,F)}function x(){const{_bufferIndex:F,_index:T,line:R,column:M,offset:O}=s;return{_bufferIndex:F,_index:T,line:R,column:M,offset:O}}function g(F){a[F.line]=F.column,w()}function b(){let F;for(;s._index<o.length;){const T=o[s._index];if(typeof T=="string")for(F=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===F&&s._bufferIndex<T.length;)N(T.charCodeAt(s._bufferIndex));else N(T)}}function N(F){u=u(F)}function j(F){ie(F)?(s.line++,s.column=1,s.offset+=F===-3?2:1,w()):F!==-1&&(s.column++,s.offset++),s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===o[s._index].length&&(s._bufferIndex=-1,s._index++)),c.previous=F}function v(F,T){const R=T||{};return R.type=F,R.start=x(),c.events.push(["enter",R,c]),l.push(R),R}function E(F){const T=l.pop();return T.end=x(),c.events.push(["exit",T,c]),T}function k(F,T){y(F,T.from)}function C(F,T){T.restore()}function S(F,T){return R;function R(M,O,$){let H,re,le,D;return Array.isArray(M)?oe(M):"tokenize"in M?oe([M]):B(M);function B(ne){return ce;function ce(Fe){const st=Fe!==null&&ne[Fe],ct=Fe!==null&&ne.null,ft=[...Array.isArray(st)?st:st?[st]:[],...Array.isArray(ct)?ct:ct?[ct]:[]];return oe(ft)(Fe)}}function oe(ne){return H=ne,re=0,ne.length===0?$:P(ne[re])}function P(ne){return ce;function ce(Fe){return D=A(),le=ne,ne.partial||(c.currentConstruct=ne),ne.name&&c.parser.constructs.disable.null.includes(ne.name)?ve():ne.tokenize.call(T?Object.assign(Object.create(c),T):c,d,xe,ve)(Fe)}}function xe(ne){return F(le,D),O}function ve(ne){return D.restore(),++re<H.length?P(H[re]):$}}}function y(F,T){F.resolveAll&&!i.includes(F)&&i.push(F),F.resolve&&ot(c.events,T,c.events.length-T,F.resolve(c.events.slice(T),c)),F.resolveTo&&(c.events=F.resolveTo(c.events,c))}function A(){const F=x(),T=c.previous,R=c.currentConstruct,M=c.events.length,O=Array.from(l);return{from:M,restore:$};function $(){s=F,c.previous=T,c.currentConstruct=R,c.events.length=M,l=O,w()}}function w(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function Yf(e,n){const r=n.start._index,s=n.start._bufferIndex,a=n.end._index,i=n.end._bufferIndex;let o;if(r===a)o=[e[r].slice(s,i)];else{if(o=e.slice(r,a),s>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(s):o.shift()}i>0&&o.push(e[a].slice(0,i))}return o}function Qf(e,n){let r=-1;const s=[];let a;for(;++r<e.length;){const i=e[r];let o;if(typeof i=="string")o=i;else switch(i){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=n?" ":"	";break}case-1:{if(!n&&a)continue;o=" ";break}default:o=String.fromCharCode(i)}a=i===-2,s.push(o)}return s.join("")}function Kf(e){const s={constructs:bl([Jf,...(e||{}).extensions||[]]),content:a(mp),defined:[],document:a(pp),flow:a(Rf),lazy:{},string:a(Of),text:a(Mf)};return s;function a(i){return o;function o(l){return Xf(s,i,l)}}}function Zf(e){for(;!kl(e););return e}const xi=/[\0\t\n\r]/g;function ex(){let e=1,n="",r=!0,s;return a;function a(i,o,l){const d=[];let c,u,m,p,h;for(i=n+(typeof i=="string"?i.toString():new TextDecoder(o||void 0).decode(i)),m=0,n="",r&&(i.charCodeAt(0)===65279&&m++,r=void 0);m<i.length;){if(xi.lastIndex=m,c=xi.exec(i),p=c&&c.index!==void 0?c.index:i.length,h=i.charCodeAt(p),!c){n=i.slice(m);break}if(h===10&&m===p&&s)d.push(-3),s=void 0;else switch(s&&(d.push(-5),s=void 0),m<p&&(d.push(i.slice(m,p)),e+=p-m),h){case 0:{d.push(65533),e++;break}case 9:{for(u=Math.ceil(e/4)*4,d.push(-2);e++<u;)d.push(-1);break}case 10:{d.push(-4),e=1;break}default:s=!0,e=1}m=p+1}return l&&(s&&d.push(-5),n&&d.push(n),d.push(null)),d}}const tx=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function nx(e){return e.replace(tx,rx)}function rx(e,n,r){if(n)return n;if(r.charCodeAt(0)===35){const a=r.charCodeAt(1),i=a===120||a===88;return jl(r.slice(i?2:1),i?16:10)}return pa(r)||e}const Pl={}.hasOwnProperty;function sx(e,n,r){return typeof n!="string"&&(r=n,n=void 0),ax(r)(Zf(Kf(r).document().write(ex()(e,n,!0))))}function ax(e){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Et),autolinkProtocol:A,autolinkEmail:A,atxHeading:i(jt),blockQuote:i(ct),characterEscape:A,characterReference:A,codeFenced:i(ft),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:i(ft,o),codeText:i(Ft,o),codeTextData:A,data:A,codeFlowValue:A,definition:i(dt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:i(ut),hardBreakEscape:i(Me),hardBreakTrailing:i(Me),htmlFlow:i(At,o),htmlFlowData:A,htmlText:i(At,o),htmlTextData:A,image:i(Wt),label:o,link:i(Et),listItem:i(be),listItemValue:p,listOrdered:i(X,m),listUnordered:i(X),paragraph:i(Ie),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:i(jt),strong:i(_),thematicBreak:i(me)},exit:{atxHeading:d(),atxHeadingSequence:k,autolink:d(),autolinkEmail:st,autolinkProtocol:Fe,blockQuote:d(),characterEscapeValue:w,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:ne,characterReference:ce,codeFenced:d(b),codeFencedFence:g,codeFencedFenceInfo:h,codeFencedFenceMeta:x,codeFlowValue:w,codeIndented:d(N),codeText:d(O),codeTextData:w,data:w,definition:d(),definitionDestinationString:E,definitionLabelString:j,definitionTitleString:v,emphasis:d(),hardBreakEscape:d(T),hardBreakTrailing:d(T),htmlFlow:d(R),htmlFlowData:w,htmlText:d(M),htmlTextData:w,image:d(H),label:le,labelText:re,lineEnding:F,link:d($),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:xe,resourceDestinationString:D,resourceTitleString:B,resource:oe,setextHeading:d(y),setextHeadingLineSequence:S,setextHeadingText:C,strong:d(),thematicBreak:d()}};Dl(n,(e||{}).mdastExtensions||[]);const r={};return s;function s(L){let U={type:"root",children:[]};const K={stack:[U],tokenStack:[],config:n,enter:l,exit:c,buffer:o,resume:u,data:r},q=[];let te=-1;for(;++te<L.length;)if(L[te][1].type==="listOrdered"||L[te][1].type==="listUnordered")if(L[te][0]==="enter")q.push(te);else{const ue=q.pop();te=a(L,ue,te)}for(te=-1;++te<L.length;){const ue=n[L[te][0]];Pl.call(ue,L[te][1].type)&&ue[L[te][1].type].call(Object.assign({sliceSerialize:L[te][2].sliceSerialize},K),L[te][1])}if(K.tokenStack.length>0){const ue=K.tokenStack[K.tokenStack.length-1];(ue[1]||gi).call(K,void 0,ue[0])}for(U.position={start:Lt(L.length>0?L[0][1].start:{line:1,column:1,offset:0}),end:Lt(L.length>0?L[L.length-2][1].end:{line:1,column:1,offset:0})},te=-1;++te<n.transforms.length;)U=n.transforms[te](U)||U;return U}function a(L,U,K){let q=U-1,te=-1,ue=!1,$e,Se,_e,se;for(;++q<=K;){const Z=L[q];switch(Z[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Z[0]==="enter"?te++:te--,se=void 0;break}case"lineEndingBlank":{Z[0]==="enter"&&($e&&!se&&!te&&!_e&&(_e=q),se=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:se=void 0}if(!te&&Z[0]==="enter"&&Z[1].type==="listItemPrefix"||te===-1&&Z[0]==="exit"&&(Z[1].type==="listUnordered"||Z[1].type==="listOrdered")){if($e){let G=q;for(Se=void 0;G--;){const Y=L[G];if(Y[1].type==="lineEnding"||Y[1].type==="lineEndingBlank"){if(Y[0]==="exit")continue;Se&&(L[Se][1].type="lineEndingBlank",ue=!0),Y[1].type="lineEnding",Se=G}else if(!(Y[1].type==="linePrefix"||Y[1].type==="blockQuotePrefix"||Y[1].type==="blockQuotePrefixWhitespace"||Y[1].type==="blockQuoteMarker"||Y[1].type==="listItemIndent"))break}_e&&(!Se||_e<Se)&&($e._spread=!0),$e.end=Object.assign({},Se?L[Se][1].start:Z[1].end),L.splice(Se||q,0,["exit",$e,Z[2]]),q++,K++}if(Z[1].type==="listItemPrefix"){const G={type:"listItem",_spread:!1,start:Object.assign({},Z[1].start),end:void 0};$e=G,L.splice(q,0,["enter",G,Z[2]]),q++,K++,_e=void 0,se=!0}}}return L[U][1]._spread=ue,K}function i(L,U){return K;function K(q){l.call(this,L(q),q),U&&U.call(this,q)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(L,U,K){this.stack[this.stack.length-1].children.push(L),this.stack.push(L),this.tokenStack.push([U,K||void 0]),L.position={start:Lt(U.start),end:void 0}}function d(L){return U;function U(K){L&&L.call(this,K),c.call(this,K)}}function c(L,U){const K=this.stack.pop(),q=this.tokenStack.pop();if(q)q[0].type!==L.type&&(U?U.call(this,L,q[0]):(q[1]||gi).call(this,L,q[0]));else throw new Error("Cannot close `"+L.type+"` ("+_n({start:L.start,end:L.end})+"): it’s not open");K.position.end=Lt(L.end)}function u(){return ha(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function p(L){if(this.data.expectingFirstListItemValue){const U=this.stack[this.stack.length-2];U.start=Number.parseInt(this.sliceSerialize(L),10),this.data.expectingFirstListItemValue=void 0}}function h(){const L=this.resume(),U=this.stack[this.stack.length-1];U.lang=L}function x(){const L=this.resume(),U=this.stack[this.stack.length-1];U.meta=L}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function b(){const L=this.resume(),U=this.stack[this.stack.length-1];U.value=L.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function N(){const L=this.resume(),U=this.stack[this.stack.length-1];U.value=L.replace(/(\r?\n|\r)$/g,"")}function j(L){const U=this.resume(),K=this.stack[this.stack.length-1];K.label=U,K.identifier=yt(this.sliceSerialize(L)).toLowerCase()}function v(){const L=this.resume(),U=this.stack[this.stack.length-1];U.title=L}function E(){const L=this.resume(),U=this.stack[this.stack.length-1];U.url=L}function k(L){const U=this.stack[this.stack.length-1];if(!U.depth){const K=this.sliceSerialize(L).length;U.depth=K}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function S(L){const U=this.stack[this.stack.length-1];U.depth=this.sliceSerialize(L).codePointAt(0)===61?1:2}function y(){this.data.setextHeadingSlurpLineEnding=void 0}function A(L){const K=this.stack[this.stack.length-1].children;let q=K[K.length-1];(!q||q.type!=="text")&&(q=Q(),q.position={start:Lt(L.start),end:void 0},K.push(q)),this.stack.push(q)}function w(L){const U=this.stack.pop();U.value+=this.sliceSerialize(L),U.position.end=Lt(L.end)}function F(L){const U=this.stack[this.stack.length-1];if(this.data.atHardBreak){const K=U.children[U.children.length-1];K.position.end=Lt(L.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(U.type)&&(A.call(this,L),w.call(this,L))}function T(){this.data.atHardBreak=!0}function R(){const L=this.resume(),U=this.stack[this.stack.length-1];U.value=L}function M(){const L=this.resume(),U=this.stack[this.stack.length-1];U.value=L}function O(){const L=this.resume(),U=this.stack[this.stack.length-1];U.value=L}function $(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=U,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function H(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const U=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=U,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function re(L){const U=this.sliceSerialize(L),K=this.stack[this.stack.length-2];K.label=nx(U),K.identifier=yt(U).toLowerCase()}function le(){const L=this.stack[this.stack.length-1],U=this.resume(),K=this.stack[this.stack.length-1];if(this.data.inReference=!0,K.type==="link"){const q=L.children;K.children=q}else K.alt=U}function D(){const L=this.resume(),U=this.stack[this.stack.length-1];U.url=L}function B(){const L=this.resume(),U=this.stack[this.stack.length-1];U.title=L}function oe(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function xe(L){const U=this.resume(),K=this.stack[this.stack.length-1];K.label=U,K.identifier=yt(this.sliceSerialize(L)).toLowerCase(),this.data.referenceType="full"}function ve(L){this.data.characterReferenceType=L.type}function ne(L){const U=this.sliceSerialize(L),K=this.data.characterReferenceType;let q;K?(q=jl(U,K==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):q=pa(U);const te=this.stack[this.stack.length-1];te.value+=q}function ce(L){const U=this.stack.pop();U.position.end=Lt(L.end)}function Fe(L){w.call(this,L);const U=this.stack[this.stack.length-1];U.url=this.sliceSerialize(L)}function st(L){w.call(this,L);const U=this.stack[this.stack.length-1];U.url="mailto:"+this.sliceSerialize(L)}function ct(){return{type:"blockquote",children:[]}}function ft(){return{type:"code",lang:null,meta:null,value:""}}function Ft(){return{type:"inlineCode",value:""}}function dt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ut(){return{type:"emphasis",children:[]}}function jt(){return{type:"heading",depth:0,children:[]}}function Me(){return{type:"break"}}function At(){return{type:"html",value:""}}function Wt(){return{type:"image",title:null,url:"",alt:null}}function Et(){return{type:"link",title:null,url:"",children:[]}}function X(L){return{type:"list",ordered:L.type==="listOrdered",start:null,spread:L._spread,children:[]}}function be(L){return{type:"listItem",spread:L._spread,checked:null,children:[]}}function Ie(){return{type:"paragraph",children:[]}}function _(){return{type:"strong",children:[]}}function Q(){return{type:"text",value:""}}function me(){return{type:"thematicBreak"}}}function Lt(e){return{line:e.line,column:e.column,offset:e.offset}}function Dl(e,n){let r=-1;for(;++r<n.length;){const s=n[r];Array.isArray(s)?Dl(e,s):ix(e,s)}}function ix(e,n){let r;for(r in n)if(Pl.call(n,r))switch(r){case"canContainEols":{const s=n[r];s&&e[r].push(...s);break}case"transforms":{const s=n[r];s&&e[r].push(...s);break}case"enter":case"exit":{const s=n[r];s&&Object.assign(e[r],s);break}}}function gi(e,n){throw e?new Error("Cannot close `"+e.type+"` ("+_n({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+_n({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+_n({start:n.start,end:n.end})+") is still open")}function ox(e){const n=this;n.parser=r;function r(s){return sx(s,{...n.data("settings"),...e,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function lx(e,n){const r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(n),!0)};return e.patch(n,r),e.applyData(n,r)}function cx(e,n){const r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(n,r),[e.applyData(n,r),{type:"text",value:`
`}]}function dx(e,n){const r=n.value?n.value+`
`:"",s={};n.lang&&(s.className=["language-"+n.lang]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:r}]};return n.meta&&(a.data={meta:n.meta}),e.patch(n,a),a=e.applyData(n,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(n,a),a}function ux(e,n){const r={type:"element",tagName:"del",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function mx(e,n){const r={type:"element",tagName:"em",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function hx(e,n){const r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",s=String(n.identifier).toUpperCase(),a=kn(s.toLowerCase()),i=e.footnoteOrder.indexOf(s);let o,l=e.footnoteCounts.get(s);l===void 0?(l=0,e.footnoteOrder.push(s),o=e.footnoteOrder.length):o=i+1,l+=1,e.footnoteCounts.set(s,l);const d={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+a,id:r+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(n,d);const c={type:"element",tagName:"sup",properties:{},children:[d]};return e.patch(n,c),e.applyData(n,c)}function px(e,n){const r={type:"element",tagName:"h"+n.depth,properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function fx(e,n){if(e.options.allowDangerousHtml){const r={type:"raw",value:n.value};return e.patch(n,r),e.applyData(n,r)}}function Il(e,n){const r=n.referenceType;let s="]";if(r==="collapsed"?s+="[]":r==="full"&&(s+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+s}];const a=e.all(n),i=a[0];i&&i.type==="text"?i.value="["+i.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=s:a.push({type:"text",value:s}),a}function xx(e,n){const r=String(n.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return Il(e,n);const a={src:kn(s.url||""),alt:n.alt};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"img",properties:a,children:[]};return e.patch(n,i),e.applyData(n,i)}function gx(e,n){const r={src:kn(n.url)};n.alt!==null&&n.alt!==void 0&&(r.alt=n.alt),n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"img",properties:r,children:[]};return e.patch(n,s),e.applyData(n,s)}function yx(e,n){const r={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};e.patch(n,r);const s={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(n,s),e.applyData(n,s)}function bx(e,n){const r=String(n.identifier).toUpperCase(),s=e.definitionById.get(r);if(!s)return Il(e,n);const a={href:kn(s.url||"")};s.title!==null&&s.title!==void 0&&(a.title=s.title);const i={type:"element",tagName:"a",properties:a,children:e.all(n)};return e.patch(n,i),e.applyData(n,i)}function jx(e,n){const r={href:kn(n.url)};n.title!==null&&n.title!==void 0&&(r.title=n.title);const s={type:"element",tagName:"a",properties:r,children:e.all(n)};return e.patch(n,s),e.applyData(n,s)}function wx(e,n,r){const s=e.all(n),a=r?vx(r):Rl(n),i={},o=[];if(typeof n.checked=="boolean"){const u=s[0];let m;u&&u.type==="element"&&u.tagName==="p"?m=u:(m={type:"element",tagName:"p",properties:{},children:[]},s.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let l=-1;for(;++l<s.length;){const u=s[l];(a||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!a?o.push(...u.children):o.push(u)}const d=s[s.length-1];d&&(a||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:o};return e.patch(n,c),e.applyData(n,c)}function vx(e){let n=!1;if(e.type==="list"){n=e.spread||!1;const r=e.children;let s=-1;for(;!n&&++s<r.length;)n=Rl(r[s])}return n}function Rl(e){const n=e.spread;return n??e.children.length>1}function Nx(e,n){const r={},s=e.all(n);let a=-1;for(typeof n.start=="number"&&n.start!==1&&(r.start=n.start);++a<s.length;){const o=s[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}const i={type:"element",tagName:n.ordered?"ol":"ul",properties:r,children:e.wrap(s,!0)};return e.patch(n,i),e.applyData(n,i)}function kx(e,n){const r={type:"element",tagName:"p",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Sx(e,n){const r={type:"root",children:e.wrap(e.all(n))};return e.patch(n,r),e.applyData(n,r)}function Cx(e,n){const r={type:"element",tagName:"strong",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}function Ax(e,n){const r=e.all(n),s=r.shift(),a=[];if(s){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(n.children[0],o),a.push(o)}if(r.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},l=ca(n.children[1]),d=ml(n.children[n.children.length-1]);l&&d&&(o.position={start:l,end:d}),a.push(o)}const i={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(n,i),e.applyData(n,i)}function Ex(e,n,r){const s=r?r.children:void 0,i=(s?s.indexOf(n):1)===0?"th":"td",o=r&&r.type==="table"?r.align:void 0,l=o?o.length:n.children.length;let d=-1;const c=[];for(;++d<l;){const m=n.children[d],p={},h=o?o[d]:void 0;h&&(p.align=h);let x={type:"element",tagName:i,properties:p,children:[]};m&&(x.children=e.all(m),e.patch(m,x),x=e.applyData(m,x)),c.push(x)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(c,!0)};return e.patch(n,u),e.applyData(n,u)}function Tx(e,n){const r={type:"element",tagName:"td",properties:{},children:e.all(n)};return e.patch(n,r),e.applyData(n,r)}const yi=9,bi=32;function Px(e){const n=String(e),r=/\r?\n|\r/g;let s=r.exec(n),a=0;const i=[];for(;s;)i.push(ji(n.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=r.exec(n);return i.push(ji(n.slice(a),a>0,!1)),i.join("")}function ji(e,n,r){let s=0,a=e.length;if(n){let i=e.codePointAt(s);for(;i===yi||i===bi;)s++,i=e.codePointAt(s)}if(r){let i=e.codePointAt(a-1);for(;i===yi||i===bi;)a--,i=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}function Dx(e,n){const r={type:"text",value:Px(String(n.value))};return e.patch(n,r),e.applyData(n,r)}function Ix(e,n){const r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(n,r),e.applyData(n,r)}const Rx={blockquote:lx,break:cx,code:dx,delete:ux,emphasis:mx,footnoteReference:hx,heading:px,html:fx,imageReference:xx,image:gx,inlineCode:yx,linkReference:bx,link:jx,listItem:wx,list:Nx,paragraph:kx,root:Sx,strong:Cx,table:Ax,tableCell:Tx,tableRow:Ex,text:Dx,thematicBreak:Ix,toml:cr,yaml:cr,definition:cr,footnoteDefinition:cr};function cr(){}const Fl=-1,Wr=0,$n=1,Er=2,xa=3,ga=4,ya=5,ba=6,Ll=7,Ol=8,wi=typeof self=="object"?self:globalThis,Fx=(e,n)=>{const r=(a,i)=>(e.set(i,a),a),s=a=>{if(e.has(a))return e.get(a);const[i,o]=n[a];switch(i){case Wr:case Fl:return r(o,a);case $n:{const l=r([],a);for(const d of o)l.push(s(d));return l}case Er:{const l=r({},a);for(const[d,c]of o)l[s(d)]=s(c);return l}case xa:return r(new Date(o),a);case ga:{const{source:l,flags:d}=o;return r(new RegExp(l,d),a)}case ya:{const l=r(new Map,a);for(const[d,c]of o)l.set(s(d),s(c));return l}case ba:{const l=r(new Set,a);for(const d of o)l.add(s(d));return l}case Ll:{const{name:l,message:d}=o;return r(new wi[l](d),a)}case Ol:return r(BigInt(o),a);case"BigInt":return r(Object(BigInt(o)),a);case"ArrayBuffer":return r(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return r(new DataView(l),o)}}return r(new wi[i](o),a)};return s},vi=e=>Fx(new Map,e)(0),rn="",{toString:Lx}={},{keys:Ox}=Object,In=e=>{const n=typeof e;if(n!=="object"||!e)return[Wr,n];const r=Lx.call(e).slice(8,-1);switch(r){case"Array":return[$n,rn];case"Object":return[Er,rn];case"Date":return[xa,rn];case"RegExp":return[ga,rn];case"Map":return[ya,rn];case"Set":return[ba,rn];case"DataView":return[$n,r]}return r.includes("Array")?[$n,r]:r.includes("Error")?[Ll,r]:[Er,r]},dr=([e,n])=>e===Wr&&(n==="function"||n==="symbol"),Mx=(e,n,r,s)=>{const a=(o,l)=>{const d=s.push(o)-1;return r.set(l,d),d},i=o=>{if(r.has(o))return r.get(o);let[l,d]=In(o);switch(l){case Wr:{let u=o;switch(d){case"bigint":l=Ol,u=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+d);u=null;break;case"undefined":return a([Fl],o)}return a([l,u],o)}case $n:{if(d){let p=o;return d==="DataView"?p=new Uint8Array(o.buffer):d==="ArrayBuffer"&&(p=new Uint8Array(o)),a([d,[...p]],o)}const u=[],m=a([l,u],o);for(const p of o)u.push(i(p));return m}case Er:{if(d)switch(d){case"BigInt":return a([d,o.toString()],o);case"Boolean":case"Number":case"String":return a([d,o.valueOf()],o)}if(n&&"toJSON"in o)return i(o.toJSON());const u=[],m=a([l,u],o);for(const p of Ox(o))(e||!dr(In(o[p])))&&u.push([i(p),i(o[p])]);return m}case xa:return a([l,o.toISOString()],o);case ga:{const{source:u,flags:m}=o;return a([l,{source:u,flags:m}],o)}case ya:{const u=[],m=a([l,u],o);for(const[p,h]of o)(e||!(dr(In(p))||dr(In(h))))&&u.push([i(p),i(h)]);return m}case ba:{const u=[],m=a([l,u],o);for(const p of o)(e||!dr(In(p)))&&u.push(i(p));return m}}const{message:c}=o;return a([l,{name:d,message:c}],o)};return i},Ni=(e,{json:n,lossy:r}={})=>{const s=[];return Mx(!(n||r),!!n,new Map,s)(e),s},Tr=typeof structuredClone=="function"?(e,n)=>n&&("json"in n||"lossy"in n)?vi(Ni(e,n)):structuredClone(e):(e,n)=>vi(Ni(e,n));function _x(e,n){const r=[{type:"text",value:"↩"}];return n>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),r}function zx(e,n){return"Back to reference "+(e+1)+(n>1?"-"+n:"")}function $x(e){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||_x,s=e.options.footnoteBackLabel||zx,a=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let d=-1;for(;++d<e.footnoteOrder.length;){const c=e.footnoteById.get(e.footnoteOrder[d]);if(!c)continue;const u=e.all(c),m=String(c.identifier).toUpperCase(),p=kn(m.toLowerCase());let h=0;const x=[],g=e.footnoteCounts.get(m);for(;g!==void 0&&++h<=g;){x.length>0&&x.push({type:"text",value:" "});let j=typeof r=="string"?r:r(d,h);typeof j=="string"&&(j={type:"text",value:j}),x.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+p+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof s=="string"?s:s(d,h),className:["data-footnote-backref"]},children:Array.isArray(j)?j:[j]})}const b=u[u.length-1];if(b&&b.type==="element"&&b.tagName==="p"){const j=b.children[b.children.length-1];j&&j.type==="text"?j.value+=" ":b.children.push({type:"text",value:" "}),b.children.push(...x)}else u.push(...x);const N={type:"element",tagName:"li",properties:{id:n+"fn-"+p},children:e.wrap(u,!0)};e.patch(c,N),l.push(N)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Tr(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Gr=function(e){if(e==null)return Hx;if(typeof e=="function")return Jr(e);if(typeof e=="object")return Array.isArray(e)?Bx(e):Ux(e);if(typeof e=="string")return Vx(e);throw new Error("Expected function, string, or object as test")};function Bx(e){const n=[];let r=-1;for(;++r<e.length;)n[r]=Gr(e[r]);return Jr(s);function s(...a){let i=-1;for(;++i<n.length;)if(n[i].apply(this,a))return!0;return!1}}function Ux(e){const n=e;return Jr(r);function r(s){const a=s;let i;for(i in e)if(a[i]!==n[i])return!1;return!0}}function Vx(e){return Jr(n);function n(r){return r&&r.type===e}}function Jr(e){return n;function n(r,s,a){return!!(qx(r)&&e.call(this,r,typeof s=="number"?s:void 0,a||void 0))}}function Hx(){return!0}function qx(e){return e!==null&&typeof e=="object"&&"type"in e}const Ml=[],Wx=!0,Ws=!1,Gx="skip";function _l(e,n,r,s){let a;typeof n=="function"&&typeof r!="function"?(s=r,r=n):a=n;const i=Gr(a),o=s?-1:1;l(e,void 0,[])();function l(d,c,u){const m=d&&typeof d=="object"?d:{};if(typeof m.type=="string"){const h=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(d.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=Ml,x,g,b;if((!n||i(d,c,u[u.length-1]||void 0))&&(h=Jx(r(d,u)),h[0]===Ws))return h;if("children"in d&&d.children){const N=d;if(N.children&&h[0]!==Gx)for(g=(s?N.children.length:-1)+o,b=u.concat(N);g>-1&&g<N.children.length;){const j=N.children[g];if(x=l(j,g,b)(),x[0]===Ws)return x;g=typeof x[1]=="number"?x[1]:g+o}}return h}}}function Jx(e){return Array.isArray(e)?e:typeof e=="number"?[Wx,e]:e==null?Ml:[e]}function ja(e,n,r,s){let a,i,o;typeof n=="function"&&typeof r!="function"?(i=void 0,o=n,a=r):(i=n,o=r,a=s),_l(e,i,l,a);function l(d,c){const u=c[c.length-1],m=u?u.children.indexOf(d):void 0;return o(d,m,u)}}const Gs={}.hasOwnProperty,Xx={};function Yx(e,n){const r=n||Xx,s=new Map,a=new Map,i=new Map,o={...Rx,...r.handlers},l={all:c,applyData:Kx,definitionById:s,footnoteById:a,footnoteCounts:i,footnoteOrder:[],handlers:o,one:d,options:r,patch:Qx,wrap:eg};return ja(e,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const m=u.type==="definition"?s:a,p=String(u.identifier).toUpperCase();m.has(p)||m.set(p,u)}}),l;function d(u,m){const p=u.type,h=l.handlers[p];if(Gs.call(l.handlers,p)&&h)return h(l,u,m);if(l.options.passThrough&&l.options.passThrough.includes(p)){if("children"in u){const{children:g,...b}=u,N=Tr(b);return N.children=l.all(u),N}return Tr(u)}return(l.options.unknownHandler||Zx)(l,u,m)}function c(u){const m=[];if("children"in u){const p=u.children;let h=-1;for(;++h<p.length;){const x=l.one(p[h],u);if(x){if(h&&p[h-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=ki(x.value)),!Array.isArray(x)&&x.type==="element")){const g=x.children[0];g&&g.type==="text"&&(g.value=ki(g.value))}Array.isArray(x)?m.push(...x):m.push(x)}}}return m}}function Qx(e,n){e.position&&(n.position=_h(e))}function Kx(e,n){let r=n;if(e&&e.data){const s=e.data.hName,a=e.data.hChildren,i=e.data.hProperties;if(typeof s=="string")if(r.type==="element")r.tagName=s;else{const o="children"in r?r.children:[r];r={type:"element",tagName:s,properties:{},children:o}}r.type==="element"&&i&&Object.assign(r.properties,Tr(i)),"children"in r&&r.children&&a!==null&&a!==void 0&&(r.children=a)}return r}function Zx(e,n){const r=n.data||{},s="value"in n&&!(Gs.call(r,"hProperties")||Gs.call(r,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:e.all(n)};return e.patch(n,s),e.applyData(n,s)}function eg(e,n){const r=[];let s=-1;for(n&&r.push({type:"text",value:`
`});++s<e.length;)s&&r.push({type:"text",value:`
`}),r.push(e[s]);return n&&e.length>0&&r.push({type:"text",value:`
`}),r}function ki(e){let n=0,r=e.charCodeAt(n);for(;r===9||r===32;)n++,r=e.charCodeAt(n);return e.slice(n)}function Si(e,n){const r=Yx(e,n),s=r.one(e,void 0),a=$x(r),i=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&i.children.push({type:"text",value:`
`},a),i}function tg(e,n){return e&&"run"in e?async function(r,s){const a=Si(r,{file:s,...n});await e.run(a,s)}:function(r,s){return Si(r,{file:s,...e||n})}}function Ci(e){if(e)throw e}var is,Ai;function ng(){if(Ai)return is;Ai=1;var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=function(c){return typeof Array.isArray=="function"?Array.isArray(c):n.call(c)==="[object Array]"},i=function(c){if(!c||n.call(c)!=="[object Object]")return!1;var u=e.call(c,"constructor"),m=c.constructor&&c.constructor.prototype&&e.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!m)return!1;var p;for(p in c);return typeof p>"u"||e.call(c,p)},o=function(c,u){r&&u.name==="__proto__"?r(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},l=function(c,u){if(u==="__proto__")if(e.call(c,u)){if(s)return s(c,u).value}else return;return c[u]};return is=function d(){var c,u,m,p,h,x,g=arguments[0],b=1,N=arguments.length,j=!1;for(typeof g=="boolean"&&(j=g,g=arguments[1]||{},b=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});b<N;++b)if(c=arguments[b],c!=null)for(u in c)m=l(g,u),p=l(c,u),g!==p&&(j&&p&&(i(p)||(h=a(p)))?(h?(h=!1,x=m&&a(m)?m:[]):x=m&&i(m)?m:{},o(g,{name:u,newValue:d(j,x,p)})):typeof p<"u"&&o(g,{name:u,newValue:p}));return g},is}var rg=ng();const os=Qs(rg);function Js(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function sg(){const e=[],n={run:r,use:s};return n;function r(...a){let i=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(d,...c){const u=e[++i];let m=-1;if(d){o(d);return}for(;++m<a.length;)(c[m]===null||c[m]===void 0)&&(c[m]=a[m]);a=c,u?ag(u,l)(...c):o(null,...c)}}function s(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),n}}function ag(e,n){let r;return s;function s(...o){const l=e.length>o.length;let d;l&&o.push(a);try{d=e.apply(this,o)}catch(c){const u=c;if(l&&r)throw u;return a(u)}l||(d&&d.then&&typeof d.then=="function"?d.then(i,a):d instanceof Error?a(d):i(d))}function a(o,...l){r||(r=!0,n(o,...l))}function i(o){a(null,o)}}const Nt={basename:ig,dirname:og,extname:lg,join:cg,sep:"/"};function ig(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');tr(e);let r=0,s=-1,a=e.length,i;if(n===void 0||n.length===0||n.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else s<0&&(i=!0,s=a+1);return s<0?"":e.slice(r,s)}if(n===e)return"";let o=-1,l=n.length-1;for(;a--;)if(e.codePointAt(a)===47){if(i){r=a+1;break}}else o<0&&(i=!0,o=a+1),l>-1&&(e.codePointAt(a)===n.codePointAt(l--)?l<0&&(s=a):(l=-1,s=o));return r===s?s=o:s<0&&(s=e.length),e.slice(r,s)}function og(e){if(tr(e),e.length===0)return".";let n=-1,r=e.length,s;for(;--r;)if(e.codePointAt(r)===47){if(s){n=r;break}}else s||(s=!0);return n<0?e.codePointAt(0)===47?"/":".":n===1&&e.codePointAt(0)===47?"//":e.slice(0,n)}function lg(e){tr(e);let n=e.length,r=-1,s=0,a=-1,i=0,o;for(;n--;){const l=e.codePointAt(n);if(l===47){if(o){s=n+1;break}continue}r<0&&(o=!0,r=n+1),l===46?a<0?a=n:i!==1&&(i=1):a>-1&&(i=-1)}return a<0||r<0||i===0||i===1&&a===r-1&&a===s+1?"":e.slice(a,r)}function cg(...e){let n=-1,r;for(;++n<e.length;)tr(e[n]),e[n]&&(r=r===void 0?e[n]:r+"/"+e[n]);return r===void 0?".":dg(r)}function dg(e){tr(e);const n=e.codePointAt(0)===47;let r=ug(e,!n);return r.length===0&&!n&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),n?"/"+r:r}function ug(e,n){let r="",s=0,a=-1,i=0,o=-1,l,d;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||i===1))if(a!==o-1&&i===2){if(r.length<2||s!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(d=r.lastIndexOf("/"),d!==r.length-1){d<0?(r="",s=0):(r=r.slice(0,d),s=r.length-1-r.lastIndexOf("/")),a=o,i=0;continue}}else if(r.length>0){r="",s=0,a=o,i=0;continue}}n&&(r=r.length>0?r+"/..":"..",s=2)}else r.length>0?r+="/"+e.slice(a+1,o):r=e.slice(a+1,o),s=o-a-1;a=o,i=0}else l===46&&i>-1?i++:i=-1}return r}function tr(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const mg={cwd:hg};function hg(){return"/"}function Xs(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function pg(e){if(typeof e=="string")e=new URL(e);else if(!Xs(e)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(e.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return fg(e)}function fg(e){if(e.hostname!==""){const s=new TypeError('File URL host must be "localhost" or empty on darwin');throw s.code="ERR_INVALID_FILE_URL_HOST",s}const n=e.pathname;let r=-1;for(;++r<n.length;)if(n.codePointAt(r)===37&&n.codePointAt(r+1)===50){const s=n.codePointAt(r+2);if(s===70||s===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(n)}const ls=["history","path","basename","stem","extname","dirname"];class zl{constructor(n){let r;n?Xs(n)?r={path:n}:typeof n=="string"||xg(n)?r={value:n}:r=n:r={},this.cwd="cwd"in r?"":mg.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let s=-1;for(;++s<ls.length;){const i=ls[s];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let a;for(a in r)ls.includes(a)||(this[a]=r[a])}get basename(){return typeof this.path=="string"?Nt.basename(this.path):void 0}set basename(n){ds(n,"basename"),cs(n,"basename"),this.path=Nt.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?Nt.dirname(this.path):void 0}set dirname(n){Ei(this.basename,"dirname"),this.path=Nt.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?Nt.extname(this.path):void 0}set extname(n){if(cs(n,"extname"),Ei(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Nt.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){Xs(n)&&(n=pg(n)),ds(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?Nt.basename(this.path,this.extname):void 0}set stem(n){ds(n,"stem"),cs(n,"stem"),this.path=Nt.join(this.dirname||"",n+(this.extname||""))}fail(n,r,s){const a=this.message(n,r,s);throw a.fatal=!0,a}info(n,r,s){const a=this.message(n,r,s);return a.fatal=void 0,a}message(n,r,s){const a=new Je(n,r,s);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function cs(e,n){if(e&&e.includes(Nt.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+Nt.sep+"`")}function ds(e,n){if(!e)throw new Error("`"+n+"` cannot be empty")}function Ei(e,n){if(!e)throw new Error("Setting `"+n+"` requires `path` to be set too")}function xg(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const gg=function(e){const s=this.constructor.prototype,a=s[e],i=function(){return a.apply(i,arguments)};return Object.setPrototypeOf(i,s),i},yg={}.hasOwnProperty;class wa extends gg{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=sg()}copy(){const n=new wa;let r=-1;for(;++r<this.attachers.length;){const s=this.attachers[r];n.use(...s)}return n.data(os(!0,{},this.namespace)),n}data(n,r){return typeof n=="string"?arguments.length===2?(hs("data",this.frozen),this.namespace[n]=r,this):yg.call(this.namespace,n)&&this.namespace[n]||void 0:n?(hs("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[r,...s]=this.attachers[this.freezeIndex];if(s[0]===!1)continue;s[0]===!0&&(s[0]=void 0);const a=r.call(n,...s);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const r=ur(n),s=this.parser||this.Parser;return us("parse",s),s(String(r),r)}process(n,r){const s=this;return this.freeze(),us("process",this.parser||this.Parser),ms("process",this.compiler||this.Compiler),r?a(void 0,r):new Promise(a);function a(i,o){const l=ur(n),d=s.parse(l);s.run(d,l,function(u,m,p){if(u||!m||!p)return c(u);const h=m,x=s.stringify(h,p);wg(x)?p.value=x:p.result=x,c(u,p)});function c(u,m){u||!m?o(u):i?i(m):r(void 0,m)}}}processSync(n){let r=!1,s;return this.freeze(),us("processSync",this.parser||this.Parser),ms("processSync",this.compiler||this.Compiler),this.process(n,a),Pi("processSync","process",r),s;function a(i,o){r=!0,Ci(i),s=o}}run(n,r,s){Ti(n),this.freeze();const a=this.transformers;return!s&&typeof r=="function"&&(s=r,r=void 0),s?i(void 0,s):new Promise(i);function i(o,l){const d=ur(r);a.run(n,d,c);function c(u,m,p){const h=m||n;u?l(u):o?o(h):s(void 0,h,p)}}}runSync(n,r){let s=!1,a;return this.run(n,r,i),Pi("runSync","run",s),a;function i(o,l){Ci(o),a=l,s=!0}}stringify(n,r){this.freeze();const s=ur(r),a=this.compiler||this.Compiler;return ms("stringify",a),Ti(n),a(n,s)}use(n,...r){const s=this.attachers,a=this.namespace;if(hs("use",this.frozen),n!=null)if(typeof n=="function")d(n,r);else if(typeof n=="object")Array.isArray(n)?l(n):o(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function i(c){if(typeof c=="function")d(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...m]=c;d(u,m)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(c.plugins),c.settings&&(a.settings=os(!0,a.settings,c.settings))}function l(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const m=c[u];i(m)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function d(c,u){let m=-1,p=-1;for(;++m<s.length;)if(s[m][0]===c){p=m;break}if(p===-1)s.push([c,...u]);else if(u.length>0){let[h,...x]=u;const g=s[p][1];Js(g)&&Js(h)&&(h=os(!0,g,h)),s[p]=[c,h,...x]}}}}const bg=new wa().freeze();function us(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function ms(e,n){if(typeof n!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function hs(e,n){if(n)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ti(e){if(!Js(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Pi(e,n,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+n+"` instead")}function ur(e){return jg(e)?e:new zl(e)}function jg(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function wg(e){return typeof e=="string"||vg(e)}function vg(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Ng="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Di=[],Ii={allowDangerousHtml:!0},kg=/^(https?|ircs?|mailto|xmpp)$/i,Sg=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function gn(e){const n=Cg(e),r=Ag(e);return Eg(n.runSync(n.parse(r),r),e)}function Cg(e){const n=e.rehypePlugins||Di,r=e.remarkPlugins||Di,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Ii}:Ii;return bg().use(ox).use(r).use(tg,s).use(n)}function Ag(e){const n=e.children||"",r=new zl;return typeof n=="string"&&(r.value=n),r}function Eg(e,n){const r=n.allowedElements,s=n.allowElement,a=n.components,i=n.disallowedElements,o=n.skipHtml,l=n.unwrapDisallowed,d=n.urlTransform||Tg;for(const u of Sg)Object.hasOwn(n,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+Ng+u.id,void 0);return ja(e,c),Vh(e,{Fragment:t.Fragment,components:a,ignoreInvalidStyle:!0,jsx:t.jsx,jsxs:t.jsxs,passKeys:!0,passNode:!0});function c(u,m,p){if(u.type==="raw"&&p&&typeof m=="number")return o?p.children.splice(m,1):p.children[m]={type:"text",value:u.value},m;if(u.type==="element"){let h;for(h in rs)if(Object.hasOwn(rs,h)&&Object.hasOwn(u.properties,h)){const x=u.properties[h],g=rs[h];(g===null||g.includes(u.tagName))&&(u.properties[h]=d(String(x||""),h,u))}}if(u.type==="element"){let h=r?!r.includes(u.tagName):i?i.includes(u.tagName):!1;if(!h&&s&&typeof m=="number"&&(h=!s(u,m,p)),h&&p&&typeof m=="number")return l&&u.children?p.children.splice(m,1,...u.children):p.children.splice(m,1),m}}}function Tg(e){const n=e.indexOf(":"),r=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return n===-1||a!==-1&&n>a||r!==-1&&n>r||s!==-1&&n>s||kg.test(e.slice(0,n))?e:""}function Ri(e,n){const r=String(e);if(typeof n!="string")throw new TypeError("Expected character");let s=0,a=r.indexOf(n);for(;a!==-1;)s++,a=r.indexOf(n,a+n.length);return s}function Pg(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Dg(e,n,r){const a=Gr((r||{}).ignore||[]),i=Ig(n);let o=-1;for(;++o<i.length;)_l(e,"text",l);function l(c,u){let m=-1,p;for(;++m<u.length;){const h=u[m],x=p?p.children:void 0;if(a(h,x?x.indexOf(h):void 0,p))return;p=h}if(p)return d(c,u)}function d(c,u){const m=u[u.length-1],p=i[o][0],h=i[o][1];let x=0;const b=m.children.indexOf(c);let N=!1,j=[];p.lastIndex=0;let v=p.exec(c.value);for(;v;){const E=v.index,k={index:v.index,input:v.input,stack:[...u,c]};let C=h(...v,k);if(typeof C=="string"&&(C=C.length>0?{type:"text",value:C}:void 0),C===!1?p.lastIndex=E+1:(x!==E&&j.push({type:"text",value:c.value.slice(x,E)}),Array.isArray(C)?j.push(...C):C&&j.push(C),x=E+v[0].length,N=!0),!p.global)break;v=p.exec(c.value)}return N?(x<c.value.length&&j.push({type:"text",value:c.value.slice(x)}),m.children.splice(b,1,...j)):j=[c],b+j.length}}function Ig(e){const n=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const r=!e[0]||Array.isArray(e[0])?e:[e];let s=-1;for(;++s<r.length;){const a=r[s];n.push([Rg(a[0]),Fg(a[1])])}return n}function Rg(e){return typeof e=="string"?new RegExp(Pg(e),"g"):e}function Fg(e){return typeof e=="function"?e:function(){return e}}const ps="phrasing",fs=["autolink","link","image","label"];function Lg(){return{transforms:[Ug],enter:{literalAutolink:Mg,literalAutolinkEmail:xs,literalAutolinkHttp:xs,literalAutolinkWww:xs},exit:{literalAutolink:Bg,literalAutolinkEmail:$g,literalAutolinkHttp:_g,literalAutolinkWww:zg}}}function Og(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:ps,notInConstruct:fs},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:ps,notInConstruct:fs},{character:":",before:"[ps]",after:"\\/",inConstruct:ps,notInConstruct:fs}]}}function Mg(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function xs(e){this.config.enter.autolinkProtocol.call(this,e)}function _g(e){this.config.exit.autolinkProtocol.call(this,e)}function zg(e){this.config.exit.data.call(this,e);const n=this.stack[this.stack.length-1];n.type,n.url="http://"+this.sliceSerialize(e)}function $g(e){this.config.exit.autolinkEmail.call(this,e)}function Bg(e){this.exit(e)}function Ug(e){Dg(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Vg],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Hg]],{ignore:["link","linkReference"]})}function Vg(e,n,r,s,a){let i="";if(!$l(a)||(/^w/i.test(n)&&(r=n+r,n="",i="http://"),!qg(r)))return!1;const o=Wg(r+s);if(!o[0])return!1;const l={type:"link",title:null,url:i+n+o[0],children:[{type:"text",value:n+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Hg(e,n,r,s){return!$l(s,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+r,children:[{type:"text",value:n+"@"+r}]}}function qg(e){const n=e.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function Wg(e){const n=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!n)return[e,void 0];e=e.slice(0,n.index);let r=n[0],s=r.indexOf(")");const a=Ri(e,"(");let i=Ri(e,")");for(;s!==-1&&a>i;)e+=r.slice(0,s+1),r=r.slice(s+1),s=r.indexOf(")"),i++;return[e,r]}function $l(e,n){const r=e.input.charCodeAt(e.index-1);return(e.index===0||Qt(r)||Hr(r))&&(!n||r!==47)}Bl.peek=ty;function Gg(){this.buffer()}function Jg(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Xg(){this.buffer()}function Yg(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Qg(e){const n=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=yt(this.sliceSerialize(e)).toLowerCase(),r.label=n}function Kg(e){this.exit(e)}function Zg(e){const n=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=yt(this.sliceSerialize(e)).toLowerCase(),r.label=n}function ey(e){this.exit(e)}function ty(){return"["}function Bl(e,n,r,s){const a=r.createTracker(s);let i=a.move("[^");const o=r.enter("footnoteReference"),l=r.enter("reference");return i+=a.move(r.safe(r.associationId(e),{after:"]",before:i})),l(),o(),i+=a.move("]"),i}function ny(){return{enter:{gfmFootnoteCallString:Gg,gfmFootnoteCall:Jg,gfmFootnoteDefinitionLabelString:Xg,gfmFootnoteDefinition:Yg},exit:{gfmFootnoteCallString:Qg,gfmFootnoteCall:Kg,gfmFootnoteDefinitionLabelString:Zg,gfmFootnoteDefinition:ey}}}function ry(e){let n=!1;return e&&e.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:r,footnoteReference:Bl},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(s,a,i,o){const l=i.createTracker(o);let d=l.move("[^");const c=i.enter("footnoteDefinition"),u=i.enter("label");return d+=l.move(i.safe(i.associationId(s),{before:d,after:"]"})),u(),d+=l.move("]:"),s.children&&s.children.length>0&&(l.shift(4),d+=l.move((n?`
`:" ")+i.indentLines(i.containerFlow(s,l.current()),n?Ul:sy))),c(),d}}function sy(e,n,r){return n===0?e:Ul(e,n,r)}function Ul(e,n,r){return(r?"":"    ")+e}const ay=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Vl.peek=dy;function iy(){return{canContainEols:["delete"],enter:{strikethrough:ly},exit:{strikethrough:cy}}}function oy(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:ay}],handlers:{delete:Vl}}}function ly(e){this.enter({type:"delete",children:[]},e)}function cy(e){this.exit(e)}function Vl(e,n,r,s){const a=r.createTracker(s),i=r.enter("strikethrough");let o=a.move("~~");return o+=r.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),i(),o}function dy(){return"~"}function uy(e){return e.length}function my(e,n){const r=n||{},s=(r.align||[]).concat(),a=r.stringLength||uy,i=[],o=[],l=[],d=[];let c=0,u=-1;for(;++u<e.length;){const g=[],b=[];let N=-1;for(e[u].length>c&&(c=e[u].length);++N<e[u].length;){const j=hy(e[u][N]);if(r.alignDelimiters!==!1){const v=a(j);b[N]=v,(d[N]===void 0||v>d[N])&&(d[N]=v)}g.push(j)}o[u]=g,l[u]=b}let m=-1;if(typeof s=="object"&&"length"in s)for(;++m<c;)i[m]=Fi(s[m]);else{const g=Fi(s);for(;++m<c;)i[m]=g}m=-1;const p=[],h=[];for(;++m<c;){const g=i[m];let b="",N="";g===99?(b=":",N=":"):g===108?b=":":g===114&&(N=":");let j=r.alignDelimiters===!1?1:Math.max(1,d[m]-b.length-N.length);const v=b+"-".repeat(j)+N;r.alignDelimiters!==!1&&(j=b.length+j+N.length,j>d[m]&&(d[m]=j),h[m]=j),p[m]=v}o.splice(1,0,p),l.splice(1,0,h),u=-1;const x=[];for(;++u<o.length;){const g=o[u],b=l[u];m=-1;const N=[];for(;++m<c;){const j=g[m]||"";let v="",E="";if(r.alignDelimiters!==!1){const k=d[m]-(b[m]||0),C=i[m];C===114?v=" ".repeat(k):C===99?k%2?(v=" ".repeat(k/2+.5),E=" ".repeat(k/2-.5)):(v=" ".repeat(k/2),E=v):E=" ".repeat(k)}r.delimiterStart!==!1&&!m&&N.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&j==="")&&(r.delimiterStart!==!1||m)&&N.push(" "),r.alignDelimiters!==!1&&N.push(v),N.push(j),r.alignDelimiters!==!1&&N.push(E),r.padding!==!1&&N.push(" "),(r.delimiterEnd!==!1||m!==c-1)&&N.push("|")}x.push(r.delimiterEnd===!1?N.join("").replace(/ +$/,""):N.join(""))}return x.join(`
`)}function hy(e){return e==null?"":String(e)}function Fi(e){const n=typeof e=="string"?e.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function py(e,n,r,s){const a=r.enter("blockquote"),i=r.createTracker(s);i.move("> "),i.shift(2);const o=r.indentLines(r.containerFlow(e,i.current()),fy);return a(),o}function fy(e,n,r){return">"+(r?"":" ")+e}function xy(e,n){return Li(e,n.inConstruct,!0)&&!Li(e,n.notInConstruct,!1)}function Li(e,n,r){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return r;let s=-1;for(;++s<n.length;)if(e.includes(n[s]))return!0;return!1}function Oi(e,n,r,s){let a=-1;for(;++a<r.unsafe.length;)if(r.unsafe[a].character===`
`&&xy(r.stack,r.unsafe[a]))return/[ \t]/.test(s.before)?"":" ";return`\\
`}function gy(e,n){const r=String(e);let s=r.indexOf(n),a=s,i=0,o=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;s!==-1;)s===a?++i>o&&(o=i):i=1,a=s+n.length,s=r.indexOf(n,a);return o}function yy(e,n){return!!(n.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function by(e){const n=e.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function jy(e,n,r,s){const a=by(r),i=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(yy(e,r)){const m=r.enter("codeIndented"),p=r.indentLines(i,wy);return m(),p}const l=r.createTracker(s),d=a.repeat(Math.max(gy(i,a)+1,3)),c=r.enter("codeFenced");let u=l.move(d);if(e.lang){const m=r.enter(`codeFencedLang${o}`);u+=l.move(r.safe(e.lang,{before:u,after:" ",encode:["`"],...l.current()})),m()}if(e.lang&&e.meta){const m=r.enter(`codeFencedMeta${o}`);u+=l.move(" "),u+=l.move(r.safe(e.meta,{before:u,after:`
`,encode:["`"],...l.current()})),m()}return u+=l.move(`
`),i&&(u+=l.move(i+`
`)),u+=l.move(d),c(),u}function wy(e,n,r){return(r?"":"    ")+e}function va(e){const n=e.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function vy(e,n,r,s){const a=va(r),i=a==='"'?"Quote":"Apostrophe",o=r.enter("definition");let l=r.enter("label");const d=r.createTracker(s);let c=d.move("[");return c+=d.move(r.safe(r.associationId(e),{before:c,after:"]",...d.current()})),c+=d.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=d.move("<"),c+=d.move(r.safe(e.url,{before:c,after:">",...d.current()})),c+=d.move(">")):(l=r.enter("destinationRaw"),c+=d.move(r.safe(e.url,{before:c,after:e.title?" ":`
`,...d.current()}))),l(),e.title&&(l=r.enter(`title${i}`),c+=d.move(" "+a),c+=d.move(r.safe(e.title,{before:c,after:a,...d.current()})),c+=d.move(a),l()),o(),c}function Ny(e){const n=e.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function Hn(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Pr(e,n,r){const s=xn(e),a=xn(n);return s===void 0?a===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:s===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Hl.peek=ky;function Hl(e,n,r,s){const a=Ny(r),i=r.enter("emphasis"),o=r.createTracker(s),l=o.move(a);let d=o.move(r.containerPhrasing(e,{after:a,before:l,...o.current()}));const c=d.charCodeAt(0),u=Pr(s.before.charCodeAt(s.before.length-1),c,a);u.inside&&(d=Hn(c)+d.slice(1));const m=d.charCodeAt(d.length-1),p=Pr(s.after.charCodeAt(0),m,a);p.inside&&(d=d.slice(0,-1)+Hn(m));const h=o.move(a);return i(),r.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},l+d+h}function ky(e,n,r){return r.options.emphasis||"*"}function Sy(e,n){let r=!1;return ja(e,function(s){if("value"in s&&/\r?\n|\r/.test(s.value)||s.type==="break")return r=!0,Ws}),!!((!e.depth||e.depth<3)&&ha(e)&&(n.options.setext||r))}function Cy(e,n,r,s){const a=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(s);if(Sy(e,r)){const u=r.enter("headingSetext"),m=r.enter("phrasing"),p=r.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return m(),u(),p+`
`+(a===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=r.enter("headingAtx"),d=r.enter("phrasing");i.move(o+" ");let c=r.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(c)&&(c=Hn(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,r.options.closeAtx&&(c+=" "+o),d(),l(),c}ql.peek=Ay;function ql(e){return e.value||""}function Ay(){return"<"}Wl.peek=Ey;function Wl(e,n,r,s){const a=va(r),i=a==='"'?"Quote":"Apostrophe",o=r.enter("image");let l=r.enter("label");const d=r.createTracker(s);let c=d.move("![");return c+=d.move(r.safe(e.alt,{before:c,after:"]",...d.current()})),c+=d.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=r.enter("destinationLiteral"),c+=d.move("<"),c+=d.move(r.safe(e.url,{before:c,after:">",...d.current()})),c+=d.move(">")):(l=r.enter("destinationRaw"),c+=d.move(r.safe(e.url,{before:c,after:e.title?" ":")",...d.current()}))),l(),e.title&&(l=r.enter(`title${i}`),c+=d.move(" "+a),c+=d.move(r.safe(e.title,{before:c,after:a,...d.current()})),c+=d.move(a),l()),c+=d.move(")"),o(),c}function Ey(){return"!"}Gl.peek=Ty;function Gl(e,n,r,s){const a=e.referenceType,i=r.enter("imageReference");let o=r.enter("label");const l=r.createTracker(s);let d=l.move("![");const c=r.safe(e.alt,{before:d,after:"]",...l.current()});d+=l.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const m=r.safe(r.associationId(e),{before:d,after:"]",...l.current()});return o(),r.stack=u,i(),a==="full"||!c||c!==m?d+=l.move(m+"]"):a==="shortcut"?d=d.slice(0,-1):d+=l.move("]"),d}function Ty(){return"!"}Jl.peek=Py;function Jl(e,n,r){let s=e.value||"",a="`",i=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(s);)a+="`";for(/[^ \r\n]/.test(s)&&(/^[ \r\n]/.test(s)&&/[ \r\n]$/.test(s)||/^`|`$/.test(s))&&(s=" "+s+" ");++i<r.unsafe.length;){const o=r.unsafe[i],l=r.compilePattern(o);let d;if(o.atBreak)for(;d=l.exec(s);){let c=d.index;s.charCodeAt(c)===10&&s.charCodeAt(c-1)===13&&c--,s=s.slice(0,c)+" "+s.slice(d.index+1)}}return a+s+a}function Py(){return"`"}function Xl(e,n){const r=ha(e);return!!(!n.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}Yl.peek=Dy;function Yl(e,n,r,s){const a=va(r),i=a==='"'?"Quote":"Apostrophe",o=r.createTracker(s);let l,d;if(Xl(e,r)){const u=r.stack;r.stack=[],l=r.enter("autolink");let m=o.move("<");return m+=o.move(r.containerPhrasing(e,{before:m,after:">",...o.current()})),m+=o.move(">"),l(),r.stack=u,m}l=r.enter("link"),d=r.enter("label");let c=o.move("[");return c+=o.move(r.containerPhrasing(e,{before:c,after:"](",...o.current()})),c+=o.move("]("),d(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(d=r.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(r.safe(e.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(d=r.enter("destinationRaw"),c+=o.move(r.safe(e.url,{before:c,after:e.title?" ":")",...o.current()}))),d(),e.title&&(d=r.enter(`title${i}`),c+=o.move(" "+a),c+=o.move(r.safe(e.title,{before:c,after:a,...o.current()})),c+=o.move(a),d()),c+=o.move(")"),l(),c}function Dy(e,n,r){return Xl(e,r)?"<":"["}Ql.peek=Iy;function Ql(e,n,r,s){const a=e.referenceType,i=r.enter("linkReference");let o=r.enter("label");const l=r.createTracker(s);let d=l.move("[");const c=r.containerPhrasing(e,{before:d,after:"]",...l.current()});d+=l.move(c+"]["),o();const u=r.stack;r.stack=[],o=r.enter("reference");const m=r.safe(r.associationId(e),{before:d,after:"]",...l.current()});return o(),r.stack=u,i(),a==="full"||!c||c!==m?d+=l.move(m+"]"):a==="shortcut"?d=d.slice(0,-1):d+=l.move("]"),d}function Iy(){return"["}function Na(e){const n=e.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function Ry(e){const n=Na(e),r=e.options.bulletOther;if(!r)return n==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+r+"`) to be different");return r}function Fy(e){const n=e.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function Kl(e){const n=e.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function Ly(e,n,r,s){const a=r.enter("list"),i=r.bulletCurrent;let o=e.ordered?Fy(r):Na(r);const l=e.ordered?o==="."?")":".":Ry(r);let d=n&&r.bulletLastUsed?o===r.bulletLastUsed:!1;if(!e.ordered){const u=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(d=!0),Kl(r)===o&&u){let m=-1;for(;++m<e.children.length;){const p=e.children[m];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){d=!0;break}}}}d&&(o=l),r.bulletCurrent=o;const c=r.containerFlow(e,s);return r.bulletLastUsed=o,r.bulletCurrent=i,a(),c}function Oy(e){const n=e.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function My(e,n,r,s){const a=Oy(r);let i=r.bulletCurrent||Na(r);n&&n.type==="list"&&n.ordered&&(i=(typeof n.start=="number"&&n.start>-1?n.start:1)+(r.options.incrementListMarker===!1?0:n.children.indexOf(e))+i);let o=i.length+1;(a==="tab"||a==="mixed"&&(n&&n.type==="list"&&n.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=r.createTracker(s);l.move(i+" ".repeat(o-i.length)),l.shift(o);const d=r.enter("listItem"),c=r.indentLines(r.containerFlow(e,l.current()),u);return d(),c;function u(m,p,h){return p?(h?"":" ".repeat(o))+m:(h?i:i+" ".repeat(o-i.length))+m}}function _y(e,n,r,s){const a=r.enter("paragraph"),i=r.enter("phrasing"),o=r.containerPhrasing(e,s);return i(),a(),o}const zy=Gr(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function $y(e,n,r,s){return(e.children.some(function(o){return zy(o)})?r.containerPhrasing:r.containerFlow).call(r,e,s)}function By(e){const n=e.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}Zl.peek=Uy;function Zl(e,n,r,s){const a=By(r),i=r.enter("strong"),o=r.createTracker(s),l=o.move(a+a);let d=o.move(r.containerPhrasing(e,{after:a,before:l,...o.current()}));const c=d.charCodeAt(0),u=Pr(s.before.charCodeAt(s.before.length-1),c,a);u.inside&&(d=Hn(c)+d.slice(1));const m=d.charCodeAt(d.length-1),p=Pr(s.after.charCodeAt(0),m,a);p.inside&&(d=d.slice(0,-1)+Hn(m));const h=o.move(a+a);return i(),r.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},l+d+h}function Uy(e,n,r){return r.options.strong||"*"}function Vy(e,n,r,s){return r.safe(e.value,s)}function Hy(e){const n=e.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function qy(e,n,r){const s=(Kl(r)+(r.options.ruleSpaces?" ":"")).repeat(Hy(r));return r.options.ruleSpaces?s.slice(0,-1):s}const ec={blockquote:py,break:Oi,code:jy,definition:vy,emphasis:Hl,hardBreak:Oi,heading:Cy,html:ql,image:Wl,imageReference:Gl,inlineCode:Jl,link:Yl,linkReference:Ql,list:Ly,listItem:My,paragraph:_y,root:$y,strong:Zl,text:Vy,thematicBreak:qy};function Wy(){return{enter:{table:Gy,tableData:Mi,tableHeader:Mi,tableRow:Xy},exit:{codeText:Yy,table:Jy,tableData:gs,tableHeader:gs,tableRow:gs}}}function Gy(e){const n=e._align;this.enter({type:"table",align:n.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function Jy(e){this.exit(e),this.data.inTable=void 0}function Xy(e){this.enter({type:"tableRow",children:[]},e)}function gs(e){this.exit(e)}function Mi(e){this.enter({type:"tableCell",children:[]},e)}function Yy(e){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,Qy));const r=this.stack[this.stack.length-1];r.type,r.value=n,this.exit(e)}function Qy(e,n){return n==="|"?n:e}function Ky(e){const n=e||{},r=n.tableCellPadding,s=n.tablePipeAlign,a=n.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:o,tableCell:d,tableRow:l}};function o(h,x,g,b){return c(u(h,g,b),h.align)}function l(h,x,g,b){const N=m(h,g,b),j=c([N]);return j.slice(0,j.indexOf(`
`))}function d(h,x,g,b){const N=g.enter("tableCell"),j=g.enter("phrasing"),v=g.containerPhrasing(h,{...b,before:i,after:i});return j(),N(),v}function c(h,x){return my(h,{align:x,alignDelimiters:s,padding:r,stringLength:a})}function u(h,x,g){const b=h.children;let N=-1;const j=[],v=x.enter("table");for(;++N<b.length;)j[N]=m(b[N],x,g);return v(),j}function m(h,x,g){const b=h.children;let N=-1;const j=[],v=x.enter("tableRow");for(;++N<b.length;)j[N]=d(b[N],h,x,g);return v(),j}function p(h,x,g){let b=ec.inlineCode(h,x,g);return g.stack.includes("tableCell")&&(b=b.replace(/\|/g,"\\$&")),b}}function Zy(){return{exit:{taskListCheckValueChecked:_i,taskListCheckValueUnchecked:_i,paragraph:tb}}}function eb(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:nb}}}function _i(e){const n=this.stack[this.stack.length-2];n.type,n.checked=e.type==="taskListCheckValueChecked"}function tb(e){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const r=this.stack[this.stack.length-1];r.type;const s=r.children[0];if(s&&s.type==="text"){const a=n.children;let i=-1,o;for(;++i<a.length;){const l=a[i];if(l.type==="paragraph"){o=l;break}}o===r&&(s.value=s.value.slice(1),s.value.length===0?r.children.shift():r.position&&s.position&&typeof s.position.start.offset=="number"&&(s.position.start.column++,s.position.start.offset++,r.position.start=Object.assign({},s.position.start)))}}this.exit(e)}function nb(e,n,r,s){const a=e.children[0],i=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=r.createTracker(s);i&&l.move(o);let d=ec.listItem(e,n,r,{...s,...l.current()});return i&&(d=d.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),d;function c(u){return u+o}}function rb(){return[Lg(),ny(),iy(),Wy(),Zy()]}function sb(e){return{extensions:[Og(),ry(e),oy(),Ky(e),eb()]}}const ab={tokenize:ub,partial:!0},tc={tokenize:mb,partial:!0},nc={tokenize:hb,partial:!0},rc={tokenize:pb,partial:!0},ib={tokenize:fb,partial:!0},sc={name:"wwwAutolink",tokenize:cb,previous:ic},ac={name:"protocolAutolink",tokenize:db,previous:oc},Rt={name:"emailAutolink",tokenize:lb,previous:lc},Ct={};function ob(){return{text:Ct}}let Gt=48;for(;Gt<123;)Ct[Gt]=Rt,Gt++,Gt===58?Gt=65:Gt===91&&(Gt=97);Ct[43]=Rt;Ct[45]=Rt;Ct[46]=Rt;Ct[95]=Rt;Ct[72]=[Rt,ac];Ct[104]=[Rt,ac];Ct[87]=[Rt,sc];Ct[119]=[Rt,sc];function lb(e,n,r){const s=this;let a,i;return o;function o(m){return!Ys(m)||!lc.call(s,s.previous)||ka(s.events)?r(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(m))}function l(m){return Ys(m)?(e.consume(m),l):m===64?(e.consume(m),d):r(m)}function d(m){return m===46?e.check(ib,u,c)(m):m===45||m===95||We(m)?(i=!0,e.consume(m),d):u(m)}function c(m){return e.consume(m),a=!0,d}function u(m){return i&&a&&Xe(s.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),n(m)):r(m)}}function cb(e,n,r){const s=this;return a;function a(o){return o!==87&&o!==119||!ic.call(s,s.previous)||ka(s.events)?r(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(ab,e.attempt(tc,e.attempt(nc,i),r),r)(o))}function i(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),n(o)}}function db(e,n,r){const s=this;let a="",i=!1;return o;function o(m){return(m===72||m===104)&&oc.call(s,s.previous)&&!ka(s.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(m),e.consume(m),l):r(m)}function l(m){if(Xe(m)&&a.length<5)return a+=String.fromCodePoint(m),e.consume(m),l;if(m===58){const p=a.toLowerCase();if(p==="http"||p==="https")return e.consume(m),d}return r(m)}function d(m){return m===47?(e.consume(m),i?c:(i=!0,d)):r(m)}function c(m){return m===null||Ar(m)||ke(m)||Qt(m)||Hr(m)?r(m):e.attempt(tc,e.attempt(nc,u),r)(m)}function u(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),n(m)}}function ub(e,n,r){let s=0;return a;function a(o){return(o===87||o===119)&&s<3?(s++,e.consume(o),a):o===46&&s===3?(e.consume(o),i):r(o)}function i(o){return o===null?r(o):n(o)}}function mb(e,n,r){let s,a,i;return o;function o(c){return c===46||c===95?e.check(rc,d,l)(c):c===null||ke(c)||Qt(c)||c!==45&&Hr(c)?d(c):(i=!0,e.consume(c),o)}function l(c){return c===95?s=!0:(a=s,s=void 0),e.consume(c),o}function d(c){return a||s||!i?r(c):n(c)}}function hb(e,n){let r=0,s=0;return a;function a(o){return o===40?(r++,e.consume(o),a):o===41&&s<r?i(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(rc,n,i)(o):o===null||ke(o)||Qt(o)?n(o):(e.consume(o),a)}function i(o){return o===41&&s++,e.consume(o),a}}function pb(e,n,r){return s;function s(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),s):l===38?(e.consume(l),i):l===93?(e.consume(l),a):l===60||l===null||ke(l)||Qt(l)?n(l):r(l)}function a(l){return l===null||l===40||l===91||ke(l)||Qt(l)?n(l):s(l)}function i(l){return Xe(l)?o(l):r(l)}function o(l){return l===59?(e.consume(l),s):Xe(l)?(e.consume(l),o):r(l)}}function fb(e,n,r){return s;function s(i){return e.consume(i),a}function a(i){return We(i)?r(i):n(i)}}function ic(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||ke(e)}function oc(e){return!Xe(e)}function lc(e){return!(e===47||Ys(e))}function Ys(e){return e===43||e===45||e===46||e===95||We(e)}function ka(e){let n=e.length,r=!1;for(;n--;){const s=e[n][1];if((s.type==="labelLink"||s.type==="labelImage")&&!s._balanced){r=!0;break}if(s._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}const xb={tokenize:kb,partial:!0};function gb(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:wb,continuation:{tokenize:vb},exit:Nb}},text:{91:{name:"gfmFootnoteCall",tokenize:jb},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:yb,resolveTo:bb}}}}function yb(e,n,r){const s=this;let a=s.events.length;const i=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let o;for(;a--;){const d=s.events[a][1];if(d.type==="labelImage"){o=d;break}if(d.type==="gfmFootnoteCall"||d.type==="labelLink"||d.type==="label"||d.type==="image"||d.type==="link")break}return l;function l(d){if(!o||!o._balanced)return r(d);const c=yt(s.sliceSerialize({start:o.end,end:s.now()}));return c.codePointAt(0)!==94||!i.includes(c.slice(1))?r(d):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),n(d))}}function bb(e,n){let r=e.length;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const s={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},l=[e[r+1],e[r+2],["enter",s,n],e[r+3],e[r+4],["enter",a,n],["exit",a,n],["enter",i,n],["enter",o,n],["exit",o,n],["exit",i,n],e[e.length-2],e[e.length-1],["exit",s,n]];return e.splice(r,e.length-r+1,...l),e}function jb(e,n,r){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i=0,o;return l;function l(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),d}function d(m){return m!==94?r(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",c)}function c(m){if(i>999||m===93&&!o||m===null||m===91||ke(m))return r(m);if(m===93){e.exit("chunkString");const p=e.exit("gfmFootnoteCallString");return a.includes(yt(s.sliceSerialize(p)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),n):r(m)}return ke(m)||(o=!0),i++,e.consume(m),m===92?u:c}function u(m){return m===91||m===92||m===93?(e.consume(m),i++,c):c(m)}}function wb(e,n,r){const s=this,a=s.parser.gfmFootnotes||(s.parser.gfmFootnotes=[]);let i,o=0,l;return d;function d(x){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(x){return x===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):r(x)}function u(x){if(o>999||x===93&&!l||x===null||x===91||ke(x))return r(x);if(x===93){e.exit("chunkString");const g=e.exit("gfmFootnoteDefinitionLabelString");return i=yt(s.sliceSerialize(g)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(x),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),p}return ke(x)||(l=!0),o++,e.consume(x),x===92?m:u}function m(x){return x===91||x===92||x===93?(e.consume(x),o++,u):u(x)}function p(x){return x===58?(e.enter("definitionMarker"),e.consume(x),e.exit("definitionMarker"),a.includes(i)||a.push(i),ye(e,h,"gfmFootnoteDefinitionWhitespace")):r(x)}function h(x){return n(x)}}function vb(e,n,r){return e.check(er,n,e.attempt(xb,n,r))}function Nb(e){e.exit("gfmFootnoteDefinition")}function kb(e,n,r){const s=this;return ye(e,a,"gfmFootnoteDefinitionIndent",5);function a(i){const o=s.events[s.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?n(i):r(i)}}function Sb(e){let r=(e||{}).singleTilde;const s={name:"strikethrough",tokenize:i,resolveAll:a};return r==null&&(r=!0),{text:{126:s},insideSpan:{null:[s]},attentionMarkers:{null:[126]}};function a(o,l){let d=-1;for(;++d<o.length;)if(o[d][0]==="enter"&&o[d][1].type==="strikethroughSequenceTemporary"&&o[d][1]._close){let c=d;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[d][1].end.offset-o[d][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[d][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[d][1].end)},m={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[d][1].start)},p=[["enter",u,l],["enter",o[c][1],l],["exit",o[c][1],l],["enter",m,l]],h=l.parser.constructs.insideSpan.null;h&&ot(p,p.length,0,qr(h,o.slice(c+1,d),l)),ot(p,p.length,0,[["exit",m,l],["enter",o[d][1],l],["exit",o[d][1],l],["exit",u,l]]),ot(o,c-1,d-c+3,p),d=c+p.length-2;break}}for(d=-1;++d<o.length;)o[d][1].type==="strikethroughSequenceTemporary"&&(o[d][1].type="data");return o}function i(o,l,d){const c=this.previous,u=this.events;let m=0;return p;function p(x){return c===126&&u[u.length-1][1].type!=="characterEscape"?d(x):(o.enter("strikethroughSequenceTemporary"),h(x))}function h(x){const g=xn(c);if(x===126)return m>1?d(x):(o.consume(x),m++,h);if(m<2&&!r)return d(x);const b=o.exit("strikethroughSequenceTemporary"),N=xn(x);return b._open=!N||N===2&&!!g,b._close=!g||g===2&&!!N,l(x)}}}class Cb{constructor(){this.map=[]}add(n,r,s){Ab(this,n,r,s)}consume(n){if(this.map.sort(function(i,o){return i[0]-o[0]}),this.map.length===0)return;let r=this.map.length;const s=[];for(;r>0;)r-=1,s.push(n.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),n.length=this.map[r][0];s.push(n.slice()),n.length=0;let a=s.pop();for(;a;){for(const i of a)n.push(i);a=s.pop()}this.map.length=0}}function Ab(e,n,r,s){let a=0;if(!(r===0&&s.length===0)){for(;a<e.map.length;){if(e.map[a][0]===n){e.map[a][1]+=r,e.map[a][2].push(...s);return}a+=1}e.map.push([n,r,s])}}function Eb(e,n){let r=!1;const s=[];for(;n<e.length;){const a=e[n];if(r){if(a[0]==="enter")a[1].type==="tableContent"&&s.push(e[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[n-1][1].type==="tableDelimiterMarker"){const i=s.length-1;s[i]=s[i]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(r=!0);n+=1}return s}function Tb(){return{flow:{null:{name:"table",tokenize:Pb,resolveAll:Db}}}}function Pb(e,n,r){const s=this;let a=0,i=0,o;return l;function l(w){let F=s.events.length-1;for(;F>-1;){const M=s.events[F][1].type;if(M==="lineEnding"||M==="linePrefix")F--;else break}const T=F>-1?s.events[F][1].type:null,R=T==="tableHead"||T==="tableRow"?C:d;return R===C&&s.parser.lazy[s.now().line]?r(w):R(w)}function d(w){return e.enter("tableHead"),e.enter("tableRow"),c(w)}function c(w){return w===124||(o=!0,i+=1),u(w)}function u(w){return w===null?r(w):ie(w)?i>1?(i=0,s.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(w),e.exit("lineEnding"),h):r(w):ge(w)?ye(e,u,"whitespace")(w):(i+=1,o&&(o=!1,a+=1),w===124?(e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),o=!0,u):(e.enter("data"),m(w)))}function m(w){return w===null||w===124||ke(w)?(e.exit("data"),u(w)):(e.consume(w),w===92?p:m)}function p(w){return w===92||w===124?(e.consume(w),m):m(w)}function h(w){return s.interrupt=!1,s.parser.lazy[s.now().line]?r(w):(e.enter("tableDelimiterRow"),o=!1,ge(w)?ye(e,x,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w):x(w))}function x(w){return w===45||w===58?b(w):w===124?(o=!0,e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),g):k(w)}function g(w){return ge(w)?ye(e,b,"whitespace")(w):b(w)}function b(w){return w===58?(i+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(w),e.exit("tableDelimiterMarker"),N):w===45?(i+=1,N(w)):w===null||ie(w)?E(w):k(w)}function N(w){return w===45?(e.enter("tableDelimiterFiller"),j(w)):k(w)}function j(w){return w===45?(e.consume(w),j):w===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(w),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(w))}function v(w){return ge(w)?ye(e,E,"whitespace")(w):E(w)}function E(w){return w===124?x(w):w===null||ie(w)?!o||a!==i?k(w):(e.exit("tableDelimiterRow"),e.exit("tableHead"),n(w)):k(w)}function k(w){return r(w)}function C(w){return e.enter("tableRow"),S(w)}function S(w){return w===124?(e.enter("tableCellDivider"),e.consume(w),e.exit("tableCellDivider"),S):w===null||ie(w)?(e.exit("tableRow"),n(w)):ge(w)?ye(e,S,"whitespace")(w):(e.enter("data"),y(w))}function y(w){return w===null||w===124||ke(w)?(e.exit("data"),S(w)):(e.consume(w),w===92?A:y)}function A(w){return w===92||w===124?(e.consume(w),y):y(w)}}function Db(e,n){let r=-1,s=!0,a=0,i=[0,0,0,0],o=[0,0,0,0],l=!1,d=0,c,u,m;const p=new Cb;for(;++r<e.length;){const h=e[r],x=h[1];h[0]==="enter"?x.type==="tableHead"?(l=!1,d!==0&&(zi(p,n,d,c,u),u=void 0,d=0),c={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},p.add(r,0,[["enter",c,n]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(s=!0,m=void 0,i=[0,0,0,0],o=[0,r+1,0,0],l&&(l=!1,u={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},p.add(r,0,[["enter",u,n]])),a=x.type==="tableDelimiterRow"?2:u?3:1):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(s=!1,o[2]===0&&(i[1]!==0&&(o[0]=o[1],m=mr(p,n,i,a,void 0,m),i=[0,0,0,0]),o[2]=r)):x.type==="tableCellDivider"&&(s?s=!1:(i[1]!==0&&(o[0]=o[1],m=mr(p,n,i,a,void 0,m)),i=o,o=[i[1],r,0,0])):x.type==="tableHead"?(l=!0,d=r):x.type==="tableRow"||x.type==="tableDelimiterRow"?(d=r,i[1]!==0?(o[0]=o[1],m=mr(p,n,i,a,r,m)):o[1]!==0&&(m=mr(p,n,o,a,r,m)),a=0):a&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=r)}for(d!==0&&zi(p,n,d,c,u),p.consume(n.events),r=-1;++r<n.events.length;){const h=n.events[r];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=Eb(n.events,r))}return e}function mr(e,n,r,s,a,i){const o=s===1?"tableHeader":s===2?"tableDelimiter":"tableData",l="tableContent";r[0]!==0&&(i.end=Object.assign({},an(n.events,r[0])),e.add(r[0],0,[["exit",i,n]]));const d=an(n.events,r[1]);if(i={type:o,start:Object.assign({},d),end:Object.assign({},d)},e.add(r[1],0,[["enter",i,n]]),r[2]!==0){const c=an(n.events,r[2]),u=an(n.events,r[3]),m={type:l,start:Object.assign({},c),end:Object.assign({},u)};if(e.add(r[2],0,[["enter",m,n]]),s!==2){const p=n.events[r[2]],h=n.events[r[3]];if(p[1].end=Object.assign({},h[1].end),p[1].type="chunkText",p[1].contentType="text",r[3]>r[2]+1){const x=r[2]+1,g=r[3]-r[2]-1;e.add(x,g,[])}}e.add(r[3]+1,0,[["exit",m,n]])}return a!==void 0&&(i.end=Object.assign({},an(n.events,a)),e.add(a,0,[["exit",i,n]]),i=void 0),i}function zi(e,n,r,s,a){const i=[],o=an(n.events,r);a&&(a.end=Object.assign({},o),i.push(["exit",a,n])),s.end=Object.assign({},o),i.push(["exit",s,n]),e.add(r+1,0,i)}function an(e,n){const r=e[n],s=r[0]==="enter"?"start":"end";return r[1][s]}const Ib={name:"tasklistCheck",tokenize:Fb};function Rb(){return{text:{91:Ib}}}function Fb(e,n,r){const s=this;return a;function a(d){return s.previous!==null||!s._gfmTasklistFirstContentOfListItem?r(d):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),i)}function i(d){return ke(d)?(e.enter("taskListCheckValueUnchecked"),e.consume(d),e.exit("taskListCheckValueUnchecked"),o):d===88||d===120?(e.enter("taskListCheckValueChecked"),e.consume(d),e.exit("taskListCheckValueChecked"),o):r(d)}function o(d){return d===93?(e.enter("taskListCheckMarker"),e.consume(d),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):r(d)}function l(d){return ie(d)?n(d):ge(d)?e.check({tokenize:Lb},n,r)(d):r(d)}}function Lb(e,n,r){return ye(e,s,"whitespace");function s(a){return a===null?r(a):n(a)}}function Ob(e){return bl([ob(),gb(),Sb(e),Tb(),Rb()])}const Mb={};function $i(e){const n=this,r=e||Mb,s=n.data(),a=s.micromarkExtensions||(s.micromarkExtensions=[]),i=s.fromMarkdownExtensions||(s.fromMarkdownExtensions=[]),o=s.toMarkdownExtensions||(s.toMarkdownExtensions=[]);a.push(Ob(r)),i.push(rb()),o.push(sb(r))}const Bi="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAAnACADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6Ky/EfiSx8K6Yb6/l8uLekUaDG6WRjtRFz3JPUkADJJABI+Kv2i/wBqrX/E+keKPBnhzTbaV01FNHvYrSaVbxSEaZ1TIXzEdYXjI2jKseoIYpuw0rn1rffGjwNpvjZPCF14o06DxI+Mae82HyQWCk9AxAJ2k5xziuzVgwBBBB5BFfi+PAPiPXfBOu+KbW1iHhrR7wWuoW8ocfZ5zMIsCEDYF3nHQsB1fcDX3Z/wT8+Il1q3gjUfCepy3Lz6XIJrETyiVRaSZeNFfJPyghdp6ADtihBY0P2yfHGri3TRvDOn3WrX2i251W6SxnSKWFpVeBHVjkfu4muJGU4PMJzgmvzf1bx3q/jDxc11qurX+o3kTW8P9pRTuJ28oqYfMeKVlEiBnPmMWPy85r9J/wBsT4b+GnHhzxde6Zch5tSGm6xe6dayzO1hJaXCkSrErMV3eUobHBK9OK+Ifi7+zDbXYv8AxP4AYeNPBFoxtAfJe3vNJiit2GyWOVQ5Csd2SBkIo75EtXZSdiO4Fz8QNC0iPS7TxFD4t1N1/tO0jmkk07V1MeRdeYD5STEjDZRn3OCMHLV95/sWfBW/+FXgO4l12wWz1m8neQqOqIzFgp9cZCg8ZCjgdB53+xr+zCdFsvCPxGupV0nXRZNa3tnZAC1vkLblkZMABxwMjHA6DNfaNUS2Rz28V1EY5o0ljPVHUMD+BridO+EGiaYPF8UKulr4m837XCpwB5ibG246cdPSiimI6Pwn4atvCHh+z0m0JNvbJsTd1xWvRRQB/9k=",cc=({artifact:e,onSaveToProject:n,onMoveToLogicStudio:r})=>!e||!e.content||e.content.trim().length===0?null:t.jsxs(De,{className:"my-4",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-semibold",children:e.filename}),t.jsx("span",{className:`text-sm px-2 py-1 rounded ${e.compilable?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:e.compilable?"Compilable":"Not Compilable"}),t.jsx("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.vendor})]}),t.jsxs("div",{className:"flex gap-2",children:[r&&t.jsx(J,{variant:"secondary",size:"sm",onClick:()=>r(e),children:"Open in Logic Studio"}),n&&t.jsx(J,{variant:"primary",size:"sm",onClick:()=>n(e),children:"Save to Project"})]})]}),t.jsx("pre",{className:"bg-gray-50 p-4 rounded overflow-x-auto",children:t.jsx("code",{className:"text-sm font-mono whitespace-pre",children:e.content})})]}),_b=({artifact:e})=>!e||!e.schema||e.schema.length===0||!e.rows||e.rows.length===0?null:t.jsxs(De,{className:"my-4",children:[t.jsx("div",{className:"mb-2",children:t.jsx("h3",{className:"text-lg font-semibold",children:e.title})}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:e.schema.map((n,r)=>t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n},r))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.rows.map((n,r)=>t.jsx("tr",{children:n.map((s,a)=>t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s},a))},r))})]})})]}),zb=({response:e,onSaveToProject:n,onMoveToLogicStudio:r,hideStatusAndTaskType:s=!1})=>e.artifacts.code.length>0||e.artifacts.tables.length>0||e.artifacts.diff||e.artifacts.reports&&e.artifacts.reports.length>0?t.jsxs("div",{className:"space-y-4",children:[!s&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("span",{className:`px-2 py-1 rounded text-sm ${e.status==="ok"?"bg-green-100 text-green-800":e.status==="needs_input"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.status.toUpperCase()}),t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm",children:e.task_type})]}),e.assumptions.length>0&&t.jsxs(De,{children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Assumptions"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.assumptions.map((i,o)=>t.jsx("li",{className:"text-sm text-gray-600",children:i},o))})]}),e.answer_md&&e.answer_md.trim()&&t.jsx(De,{children:t.jsx("div",{className:"prose max-w-none",children:t.jsx(gn,{children:e.answer_md})})}),e.artifacts.code.map((i,o)=>t.jsx(cc,{artifact:i,onSaveToProject:n,onMoveToLogicStudio:r},o)),e.artifacts.tables.map((i,o)=>t.jsx(_b,{artifact:i},o)),e.artifacts.reports&&e.artifacts.reports.map((i,o)=>t.jsxs(De,{children:[t.jsx("h3",{className:"font-semibold mb-2",children:i.title}),t.jsx("div",{className:"prose max-w-none",children:t.jsx(gn,{children:i.content_md})})]},o)),e.artifacts.anchors&&e.artifacts.anchors.length>0&&t.jsxs(De,{children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Document References"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.artifacts.anchors.map((i,o)=>t.jsxs("li",{className:"text-sm text-gray-600",children:[t.jsx("strong",{children:i.file}),i.page&&` (page ${i.page})`,": ",i.note]},o))})]}),e.artifacts.diff&&t.jsxs(De,{children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Changes"}),t.jsx("pre",{className:"bg-gray-50 p-4 rounded overflow-x-auto",children:t.jsx("code",{className:"text-sm font-mono whitespace-pre",children:e.artifacts.diff})})]}),e.artifacts.citations.length>0&&t.jsxs(De,{children:[t.jsx("h3",{className:"font-semibold mb-2",children:"References"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.artifacts.citations.map((i,o)=>t.jsx("li",{className:"text-sm text-gray-600",children:i},o))})]}),e.next_actions.length>0&&t.jsxs(De,{children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Next Steps"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.next_actions.map((i,o)=>t.jsx("li",{className:"text-sm text-gray-600",children:i},o))})]}),e.processed_files&&e.processed_files.length>0&&t.jsxs(De,{children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Processed Files"}),t.jsx("div",{className:"space-y-2",children:e.processed_files.map((i,o)=>t.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-sm",children:i.filename}),t.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",(i.size/1024).toFixed(1)," KB)"]})]}),t.jsxs("div",{className:"flex gap-2 text-xs",children:[t.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded",children:i.type}),i.extracted_data_available&&t.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded",children:"Data Extracted"})]})]},o))})]}),e.errors.length>0&&t.jsxs(De,{className:"border-red-200 bg-red-50",children:[t.jsx("h3",{className:"font-semibold mb-2 text-red-800",children:"Errors"}),t.jsx("ul",{className:"list-disc list-inside space-y-1",children:e.errors.map((i,o)=>t.jsx("li",{className:"text-sm text-red-600",children:i},o))})]})]}):null,Dr=e=>({id:e.id,name:e.projectName||e.project_name||"",client:e.clientName||e.client_name||"N/A",vendor:e.targetPLCVendor||e.target_plc_vendor||"N/A",type:e.projectType||e.project_type||"",lastModified:e.updatedAt||e.updated_at||"",description:e.description||"",status:"active",versions:[],recentActivity:[]}),Re=we.create({baseURL:`${Kt.apiBaseUrl}/api/v1`,timeout:1e4}),$b=()=>{const e=fe.getToken();return e?(console.log("ProjectsAPI: Found auth token:",e?`${e.substring(0,20)}...`:"null"),e):(console.warn("ProjectsAPI: No authentication token found. User may not be logged in."),null)};Re.interceptors.request.use(e=>{const n=$b();return n?(e.headers.Authorization=`Bearer ${n}`,console.log("ProjectsAPI interceptor - Added Authorization header")):console.warn("ProjectsAPI interceptor - No token available for request to:",e.url),e},e=>(console.error("ProjectsAPI request interceptor error:",e),Promise.reject(e)));Re.interceptors.response.use(e=>(console.log("ProjectsAPI Response:",{url:e.config.url,status:e.status,data:e.data}),e),e=>{throw console.error("Projects API Error:",{url:e.config?.url,status:e.response?.status,statusText:e.response?.statusText,data:e.response?.data,message:e.message}),e});class Ae{static async createProject(n){try{const r=await Re.post("/projects",n);if(!r.data.success||!r.data.project)throw new Error(r.data.message||"Failed to create project");return r.data.project}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async getProjects(){try{const n=await Re.get("/projects");if(!n.data.success)throw new Error(n.data.message||"Failed to fetch projects");return n.data.projects||[]}catch(n){throw console.error("ProjectsAPI.getProjects error:",n.response?.data||n.message),n.response?.status===401?new Error("Your session has expired. Please log in again."):n.response?.status===403?new Error("Access denied. Please check your permissions."):n.response?.data?.error?new Error(n.response.data.error):n}}static async getProject(n){try{const r=await Re.get(`/projects/${n}`);if(!r.data.success||!r.data.project)throw new Error(r.data.message||"Project not found");return r.data.project}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async updateProject(n,r){try{const s=await Re.patch(`/projects/${n}`,r);if(!s.data.success||!s.data.project)throw new Error(s.data.message||"Failed to update project");return s.data.project}catch(s){throw s.response?.data?.error?new Error(s.response.data.error):s}}static async autosaveProject(n,r){try{const s=await Re.put(`/projects/${n}/autosave`,{autosaveState:r});if(!s.data.success)throw new Error(s.data.message||"Auto-save failed")}catch(s){console.error("Auto-save failed:",s.response?.data?.error||s.message)}}static async saveProject(n,r){try{const s=await Re.put(`/projects/${n}/save`,{state:r});if(!s.data.success)throw new Error(s.data.message||"Save failed")}catch(s){throw s.response?.data?.error?new Error(s.response.data.error):s}}static async deleteProject(n){try{const r=await Re.delete(`/projects/${n}`);if(!r.data.success)throw new Error(r.data.message||"Failed to delete project")}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async checkProjectOwnership(n){try{const r=await Re.get(`/projects/${n}/ownership`);return r.data.success&&r.data.isOwner||!1}catch(r){return console.error("Ownership check failed:",r.response?.data?.error||r.message),!1}}static async getVersionHistory(n){try{return(await Re.get(`/projects/${n}/versions`)).data.versions||[]}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async createVersion(n,r){try{console.log("ProjectsAPI: Creating version for project",n,"with data:",r);const s=await Re.post(`/projects/${n}/create-version`,r);if(console.log("ProjectsAPI: Create version response:",s.data),!s.data.success)throw new Error("Failed to create version");return s.data.versionId}catch(s){throw console.error("ProjectsAPI: Error creating version:",s),console.error("ProjectsAPI: Error response:",s.response?.data),s.response?.data?.error?new Error(s.response.data.error):s}}static async getVersion(n,r){try{console.log("ProjectsAPI: Getting full version data for project",n,"version",r);const s=await Re.get(`/projects/${n}/version/${r}`);if(!s.data.success)throw new Error("Failed to get version data");const a=s.data.data;return console.log("ProjectsAPI: Retrieved version data:",a),a}catch(s){throw console.error("ProjectsAPI: Error getting version data:",s),s.response?.data?.error?new Error(s.response.data.error):s}}static async rollbackToVersion(n,r){try{console.log("ProjectsAPI: Rolling back project",n,"to version",r);const s=await Re.post(`/projects/${n}/version/${r}/rollback`);if(console.log("ProjectsAPI: Rollback response:",s.data),!s.data.success)throw new Error("Failed to rollback to version");return{rolledBackTo:s.data.rolledBackTo,newVersion:s.data.newVersion}}catch(s){throw console.error("ProjectsAPI: Error rolling back:",s),console.error("ProjectsAPI: Error response:",s.response?.data),s.response?.data?.error?new Error(s.response.data.error):s}}static async createVersionSnapshot(n,r,s=!1){try{const a=await Re.post(`/projects/${n}/version`,{message:r,isAuto:s});if(!a.data.success)throw new Error("Failed to create version snapshot");return a.data.version}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async getVersionSnapshot(n,r){try{const s=await Re.get(`/projects/${n}/version/${r}`);if(!s.data.success)throw new Error("Failed to get version snapshot");return s.data.data}catch(s){throw s.response?.data?.error?new Error(s.response.data.error):s}}static async createAutoSaveVersion(n,r){try{if(!(await Re.post(`/projects/${n}/auto-save`,{state:r})).data.success)throw new Error("Auto-save version creation failed")}catch(s){console.error("Auto-save version creation failed:",s.response?.data?.error||s.message)}}static async getLatestAutoSave(n){try{return(await Re.get(`/projects/${n}/auto-save`)).data}catch(r){return console.error("Failed to get latest auto-save:",r.response?.data?.error||r.message),null}}static async deleteVersion(n,r){try{if(!(await Re.delete(`/projects/${n}/version/${r}`)).data.success)throw new Error("Failed to delete version")}catch(s){throw s.response?.data?.error?new Error(s.response.data.error):s}}static async getLogicStudio(n){try{const r=await Re.get(`/projects/${n}/logic-studio`);if(!r.data.success)throw new Error("Failed to get Logic Studio state");return r.data.data}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async updateLogicStudio(n,r){try{const s=await Re.post(`/projects/${n}/logic-studio`,r);if(!s.data.success)throw new Error("Failed to update Logic Studio state");return s.data.data}catch(s){throw s.response?.data?.error?new Error(s.response.data.error):s}}static async updateLogicStudioCode(n,r){try{if(!(await Re.put(`/projects/${n}/logic-studio/code`,{code:r})).data.success)throw new Error("Failed to update Logic Studio code")}catch(s){throw s.response?.data?.error?new Error(s.response.data.error):s}}static async deleteLogicStudio(n){try{if(!(await Re.delete(`/projects/${n}/logic-studio`)).data.success)throw new Error("Failed to delete Logic Studio state")}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}}function nr({projectId:e,autoCreateVersions:n=!0,versionInterval:r=300*1e3}){const[s,a]=f.useState([]),[i,o]=f.useState(!1),[l,d]=f.useState(null),[c,u]=f.useState(null),{showToast:m}=St(),p=f.useCallback(async()=>{if(!e){console.log("useVersionControl: No project ID provided");return}console.log("useVersionControl: Loading version history for project",e),o(!0),d(null);try{const v=await Ae.getVersionHistory(e);if(console.log("useVersionControl: Loaded version history:",v),a(v),v.length>0){const E=v[0];u(new Date(E.snapshot_info.timestamp*1e3)),console.log("useVersionControl: Latest version time set:",E.snapshot_info.timestamp)}}catch(v){const E=v.message||"Failed to load version history";d(E),console.error("useVersionControl: Failed to load version history:",v)}finally{o(!1)}},[e]),h=f.useCallback(async(v,E)=>{if(!e)throw new Error("No project ID provided");try{d(null);let k=E;if(!k){console.log("useVersionControl: No state provided, capturing current state...");let y=null;const A=w=>{const F=w,{projectId:T,module:R,state:M}=F.detail;T===e&&R==="LogicStudio"&&(y=M)};window.addEventListener("pandaura:current-state-response",A),window.dispatchEvent(new CustomEvent("pandaura:get-current-state",{detail:{projectId:e}})),await new Promise(w=>setTimeout(w,200)),window.removeEventListener("pandaura:current-state-response",A),k=y||{module:"LogicStudio",lastActivity:new Date().toISOString(),timestamp:Date.now()}}console.log("useVersionControl: Creating version with state:",k),console.log("useVersionControl: Creating version with message:",v);const C={state:k,message:v||`Manual save - ${new Date().toLocaleString()}`};console.log("useVersionControl: Sending version data:",C);const S=await Ae.createVersion(e,C);return console.log("useVersionControl: Version created successfully:",S),await p(),S}catch(k){throw console.error("useVersionControl: Error creating version:",k),d(k.message||"Failed to create version"),m({variant:"error",title:"Save Failed",message:k.message||"Failed to create version",duration:5e3}),k}},[e,p,m]),x=f.useCallback(async v=>{if(!e)throw new Error("No project ID provided");try{d(null),console.log("useVersionControl: Capturing current state before rollback...");let E=null;const k=S=>{const y=S,{projectId:A,module:w,state:F}=y.detail;A===e&&w==="LogicStudio"&&(E=F)};window.addEventListener("pandaura:current-state-response",k),window.dispatchEvent(new CustomEvent("pandaura:get-current-state",{detail:{projectId:e}})),await new Promise(S=>setTimeout(S,200)),window.removeEventListener("pandaura:current-state-response",k);try{const S=await h(`Current state before rollback to version ${v}`,E||{module:"LogicStudio",lastActivity:new Date().toISOString(),timestamp:Date.now()});console.log("useVersionControl: Current state saved as version",S)}catch(S){console.warn("useVersionControl: Failed to save current state before rollback:",S)}const C=await Ae.rollbackToVersion(e,v);console.log(`Enhanced rollback completed: rolled back to version ${C.rolledBackTo}, created new version ${C.newVersion}`),m({variant:"success",title:"Rollback Successful",message:`Rolled back to version ${C.rolledBackTo}. Your previous work was saved. New version ${C.newVersion} created.`,duration:5e3}),await p(),window.dispatchEvent(new CustomEvent("pandaura:project-rollback",{detail:{projectId:e,targetVersion:v,rolledBackTo:C.rolledBackTo,newVersion:C.newVersion,timestamp:Date.now()}})),window.dispatchEvent(new CustomEvent("pandaura:project-state-changed",{detail:{projectId:e,action:"rollback",targetVersion:C.rolledBackTo,newVersion:C.newVersion}}))}catch(E){throw d(E.message||"Failed to rollback to version"),m({variant:"error",title:"Rollback Failed",message:E.message||"Failed to rollback to version",duration:5e3}),E}},[e,p,m,h]),g=f.useCallback(async v=>{if(!e)throw new Error("No project ID provided");try{return await Ae.getVersion(e,v)}catch(E){throw d(E.message||"Failed to get version data"),E}},[e]),b=f.useCallback(async(v,E)=>{if(!(!e||!n)){if(c&&Date.now()-c.getTime()<r){console.log("Skipping auto-version: too soon since last version");return}try{await Ae.createAutoSaveVersion(e,v),console.log("Auto-version created:",E||"Automatic save"),u(new Date)}catch(k){console.error("Failed to create auto-version:",k)}}},[e,n,r,c]),N=f.useCallback(()=>c?Date.now()-c.getTime()>=r:!0,[c,r]);f.useEffect(()=>{console.log("useVersionControl: useEffect triggered with projectId:",e),e&&e>0?(console.log("useVersionControl: Calling refreshVersions for project:",e),p()):(console.log("useVersionControl: No valid projectId, skipping version load"),a([]))},[e,p]);const j=f.useCallback(async v=>{if(!e)throw new Error("No project ID provided");try{d(null),await Ae.deleteVersion(e,v),await p(),window.dispatchEvent(new CustomEvent("pandaura:version-deleted",{detail:{projectId:e,versionNumber:v,timestamp:Date.now()}}))}catch(E){throw d(E.message||"Failed to delete version"),E}},[e,p]);return{versions:s,isLoading:i,error:l,createVersion:h,rollbackToVersion:x,deleteVersion:j,getVersionData:g,refreshVersions:p,triggerAutoVersion:b,lastVersionTime:c,canCreateVersion:N()}}function Bb(e,n=3e4){const[r,s]=f.useState(null),[a,i]=f.useState(!0),[o,l]=f.useState(null),[d,c]=f.useState(!1),[u,m]=f.useState(null),p=async()=>{try{console.log(`useProject: Loading project ${e}...`),l(null);const N=await Ae.getProject(e);console.log(`useProject: Project ${e} loaded successfully:`,N);const j=Dr(N);s(j)}catch(N){console.error("Failed to load project:",N);let j="Failed to load project";N.code==="ERR_NETWORK"?j="Cannot connect to server. Please check if the backend is running on port 5000.":N.code==="ERR_INSUFFICIENT_RESOURCES"?j="Server resource error. Please try refreshing the page or restart the backend.":N.response?.status===404?j=`Project with ID ${e} not found.`:N.response?.status===401?j="Your session has expired. Please log in again.":N.message&&(j=N.message),l(j)}finally{i(!1)}},h=async N=>{if(!r)return;const j=await Ae.updateProject(r.id,N),v=Dr(j);s(v),c(!1),m(new Date)},x=async N=>{if(r)try{await Ae.autosaveProject(r.id,N),m(new Date)}catch(j){console.error("Auto-save failed:",j)}},g=async N=>{r&&(await Ae.saveProject(r.id,N),c(!1),m(new Date))},b=()=>c(!0);return f.useEffect(()=>{e&&e>0&&p()},[e]),{project:r,isLoading:a,error:o,isDirty:d,lastSaved:u,updateProject:h,autosave:x,save:g,markDirty:b,reload:p}}function dc(e,n={}){const[r,s]=f.useState(n),[a,i]=f.useState(!1),[o,l]=f.useState(null),[d,c]=f.useState(null),[u,m]=f.useState(!1),p=f.useRef(null),h=f.useRef(null),x=f.useRef(0),g=3,b=f.useRef(0),{triggerAutoVersion:N,createVersion:j}=nr({projectId:e??-1,autoCreateVersions:!0,versionInterval:600*1e3}),v=f.useCallback((w,F)=>JSON.stringify(w)!==JSON.stringify(F),[]),E=f.useCallback(async(w,F=!1)=>{if(!e||!v(w,p.current))return!0;i(!0),c(null);try{if(F?await Ae.saveProject(e,{autosaveState:w}):await Ae.autosaveProject(e,w),p.current=structuredClone(w),l(new Date),m(!1),x.current=0,F)try{await j(`Manual save - ${new Date().toLocaleString()}`,w),console.log("Manual version created successfully")}catch(T){console.error("Failed to create manual version:",T)}else if(b.current++,b.current>=10)try{await N(w,`Auto-version after ${b.current} changes`),b.current=0}catch(T){console.error("Failed to create auto-version:",T)}return!0}catch(T){const R=T.response?.data?.error||T.message||"Auto-save failed";if(console.error("Auto-save failed:",R),x.current<g&&!F){x.current++,console.log(`Retrying auto-save (attempt ${x.current}/${g})`);const M=Math.pow(2,x.current)*1e3;setTimeout(()=>E(w,!1),M)}else{c(R);try{const M=`pandaura_project_${e}_fallback`;localStorage.setItem(M,JSON.stringify({state:w,timestamp:Date.now(),projectId:e})),console.log("State cached to localStorage as fallback")}catch(M){console.error("Failed to cache state to localStorage:",M)}}return!1}finally{i(!1)}},[e,v]),k=f.useCallback(w=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{E(w,!1)},2e3)},[E]),C=f.useCallback(w=>{s(F=>{const T=typeof w=="function"?w(F):{...F,...w};return v(T,p.current)&&(m(!0),k(T)),T})},[v,k]),S=f.useCallback(async()=>await E(r,!0),[E,r]),y=f.useCallback(async w=>{if(!e)return!1;try{const F=await E(r,!1);return F&&(await j(w,r),console.log("Manual version created with message:",w)),F}catch(F){return console.error("Failed to save with message:",F),!1}},[e,E,r,j]),A=f.useCallback(()=>{try{const w=`pandaura_project_${e}_fallback`,F=localStorage.getItem(w);if(F){const{state:T,timestamp:R}=JSON.parse(F);Date.now()-R<3600*1e3&&(console.log("Loaded fallback state from localStorage"),s(T),m(!0),E(T,!1)),localStorage.removeItem(w)}}catch(w){console.error("Failed to load fallback state:",w)}},[e,E]);return f.useEffect(()=>{e&&A()},[e,A]),f.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]),{projectState:r,updateProjectState:C,isSaving:a,lastSaved:o,saveError:d,hasUnsavedChanges:u,saveNow:S,saveWithMessage:y,loadFallbackState:A}}function uc({isSaving:e,lastSaved:n,saveError:r,hasUnsavedChanges:s,onManualSave:a,className:i=""}){const o=u=>{if(!u)return"Never saved";const p=new Date().getTime()-u.getTime(),h=Math.floor(p/1e3),x=Math.floor(h/60),g=Math.floor(x/60);return h<60?"Saved just now":x<60?`Saved ${x}m ago`:g<24?`Saved ${g}h ago`:`Saved on ${u.toLocaleDateString()}`},l=()=>e?t.jsx(wo,{className:"w-4 h-4 animate-spin text-blue-500"}):r?t.jsx(ze,{className:"w-4 h-4 text-red-500"}):s?t.jsx(It,{className:"w-4 h-4 text-yellow-500"}):t.jsx(et,{className:"w-4 h-4 text-green-500"}),d=()=>e?"Saving...":r?"Save failed":s?"Unsaved changes":o(n),c=()=>e?"text-blue-600":r?"text-red-600":s?"text-yellow-600":"text-green-600";return t.jsxs("div",{className:`flex items-center gap-2 ${i}`,children:[l(),t.jsx("span",{className:`text-sm ${c()}`,children:d()}),r&&t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("span",{className:"text-xs text-red-500",title:r,children:["(",r,")"]}),a&&t.jsx("button",{onClick:a,className:"text-xs text-blue-600 hover:text-blue-800 underline",title:"Retry save",children:"Retry"})]}),s&&a&&!e&&t.jsxs("button",{onClick:a,className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",title:"Save now",children:[t.jsx(Dt,{className:"w-3 h-3"}),"Save"]})]})}const Ub="https://pandaura-backend-production.up.railway.app";class on{static instance;baseUrl;constructor(){this.baseUrl=`${Ub}/api/assistant`}static getInstance(){return on.instance||(on.instance=new on),on.instance}async handleResponse(n){if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.error||`HTTP error! status: ${n.status}`)}return n.json()}async checkHealth(){const n=await fetch(`${this.baseUrl}/health`);return this.handleResponse(n)}async ping(){const n=await fetch(`${this.baseUrl}/health/ping`);return this.handleResponse(n)}async warmupModel(){const n=await fetch(`${this.baseUrl}/warmup`,{method:"POST"});return this.handleResponse(n)}async testConnection(){const n=await fetch(`${this.baseUrl}/test`,{method:"POST"});return this.handleResponse(n)}async testFormat(n){const r=await fetch(`${this.baseUrl}/test-format`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:n})});return this.handleResponse(r)}async clearMemory(n){const r=await fetch(`${this.baseUrl}/clear-memory`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:n})});return this.handleResponse(r)}async clearSession(n){const r=await fetch(`${this.baseUrl}/clearSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:n})});return this.handleResponse(r)}async sendMessage(n){if(n.stream)throw new Error("Use sendStreamingMessage for streaming requests");const r=await fetch(`${this.baseUrl}/wrapperA`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return this.handleResponse(r)}async sendStreamingMessage(n,r){const s=await fetch(`${this.baseUrl}/wrapperA`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream","Cache-Control":"no-cache"},body:JSON.stringify({...n,stream:!0})});if(!s.ok){const l=await s.json().catch(()=>({}));throw new Error(l.error||`HTTP error! status: ${s.status}`)}const a=s.body?.getReader();if(!a)throw new Error("Response body is not readable");const i=new TextDecoder;let o="";for(;;){const{done:l,value:d}=await a.read();if(l)break;const u=i.decode(d).split(`
`);for(const m of u)if(m.startsWith("data: "))try{const p=JSON.parse(m.slice(6));if(r(p),p.type==="chunk"&&p.content)o+=p.content;else if(p.type==="complete"&&p.answer){if(o=p.answer,typeof p.fullResponse=="object"&&p.fullResponse){const h=new CustomEvent("streamComplete",{detail:{fullResponse:p.fullResponse}});window.dispatchEvent(h)}}else if(p.type!=="end"){if(p.type==="error")throw new Error(p.error||"Streaming error")}}catch{}}return o}async sendWrapperBStreamingMessage(n,r){const s=new FormData;s.append("prompt",n.prompt),n.projectId&&s.append("projectId",n.projectId),n.sessionId&&s.append("sessionId",n.sessionId),s.append("stream","true"),n.files&&n.files.length>0&&n.files.forEach(d=>{s.append("files",d)});const a=await fetch(`${this.baseUrl}/wrapperB`,{method:"POST",headers:{Accept:"text/event-stream","Cache-Control":"no-cache"},body:s});if(!a.ok){const d=await a.json().catch(()=>({}));throw new Error(d.error||`HTTP error! status: ${a.status}`)}const i=a.body?.getReader();if(!i)throw new Error("Response body is not readable");const o=new TextDecoder;let l="";for(;;){const{done:d,value:c}=await i.read();if(d)break;const m=o.decode(c).split(`
`);for(const p of m)if(p.startsWith("data: "))try{const h=JSON.parse(p.slice(6));if(r(h),h.type==="chunk"&&h.content)l+=h.content;else if(h.type==="complete"&&h.answer){if(l=h.answer,typeof h.fullResponse=="object"&&h.fullResponse){const x=new CustomEvent("streamComplete",{detail:{fullResponse:h.fullResponse}});window.dispatchEvent(x)}}else if(h.type!=="end"){if(h.type==="error")throw new Error(h.error||"Streaming error")}}catch{}}return l}async uploadAndAnalyzeDocuments(n){const r=new FormData;r.append("prompt",n.prompt),n.projectId&&r.append("projectId",n.projectId),n.sessionId&&r.append("sessionId",n.sessionId),n.files&&n.files.length>0&&n.files.forEach(a=>{r.append("document",a)});const s=await fetch(`${this.baseUrl}/wrapperA`,{method:"POST",body:r});return this.handleResponse(s)}async analyzeDocument(n,r){const s=new FormData;s.append("document",n),s.append("prompt",r);const a=await fetch(`${this.baseUrl}/analyze-document`,{method:"POST",body:s});return this.handleResponse(a)}async uploadAndAnalyzeImages(n){const r=new FormData;r.append("prompt",n.prompt),n.projectId&&r.append("projectId",n.projectId),n.sessionId&&r.append("sessionId",n.sessionId),n.images.forEach(a=>{r.append("image",a)});const s=await fetch(`${this.baseUrl}/wrapperA`,{method:"POST",body:r});return this.handleResponse(s)}async analyzeImage(n,r){const s=new FormData;s.append("image",n),s.append("prompt",r);const a=await fetch(`${this.baseUrl}/analyze-image`,{method:"POST",body:s});return this.handleResponse(a)}async analyzeDocumentsWithWrapperB(n){const r=new FormData;r.append("prompt",n.prompt),n.projectId&&r.append("projectId",n.projectId),n.sessionId&&r.append("sessionId",n.sessionId),n.files&&n.files.length>0&&n.files.forEach(a=>{r.append("files",a)});const s=await fetch(`${this.baseUrl}/wrapperB`,{method:"POST",body:r});return this.handleResponse(s)}async sendWrapperBMessage(n){const r=new FormData;r.append("prompt",n.prompt),n.projectId&&r.append("projectId",n.projectId),n.sessionId&&r.append("sessionId",n.sessionId),n.files&&n.files.length>0&&n.files.forEach(a=>{r.append("files",a)});const s=await fetch(`${this.baseUrl}/wrapperB`,{method:"POST",body:r});return this.handleResponse(s)}async sendWrapperCMessage(n){if(n.stream)throw new Error("Use sendWrapperCStreamingMessage for streaming requests");const r=new FormData;r.append("prompt",n.prompt),n.projectId&&r.append("projectId",n.projectId),n.sessionId&&r.append("sessionId",n.sessionId),n.stream!==void 0&&r.append("stream",n.stream.toString()),n.files&&n.files.length>0&&n.files.forEach(a=>{r.append("files",a)});const s=await fetch(`${this.baseUrl}/wrapperC`,{method:"POST",body:r});return this.handleResponse(s)}async sendWrapperCStreamingMessage(n,r){const s=new FormData;s.append("prompt",n.prompt),n.projectId&&s.append("projectId",n.projectId),n.sessionId&&s.append("sessionId",n.sessionId),s.append("stream","true"),n.files&&n.files.length>0&&n.files.forEach(d=>{s.append("files",d)});const a=await fetch(`${this.baseUrl}/wrapperC`,{method:"POST",headers:{Accept:"text/event-stream","Cache-Control":"no-cache"},body:s});if(!a.ok){const d=await a.json().catch(()=>({}));throw new Error(d.error||`HTTP error! status: ${a.status}`)}const i=a.body?.getReader();if(!i)throw new Error("Response body is not readable");const o=new TextDecoder;let l="";for(;;){const{done:d,value:c}=await i.read();if(d)break;const m=o.decode(c).split(`
`);for(const p of m)if(p.startsWith("data: "))try{const h=JSON.parse(p.slice(6));if(r(h),h.type==="chunk"&&h.content)l+=h.content;else if(h.type==="complete"&&h.answer){if(l=h.answer,typeof h.fullResponse=="object"&&h.fullResponse){const x=new CustomEvent("streamComplete",{detail:{fullResponse:h.fullResponse}});window.dispatchEvent(x)}}else if(h.type!=="end"){if(h.type==="error")throw new Error(h.error||"Streaming error")}}catch{}}return l}async uploadImage(n){const r=new FormData;r.append("image",n);const s=await fetch(`${this.baseUrl}/upload-image`,{method:"POST",body:r});return this.handleResponse(s)}formatResponse(n){let r=n.answer_md;r=r.replace(/Next step → (.+)/gi,`

### Next Step

$1`),n.assumptions&&n.assumptions.length>0&&(r=`**Assumptions:**
${n.assumptions.map(a=>`- ${a}`).join(`
`)}

${r}`);const s=n.artifacts.code&&n.artifacts.code.length>0||n.artifacts.tables&&n.artifacts.tables.length>0||n.artifacts.diff||n.artifacts.reports&&n.artifacts.reports.length>0;return n.next_actions&&n.next_actions.length>0&&s&&(r+=`

**Next Steps:**
${n.next_actions.map(a=>`- ${a}`).join(`
`)}`),n.errors&&n.errors.length>0&&(r+=`

**Errors:**
${n.errors.map(a=>`- ${a}`).join(`
`)}`),r}generateConversationTitle(n){let s=n.trim().split(`
`)[0].slice(0,50);return n.length>50&&(s+="..."),s}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}isFileSupported(n,r="A"){const s=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],a=["text/xml","application/xml","text/plain","application/zip","application/pdf","text/plain","text/csv","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"],i=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/xml","application/xml","application/zip"];let o;if(r==="A"?o=s:r==="B"?o=a:o=i,r==="B"){const l=n.name.toLowerCase().split(".").pop();if(["xml","l5x","ap11","tsproj","st","zip"].includes(l||""))return!0}return o.includes(n.type)}getFileTypeCategory(n,r="A"){const s=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/bmp","image/tiff"],a=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"];if(r==="B"){const i=n.name.toLowerCase().split(".").pop();if(["xml","l5x","ap11","tsproj","st","zip"].includes(i||"")||n.type==="text/xml"||n.type==="application/xml"||n.type==="application/zip")return"plc"}return s.includes(n.type)?"image":a.includes(n.type)?"document":"unsupported"}}const de=on.getInstance();function mc({sessionId:e,onSessionCleared:n,className:r=""}){const[s,a]=f.useState(!1),[i,o]=f.useState({sessionsCount:0}),[l,d]=f.useState(!1),c=async()=>{try{d(!0);const m=await de.checkHealth();o({sessionsCount:m.memory_sessions||0,currentSessionId:e,lastActivity:new Date})}catch(m){console.error("Failed to refresh memory stats:",m)}finally{d(!1)}},u=async()=>{if(e)try{a(!0),await de.clearMemory(e),await c(),n&&n()}catch(m){console.error("Failed to clear memory:",m)}finally{a(!1)}};return Ge.useEffect(()=>{e&&c()},[e]),e?t.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 ${r}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Mt,{className:"w-5 h-5 text-blue-600"}),t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Conversation Memory"})]}),t.jsx("button",{onClick:c,disabled:l,className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Refresh memory statistics",children:t.jsx(Ue,{className:`w-4 h-4 text-gray-600 ${l?"animate-spin":""}`})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{className:"bg-blue-50 p-3 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(pn,{className:"w-4 h-4 text-blue-600"}),t.jsx("span",{className:"text-blue-600 font-medium",children:"Active Sessions"})]}),t.jsx("p",{className:"text-lg font-bold text-blue-800",children:i.sessionsCount})]}),t.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx(It,{className:"w-4 h-4 text-green-600"}),t.jsx("span",{className:"text-green-600 font-medium",children:"Last Update"})]}),t.jsx("p",{className:"text-xs text-green-800",children:i.lastActivity?i.lastActivity.toLocaleTimeString():"Not available"})]})]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Current Session ID:"}),t.jsx("p",{className:"text-xs font-mono text-gray-800 break-all",children:e})]}),t.jsx("div",{className:"flex gap-2",children:t.jsxs("button",{onClick:u,disabled:s,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-50 text-red-700 border border-red-200 rounded hover:bg-red-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[s?t.jsx(Ue,{className:"w-4 h-4 animate-spin"}):t.jsx(bn,{className:"w-4 h-4"}),s?"Clearing...":"Clear Memory"]})}),t.jsxs("div",{className:"text-xs text-gray-500 border-t pt-3",children:[t.jsx("p",{className:"mb-1",children:"• Memory automatically expires after 30 minutes of inactivity"}),t.jsx("p",{className:"mb-1",children:"• Keeps last 20 messages to prevent context overflow"}),t.jsx("p",{children:"• Memory is not persistent across server restarts"})]})]})]}):null}function Ui(e){const n=[],r=/\|(.+)\|\s*\n\|(\s*[-:]+\s*\|.*)\|\s*\n((?:\|.*\|\s*\n?)*)/gm;let s,a=0;for(;(s=r.exec(e))!==null;){const[i,o,l,d]=s,c=o.split("|").map(m=>m.trim()).filter(m=>m.length>0),u=[];if(d.trim()){const m=d.trim().split(`
`);for(const p of m)if(p.trim()&&p.includes("|")){const h=p.split("|").map(x=>x.trim()).filter((x,g,b)=>g>0&&g<b.length-1);h.length>0&&u.push(h)}}c.length>0&&u.length>0&&(n.push({title:`Extracted Table ${a+1}`,schema:c,rows:u}),a++)}return n}function ys(e){const n=/\|(.+)\|\s*\n\|(\s*[-:]+\s*\|.*)\|\s*\n((?:\|.*\|\s*\n?)*)/gm;return e.replace(n,"").trim()}function Vi(e){const n=[],r=e.match(/Citations:\s*(.*?)(?:\n\n|$)/s);if(r){const a=r[1].trim().split(/[,;]/).map(i=>i.trim()).filter(i=>i.length>0);n.push(...a)}return n}function Hi(e){return e.replace(/Citations:\s*(.*?)(?=\n\n|\n?$)/s,"").trim()}function qi(e){const n=[],r=e.match(/Processed Files\s*(.*?)(?:\n\n|$)/s);if(r){const a=r[1].matchAll(/([^\s\(]+)\(([^)]+)\)\s*([^\s]+)/g);for(const i of a){const[,o,l,d]=i,c=parseFloat(l.replace(/[^\d.]/g,""));n.push({filename:o,type:d,size:c})}}return n}function Wi(e){return e.replace(/Processed Files\s*(.*?)(?=\n\n|\n?$)/s,"").trim()}function bs({sessionMode:e=!1}){const{getModuleState:n,saveModuleState:r}=na();He();const{projectId:s}=Wn(),a=f.useRef(null),i=(_,Q)=>{if(!_)return _;let me=_;return me=me.replace(/Next step[→:\-] .*/gi,"").replace(/Next step → .*/gi,"").trim(),Q&&Q.wrapperType==="B"&&Q.artifacts&&Q.artifacts.tables&&Q.artifacts.tables.length>0&&(me=ys(me)),me},o=n("AskPandaura"),[l,d]=f.useState(o.chatMessage||""),[c,u]=f.useState(!1),[m,p]=f.useState(!1),[h,x]=f.useState(!1),[g,b]=f.useState(o.currentConversation||null),[N,j]=f.useState(o.conversations||[]),[v,E]=f.useState(!1),[k,C]=f.useState(null),[S,y]=f.useState(()=>o.sessionId||de.generateSessionId()),[A,w]=f.useState(!0),[F,T]=f.useState(!1),[R,M]=f.useState(""),[O,$]=f.useState(!1),[H,re]=f.useState([]),[le,D]=f.useState(!1),[B,oe]=f.useState("A"),[P,xe]=f.useState(!1),ve=s?parseInt(s):null,{updateProjectState:ne,isSaving:ce,lastSaved:Fe,saveError:st,hasUnsavedChanges:ct,saveNow:ft}=dc(ve||0,{module:"AskPandaura",chatMessage:l,lastActivity:new Date().toISOString()});f.useEffect(()=>{!e&&ve&&ne({module:"AskPandaura",chatMessage:l,lastActivity:new Date().toISOString()})},[e,ve,ne,l]),f.useEffect(()=>{a.current?.scrollIntoView({behavior:"smooth"})},[g?.messages]),f.useEffect(()=>{r("AskPandaura",{...n("AskPandaura"),conversations:N,currentConversation:g,sessionId:S})},[N,g,S,r]),f.useEffect(()=>{const _=setTimeout(()=>{r("AskPandaura",{...n("AskPandaura"),chatMessage:l})},500);return()=>clearTimeout(_)},[l,r]),f.useEffect(()=>{try{const _=n("AskPandaura");if(console.log("Loading persisted state:",_),_.conversations&&Array.isArray(_.conversations)){const Q=_.conversations.map(me=>({...me,createdAt:new Date(me.createdAt),updatedAt:new Date(me.updatedAt),messages:me.messages.map(L=>({...L,timestamp:new Date(L.timestamp)}))}));j(Q),console.log("Restored conversations:",Q)}if(_.currentConversation){const Q={..._.currentConversation,createdAt:new Date(_.currentConversation.createdAt),updatedAt:new Date(_.currentConversation.updatedAt),messages:_.currentConversation.messages.map(me=>({...me,timestamp:new Date(me.timestamp)}))};b(Q),console.log("Restored current conversation:",Q)}}catch(_){console.error("Error loading persisted conversations:",_)}},[]);const Ft=()=>`conv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,dt=()=>`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ut=_=>{const Q=Ft(),me=de.generateConversationTitle(_);return{id:Q,title:me,messages:[],createdAt:new Date,updatedAt:new Date,projectId:s||void 0}},jt=async()=>{if(!l.trim()&&H.length===0||v||F)return;const _=l.trim()||"Analyze the uploaded files";d(""),C(null),E(!0),M(""),$(!1);try{let Q=g;Q||(Q=ut(_),b(Q),j(q=>[Q,...q]));const me={id:dt(),role:"user",content:_,timestamp:new Date},L={...Q,messages:[...Q.messages,me],updatedAt:new Date};b(L),j(q=>q.map(te=>te.id===Q.id?L:te));let U,K=!1;if(H.length>0||B==="B"&&g?.uploadedFiles?.length){if(D(!0),B==="B"){let q=S;if(H.length>0?(q=de.generateSessionId(),y(q),console.log(`🔄 NEW FILES DETECTED - Creating fresh session: ${q}`),console.log("📁 Files being uploaded:",H.map(te=>te.name)),g&&(b({...g,uploadedFiles:[]}),console.log("🧹 Cleared previous uploaded files from conversation"))):(console.log(`💬 FOLLOW-UP QUESTION - Using existing session: ${q}`),console.log("📂 Previous files available:",g?.uploadedFiles?.map(te=>te.filename)||"none")),A){T(!0);let te="";const ue=dt(),$e={id:ue,role:"assistant",content:"",timestamp:new Date,isStreaming:!0,wrapperType:"B"},Se={...L,messages:[...L.messages,$e],updatedAt:new Date};b(Se),j(Z=>Z.map(G=>G.id===Q.id?Se:G));let _e=_;if(H.length===0&&g?.uploadedFiles?.length){const Z=g.uploadedFiles.map(G=>`Previously uploaded: ${G.filename} (${G.type})`).join(", ");_e=`${_}

[Context: This question relates to previously uploaded files: ${Z}]`}const se=await de.sendWrapperBStreamingMessage({prompt:_e,projectId:s||void 0,sessionId:q,files:H,stream:!0},Z=>{if(Z.type==="status")b(G=>{if(!G)return G;const Y=G.messages.map(I=>I.id===ue?{...I,content:`*${Z.content}*`}:I);return{...G,messages:Y}});else if(Z.type==="start")b(G=>{if(!G)return G;const Y=G.messages.map(I=>I.id===ue?{...I,content:""}:I);return{...G,messages:Y}});else if(Z.type==="chunk"&&Z.content)te+=Z.content,b(G=>{if(!G)return G;const Y=G.messages.map(I=>I.id===ue?{...I,content:te}:I);return{...G,messages:Y}});else if(Z.type==="complete"&&Z.fullResponse){te=Z.answer||te;const G=Z.fullResponse;typeof G=="object"&&G!==null&&(b(Y=>{if(!Y)return Y;const I=Y.messages.map(V=>V.id===ue?{...V,content:te,task_type:G.task_type,artifacts:G.artifacts,processedFiles:G.processed_files}:V);return{...Y,messages:I}}),j(Y=>Y.map(I=>{if(I.id===Q.id){const V=I.messages.map(ae=>ae.id===ue?{...ae,content:te,task_type:G.task_type,artifacts:G.artifacts,processedFiles:G.processed_files}:ae);return{...I,messages:V}}return I})))}else if(Z.type==="end")T(!1),b(G=>{if(!G)return G;const Y=G.messages.map(I=>I.id===ue?{...I,isStreaming:!1}:I);return{...G,messages:Y}}),j(G=>G.map(Y=>{if(Y.id===Q.id){const I=Y.messages.map(V=>V.id===ue?{...V,isStreaming:!1}:V);return{...Y,messages:I}}return Y}));else if(Z.type==="error")throw new Error(Z.error||"Streaming error")});U={status:"ok",task_type:"doc_qa",assumptions:[],answer_md:te,artifacts:{code:[],tables:[],reports:[],anchors:[],citations:[]},next_actions:[],errors:[]},K=!0}else{const te=await de.analyzeDocumentsWithWrapperB({prompt:_,projectId:s||void 0,sessionId:q,files:H});U=te,te.processed_files&&(me.processedFiles=te.processed_files.map(ue=>({filename:ue.filename,type:ue.type,size:ue.size,extracted_data_available:ue.extracted_data_available})))}me.wrapperType="B"}else{const q=H.filter(ue=>de.getFileTypeCategory(ue,"A")==="image"),te=H.filter(ue=>de.getFileTypeCategory(ue,"A")==="document");if(q.length>0&&te.length>0){const ue=new FormData;ue.append("prompt",_),ue.append("projectId",s||""),ue.append("sessionId",S),H.forEach(Se=>{de.getFileTypeCategory(Se,"A")==="image"?ue.append("image",Se):ue.append("document",Se)}),U=await(await fetch(`${de.baseUrl}/wrapperA`,{method:"POST",body:ue})).json()}else q.length>0?U=await de.uploadAndAnalyzeImages({prompt:_,projectId:s||void 0,sessionId:S,images:q}):U=await de.uploadAndAnalyzeDocuments({prompt:_,projectId:s||void 0,sessionId:S,files:te});me.wrapperType="A"}D(!1),re([])}else{if(B==="B"&&!g?.uploadedFiles?.length){C("Document Analyst requires files to analyze. Please upload PLC files, documents, or images, or switch to General Assistant (Wrapper A)."),E(!1);return}if(A){T(!0);let q="";const te=dt(),ue={id:te,role:"assistant",content:"",timestamp:new Date,isStreaming:!0},$e={...L,messages:[...L.messages,ue],updatedAt:new Date};b($e),j(se=>se.map(Z=>Z.id===Q.id?$e:Z));let Se;B==="B"?Se=await de.sendWrapperBStreamingMessage({prompt:_,projectId:s||void 0,sessionId:S,files:[]},se=>{if(se.type==="chunk"&&se.content)M(Z=>{const G=Z+se.content;return q=G,b(Y=>{if(!Y)return Y;const I=Y.messages.map(V=>V.id===te?{...V,content:G||""}:V);return{...Y,messages:I}}),j(Y=>Y.map(I=>{if(I.id===Q.id){const V=I.messages.map(ae=>ae.id===te?{...ae,content:G||""}:ae);return{...I,messages:V}}return I})),G});else if(se.type==="complete"&&se.answer){q=se.answer,M(se.answer),$(!0);let Z,G;if(se.fullResponse&&typeof se.fullResponse=="object"&&"artifacts"in se.fullResponse)Z=se.fullResponse.artifacts,G=se.fullResponse.processed_files;else{console.log("Parsing content for tables:",se.answer);const I=Ui(se.answer),V=Vi(se.answer),ae=qi(se.answer);console.log("Parsed tables:",I),console.log("Parsed citations:",V),console.log("Parsed files:",ae),(I.length>0||V.length>0||ae.length>0)&&(Z={code:[],tables:I,citations:V,reports:[],anchors:[]},G=ae)}let Y=se.answer;Z?.tables&&Z.tables.length>0&&(Y=ys(Y)),Z?.citations&&Z.citations.length>0&&(Y=Hi(Y)),G&&G.length>0&&(Y=Wi(Y)),b(I=>{if(!I)return I;const V=I.messages.map(ae=>ae.id===te?{...ae,content:Y||"",isStreaming:!1,artifacts:Z,processedFiles:G}:ae);return{...I,messages:V}}),j(I=>I.map(V=>{if(V.id===Q.id){const ae=V.messages.map(Te=>Te.id===te?{...Te,content:Y||"",isStreaming:!1,artifacts:Z,processedFiles:G}:Te);return{...V,messages:ae}}return V}))}else if(se.type==="end")$(!0),T(!1),b(Z=>{if(!Z)return Z;const G=Z.messages.map(Y=>Y.id===te?{...Y,isStreaming:!1}:Y);return{...Z,messages:G}}),j(Z=>Z.map(G=>{if(G.id===Q.id){const Y=G.messages.map(I=>I.id===te?{...I,isStreaming:!1}:I);return{...G,messages:Y}}return G}));else if(se.type==="error")throw new Error(se.error||"Streaming error")}):Se=await de.sendStreamingMessage({prompt:_,projectId:s||void 0,sessionId:S,stream:!0},se=>{if(se.type==="chunk"&&se.content)M(Z=>{const G=Z+se.content;return q=G,b(Y=>{if(!Y)return Y;const I=Y.messages.map(V=>V.id===te?{...V,content:G||""}:V);return{...Y,messages:I}}),j(Y=>Y.map(I=>{if(I.id===Q.id){const V=I.messages.map(ae=>ae.id===te?{...ae,content:G||""}:ae);return{...I,messages:V}}return I})),G});else if(se.type==="complete"&&se.answer){q=se.answer,M(se.answer),$(!0);let Z,G;if(se.fullResponse&&typeof se.fullResponse=="object"&&"artifacts"in se.fullResponse)Z=se.fullResponse.artifacts,G=se.fullResponse.processed_files;else{console.log("Parsing content for tables:",se.answer);const I=Ui(se.answer),V=Vi(se.answer),ae=qi(se.answer);console.log("Parsed tables:",I),console.log("Parsed citations:",V),console.log("Parsed files:",ae),(I.length>0||V.length>0||ae.length>0)&&(Z={code:[],tables:I,citations:V,reports:[],anchors:[]},G=ae)}let Y=se.answer;Z?.tables&&Z.tables.length>0&&(Y=ys(Y)),Z?.citations&&Z.citations.length>0&&(Y=Hi(Y)),G&&G.length>0&&(Y=Wi(Y)),b(I=>{if(!I)return I;const V=I.messages.map(ae=>ae.id===te?{...ae,content:Y||"",isStreaming:!1,artifacts:Z,processedFiles:G}:ae);return{...I,messages:V}}),j(I=>I.map(V=>{if(V.id===Q.id){const ae=V.messages.map(Te=>Te.id===te?{...Te,content:Y||"",isStreaming:!1,artifacts:Z,processedFiles:G}:Te);return{...V,messages:ae}}return V}))}else if(se.type==="end")$(!0),T(!1),b(Z=>{if(!Z)return Z;const G=Z.messages.map(Y=>Y.id===te?{...Y,isStreaming:!1}:Y);return{...Z,messages:G}}),j(Z=>Z.map(G=>{if(G.id===Q.id){const Y=G.messages.map(I=>I.id===te?{...I,isStreaming:!1}:I);return{...G,messages:Y}}return G}));else if(se.type==="error")throw new Error(se.error||"Streaming error")}),U={status:"ok",task_type:"qna",assumptions:[],answer_md:q||Se,artifacts:{code:[],tables:[],citations:[]},next_actions:[],errors:[]},K=!0}else B==="B"?U=await de.sendWrapperBMessage({prompt:_,projectId:s||void 0,sessionId:S,files:[]}):U=await de.sendMessage({prompt:_,projectId:s||void 0,sessionId:S,stream:!1})}if(!A||!K){let q,te;q=A?U.answer_md:de.formatResponse(U),te=U.artifacts;const ue={id:dt(),role:"assistant",content:q,timestamp:new Date,wrapperType:B,task_type:U.task_type,artifacts:te};if(B==="B"&&U.processed_files){ue.processedFiles=U.processed_files;const Se=H.map(_e=>({filename:_e.name,type:_e.type,size:_e.size,uploadedAt:new Date,processedData:U.processed_files?.find(se=>se.filename===_e.name)}));L.uploadedFiles=[...L.uploadedFiles||[],...Se]}const $e={...L,messages:[...L.messages,ue],updatedAt:new Date};b($e),j(Se=>Se.map(_e=>_e.id===Q.id?$e:_e))}A&&(M(""),$(!1))}catch(Q){C(Q instanceof Error?Q.message:"Failed to send message"),console.error("Error sending message:",Q),M(""),$(!1)}finally{E(!1),T(!1),D(!1)}},Me=()=>{b(null),d(""),C(null),u(!1),y(de.generateSessionId()),r("AskPandaura",{...o,currentConversation:null,chatMessage:"",sessionId:de.generateSessionId()})},At=_=>{b(_),u(!1)},Wt=()=>{b(null),j([]),d(""),C(null),y(de.generateSessionId()),r("AskPandaura",{conversations:[],currentConversation:null,chatMessage:"",sessionId:de.generateSessionId()})},Et=()=>{p(!1),Me()},X=_=>{re(_),_.length>0&&B==="B"&&(console.log("� New files selected:",_.map(Q=>Q.name)),console.log("🔄 Fresh session will be created when message is sent"))},be=()=>{if(re([]),B==="B"){const _=de.generateSessionId();y(_),console.log(`🧹 Files cleared, created fresh session: ${_}`)}};f.useEffect(()=>{const _=()=>{const L=document.querySelector('[class*="w-72"], [class*="w-16"]');if(L){const U=L.classList.contains("w-16");x(U)}};setTimeout(_,100);const Q=new MutationObserver(_),me=document.body;return Q.observe(me,{attributes:!0,attributeFilter:["class"],subtree:!0}),()=>Q.disconnect()},[]),f.useEffect(()=>{if(!e){const _=setTimeout(()=>{r("AskPandaura",{chatMessage:l})},1e3);return()=>clearTimeout(_)}},[l,e,r]);const Ie=()=>c&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg w-96 max-h-[80vh] overflow-hidden shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light",children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Conversations"}),t.jsx("button",{onClick:()=>u(!1),className:"text-secondary hover:text-primary",children:t.jsx(Ye,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"p-4 border-b border-light space-y-2",children:[t.jsxs("button",{onClick:Me,className:"w-full flex items-center justify-center gap-2 bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary transition-colors",children:[t.jsx(fn,{className:"w-4 h-4"}),"New Chat"]}),N.length>0&&t.jsxs("button",{onClick:Wt,className:"w-full flex items-center justify-center gap-2 bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 transition-colors text-sm",children:[t.jsx(Ye,{className:"w-4 h-4"}),"Clear All Chats"]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto max-h-[400px]",children:t.jsx("div",{className:"p-4 space-y-2",children:N.length===0?t.jsxs("div",{className:"text-center py-8 text-muted",children:[t.jsx(pn,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{className:"text-sm",children:"No conversations yet"}),t.jsx("p",{className:"text-xs",children:"Start a new chat to begin"})]}):N.map(_=>t.jsxs("div",{onClick:()=>At(_),className:`p-3 rounded-md hover:bg-gray-100 cursor-pointer transition-colors border border-light ${g?.id===_.id?"bg-blue-50 border-blue-200":""}`,children:[t.jsx("div",{className:"font-medium text-sm text-primary truncate",children:_.title}),t.jsxs("div",{className:"text-xs text-muted mt-1 flex items-center justify-between",children:[t.jsxs("span",{children:[_.messages.length," messages"]}),t.jsx("span",{children:new Date(_.updatedAt).toLocaleDateString()})]})]},_.id))})})]})});return t.jsxs("div",{className:"flex flex-col bg-white h-full relative",children:[t.jsx("div",{className:"flex-1 overflow-y-auto",children:t.jsxs("div",{className:"p-6 w-full mx-auto pb-32",children:[" ",t.jsxs("div",{className:"flex items-center justify-between max-w-full mx-auto",children:[t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("button",{onClick:()=>w(!A),className:`text-xs px-2 py-1 rounded transition-colors ${A?"bg-green-100 text-green-700 border border-green-200 w-[80px]":"bg-gray-100 text-gray-600 border border-gray-200 w-[80px]"}`,title:A?"Streaming ON":"Streaming OFF",children:[t.jsx(Vt,{className:"w-3 h-3 inline mr-1"}),A?"Stream":"Regular"]})}),t.jsxs("div",{className:"flex items-center gap-4",children:[!e&&ve&&t.jsx(uc,{isSaving:ce,lastSaved:Fe,saveError:st,hasUnsavedChanges:ct,onManualSave:ft,className:"text-xs"}),t.jsx("button",{onClick:()=>p(!0),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"Memory Management",children:t.jsx(Mt,{className:"w-5 h-5 text-primary"})}),t.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"View Conversations",children:t.jsx(pn,{className:"w-6 h-6 text-primary"})})]})]}),k&&t.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md  mx-auto",children:t.jsx("p",{className:"text-sm text-red-700",children:k})}),g&&g.messages.length>0?t.jsxs("div",{className:"space-y-4 mt-8 mb-8  mx-auto",children:[g.messages.map(_=>t.jsx("div",{className:"px-4 py-2 text-sm ",children:t.jsxs("div",{className:"flex gap-2",children:[_.role==="user"?t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium shrink-0 bg-gray-300 text-gray-700 mt-0.5",children:"You"}):t.jsx("img",{src:Bi,alt:"Pandaura",className:"w-8 h-8 rounded-full object-cover shrink-0 mt-0.5"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-gray-800 prose prose-sm max-w-none",children:_.isStreaming&&!_.content?t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(Is,{}),t.jsx("span",{className:"text-xs",children:"Thinking..."})]}):_.content?t.jsxs("div",{className:"relative",children:[t.jsx(gn,{remarkPlugins:[$i],children:i(_.content,_)}),_.isStreaming&&t.jsx("span",{className:"inline-block w-2 h-4 bg-blue-500 ml-1 animate-pulse"})]}):t.jsx(gn,{remarkPlugins:[$i],children:i(_.content||"",_)})}),!_.isStreaming&&_.content&&O&&g?.messages[g.messages.length-1]?.id===_.id&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-green-600",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{children:"Response complete"})]}),_.role==="assistant"&&_.processedFiles&&_.processedFiles.length>0&&t.jsxs("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded-md",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-700 font-medium mb-1",children:[t.jsx(Ke,{className:"w-3 h-3"}),"Analyzed Files (",_.processedFiles.length,")"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:_.processedFiles.map((Q,me)=>t.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:Q.filename},me))})]}),_.role==="assistant"&&_.artifacts&&(_.artifacts.code&&_.artifacts.code.length>0||_.artifacts.tables&&_.artifacts.tables.length>0||_.artifacts.diff||_.artifacts.reports&&_.artifacts.reports.length>0)&&t.jsx("div",{className:"mt-4",children:t.jsx(zb,{response:{status:"ok",task_type:_.wrapperType==="B"?_.task_type||"doc_qa":"code_gen",assumptions:_.artifacts.assumptions||[],answer_md:"",artifacts:{code:_.artifacts.code||[],tables:_.artifacts.tables||[],citations:_.artifacts.citations||[],diff:_.artifacts.diff,reports:_.artifacts.reports||[],anchors:_.artifacts.anchors||[]},next_actions:[],errors:_.artifacts.errors||[],processed_files:_.processedFiles},onSaveToProject:()=>{},onMoveToLogicStudio:()=>{},hideStatusAndTaskType:!0})})]})]})},_.id)),(v||le)&&!F&&t.jsx("div",{className:"px-4 py-3 text-sm bg-gray-50",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium text-white shrink-0",children:t.jsx("img",{src:Bi,alt:"Pandaura",className:"w-8 h-8 rounded-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[t.jsx(Is,{}),t.jsx("span",{className:"text-xs",children:le?"Processing files...":"Thinking..."})]}),t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:le?"Analyzing uploaded documents":"💡 Complex automation tasks may take a moment to process"})]})]})}),t.jsx("div",{ref:a})]}):t.jsxs("div",{className:"text-muted mt-4 px-6 flex flex-col items-center text-center  mx-auto",children:[t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-24 w-auto mb-4 filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Ask Pandaura Anything"}),t.jsx("p",{className:"text-sm",children:"Start a conversation with Pandaura or upload a document to begin."}),N.length>0&&t.jsxs("div",{className:"mt-2 text-xs text-green-600 bg-green-50 px-2 py-1 rounded border",children:["💾 ",N.length," conversation",N.length!==1?"s":""," saved locally"]}),t.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-3 w-full max-w-7xl",children:[t.jsxs("p",{className:"col-span-full text-xs font-medium text-gray-600 mb-2 text-left",children:["Try asking"," ",B==="A"?"(Code Generator)":"(Document Analyst)",":"]}),(B==="A"?["Create a motor starter logic with safety interlocks","Generate tag database for a conveyor system"]:["Upload and analyze my PLC project files","Extract tag information from this documentation","Review this safety program for compliance","Summarize the I/O configuration from these files"]).map((_,Q)=>t.jsx("button",{onClick:()=>d(_),className:"text-left p-3 text-sm text-gray-700 bg-gray-50 hover:bg-gray-100 rounded border transition-colors",children:_},`${B}-${Q}`))]})]})]})}),t.jsxs("div",{className:`fixed bottom-0 right-0 bg-white border-t px-6 py-4 shadow-md z-30 transition-all duration-200 ${h?"left-16":"left-72"}`,children:[H.length>0&&t.jsx("div",{className:"mb-3  mx-auto",children:t.jsxs("div",{className:`flex items-center gap-2 rounded-md px-3 py-2 ${B==="A"?"bg-amber-50 border border-amber-200":"bg-blue-50 border border-blue-200"}`,children:[t.jsx("div",{className:"flex items-center gap-2 flex-1",children:B==="A"?t.jsxs(t.Fragment,{children:[t.jsx(ze,{className:"w-4 h-4 text-amber-600"}),t.jsx("span",{className:"text-sm text-amber-700 font-medium",children:"Files not supported in Code Generator mode"})]}):t.jsxs(t.Fragment,{children:[H.some(_=>de.getFileTypeCategory(_,B)==="image")&&t.jsx(Lr,{className:"w-4 h-4 text-blue-600"}),H.some(_=>de.getFileTypeCategory(_,B)==="document")&&t.jsx(Ke,{className:"w-4 h-4 text-blue-600"}),H.some(_=>de.getFileTypeCategory(_,B)==="plc")&&t.jsx(Or,{className:"w-4 h-4 text-green-600"}),t.jsxs("span",{className:"text-sm text-blue-700 font-medium",children:[H.length," file",H.length>1?"s":""," selected"]}),t.jsxs("div",{className:"text-xs text-blue-600 max-w-md truncate",children:["(",H.map(_=>_.name).join(", "),")"]})]})}),t.jsxs("button",{onClick:be,className:`hover:opacity-80 flex items-center gap-1 text-xs ${B==="A"?"text-amber-600 hover:text-amber-800":"text-blue-600 hover:text-blue-800"}`,title:"Clear all files",children:[t.jsx(Ye,{className:"w-3 h-3"}),"Clear"]})]})}),t.jsxs("div",{className:"mb-3 mx-auto  max-w-[94%] ",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"AI Mode:"}),t.jsxs("div",{className:"flex rounded-md border border-gray-300 overflow-hidden",children:[t.jsx("button",{onClick:()=>{oe("A"),H.length>0&&re([])},className:`px-3 py-1 text-sm font-medium transition-colors ${B==="A"?"bg-black text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(_t,{className:"w-3 h-3"}),"Code Generator"]})}),t.jsx("button",{onClick:()=>oe("B"),className:`px-3 py-1 text-sm font-medium transition-colors ${B==="B"?"bg-black text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Mt,{className:"w-3 h-3"}),"Doc Analyst"]})})]})]}),t.jsx("button",{onClick:()=>xe(!P),className:"text-xs text-gray-500 hover:text-gray-700 transition-colors",children:"ℹ️ What's the difference?"})]}),P&&t.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-md text-xs",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-blue-600 mb-1 flex items-center gap-1",children:[t.jsx(_t,{className:"w-3 h-3"}),"Code Generator (A)"]}),t.jsx("p",{className:"text-gray-600 mb-2",children:"Generates PLC code, logic, and automation solutions. Best for:"}),t.jsxs("ul",{className:"text-gray-600 space-y-1",children:[t.jsx("li",{children:"• Creating new PLC programs"}),t.jsx("li",{children:"• Logic design and optimization"}),t.jsx("li",{children:"• Tag databases and HMI screens"}),t.jsx("li",{children:"• Code review and debugging"})]})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"font-semibold text-green-600 mb-1 flex items-center gap-1",children:[t.jsx(Mt,{className:"w-3 h-3"}),"Document Analyst (B)"]}),t.jsx("p",{className:"text-gray-600 mb-2",children:"Analyzes PLC projects, documentation, and technical files. Best for:"}),t.jsxs("ul",{className:"text-gray-600 space-y-1",children:[t.jsx("li",{children:"• Analyzing existing PLC projects (.xml, .l5x, .st)"}),t.jsx("li",{children:"• Extracting information from technical docs"}),t.jsx("li",{children:"• Safety system analysis"}),t.jsx("li",{children:"• Project documentation review"})]})]})]}),t.jsxs("div",{className:"mt-4 p-2 bg-blue-50 border border-blue-200 rounded",children:[t.jsxs("h5",{className:"font-semibold text-blue-700 mb-1 flex items-center gap-1",children:[t.jsx(ze,{className:"w-3 h-3"}),"Built-in Quality Assurance"]}),t.jsxs("p",{className:"text-blue-600 text-xs",children:["Both modes include automatic ",t.jsx("strong",{children:"self-verification"})," (checks syntax, logic, and safety) and ",t.jsx("strong",{children:"multi-perspective analysis"})," (engineering accuracy + communication clarity + practical safety). Every response is validated before delivery."]})]})]})]}),B==="B"&&g?.uploadedFiles&&g.uploadedFiles.length>0&&t.jsx("div",{className:" mx-auto mb-3",children:t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-700 font-medium mb-1",children:[t.jsx(Ke,{className:"w-3 h-3"}),"Available Files for Reference (",g.uploadedFiles.length,")"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:g.uploadedFiles.map((_,Q)=>t.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:_.filename},Q))}),t.jsx("div",{className:"text-xs text-green-600 mt-1",children:"You can ask questions about these files without re-uploading them."})]})}),t.jsxs("div",{className:"flex items-end gap-3   max-w-[94%] mx-auto",children:[t.jsx("textarea",{value:l,onChange:_=>d(_.target.value),onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),jt())},placeholder:B==="A"?H.length>0?"Files are not supported in Code Generator mode. Switch to Document Analyst or clear files.":"Ask about PLCs, SCADA, HMI, robotics, motor control, or request code generation...":H.length>0?"Ask about the uploaded files or add additional instructions...":"Upload PLC files, documents, or images for analysis...",className:"flex-1 border border-light rounded-md px-4 py-2 bg-surface shadow-sm text-sm text-primary placeholder-muted resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all min-h-[36px] max-h-[120px]",rows:1,style:{height:"auto"},onInput:_=>{const Q=_.target;Q.style.height="auto",Q.style.height=Math.min(Q.scrollHeight,120)+"px"}}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.csv,.xls,.xlsx,.ppt,.pptx",onChange:_=>{const Q=Array.from(_.target.files||[]);if(Q.length>0){const me=Q.filter(L=>de.isFileSupported(L,B));me.length!==Q.length&&C(`Some files are not supported. Please use ${B==="A"?"images (PNG, JPG, GIF) or documents (PDF, DOC, TXT, CSV, XLS, PPT)":"PLC files (.xml, .l5x, .st, .zip), documents (PDF, DOC, TXT, CSV), or images"}.`),me.length>0&&(X(me),C(null))}_.target.value=""},className:"hidden",id:"file-upload",disabled:B==="A"||v||F||le}),t.jsxs("button",{onClick:()=>B==="B"?document.getElementById("file-upload")?.click():null,className:`border p-3 rounded-md transition-colors shadow-sm relative ${B==="A"?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed":H.length>0?"bg-blue-100 border-blue-300 text-blue-600":"bg-white border-light text-primary hover:bg-accent-light"}`,title:B==="A"?"File upload is disabled for Code Generator mode":"Upload PLC files, documents, or images",disabled:B==="A"||v||F||le,children:[t.jsx(ea,{className:"w-4 h-4"}),H.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-blue-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:H.length})]})]}),t.jsx("button",{onClick:jt,className:"bg-primary text-white px-6 py-3 rounded-md hover:bg-secondary transition-colors text-sm font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:!l.trim()&&H.length===0||v||F||le,children:v||le?t.jsxs(t.Fragment,{children:[t.jsx(hn,{className:"w-4 h-4 animate-spin"}),le?"Processing...":""]}):t.jsx(Gn,{className:"w-4 h-4"})})]})]})]}),Ie(),m&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg w-[500px] max-h-[80vh] overflow-hidden shadow-lg",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light",children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Memory Management"}),t.jsx("button",{onClick:()=>p(!1),className:"text-secondary hover:text-primary",children:t.jsx(Ye,{className:"w-5 h-5"})})]}),t.jsx("div",{className:"p-4",children:t.jsx(mc,{sessionId:S,onSessionCleared:Et})})]})})]})}function Vb(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Gi(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ji(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Gi(Object(r),!0).forEach(function(s){Vb(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gi(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Hb(e,n){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(n.indexOf(a)>=0)&&(r[a]=e[a]);return r}function qb(e,n){if(e==null)return{};var r=Hb(e,n),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(n.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Wb(e,n){return Gb(e)||Jb(e,n)||Xb(e,n)||Yb()}function Gb(e){if(Array.isArray(e))return e}function Jb(e,n){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(n&&r.length===n));s=!0);}catch(d){a=!0,i=d}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Xb(e,n){if(e){if(typeof e=="string")return Xi(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xi(e,n)}}function Xi(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function Yb(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qb(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Yi(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Qi(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Yi(Object(r),!0).forEach(function(s){Qb(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yi(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Kb(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(a,i){return i(a)},s)}}function Ln(e){return function n(){for(var r=this,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];return n.apply(r,[].concat(a,l))}}}function Ir(e){return{}.toString.call(e).includes("Object")}function Zb(e){return!Object.keys(e).length}function qn(e){return typeof e=="function"}function ej(e,n){return Object.prototype.hasOwnProperty.call(e,n)}function tj(e,n){return Ir(n)||zt("changeType"),Object.keys(n).some(function(r){return!ej(e,r)})&&zt("changeField"),n}function nj(e){qn(e)||zt("selectorType")}function rj(e){qn(e)||Ir(e)||zt("handlerType"),Ir(e)&&Object.values(e).some(function(n){return!qn(n)})&&zt("handlersType")}function sj(e){e||zt("initialIsRequired"),Ir(e)||zt("initialType"),Zb(e)&&zt("initialContent")}function aj(e,n){throw new Error(e[n]||e.default)}var ij={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},zt=Ln(aj)(ij),hr={changes:tj,selector:nj,handler:rj,initial:sj};function oj(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};hr.initial(e),hr.handler(n);var r={current:e},s=Ln(dj)(r,n),a=Ln(cj)(r),i=Ln(hr.changes)(e),o=Ln(lj)(r);function l(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return hr.selector(c),c(r.current)}function d(c){Kb(s,a,i,o)(c)}return[l,d]}function lj(e,n){return qn(n)?n(e.current):n}function cj(e,n){return e.current=Qi(Qi({},e.current),n),n}function dj(e,n,r){return qn(n)?n(e.current):Object.keys(r).forEach(function(s){var a;return(a=n[s])===null||a===void 0?void 0:a.call(n,e.current[s])}),r}var uj={create:oj},mj={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function hj(e){return function n(){for(var r=this,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];return n.apply(r,[].concat(a,l))}}}function pj(e){return{}.toString.call(e).includes("Object")}function fj(e){return e||Ki("configIsRequired"),pj(e)||Ki("configType"),e.urls?(xj(),{paths:{vs:e.urls.monacoBase}}):e}function xj(){console.warn(hc.deprecation)}function gj(e,n){throw new Error(e[n]||e.default)}var hc={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ki=hj(gj)(hc),yj={config:fj},bj=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return function(a){return r.reduceRight(function(i,o){return o(i)},a)}};function pc(e,n){return Object.keys(n).forEach(function(r){n[r]instanceof Object&&e[r]&&Object.assign(n[r],pc(e[r],n[r]))}),Ji(Ji({},e),n)}var jj={type:"cancelation",msg:"operation is manually canceled"};function js(e){var n=!1,r=new Promise(function(s,a){e.then(function(i){return n?a(jj):s(i)}),e.catch(a)});return r.cancel=function(){return n=!0},r}var wj=uj.create({config:mj,isInitialized:!1,resolve:null,reject:null,monaco:null}),fc=Wb(wj,2),rr=fc[0],Xr=fc[1];function vj(e){var n=yj.config(e),r=n.monaco,s=qb(n,["monaco"]);Xr(function(a){return{config:pc(a.config,s),monaco:r}})}function Nj(){var e=rr(function(n){var r=n.monaco,s=n.isInitialized,a=n.resolve;return{monaco:r,isInitialized:s,resolve:a}});if(!e.isInitialized){if(Xr({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),js(ws);if(window.monaco&&window.monaco.editor)return xc(window.monaco),e.resolve(window.monaco),js(ws);bj(kj,Cj)(Aj)}return js(ws)}function kj(e){return document.body.appendChild(e)}function Sj(e){var n=document.createElement("script");return e&&(n.src=e),n}function Cj(e){var n=rr(function(s){var a=s.config,i=s.reject;return{config:a,reject:i}}),r=Sj("".concat(n.config.paths.vs,"/loader.js"));return r.onload=function(){return e()},r.onerror=n.reject,r}function Aj(){var e=rr(function(r){var s=r.config,a=r.resolve,i=r.reject;return{config:s,resolve:a,reject:i}}),n=window.require;n.config(e.config),n(["vs/editor/editor.main"],function(r){xc(r),e.resolve(r)},function(r){e.reject(r)})}function xc(e){rr().monaco||Xr({monaco:e})}function Ej(){return rr(function(e){var n=e.monaco;return n})}var ws=new Promise(function(e,n){return Xr({resolve:e,reject:n})}),gc={config:vj,init:Nj,__getMonacoInstance:Ej},Tj={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},vs=Tj,Pj={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Dj=Pj;function Ij({children:e}){return Ge.createElement("div",{style:Dj.container},e)}var Rj=Ij,Fj=Rj;function Lj({width:e,height:n,isEditorReady:r,loading:s,_ref:a,className:i,wrapperProps:o}){return Ge.createElement("section",{style:{...vs.wrapper,width:e,height:n},...o},!r&&Ge.createElement(Fj,null,s),Ge.createElement("div",{ref:a,style:{...vs.fullWidth,...!r&&vs.hide},className:i}))}var Oj=Lj,yc=f.memo(Oj);function Mj(e){f.useEffect(e,[])}var bc=Mj;function _j(e,n,r=!0){let s=f.useRef(!0);f.useEffect(s.current||!r?()=>{s.current=!1}:e,n)}var it=_j;function Bn(){}function ln(e,n,r,s){return zj(e,s)||$j(e,n,r,s)}function zj(e,n){return e.editor.getModel(jc(e,n))}function $j(e,n,r,s){return e.editor.createModel(n,r,s?jc(e,s):void 0)}function jc(e,n){return e.Uri.parse(n)}function Bj({original:e,modified:n,language:r,originalLanguage:s,modifiedLanguage:a,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:d=!1,theme:c="light",loading:u="Loading...",options:m={},height:p="100%",width:h="100%",className:x,wrapperProps:g={},beforeMount:b=Bn,onMount:N=Bn}){let[j,v]=f.useState(!1),[E,k]=f.useState(!0),C=f.useRef(null),S=f.useRef(null),y=f.useRef(null),A=f.useRef(N),w=f.useRef(b),F=f.useRef(!1);bc(()=>{let O=gc.init();return O.then($=>(S.current=$)&&k(!1)).catch($=>$?.type!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>C.current?M():O.cancel()}),it(()=>{if(C.current&&S.current){let O=C.current.getOriginalEditor(),$=ln(S.current,e||"",s||r||"text",i||"");$!==O.getModel()&&O.setModel($)}},[i],j),it(()=>{if(C.current&&S.current){let O=C.current.getModifiedEditor(),$=ln(S.current,n||"",a||r||"text",o||"");$!==O.getModel()&&O.setModel($)}},[o],j),it(()=>{let O=C.current.getModifiedEditor();O.getOption(S.current.editor.EditorOption.readOnly)?O.setValue(n||""):n!==O.getValue()&&(O.executeEdits("",[{range:O.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),O.pushUndoStop())},[n],j),it(()=>{C.current?.getModel()?.original.setValue(e||"")},[e],j),it(()=>{let{original:O,modified:$}=C.current.getModel();S.current.editor.setModelLanguage(O,s||r||"text"),S.current.editor.setModelLanguage($,a||r||"text")},[r,s,a],j),it(()=>{S.current?.editor.setTheme(c)},[c],j),it(()=>{C.current?.updateOptions(m)},[m],j);let T=f.useCallback(()=>{if(!S.current)return;w.current(S.current);let O=ln(S.current,e||"",s||r||"text",i||""),$=ln(S.current,n||"",a||r||"text",o||"");C.current?.setModel({original:O,modified:$})},[r,n,a,e,s,i,o]),R=f.useCallback(()=>{!F.current&&y.current&&(C.current=S.current.editor.createDiffEditor(y.current,{automaticLayout:!0,...m}),T(),S.current?.editor.setTheme(c),v(!0),F.current=!0)},[m,c,T]);f.useEffect(()=>{j&&A.current(C.current,S.current)},[j]),f.useEffect(()=>{!E&&!j&&R()},[E,j,R]);function M(){let O=C.current?.getModel();l||O?.original?.dispose(),d||O?.modified?.dispose(),C.current?.dispose()}return Ge.createElement(yc,{width:h,height:p,isEditorReady:j,loading:u,_ref:y,className:x,wrapperProps:g})}var Uj=Bj;f.memo(Uj);function Vj(e){let n=f.useRef();return f.useEffect(()=>{n.current=e},[e]),n.current}var Hj=Vj,pr=new Map;function qj({defaultValue:e,defaultLanguage:n,defaultPath:r,value:s,language:a,path:i,theme:o="light",line:l,loading:d="Loading...",options:c={},overrideServices:u={},saveViewState:m=!0,keepCurrentModel:p=!1,width:h="100%",height:x="100%",className:g,wrapperProps:b={},beforeMount:N=Bn,onMount:j=Bn,onChange:v,onValidate:E=Bn}){let[k,C]=f.useState(!1),[S,y]=f.useState(!0),A=f.useRef(null),w=f.useRef(null),F=f.useRef(null),T=f.useRef(j),R=f.useRef(N),M=f.useRef(),O=f.useRef(s),$=Hj(i),H=f.useRef(!1),re=f.useRef(!1);bc(()=>{let B=gc.init();return B.then(oe=>(A.current=oe)&&y(!1)).catch(oe=>oe?.type!=="cancelation"&&console.error("Monaco initialization: error:",oe)),()=>w.current?D():B.cancel()}),it(()=>{let B=ln(A.current,e||s||"",n||a||"",i||r||"");B!==w.current?.getModel()&&(m&&pr.set($,w.current?.saveViewState()),w.current?.setModel(B),m&&w.current?.restoreViewState(pr.get(i)))},[i],k),it(()=>{w.current?.updateOptions(c)},[c],k),it(()=>{!w.current||s===void 0||(w.current.getOption(A.current.editor.EditorOption.readOnly)?w.current.setValue(s):s!==w.current.getValue()&&(re.current=!0,w.current.executeEdits("",[{range:w.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),w.current.pushUndoStop(),re.current=!1))},[s],k),it(()=>{let B=w.current?.getModel();B&&a&&A.current?.editor.setModelLanguage(B,a)},[a],k),it(()=>{l!==void 0&&w.current?.revealLine(l)},[l],k),it(()=>{A.current?.editor.setTheme(o)},[o],k);let le=f.useCallback(()=>{if(!(!F.current||!A.current)&&!H.current){R.current(A.current);let B=i||r,oe=ln(A.current,s||e||"",n||a||"",B||"");w.current=A.current?.editor.create(F.current,{model:oe,automaticLayout:!0,...c},u),m&&w.current.restoreViewState(pr.get(B)),A.current.editor.setTheme(o),l!==void 0&&w.current.revealLine(l),C(!0),H.current=!0}},[e,n,r,s,a,i,c,u,m,o,l]);f.useEffect(()=>{k&&T.current(w.current,A.current)},[k]),f.useEffect(()=>{!S&&!k&&le()},[S,k,le]),O.current=s,f.useEffect(()=>{k&&v&&(M.current?.dispose(),M.current=w.current?.onDidChangeModelContent(B=>{re.current||v(w.current.getValue(),B)}))},[k,v]),f.useEffect(()=>{if(k){let B=A.current.editor.onDidChangeMarkers(oe=>{let P=w.current.getModel()?.uri;if(P&&oe.find(xe=>xe.path===P.path)){let xe=A.current.editor.getModelMarkers({resource:P});E?.(xe)}});return()=>{B?.dispose()}}return()=>{}},[k,E]);function D(){M.current?.dispose(),p?m&&pr.set(i,w.current.saveViewState()):w.current.getModel()?.dispose(),w.current.dispose()}return Ge.createElement(yc,{width:h,height:x,isEditorReady:k,loading:d,_ref:F,className:g,wrapperProps:b})}var Wj=qj,Gj=f.memo(Wj),Jj=Gj;function Xj({message:e,onApply:n}){return t.jsxs("div",{className:"absolute z-50 bg-white border border-light rounded-md shadow-md p-3 w-64 text-sm",children:[t.jsx("div",{className:"text-primary mb-2",children:e}),t.jsx("button",{onClick:n,className:"bg-primary text-white px-3 py-1 rounded-md hover:bg-secondary transition-colors text-xs",children:"✅ Apply Fix"})]})}function Yj({suggestion:e,onApply:n,onDismiss:r}){const[s,a]=f.useState(!1);return e?t.jsxs("div",{className:"bg-accent-light border border-accent rounded-md p-3 mb-2 relative",children:[t.jsx("button",{onClick:r,className:"absolute top-2 right-2 text-muted hover:text-primary",children:t.jsx(Ye,{className:"w-4 h-4"})}),t.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[t.jsx(Ps,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-medium text-primary text-sm",children:e.message}),t.jsxs("div",{className:"flex gap-2 mt-2",children:[t.jsxs("button",{onClick:()=>a(!s),className:"text-xs bg-white border border-light px-3 py-1 rounded hover:bg-gray-50 transition-colors flex items-center gap-1",children:[t.jsx(_t,{className:"w-3 h-3"}),s?"Hide Preview":"Show Preview"]}),t.jsx("button",{onClick:()=>n(e.refactoredCode),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors",children:"Apply Refactor"}),t.jsx("button",{onClick:r,className:"text-xs text-muted hover:text-primary px-2 py-1",children:"Dismiss"})]}),s&&t.jsx("div",{className:"mt-3 text-xs",children:t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-muted mb-1",children:"Before:"}),t.jsx("pre",{className:"bg-gray-100 p-2 rounded border text-xs overflow-x-auto",children:e.originalCode})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-muted mb-1",children:"After:"}),t.jsx("pre",{className:"bg-green-50 p-2 rounded border text-xs overflow-x-auto",children:e.refactoredCode})]})]})})]})]})]}):null}function Qj({isVisible:e,selectedText:n,selectedLine:r,position:s,onExplain:a,onRefactor:i,onSimplify:o,onTagEdit:l}){const[d,c]=f.useState(!1),[u,m]=f.useState(""),p=[{id:"explain",icon:t.jsx(Ps,{className:"w-4 h-4"}),label:"Explain",onClick:()=>{const g=h(n);m(g),c(!0),a(n)},variant:"accent"},{id:"refactor",icon:t.jsx(Ue,{className:"w-4 h-4"}),label:"Refactor",onClick:()=>i(n),variant:"primary"},{id:"simplify",icon:t.jsx(ko,{className:"w-4 h-4"}),label:"Simplify",onClick:()=>o(n),variant:"secondary"},{id:"tags",icon:t.jsx(lu,{className:"w-4 h-4"}),label:"Tag Edit",onClick:()=>l(r),variant:"secondary"}],h=g=>g.includes("IF")&&g.includes("THEN")?"This is a conditional logic block that checks if certain conditions are met before executing actions. The IF statement evaluates boolean conditions and executes the THEN clause when true.":g.includes("CASE")?"This CASE statement provides multi-way branching logic, evaluating an expression and executing different code blocks based on matching values. It's more efficient than multiple IF-ELSE statements.":g.includes(":=")?"This is an assignment operation that sets a variable to a specific value. The ':=' operator is used in structured text to assign values to variables.":g.includes("AND")||g.includes("OR")?"This contains boolean logic operators that combine multiple conditions. AND requires all conditions to be true, while OR requires at least one condition to be true.":"This code block contains PLC logic that controls industrial automation processes. The structured text follows IEC 61131-3 standards for programmable controller programming.",x=(g="secondary")=>{const b="p-2 rounded shadow-sm text-xs font-medium transition-all duration-150 flex items-center gap-1 whitespace-nowrap";switch(g){case"primary":return`${b} bg-primary text-white hover:bg-secondary`;case"accent":return`${b} bg-accent text-white hover:bg-purple-600`;default:return`${b} bg-white border border-light text-primary hover:bg-accent-light`}};return e?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed z-50 bg-white border border-light rounded-lg shadow-lg p-1 flex gap-1",style:{left:s.x,top:s.y-50,transform:"translateX(-50%)"},children:p.map(g=>t.jsxs("button",{onClick:g.onClick,className:x(g.variant),title:g.label,children:[g.icon,t.jsx("span",{className:"hidden sm:inline",children:g.label})]},g.id))}),d&&t.jsx("div",{className:"fixed z-40 bg-blue-50 border border-blue-200 rounded-lg shadow-lg p-3 max-w-md",style:{left:s.x,top:s.y+20,transform:"translateX(-50%)"},children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Ps,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-800 text-xs mb-1",children:"Code Explanation:"}),t.jsx("div",{className:"text-blue-700 text-xs leading-relaxed",children:u})]})]}),t.jsx("button",{onClick:()=>c(!1),className:"text-blue-400 hover:text-blue-600 flex-shrink-0",children:t.jsx(vr,{className:"w-3 h-3"})})]})})]}):null}function Kj({initialCode:e,vendorType:n,onChange:r}){const[s,a]=f.useState(e),[i,o]=f.useState(!1),[l,d]=f.useState({top:0,left:0}),[c,u]=f.useState(!1),[m,p]=f.useState(!1),[h,x]=f.useState(""),[g,b]=f.useState(0),[N,j]=f.useState({x:0,y:0});f.useEffect(()=>{e!==s&&a(e)},[e]);const v=y=>{const A=y||"";a(A),r(A),A.includes("undefined_tag")?(o(!0),d({top:50,left:200})):o(!1)},E=()=>{const y=s.replace("undefined_tag","defined_tag");a(y),r(y),o(!1)};f.useEffect(()=>{s.includes("IF")&&s.includes("ELSE")&&s.includes("IF")?u(!0):u(!1)},[s]);const k={type:"nested-conditionals",message:"This nested IF structure can be simplified with a CASE block. Want to refactor?",originalCode:`IF condition1 THEN
  IF condition2 THEN
    result := 1;
  ELSE
    result := 2;
  END_IF;
ELSE
  result := 0;
END_IF;`,refactoredCode:`CASE TRUE OF
  condition1 AND condition2: result := 1;
  condition1 AND NOT condition2: result := 2;
  ELSE result := 0;
END_CASE;`,line:10},C=y=>{a(y),r(y),u(!1)},S=y=>{if(y&&y.startLineNumber&&y.endLineNumber){const A=y.startLineNumber,T=s.split(`
`).slice(y.startLineNumber-1,y.endLineNumber).join(`
`);T.trim()?(x(T),b(A),j({x:300,y:A*20+100}),p(!0)):p(!1)}};return t.jsxs("div",{className:"relative w-full h-[90vh]",children:[c&&t.jsx(Yj,{suggestion:k,onApply:C,onDismiss:()=>u(!1)}),t.jsx("div",{className:"border border-light rounded shadow-sm h-full",children:t.jsx(Jj,{height:"100%",language:"pascal",theme:"vs-light",value:s,onChange:v,onMount:y=>{y.onDidChangeCursorSelection(A=>{S(A.selection)})},options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,selectOnLineNumbers:!0,glyphMargin:!0,folding:!0,lineNumbers:"on",scrollbar:{vertical:"visible",horizontal:"visible",verticalScrollbarSize:14,horizontalScrollbarSize:14},wordWrap:"on",automaticLayout:!0}})}),i&&t.jsx("div",{className:"absolute z-50",style:{top:l.top,left:l.left},children:t.jsx(Xj,{message:"Looks like this tag is undefined. Do you want to auto-fix it?",onApply:E})}),t.jsx(Qj,{isVisible:m,selectedText:h,selectedLine:g,position:N,onExplain:y=>console.log("Explaining:",y),onRefactor:y=>console.log("Refactoring:",y),onSimplify:y=>console.log("Simplifying:",y),onTagEdit:y=>console.log("Editing tags for line:",y)})]})}function Zj(){return t.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2",children:[t.jsx("button",{onClick:()=>{console.log("AI Refactoring logic..."),alert("AI is analyzing your code structure and will suggest improvements for better readability and performance.")},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Refactor Logic",children:t.jsx(ko,{className:"w-5 h-5 text-primary"})}),t.jsx("button",{onClick:()=>{console.log("AI Explaining code..."),alert(`AI Code Explanation:

This logic implements a motor control sequence with safety interlocks. The code structure follows industry standards with proper error handling and safety protocols.`)},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Explain Code",children:t.jsx(Mt,{className:"w-5 h-5 text-primary"})}),t.jsx("button",{onClick:()=>{console.log("AI Highlighting variables..."),alert(`Variable Analysis:

✓ Input Variables: 12 found
✓ Output Variables: 8 found
✓ Internal Variables: 15 found
✓ Safety Variables: 6 found

All variables are properly documented and follow naming conventions.`)},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Highlight Variables",children:t.jsx(On,{className:"w-5 h-5 text-primary"})})]})}function ew({suggestions:e=[],onClose:n}){return e.length?t.jsxs("div",{className:"bg-white border border-light rounded-md shadow-sm p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[t.jsx(su,{className:"w-4 h-4 text-accent"}),"AI Suggestions"]}),n&&t.jsx("button",{onClick:n,className:"text-muted hover:text-primary transition-colors p-1",title:"Close AI Suggestions",children:t.jsx(Ye,{className:"w-4 h-4"})})]}),t.jsx("ul",{className:"space-y-1",children:e.map((r,s)=>t.jsx("li",{className:"px-3 py-1 rounded hover:bg-accent-light cursor-pointer text-sm",onClick:()=>{navigator.clipboard.writeText(r)},title:"Click to copy to clipboard",children:r},s))})]}):null}function tw({isEnabled:e,onToggle:n,diffs:r,originalCode:s,modifiedCode:a,aiSummary:i,onReintegrate:o,onRevert:l}){const[d,c]=f.useState(!1);return t.jsxs("div",{className:"border border-light rounded-md bg-white shadow-sm",children:[t.jsx("div",{className:"p-3 border-b border-light",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:e,onChange:u=>n(u.target.checked),className:"accent-primary"}),t.jsx(wd,{className:"w-4 h-4 text-primary"}),t.jsx("span",{className:"text-sm font-medium text-primary",children:"Compare with Original"})]}),e&&r.length>0&&t.jsxs("span",{className:"text-xs text-accent bg-accent-light px-2 py-1 rounded",children:[r.length," change",r.length!==1?"s":""]})]})}),e&&t.jsx("div",{className:"p-3",children:r.length===0?t.jsxs("div",{className:"text-center text-muted text-sm py-4",children:[t.jsx(Zs,{className:"w-5 h-5 mx-auto mb-2 text-green-500"}),"No changes detected"]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded border border-blue-200",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(ze,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-blue-800 text-xs",children:"AI Analysis:"}),t.jsx("div",{className:"text-blue-700 text-xs",children:i})]})]})}),t.jsxs("div",{className:"flex gap-2 mb-3",children:[t.jsxs("button",{onClick:()=>c(!d),className:"text-xs bg-white border border-light px-3 py-1 rounded hover:bg-gray-50 transition-colors",children:[d?"Hide":"Show"," Diff View"]}),t.jsx("button",{onClick:o,className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition-colors",children:"Reintegrate into AI"}),t.jsxs("button",{onClick:l,className:"text-xs bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700 transition-colors flex items-center gap-1",children:[t.jsx(Nr,{className:"w-3 h-3"}),"Undo Changes"]})]}),d&&t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-muted mb-2",children:"Original Code:"}),t.jsx("pre",{className:"bg-gray-100 p-3 rounded border h-40 overflow-auto font-mono",children:s})]}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-muted mb-2",children:"Modified Code:"}),t.jsx("pre",{className:"bg-green-50 p-3 rounded border h-40 overflow-auto font-mono",children:a})]})]}),t.jsx("div",{className:"space-y-1",children:r.map((u,m)=>t.jsxs("div",{className:`p-2 rounded text-xs ${u.type==="added"?"bg-green-50 border border-green-200":u.type==="removed"?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:[t.jsxs("div",{className:"font-medium mb-1",children:["Line ",u.line,": ",u.type==="added"?"Added":u.type==="removed"?"Removed":"Changed"]}),u.type!=="added"&&t.jsxs("div",{className:"text-red-700",children:["- ",u.original]}),u.type!=="removed"&&t.jsxs("div",{className:"text-green-700",children:["+ ",u.modified]})]},m))})]})})]})}function nw({onSearch:e,onSelectResult:n,placeholder:r="Search routines, logic, variables..."}){const[s,a]=f.useState(""),[i,o]=f.useState([]),[l,d]=f.useState(!1),[c,u]=f.useState(-1),m=f.useRef(null),p=f.useRef(null),h=N=>{if(!N.trim()){o([]),d(!1);return}const j=[{id:"1",type:"routine",title:"Conveyor_2_Start",description:"Motor starter routine for conveyor 2",line:45,routine:"Main",preview:"IF Start_Button AND NOT E_Stop THEN Conveyor_2_Run := TRUE;",confidence:95},{id:"2",type:"block",title:"Overload Protection Logic",description:"Motor overload detection and response",line:78,routine:"Safety_Check",preview:"IF Motor_Current > Max_Current THEN Overload_Fault := TRUE;",confidence:87},{id:"3",type:"variable",title:"Conveyor_2_Status",description:"Boolean status indicator for conveyor 2",line:12,routine:"Main",preview:"VAR Conveyor_2_Status : BOOL := FALSE;",confidence:92}].filter(v=>v.title.toLowerCase().includes(N.toLowerCase())||v.description.toLowerCase().includes(N.toLowerCase())||v.preview.toLowerCase().includes(N.toLowerCase()));o(j),d(j.length>0),u(-1)},x=N=>{if(!(!l||i.length===0))switch(N.key){case"ArrowDown":N.preventDefault(),u(j=>Math.min(j+1,i.length-1));break;case"ArrowUp":N.preventDefault(),u(j=>Math.max(j-1,-1));break;case"Enter":N.preventDefault(),c>=0&&g(i[c]);break;case"Escape":d(!1),u(-1),m.current?.blur();break}},g=N=>{n(N),a(N.title),d(!1),u(-1)},b=N=>{switch(N){case"routine":return t.jsx(Ke,{className:"w-4 h-4 text-blue-500"});case"block":return t.jsx(_t,{className:"w-4 h-4 text-green-500"});case"variable":return t.jsx(Vt,{className:"w-4 h-4 text-purple-500"});case"comment":return t.jsx(Ma,{className:"w-4 h-4 text-gray-500"});default:return t.jsx(On,{className:"w-4 h-4 text-gray-500"})}};return f.useEffect(()=>{const N=j=>{p.current&&!p.current.contains(j.target)&&d(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),t.jsxs("div",{ref:p,className:"relative w-full max-w-md",children:[t.jsxs("div",{className:"relative",children:[t.jsx(On,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted"}),t.jsx("input",{ref:m,type:"text",value:s,onChange:N=>{a(N.target.value),h(N.target.value)},onKeyDown:x,onFocus:()=>s.trim()&&d(i.length>0),placeholder:r,className:"w-full pl-10 pr-4 py-2 border border-light rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all"})]}),l&&i.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-light rounded-md shadow-lg z-50 max-h-64 overflow-y-auto",children:i.map((N,j)=>t.jsx("div",{onClick:()=>g(N),className:`p-3 cursor-pointer transition-colors ${j===c?"bg-accent-light":"hover:bg-gray-50"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[b(N.type),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-medium text-sm text-primary truncate",children:N.title}),t.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-1 rounded",children:[N.confidence,"%"]})]}),t.jsx("div",{className:"text-xs text-muted mb-1",children:N.description}),t.jsxs("div",{className:"text-xs text-muted",children:[t.jsx("span",{className:"font-mono",children:N.routine})," • Line ",N.line]}),t.jsx("div",{className:"text-xs font-mono bg-gray-50 p-1 rounded mt-1 truncate",children:N.preview})]}),t.jsx("div",{className:"flex items-center",children:t.jsx(Ma,{className:"w-3 h-3 text-muted"})})]})},N.id))}),l&&s.trim()&&i.length===0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-light rounded-md shadow-lg z-50 p-3",children:t.jsxs("div",{className:"text-center text-muted text-sm",children:[t.jsx(On,{className:"w-5 h-5 mx-auto mb-1 opacity-50"}),'No results found for "',s,'"']})})]})}const rw="modulepreload",sw=function(e){return"/"+e},Zi={},aw=function(n,r,s){let a=Promise.resolve();if(r&&r.length>0){let d=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");a=d(r.map(c=>{if(c=sw(c),c in Zi)return;Zi[c]=!0;const u=c.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":rw,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((h,x)=>{p.addEventListener("load",h),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return n().catch(i)})};function iw(e={}){const{autoConnect:n=!0,reconnectInterval:r=3e3,maxReconnectAttempts:s=5,debounceMs:a=500,onTagsUpdated:i,onError:o,onConnectionChange:l}=e,[d,c]=f.useState(!1),[u,m]=f.useState(!1),[p,h]=f.useState(null),[x,g]=f.useState(0),[b,N]=f.useState(null),[j,v]=f.useState(0),[E,k]=f.useState(!1),C=f.useRef(null),S=f.useRef(null),y=f.useRef(null),A=f.useCallback(()=>fe.getToken(),[]),w=f.useCallback(()=>{const B=A();if(!B)throw new Error("No authentication token found");return`wss://pandaura-backend-production.up.railway.app/ws/tags?token=${encodeURIComponent(B)}`},[A]),F=f.useCallback(()=>window.location.origin,[]),T=f.useCallback(B=>C.current?.readyState===WebSocket.OPEN?(C.current.send(JSON.stringify(B)),!0):!1,[]),R=f.useCallback(B=>{try{console.log("📨 Received WebSocket message:",B.data);const oe=JSON.parse(B.data);switch(console.log("📨 Parsed message:",oe),oe.type){case"tags_updated":N(Date.now()),v(P=>Math.max(0,P-1)),i?.(oe);break;case"sync_queued":v(P=>P+1);break;case"error":h(oe.error||"Unknown error"),v(P=>Math.max(0,P-1)),o?.(oe.error||"Unknown error");break;case"pong":break}}catch(oe){console.error("Failed to parse WebSocket message:",oe),h("Failed to parse server response")}},[i,o]),M=f.useCallback(()=>{if(C.current?.readyState===WebSocket.OPEN||u||E){console.log(`🚫 Connection blocked: open=${C.current?.readyState===WebSocket.OPEN}, connecting=${u}, disabled=${E}`);return}if(x>=s){console.log(`🚫 Circuit breaker activated: ${x}/${s} attempts exhausted`),k(!0),h(`Connection failed after ${s} attempts. Please refresh the page.`);return}try{m(!0),h(null);const B=w(),oe=F();console.log(`🔗 Connecting to WebSocket: ${B}`),console.log(`🌐 Browser origin: ${oe}`),console.log("🔗 Environment VITE_WS_BASE_URL: wss://pandaura-backend-production.up.railway.app");const P=new WebSocket(B);C.current=P,P.onopen=()=>{if(console.log("🔌 TagSync WebSocket connected successfully!"),console.log("🔌 WebSocket readyState:",P.readyState),console.log("🔌 WebSocket URL:",P.url),c(!0),m(!1),g(0),h(null),l?.(!0),y.current&&C.current?.readyState===WebSocket.OPEN){console.log(`🔄 Re-subscribing to project: ${y.current}`);try{C.current.send(JSON.stringify({type:"subscribe",projectId:y.current})),console.log("📤 Subscription message sent successfully")}catch(xe){console.error("❌ Failed to send subscription message:",xe)}}},P.onmessage=R,P.onclose=xe=>{console.log("🔌 TagSync WebSocket disconnected:",xe.code,xe.reason),c(!1),m(!1),l?.(!1),xe.code!==1e3&&x<s&&!u&&C.current===P?(console.log(`🔄 Scheduling reconnection attempt ${x+1}/${s} in ${r}ms`),g(ve=>ve+1),S.current=setTimeout(()=>{C.current===P&&!u&&(console.log(`🔄 Attempting reconnection ${x}/${s}`),M())},r*Math.pow(2,x))):console.log(`❌ Not reconnecting: code=${xe.code}, attempts=${x}/${s}, connecting=${u}`)},P.onerror=xe=>{console.error("🔌 TagSync WebSocket error:",xe),h("WebSocket connection error"),m(!1)}}catch(B){console.error("Failed to create WebSocket connection:",B),h(B instanceof Error?B.message:"Connection failed"),m(!1)}},[u,w,F,R,x,s,r,l]),O=f.useCallback(()=>{console.log("🔌 Manually disconnecting WebSocket"),S.current&&(clearTimeout(S.current),S.current=null),C.current&&(C.current.close(1e3,"Client disconnect"),C.current=null),c(!1),m(!1),g(0),k(!1),y.current=null},[]),$=f.useCallback(()=>{console.log("🔄 Resetting connection state"),O(),h(null),setTimeout(()=>{M()},1e3)},[O,M]),H=f.useCallback((B,oe,P)=>{T({type:"sync_tags",projectId:B,vendor:oe,stCode:P,debounceMs:a})||h("Not connected to sync service")},[T,a]),re=f.useCallback(B=>{y.current=B,T({type:"subscribe",projectId:B})||h("Not connected to sync service")},[T]),le=f.useCallback(()=>{y.current=null,T({type:"unsubscribe"})||h("Not connected to sync service")},[T]),D=f.useCallback(()=>{T({type:"ping"})},[T]);return f.useEffect(()=>(n&&!E&&(console.log("🔄 Auto-connecting to WebSocket..."),M()),()=>{O()}),[n,E]),f.useEffect(()=>{if(!d)return;const B=setInterval(()=>{D()},3e4);return()=>clearInterval(B)},[d,D]),{isConnected:d,isConnecting:u,lastError:p,connectionAttempts:x,syncTags:H,subscribe:re,unsubscribe:le,ping:D,connect:M,disconnect:O,resetConnection:$,lastSyncTime:b,queuedSyncs:j,isDisabled:E}}const wc=f.createContext(void 0);function Rn({children:e}){const{projectId:n}=Wn(),[r,s]=f.useState(null),[a,i]=f.useState([]),[o,l]=f.useState(new Set),[d,c]=f.useState(new Set);f.useEffect(()=>{let v=null;if(n)v=n,localStorage.setItem("currentProjectId",v);else{const E=localStorage.getItem("currentProjectId");E&&(v=E)}s(v)},[n]);const h=iw({autoConnect:!1,debounceMs:500,onTagsUpdated:v=>{v.tags&&i(v.tags),o.forEach(E=>{try{E(v)}catch(k){console.error("Error in tag update callback:",k)}})},onError:v=>{console.error("TagSync error:",v)},onConnectionChange:v=>{console.log(`TagSync connection ${v?"established":"lost"}`)}});f.useEffect(()=>{r?(console.log(`🔄 ProjectSyncContext: Connecting to tag sync for project ID: ${r}`),console.log(`🔄 TagSync state: connected=${h.isConnected}, connecting=${h.isConnecting}`),setTimeout(()=>{h.connect(),setTimeout(()=>{h.subscribe(r)},100)},100)):(console.log("🔄 ProjectSyncContext: Disconnecting from tag sync (no project ID)"),h.unsubscribe(),h.disconnect(),i([]))},[r]);const x=(v,E)=>{if(!r){console.warn("Cannot sync tags: no project ID available");return}h.syncTags(r,v,E)},g=f.useCallback(async()=>{if(!r)return console.warn("Cannot load tags: no project ID available"),[];if(d.has(r))return console.log(`📂 Tags already loaded for project ${r}, returning cached tags`),a;try{console.log(`📂 ProjectSyncContext: Loading existing tags for project ${r}`),console.log("📂 ProjectSyncContext: Current URL:",window.location.href);const v=`${Kt.apiBaseUrl}/api/v1/tags?projectId=${r}&pageSize=1000`;console.log("📂 ProjectSyncContext: Making API call to:",v);let E=null;try{const{authStorage:A}=await aw(async()=>{const{authStorage:w}=await Promise.resolve().then(()=>nh);return{authStorage:w}},void 0);E=A.getToken()}catch(A){console.error("📂 ProjectSyncContext: Failed to get token from cookies",A)}const k={"Content-Type":"application/json"};E&&(k.Authorization=`Bearer ${E}`);const C=await fetch(v,{headers:k,credentials:"include"});if(console.log("📂 ProjectSyncContext: API response status:",C.status),console.log("📂 ProjectSyncContext: API response ok:",C.ok),!C.ok){const A=await C.text();throw console.error("📂 ProjectSyncContext: API error response:",A),new Error(`Failed to load tags: ${C.statusText} - ${A}`)}const S=await C.json();console.log("📂 ProjectSyncContext: Raw API response data:",S);const y=S.tags||S||[];return console.log("📂 ProjectSyncContext: Extracted tags array:",y),console.log(`📂 ProjectSyncContext: Loaded ${y.length} existing tags for project ${r}`),y.forEach((A,w)=>{console.log(`📂 ProjectSyncContext: Tag ${w+1}:`,{id:A.id,name:A.name,scope:A.scope,data_type:A.data_type,address:A.address,project_id:A.project_id})}),i(y),c(A=>new Set(A).add(r)),y}catch(v){return console.error("📂 ProjectSyncContext: Error loading existing tags:",v),[]}},[r,d,a]),b=v=>{l(E=>new Set(E).add(v))},N=v=>{l(E=>{const k=new Set(E);return k.delete(v),k})},j={currentProjectId:r,isConnected:h.isConnected,isConnecting:h.isConnecting,lastError:h.lastError,lastSyncTime:h.lastSyncTime,queuedSyncs:h.queuedSyncs,syncTags:x,loadExistingTags:g,latestTags:a,onTagsUpdated:b,offTagsUpdated:N,connect:h.connect,disconnect:h.disconnect,connectionAttempts:h.connectionAttempts};return t.jsx(wc.Provider,{value:j,children:e})}function vc(){return f.useContext(wc)||null}function Nc(){const e=vc();if(!e)return{isConnected:!1,isConnecting:!1,lastError:null,lastSyncTime:null,queuedSyncs:0,syncTags:()=>console.warn("useTagSyncOnly: Not connected to ProjectSyncProvider"),latestTags:[],onTagsUpdated:()=>{},offTagsUpdated:()=>{},connect:()=>console.warn("useTagSyncOnly: Not connected to ProjectSyncProvider"),disconnect:()=>console.warn("useTagSyncOnly: Not connected to ProjectSyncProvider"),connectionAttempts:0};const{isConnected:n,isConnecting:r,lastError:s,lastSyncTime:a,queuedSyncs:i,syncTags:o,latestTags:l,onTagsUpdated:d,offTagsUpdated:c,connect:u,disconnect:m,connectionAttempts:p}=e;return{isConnected:n,isConnecting:r,lastError:s,lastSyncTime:a,queuedSyncs:i,syncTags:o,latestTags:l,onTagsUpdated:d,offTagsUpdated:c,connect:u,disconnect:m,connectionAttempts:p}}function ow({isOpen:e,onClose:n,onSave:r,isSaving:s}){const[a,i]=f.useState(""),o=()=>{a.trim()&&(r(a.trim()),i(""))},l=d=>{d.key==="Enter"&&d.ctrlKey&&o()};return t.jsx(lt,{isOpen:e,onClose:n,title:"Save Version",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"version-message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Version Message"}),t.jsx("textarea",{id:"version-message",value:a,onChange:d=>i(d.target.value),onKeyPress:l,placeholder:"Describe the changes in this version...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,disabled:s})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(J,{variant:"outline",onClick:n,disabled:s,children:"Cancel"}),t.jsx(J,{onClick:o,disabled:!a.trim()||s,icon:Dt,children:s?"Saving...":"Save Version"})]})]})})}function lw({projectId:e,currentState:n,onVersionCreated:r,onRollback:s,className:a=""}){const[i,o]=f.useState(!1),[l,d]=f.useState(!1),[c,u]=f.useState(!1),{showToast:m}=St(),{versions:p,isLoading:h,createVersion:x,rollbackToVersion:g,canCreateVersion:b,lastVersionTime:N}=nr({projectId:e,autoCreateVersions:!0}),j=async k=>{if(e){u(!0);try{const C=await x(k,n);console.log("Version created:",C),o(!1),r?.(C),m({variant:"success",title:"Version Saved Successfully!",message:`Version ${C} has been saved with message: "${k}"`,duration:4e3})}catch(C){console.error("Failed to create version:",C),m({variant:"error",title:"Save Failed",message:"Failed to save version. Please try again.",duration:4e3})}finally{u(!1)}}},v=async k=>{try{await g(k),s?.(k)}catch(C){console.error("Failed to rollback:",C),m({variant:"error",title:"Rollback Failed",message:"Failed to rollback to version. Please try again.",duration:5e3})}},E=()=>{if(!N)return"No versions yet";const C=new Date().getTime()-N.getTime(),S=Math.floor(C/(1e3*60)),y=Math.floor(S/60),A=Math.floor(y/24);return S<1?"Just now":S<60?`${S}m ago`:y<24?`${y}h ago`:`${A}d ago`};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:`flex items-center gap-2 ${a}`,children:[t.jsx(J,{size:"sm",variant:"outline",icon:Dt,onClick:()=>o(!0),disabled:!b,title:b?"Save current state as a new version":"Please wait before creating another version",children:"Save Version"}),t.jsxs(J,{size:"sm",variant:"ghost",icon:bo,onClick:()=>d(!0),title:"View version history",children:["History (",p.length,")"]}),t.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[t.jsx(It,{className:"w-3 h-3"}),t.jsxs("span",{children:["Last: ",E()]})]})]}),t.jsx(ow,{isOpen:i,onClose:()=>o(!1),onSave:j,isSaving:c}),l&&t.jsx(lt,{isOpen:l,onClose:()=>d(!1),title:"Version History",size:"lg",children:t.jsx("div",{className:"space-y-4",children:h?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Loading versions..."})]}):p.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(bd,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No versions saved yet"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Create your first version to track changes"})]}):t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:p.map((k,C)=>t.jsx("div",{className:`p-3 border rounded-lg ${C===0?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("span",{className:"font-medium",children:["Version ",k.version_number]}),C===0&&t.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-full",children:"Current"}),t.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${k.is_auto?"bg-gray-100 text-gray-600":"bg-green-100 text-green-600"}`,children:k.is_auto?"Auto":"Manual"})]}),t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:new Date(k.snapshot_info.timestamp*1e3).toLocaleString()}),k.message&&t.jsx("p",{className:"text-sm text-gray-800",children:k.message})]}),C>0&&t.jsx(J,{size:"sm",variant:"outline",onClick:()=>{window.confirm(`Rollback to version ${k.version_number}?`)&&(v(k.version_number),d(!1))},children:"Rollback"})]})},k.id))})})})]})}function cw({projectId:e}){const[n,r]=f.useState(!1),[s,a]=f.useState(null),[i,o]=f.useState(null),l=async()=>{r(!0),o(null),a(null);try{console.log("Testing version history API for project:",e);const u=await Ae.getVersionHistory(e);console.log("Version history result:",u),a(u)}catch(u){console.error("Version history error:",u),o(u.message||"Unknown error")}finally{r(!1)}},d=async()=>{r(!0),o(null),a(null);try{console.log("Testing create version API for project:",e);const u=await Ae.createVersion(e,{state:{test:"debug version",timestamp:Date.now()},message:"Debug test version"});console.log("Create version result:",u),a({versionNumber:u})}catch(u){console.error("Create version error:",u),o(u.message||"Unknown error")}finally{r(!1)}},c=async()=>{r(!0),o(null),a(null);try{console.log("Testing auto-save API for project:",e),await Ae.createAutoSaveVersion(e,{test:"debug auto-save",timestamp:Date.now()}),console.log("Auto-save completed successfully"),a({success:!0,message:"Auto-save completed"})}catch(u){console.error("Auto-save error:",u),o(u.message||"Unknown error")}finally{r(!1)}};return t.jsxs("div",{className:"p-4 border border-gray-300 rounded-lg bg-gray-50",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Version Control API Debug"}),t.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Project ID: ",e]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsx("button",{onClick:l,disabled:n,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 mr-2",children:"Test Get Version History"}),t.jsx("button",{onClick:d,disabled:n,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 mr-2",children:"Test Create Version"}),t.jsx("button",{onClick:c,disabled:n,className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:"Test Auto-Save"})]}),n&&t.jsx("div",{className:"text-blue-600",children:"Loading..."}),i&&t.jsxs("div",{className:"text-red-600 bg-red-50 p-3 rounded border",children:[t.jsx("strong",{children:"Error:"})," ",i]}),s&&t.jsxs("div",{className:"text-green-600 bg-green-50 p-3 rounded border",children:[t.jsx("strong",{children:"Result:"}),t.jsx("pre",{className:"mt-2 text-sm overflow-auto",children:JSON.stringify(s,null,2)})]})]})}function dw(e){const n=e.data_type||e.type||"BOOL",r=e.description?` // ${e.description}`:"",s=e.default_value?` := ${e.default_value}`:"";return`  ${e.name} : ${n}${s};${r}`}function Ns(e){if(e.length===0)return`PROGRAM Main
    VAR
        // Add your variables here
    END_VAR

    // Add your logic here

END_PROGRAM`;const n=e.reduce((a,i)=>{const o=i.scope||"Local";return a[o]||(a[o]=[]),a[o].push(i),a},{});return`PROGRAM Main
${Object.entries(n).map(([a,i])=>{const o=a==="Local"?"VAR":`VAR_${a.toUpperCase()}`,l=i.sort((d,c)=>d.name.localeCompare(c.name)).map(d=>dw(d)).join(`
`);return`    ${o}
${l}
    END_VAR`}).join(`

`)}

    // Add your logic here

END_PROGRAM`}const eo=["Rockwell","Siemens","Beckhoff"];function ks({sessionMode:e=!1}){f.useEffect(()=>{try{Object.keys(localStorage).filter(Ie=>Ie.includes("LogicStudio")||Ie.includes("moduleState")).forEach(Ie=>{const _=localStorage.getItem(Ie);_&&(_.includes("from_model")||_.includes("second_one")||_.includes("test_debug"))&&(console.log("🧹 Clearing localStorage key with unwanted content:",Ie),localStorage.removeItem(Ie))})}catch(X){console.warn("Error during localStorage cleanup:",X)}},[]);const{getModuleState:n,saveModuleState:r}=na(),{isConnected:s,isConnecting:a,lastError:i,lastSyncTime:o,queuedSyncs:l,syncTags:d,connectionAttempts:c}=Nc(),u=vc(),m=u?.currentProjectId||null,p=u?.loadExistingTags||(()=>Promise.resolve([])),h=u?.latestTags||[];f.useEffect(()=>{console.log(`🔍 LogicStudio: Connection state changed - connected: ${s}, connecting: ${a}, error: ${i}`),console.log(`🔍 LogicStudio: Project ID: ${m}`)},[s,a,i,m]);const x=f.useRef(null);f.useEffect(()=>{m&&s&&x.current!==m&&(console.log(`📂 Loading existing tags for project ${m}`),console.log("📂 Current URL:",window.location.href),x.current=m,p().then(X=>{if(console.log("📂 Raw tags loaded from API:",X),console.log("📂 Number of tags loaded:",X.length),X.length>0){console.log(`📂 Found ${X.length} existing tags:`,X),console.log("📂 Tag details:"),X.forEach((Ie,_)=>{console.log(`📂   Tag ${_+1}: name="${Ie.name}", scope="${Ie.scope}", data_type="${Ie.data_type}", address="${Ie.address}"`)});const be=Ns(X);console.log("📂 Generated ST code from existing tags:",be),console.log("📂 Current editor code:",k.substring(0,100)+"..."),console.log("📂 Editor code length:",k.length),C(be),Me.current=be,console.log(`📂 Populated editor with ${X.length} existing tags`)}else{console.log(`📂 No existing tags found for project ${m}`),console.log("📂 Setting editor to empty");const be="";C(be),Me.current=be,console.log("📂 Set editor to empty content")}}).catch(X=>{console.error("Failed to load existing tags:",X),x.current=null}))},[m,s,p]);const g=n("LogicStudio"),b=["from_model","second_one","test_debug"];g.editorCode&&b.some(X=>g.editorCode.includes(X))&&(console.log("🧹 Clearing saved editor state with unwanted template variables"),g.editorCode="");const[j,v]=f.useState(g.prompt||""),E="",[k,C]=f.useState(g.editorCode||E),[S,y]=f.useState(g.vendor||"Siemens"),[A,w]=f.useState(!1),[F,T]=f.useState(g.showPendingChanges||!1),[R,M]=f.useState(g.showAISuggestions!==void 0?g.showAISuggestions:!0),[O,$]=f.useState(g.vendorContextEnabled||!1),[H,re]=f.useState(g.isCollapsed||!1),[le,D]=f.useState(!1),[B,oe]=f.useState(g.collapseLevel||0),P=f.useRef(null);f.useRef(null);const xe=f.useRef(null),ve=[{line:15,original:"MotorStart := TRUE;",modified:"MotorStart := Start_Button AND NOT E_Stop;",type:"changed"},{line:23,original:"",modified:"// Added safety interlock for conveyor",type:"added"}],ne=f.useCallback(async X=>{try{console.log("🔍 DEBUG: Full code being parsed:",X);const be=["from_model","second_one","test_debug"];if(be.some(K=>X.includes(K))){console.log("🚫 BLOCKED: Code contains unwanted template variables, skipping sync"),console.log("🚫 Unwanted variables detected:",be.filter(K=>X.includes(K)));return}const _=/^\s*(\w+)\s*:\s*(\w+)(?:\s*:=\s*[^;]+)?;/gm,Q=[...X.matchAll(_)],me=Q.map(K=>K[1]);console.log("🔍 DEBUG: Regex matches found:",Q.map(K=>({fullMatch:K[0],variableName:K[1],dataType:K[2]}))),console.log("🔍 DEBUG: Extracted variable names:",me);const L=h.map(K=>K.name),U=me.filter(K=>!L.includes(K));if(console.log("🔍 DEBUG: Existing tag names:",L),console.log("🔍 DEBUG: New variables detected:",U),U.length===0){console.log("🔄 Skipping sync - no new variables found in code");return}U.length>0&&(console.log(`🔍 Found ${U.length} new variables: ${U.join(", ")}`),console.log("🔄 Syncing with project vendor (no manual selection needed)")),console.log(`🔄 Syncing tags with project vendor for project ${m}`),d(S.toLowerCase(),X)}catch(be){console.error("Error in tag sync:",be),d(S.toLowerCase(),X)}},[S,d,h,m]),ce=m?parseInt(m):null,{updateProjectState:Fe,isSaving:st,lastSaved:ct,saveError:ft,hasUnsavedChanges:Ft,saveNow:dt}=dc(ce||0,{module:"LogicStudio",prompt:j,editorCode:k,showPendingChanges:F,showAISuggestions:R,vendorContextEnabled:O,isCollapsed:H,collapseLevel:B,lastActivity:new Date().toISOString()});Do(Ft&&!e,dt),f.useEffect(()=>{!e&&ce&&Fe({module:"LogicStudio",prompt:j,editorCode:k,showPendingChanges:F,showAISuggestions:R,vendorContextEnabled:O,isCollapsed:H,collapseLevel:B,lastActivity:new Date().toISOString()})},[e,ce,Fe,j,k,F,R,O,H,B]);const{getVersionData:ut}=nr({projectId:ce||0,autoCreateVersions:!1});f.useEffect(()=>{const X=async _=>{const Q=_,{projectId:me,targetVersion:L,rolledBackTo:U}=Q.detail;if(me===ce&&ce){console.log("Logic Studio: Handling enhanced rollback to version",U);try{const K=await Ae.getVersionSnapshot(ce,U);if(K&&K.autosaveState){const q=K.autosaveState;q.module==="LogicStudio"&&(v(q.prompt||""),C(q.editorCode||""),T(q.showPendingChanges||!1),M(q.showAISuggestions||!1),$(q.vendorContextEnabled||!1),re(q.isCollapsed||!1),oe(q.collapseLevel||0),console.log("Logic Studio state restored from enhanced version snapshot",U))}if(K&&K.moduleStates&&K.moduleStates.LogicStudio){const q=K.moduleStates.LogicStudio;v(q.prompt||""),C(q.editorCode||""),T(q.showPendingChanges||!1),M(q.showAISuggestions||!1),$(q.vendorContextEnabled||!1),re(q.isCollapsed||!1),oe(q.collapseLevel||0),console.log("Logic Studio state restored from module-specific state in version",U)}}catch(K){console.error("Failed to restore Logic Studio state from enhanced version:",K);try{const q=await ut(U);q&&q.module==="LogicStudio"&&(v(q.prompt||""),C(q.editorCode||""),T(q.showPendingChanges||!1),M(q.showAISuggestions||!1),$(q.vendorContextEnabled||!1),re(q.isCollapsed||!1),oe(q.collapseLevel||0),console.log("Logic Studio state restored using legacy method"))}catch(q){console.error("Legacy restore method also failed:",q)}}}},be=_=>{const Q=_,{projectId:me,action:L}=Q.detail;me===ce&&L==="rollback"&&(console.log("Logic Studio: Project state changed due to rollback, refreshing..."),window.location.reload())};window.addEventListener("pandaura:project-rollback",X),window.addEventListener("pandaura:project-state-changed",be);const Ie=_=>{const Q=_,{projectId:me}=Q.detail;me===ce&&(console.log("Logic Studio: Current state requested for version control"),window.dispatchEvent(new CustomEvent("pandaura:current-state-response",{detail:{projectId:ce,module:"LogicStudio",state:{prompt:j,editorCode:k,showPendingChanges:F,showAISuggestions:R,vendorContextEnabled:O,isCollapsed:H,collapseLevel:B,lastActivity:new Date().toISOString()}}})))};return window.addEventListener("pandaura:get-current-state",Ie),()=>{window.removeEventListener("pandaura:project-rollback",X),window.removeEventListener("pandaura:project-state-changed",be),window.removeEventListener("pandaura:get-current-state",Ie)}},[ce,ut]),f.useEffect(()=>{const X=async be=>{const Ie=be,{projectId:_,action:Q,tags:me}=Ie.detail;if(_===m){console.log(`🏷️ Logic Studio: Received tag update for project ${_}, action: ${Q}`);try{const L=await p();if(L&&L.length>0){console.log(`🏷️ Logic Studio: Regenerating editor with ${L.length} tags after manual update`);const U=Ns(L);U!==k&&(C(U),Me.current=U)}else(Q==="delete_all"||Q==="delete"&&!L.length)&&(console.log("🏷️ Logic Studio: All tags deleted, resetting to empty"),C(""),Me.current="")}catch(L){console.error("Failed to update Logic Studio after tag changes:",L)}}};return window.addEventListener("pandaura:tags-updated",X),()=>{window.removeEventListener("pandaura:tags-updated",X)}},[m,p,k,E]);const jt=f.useCallback((()=>{let X;return()=>{e&&(clearTimeout(X),X=setTimeout(()=>{r("LogicStudio",{prompt:j,editorCode:k,showPendingChanges:F,showAISuggestions:R,vendorContextEnabled:O,isCollapsed:H,collapseLevel:B})},1e3))}})(),[e,r,j,k,F,R,O,H,B]),Me=f.useRef(""),At=f.useCallback((()=>{let X;return()=>{!e&&s&&k.trim()&&(k!==Me.current?(clearTimeout(X),X=setTimeout(()=>{if(console.log("🔄 Syncing tags from Logic Studio - code changed"),console.log("🔄 Previous code length:",Me.current.length),console.log("🔄 New code length:",k.length),!k.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim()){console.log("🔄 Skipping sync - editor is empty or contains only comments"),Me.current=k;return}console.log("🔄 Code contains actual content, proceeding with sync"),Me.current=k,ne(k)},1500)):console.log("🔄 Skipping tag sync - code unchanged"))}})(),[e,s,k,S,d]);f.useEffect(()=>{jt()},[jt]),f.useEffect(()=>{console.log("🔄 Editor code changed, triggering debounced sync..."),console.log(`🔄 Current code length: ${k.length}`),console.log(`🔄 Session mode: ${e}, Connected: ${s}`),At()},[k,At]),f.useEffect(()=>{const X=be=>{P.current&&!P.current.contains(be.target)&&w(!1),xe.current&&!xe.current.contains(be.target)&&D(!1)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[]);const Wt=f.useCallback(()=>{console.log("Generate Logic functionality disabled"),alert("Generate Logic functionality has been disabled to prevent unwanted tag creation.")},[]),Et=f.useCallback(X=>{X.key==="Enter"&&!X.shiftKey&&(X.preventDefault(),Wt())},[Wt]);return t.jsxs("div",{className:"flex flex-col h-full bg-background text-primary",children:[t.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("h1",{className:"text-xl font-bold text-primary",children:"Logic Studio"}),!e&&t.jsx("div",{className:"flex items-center gap-2",children:a?t.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[t.jsx(It,{className:"w-4 h-4 animate-pulse"}),t.jsx("span",{className:"text-xs",children:"Connecting..."})]}):s?t.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[t.jsx(Co,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs",children:"Live Sync"}),l>0&&t.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-1 rounded",children:l})]}):t.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[t.jsx(So,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs",children:"Offline"}),c>0&&t.jsxs("span",{className:"text-xs",children:["(",c,")"]})]})}),!e&&ce&&t.jsx(uc,{isSaving:st,lastSaved:ct,saveError:ft,hasUnsavedChanges:Ft,onManualSave:dt,className:"text-xs"}),!e&&ce&&t.jsx(lw,{projectId:ce,currentState:{module:"LogicStudio",prompt:j,editorCode:k,showPendingChanges:F,showAISuggestions:R,vendorContextEnabled:O,isCollapsed:H,collapseLevel:B,lastActivity:new Date().toISOString()},onVersionCreated:X=>{console.log("Version created in Logic Studio:",X)},onRollback:X=>{console.log("Rollback completed in Logic Studio:",X)},className:"border-l border-gray-200 pl-3"}),!e&&t.jsx("button",{onClick:()=>{console.log("🔄 Refreshing tags from database..."),p().then(X=>{if(X.length>0){const be=Ns(X);C(be),Me.current=be,console.log(`🔄 Refreshed editor with ${X.length} tags`)}else C(""),Me.current="",console.log("🔄 No tags found, set empty content")}).catch(X=>{console.error("Failed to refresh tags:",X)})},className:"bg-white border border-light px-2 py-2 rounded-md text-sm hover:bg-accent-light transition-colors cursor-pointer",title:"Refresh tags from database",children:t.jsx(Ue,{className:"w-4 h-4"})}),t.jsxs("div",{className:"relative",ref:xe,children:[t.jsxs("button",{onClick:()=>D(!le),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors text-sm text-gray-600",title:"Collapse Interface",children:[t.jsx(Or,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs",children:"Layout"}),H?t.jsx(yn,{className:"w-3 h-3"}):t.jsx(Fr,{className:"w-3 h-3"})]}),le&&t.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-light rounded-lg shadow-lg p-4 z-20 w-64",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("h4",{className:"text-sm font-medium text-primary mb-2",children:"Interface Layout"}),t.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Adjust the interface to your workflow needs"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center text-sm",children:[t.jsx("input",{type:"radio",name:"layout",checked:B===0,onChange:()=>{oe(0),re(!1)},className:"mr-2"}),"Full Interface"]}),t.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"All panels and features visible"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center text-sm",children:[t.jsx("input",{type:"radio",name:"layout",checked:B===1,onChange:()=>{oe(1),re(!0)},className:"mr-2"}),"Compact"]}),t.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"Hide side panels, keep core features"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center text-sm",children:[t.jsx("input",{type:"radio",name:"layout",checked:B===2,onChange:()=>{oe(2),re(!0)},className:"mr-2"}),"Minimal"]}),t.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"Editor-focused, minimal UI"})]})]}),t.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:t.jsx("button",{onClick:()=>D(!1),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors",children:"Apply Layout"})})]})]})]}),t.jsx("div",{className:"text-sm text-secondary",children:"Project: Motor_Auto.ap14"})]}),t.jsxs("main",{className:`flex-1 flex flex-col ${B===2?"gap-3 p-3":"gap-6 p-6"} will-change-scroll`,style:{scrollBehavior:"smooth"},children:[B<2&&t.jsx("div",{className:"flex justify-end",children:t.jsx(nw,{onSearch:X=>(console.log("Searching for:",X),[]),onSelectResult:X=>{console.log("Selected result:",X)}})}),t.jsx("div",{className:"flex-1 min-h-[400px]",children:t.jsx("div",{className:"h-full border border-light rounded-md overflow-hidden shadow-sm",children:t.jsx(Kj,{initialCode:k,vendorType:S,onChange:X=>C(X)})})}),B===0&&t.jsx(tw,{isEnabled:F,onToggle:T,diffs:ve,originalCode:"PROGRAM Main\\n  VAR\\n    MotorStart : BOOL;\\n  END_VAR\\n  MotorStart := TRUE;\\nEND_PROGRAM",modifiedCode:"PROGRAM Main\\n  VAR\\n    MotorStart : BOOL;\\n  END_VAR\\n  // Added safety interlock for conveyor\\n  MotorStart := Start_Button AND NOT E_Stop;\\nEND_PROGRAM",aiSummary:"User added safety interlock logic and documentation. Changes improve safety compliance by checking emergency stop conditions.",onReintegrate:()=>console.log("Reintegrating changes with AI..."),onRevert:()=>{console.log("Reverting changes..."),T(!1)}}),t.jsxs("div",{className:`bg-white border border-light rounded-lg shadow-sm ${B===2?"p-2":"p-4"}`,children:[t.jsxs("div",{className:`flex ${B===2?"gap-2":"gap-3"} items-end`,children:[t.jsx("textarea",{className:`flex-1 border border-light rounded-md px-4 py-3 bg-surface shadow-sm text-sm text-primary placeholder-muted resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all ${B===2?"min-h-[40px] max-h-[80px]":"min-h-[60px] max-h-[60px]"}`,placeholder:B===2?"Describe logic...":"Describe your logic requirements in natural language...",value:j,onChange:X=>v(X.target.value),onKeyPress:Et}),B<2?t.jsxs("div",{className:"relative",ref:P,children:[t.jsxs("button",{onClick:()=>w(!A),className:"flex items-center gap-2 border border-light bg-white px-4 py-3 rounded-md shadow-sm text-sm text-primary hover:bg-accent-light transition-all min-h-[60px] whitespace-nowrap",children:["Vendor: ",S,t.jsx(Ut,{className:"w-4 h-4"})]}),A&&t.jsx("div",{className:"absolute bottom-full mb-1 w-48 bg-surface border border-light rounded-md shadow-lg z-10",children:eo.map(X=>t.jsx("div",{onClick:()=>{y(X),w(!1)},className:"px-4 py-2 text-sm hover:bg-accent-light cursor-pointer",children:X},X))})]}):t.jsx("select",{value:S,onChange:X=>y(X.target.value),className:"border border-light bg-white px-3 py-2 rounded-md shadow-sm text-sm text-primary min-h-[40px]",children:eo.map(X=>t.jsx("option",{value:X,children:X},X))}),B<2&&t.jsx("button",{onClick:()=>{console.log(`Exporting logic to ${S} format`),alert(`✅ Exporting logic to ${S} format...

Your structured text will be downloaded shortly in ${S}-compatible format.`)},className:"bg-primary text-white px-4 py-3 rounded-md shadow-sm text-sm hover:bg-secondary transition-all min-h-[60px] whitespace-nowrap",title:"Export current logic to vendor-specific format",children:"📤 Export Logic"}),t.jsx("button",{onClick:()=>{console.log("Opening document uploader...")},className:`border border-light bg-white rounded-md shadow-sm hover:bg-accent-light transition-all text-sm ${B===2?"p-2 min-h-[40px]":"p-3 min-h-[60px]"}`,title:"Upload any project documents to improve logic accuracy.",children:t.jsx(ea,{className:`text-primary ${B===2?"w-4 h-4":"w-5 h-5"}`})}),t.jsx("button",{onClick:()=>alert("Generate Logic functionality is disabled to prevent unwanted tag creation."),className:`bg-gray-400 text-white rounded-md shadow-sm text-sm cursor-not-allowed ${B===2?"px-4 py-2 min-h-[40px]":"px-6 py-3 min-h-[60px]"}`,disabled:!0,children:B===2?"Generate (Disabled)":"Generate Logic (Disabled)"})]}),B<2&&t.jsx("div",{className:"text-xs text-muted text-center mt-3",children:"🟢 Define Prompt → 🟡 Upload Docs → 🟡 Choose Vendor → ⚪ Review/Edit Logic"})]}),R&&B===0&&t.jsx(ew,{suggestions:["IF Safety_OK AND Start_Button THEN","Conveyor_Speed := Target_Speed;","Motor_Fault := Overload OR Overcurrent;"],onClose:()=>M(!1)}),B<2&&t.jsxs("div",{className:"bg-white border border-light rounded-md p-3",children:[t.jsx("h3",{className:"text-sm font-medium text-primary mb-3",children:"Quick Actions"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[B===0&&t.jsxs("button",{onClick:()=>T(!F),className:"text-xs bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded transition-colors",children:[F?"📋 Hide":"📋 Show"," Pending Changes"]}),!R&&B===0&&t.jsx("button",{onClick:()=>M(!0),className:"text-xs bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded transition-colors",children:"✨ Show AI Suggestions"}),B===1&&t.jsx("button",{onClick:()=>{oe(0),re(!1)},className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 px-3 py-2 rounded transition-colors",children:"🔧 Show All Features"})]})]})]}),B<2&&t.jsx(Zj,{}),!e&&ce&&t.jsx("div",{className:"mt-4",children:t.jsx(cw,{projectId:ce})})]})}function Ss({sessionMode:e=!1}){const[n,r]=f.useState("logic-studio"),[s,a]=f.useState(!1),[i,o]=f.useState([]),[l,d]=f.useState(null),[c,u]=f.useState(!1),[m,p]=f.useState({companyName:"",projectName:"",projectId:"",contactName:"",contactEmail:"",siteAddress:"",deliveryDate:"",integratorCompany:"Pandaura Automation Systems"}),[h,x]=f.useState([{id:"functional-desc",title:"Functional Description",description:"Comprehensive system operation description",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF","TXT"],selected:!1},{id:"sequence-ops",title:"Sequence of Operations",description:"Step-by-step operational procedures",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF"],selected:!1},{id:"tag-database",title:"Tag Database",description:"Complete I/O and variable listing",status:"ready",source:"Tag Database Manager",formats:["XLSX","CSV"],selected:!1},{id:"io-map",title:"I/O Map",description:"Physical input/output assignments",status:"ready",source:"Logic Studio Analysis",formats:["XLSX","PDF"],selected:!1},{id:"logic-summary",title:"Logic Summary Report",description:"High-level logic overview and statistics",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF"],selected:!1},{id:"hmi-tags",title:"HMI Tag List",description:"Human Machine Interface tag definitions",status:"pending",source:"Auto-detected from Logic",formats:["XLSX","CSV"],selected:!1},{id:"alarm-list",title:"Alarm List",description:"System alarm definitions and responses",status:"ready",source:"Logic Studio Analysis",formats:["XLSX","DOCX"],selected:!1},{id:"revision-history",title:"Revision History / Change Log",description:"Project version control and modifications",status:"ready",source:"Auto-generated",formats:["DOCX","PDF"],selected:!1}]),g=S=>{r(S),a(S==="import")},b=S=>{if(!S)return;const y=Array.from(S).map(A=>({name:A.name,tag:N(A.name),status:"pending",type:j(A.name)}));o(A=>[...A,...y]),setTimeout(()=>{o(A=>A.map(w=>y.some(F=>F.name===w.name)?{...w,status:"analyzed"}:w))},2e3)},N=S=>{const y=S.toLowerCase();return y.includes(".st")||y.includes(".acd")||y.includes(".s7p")?"[Logic]":y.includes(".xlsx")||y.includes(".csv")?"[I/O List]":y.includes(".docx")||y.includes(".pdf")?"[Functional Spec]":"[Document]"},j=S=>{const y=S.toLowerCase();return y.includes(".st")||y.includes(".acd")||y.includes(".s7p")?"logic":y.includes(".xlsx")||y.includes(".csv")?"io":y.includes(".docx")||y.includes(".pdf")?"spec":"doc"},v=S=>{x(y=>y.map(A=>A.id===S?{...A,selected:!A.selected}:A))},E=()=>{const S=h.every(y=>y.selected);x(y=>y.map(A=>({...A,selected:!S})))},k=()=>{const S=h.filter(y=>y.selected);if(S.length===0){alert("Please select documents to export");return}console.log("Exporting documents:",S.map(y=>y.title)),alert(`Generating ${S.length} document(s)...
Download will begin shortly.`)},C=l?h.find(S=>S.id===l):null;return t.jsxs("div",{className:"flex flex-col h-full bg-background",children:[t.jsx("header",{className:"bg-white border-b border-light px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h1",{className:"text-2xl font-bold text-primary",children:"AutoDocs"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"relative",children:t.jsxs("select",{value:n,onChange:S=>g(S.target.value),className:"border border-light rounded px-4 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"logic-studio",children:"Use Logic from Logic Studio"}),t.jsx("option",{value:"import",children:"Import Logic / Docs"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:E,className:"text-sm text-muted hover:text-primary px-3 py-2",children:h.every(S=>S.selected)?"Deselect All":"Select All"}),t.jsxs("button",{onClick:k,className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors flex items-center gap-2",children:[t.jsx(Bt,{className:"w-4 h-4"}),"Export Selected"]})]})]})]})}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 w-full p-3 bg-white border border-light rounded-md hover:bg-gray-50 transition-colors",children:[c?t.jsx(qd,{className:"w-4 h-4"}):t.jsx(fn,{className:"w-4 h-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Add Client Information (Optional)"})]}),c&&t.jsx("div",{className:"mt-3 p-4 bg-white border border-light rounded-md",children:t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Client Company Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:m.companyName,onChange:S=>p(y=>({...y,companyName:S.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Acme Manufacturing"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Project Name ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"text",value:m.projectName,onChange:S=>p(y=>({...y,projectName:S.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Batch Mixing Control System"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:"Project ID / Reference"}),t.jsx("input",{type:"text",value:m.projectId,onChange:S=>p(y=>({...y,projectId:S.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., PRJ-2025-001"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Date of Delivery ",t.jsx("span",{className:"text-red-500",children:"*"})]}),t.jsx("input",{type:"date",value:m.deliveryDate,onChange:S=>p(y=>({...y,deliveryDate:S.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent"})]}),t.jsxs("div",{className:"col-span-2",children:[t.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:"Site Address / Location"}),t.jsx("textarea",{value:m.siteAddress,onChange:S=>p(y=>({...y,siteAddress:S.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",rows:2,placeholder:"Installation site address..."})]})]})})]}),s&&t.jsxs("div",{className:"mb-6 p-4 bg-white border border-light rounded-md",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Smart Upload Panel"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-4",children:[t.jsx(jn,{className:"w-8 h-8 text-muted mx-auto mb-2"}),t.jsxs("p",{className:"text-sm text-muted mb-2",children:["Drag & drop files here or"," ",t.jsx("button",{className:"text-accent hover:underline",children:"browse files"})]}),t.jsx("p",{className:"text-xs text-muted",children:"Supported: .ACD, .S7P, .XML, .ST, .TXT, .DOCX, .PDF, .XLSX, .CSV"}),t.jsx("input",{type:"file",multiple:!0,onChange:S=>b(S.target.files),className:"hidden",accept:".acd,.s7p,.xml,.st,.txt,.docx,.pdf,.xlsx,.csv"})]}),i.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium",children:"Uploaded Files:"}),i.map((S,y)=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm",children:S.name}),t.jsx("span",{className:"text-xs bg-accent-light text-accent px-2 py-1 rounded",children:S.tag}),t.jsx("span",{className:`text-xs px-2 py-1 rounded ${S.status==="analyzed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:S.status==="analyzed"?"Analyzed":"Pending"})]}),t.jsx("button",{onClick:()=>o(A=>A.filter((w,F)=>F!==y)),className:"text-muted hover:text-red-500",children:t.jsx(Ye,{className:"w-4 h-4"})})]},y))]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(S=>t.jsxs("div",{className:`p-4 bg-white border rounded-md cursor-pointer transition-all ${S.selected?"border-accent bg-accent-light":"border-light hover:border-gray-300"}`,onClick:()=>v(S.id),children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:S.selected,onChange:()=>{},className:"accent-primary"}),t.jsx("h3",{className:"font-medium text-sm",children:S.title})]}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:y=>{y.stopPropagation(),d(l===S.id?null:S.id)},className:"text-muted hover:text-primary",title:"Preview",children:t.jsx(mn,{className:"w-4 h-4"})}),t.jsx("button",{onClick:y=>{y.stopPropagation(),console.log(`Generating ${S.title}...`),alert(`Generating ${S.title}...
This will create the document using current project data.`)},className:"text-accent hover:text-purple-600",title:"Generate",children:t.jsx(Vt,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:`flex items-center gap-1 text-xs ${S.status==="ready"?"text-green-600":"text-yellow-600"}`,children:[S.status==="ready"?t.jsx(Zs,{className:"w-3 h-3"}):t.jsx(Or,{className:"w-3 h-3"}),S.status==="ready"?"Ready to Generate":"Pending Input"]}),t.jsxs("div",{className:"text-xs text-muted",children:["Generated from: ",S.source]}),t.jsxs("div",{className:"text-xs text-muted",children:["Format: ",S.formats.join(", ")]})]}),t.jsxs("button",{onClick:y=>{y.stopPropagation(),console.log(`Exporting ${S.title}`),alert(`Generating ${S.title}...`)},className:"mt-3 w-full bg-gray-100 hover:bg-gray-200 text-primary px-3 py-1 rounded text-xs transition-colors flex items-center justify-center gap-1",children:[t.jsx(Bt,{className:"w-3 h-3"}),"Export"]})]},S.id))})]}),l&&C&&t.jsxs("div",{className:"w-2/5 bg-white border-l border-light p-6 overflow-y-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium",children:C.title}),t.jsxs("p",{className:"text-sm text-muted",children:["Source: ",C.source]})]}),t.jsx("button",{onClick:()=>d(null),className:"text-muted hover:text-primary",children:t.jsx(Ye,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border text-sm",children:[t.jsx("h4",{className:"font-medium mb-2",children:"Document Preview:"}),t.jsxs("div",{className:"space-y-2 text-xs font-mono",children:[t.jsx("div",{children:"1. SYSTEM OVERVIEW"}),t.jsxs("div",{className:"ml-4",children:["1.1 Project: ",m.projectName||"Motor Control System"]}),t.jsxs("div",{className:"ml-4",children:["1.2 Client: ",m.companyName||"Industrial Client"]}),t.jsxs("div",{className:"ml-4",children:["1.3 Delivery Date: ",m.deliveryDate||"TBD"]}),t.jsx("div",{children:"2. FUNCTIONAL DESCRIPTION"}),t.jsx("div",{className:"ml-4",children:"2.1 The system controls motor operation with safety interlocks..."}),t.jsx("div",{className:"ml-4",children:"2.2 Emergency stop functionality provides immediate shutdown..."}),t.jsx("div",{children:"3. SEQUENCE OF OPERATIONS"}),t.jsx("div",{className:"ml-4",children:"3.1 System startup sequence..."}),t.jsxs("div",{className:"text-muted",children:["... (continues for ",Math.floor(Math.random()*20)+10," pages)"]})]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{className:"w-full bg-accent text-white px-4 py-2 rounded text-sm hover:bg-purple-600 transition-colors",children:"Regenerate with AI Edits"}),t.jsx("div",{className:"relative",children:t.jsxs("select",{className:"w-full border border-light rounded px-4 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{children:"Export as..."}),C.formats.map(S=>t.jsx("option",{value:S,children:S},S))]})}),t.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[t.jsx("input",{type:"checkbox",className:"accent-primary"}),"Include in ZIP Export"]})]})]})]})]})}function Tt(e){const n=e.headers.get("Content-Disposition");if(n){const r=n.match(/filename="([^"]+)"/);if(r)return r[1];const s=n.match(/filename=([^;]+)/);if(s)return s[1].trim()}return"export.csv"}function uw(e,n){const r=window.URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}ra();const Ne=`${Kt.apiBaseUrl}/api/v1`;console.log("🔗 TagsAPI initialized with base URL:",Ne);function Le(){const e=fe.getToken();return{"Content-Type":"application/json",Authorization:e?`Bearer ${e}`:""}}class Pe{static async getTags(n={}){const r=new URLSearchParams;Object.entries(n).forEach(([l,d])=>{d!=null&&d!==""&&r.append(l,d.toString())});const s=r.toString(),a=`${Ne}/tags${s?`?${s}`:""}`,i=await fetch(a,{headers:Le()});if(!i.ok){const l=await i.json().catch(()=>({error:"Network error"}));throw new Error(l.error||"Failed to fetch tags")}const o=await i.json();return{success:!0,data:{tags:Array.isArray(o)?o:[],pagination:{page:1,pageSize:Array.isArray(o)?o.length:0,total:Array.isArray(o)?o.length:0,totalPages:1}}}}static async createTag(n){const r=await fetch(`${Ne}/tags`,{method:"POST",headers:Le(),body:JSON.stringify(n)});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));let i=a.error||"Failed to create tag";throw a.details&&Array.isArray(a.details)&&a.details.length>0&&(i+=": "+a.details.join(", ")),new Error(i)}return{success:!0,data:(await r.json()).tag}}static async getTag(n){const r=await fetch(`${Ne}/tags/${n}`,{headers:Le()});if(!r.ok){const s=await r.json().catch(()=>({error:"Network error"}));throw new Error(s.error||"Failed to fetch tag")}return r.json()}static async updateTag(n,r){const s=await fetch(`${Ne}/tags/${n}`,{method:"PUT",headers:Le(),body:JSON.stringify(r)});if(!s.ok){const i=await s.json().catch(()=>({error:"Network error"}));let o=i.error||"Failed to update tag";throw i.details&&Array.isArray(i.details)&&i.details.length>0&&(o+=": "+i.details.join(", ")),new Error(o)}return{success:!0,data:(await s.json()).tag}}static async deleteTag(n){const r=await fetch(`${Ne}/tags/${n}`,{method:"DELETE",headers:Le()});if(!r.ok){const s=await r.json().catch(()=>({error:"Network error"}));throw new Error(s.error||"Failed to delete tag")}return r.json()}static async autoGenerateTags(n){const r=await fetch(`${Ne}/tags/autogenerate`,{method:"POST",headers:Le(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json().catch(()=>({error:"Network error"}));throw new Error(s.error||"Failed to generate tags")}return r.json()}static async exportTags(n){const r=await fetch(`${Ne}/tags/export`,{method:"POST",headers:Le(),body:JSON.stringify(n)});if(!r.ok){const s=await r.json().catch(()=>({error:"Network error"}));throw new Error(s.error||"Failed to export tags")}return r.json()}static async exportVendorTags(n,r,s="json"){let a;r==="beckhoff"?s==="csv"||s==="xlsx"?a=`${Ne}/tags/projects/${n}/export/beckhoff/csv`:s==="xml"?a=`${Ne}/tags/projects/${n}/export/beckhoff/xml`:a=`${Ne}/tags/projects/${n}/export/beckhoff/csv`:a=`${Ne}/tags/projects/${n}/export/${r}/formatted`;const i=await fetch(a,{method:"GET",headers:Le()});if(!i.ok){const o=await i.json().catch(()=>({error:"Network error"}));throw new Error(o.error||"Failed to export vendor-specific tags")}return i.blob()}static async exportBeckhoffCsv(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/beckhoff/csv`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Beckhoff CSV")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportBeckhoffXml(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/beckhoff/xml`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Beckhoff XML")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportRockwellCsv(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/rockwell/csv`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Rockwell CSV")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportRockwellL5X(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/rockwell/l5x`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Rockwell L5X")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportSiemensCsv(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/siemens/csv`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Siemens CSV")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportSiemensXml(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/siemens/xml`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Siemens XML")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportBeckhoffXlsx(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/beckhoff/xlsx`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Beckhoff XLSX")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportSiemensXlsx(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/siemens/xlsx`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Siemens XLSX")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async exportRockwellXlsx(n){const r=await fetch(`${Ne}/tags/projects/${n}/export/rockwell/xlsx`,{method:"GET",headers:Le()});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export Rockwell XLSX")}const s=await r.blob(),a=Tt(r);return{blob:s,filename:a}}static async importBeckhoffCsv(n,r){const s=new FormData;return s.append("file",r),await(await fetch(`${Ne}/tags/projects/${n}/import/beckhoff/csv`,{method:"POST",headers:{Authorization:`Bearer ${fe.getToken()}`},body:s})).json().catch(()=>({success:!1,error:"Network error"}))}static async importBeckhoffXml(n,r){const s=new FormData;return s.append("file",r),await(await fetch(`${Ne}/tags/projects/${n}/import/beckhoff/xml`,{method:"POST",headers:{Authorization:`Bearer ${fe.getToken()}`},body:s})).json().catch(()=>({success:!1,error:"Network error"}))}static async importRockwellCsv(n,r){const s=new FormData;return s.append("file",r),await(await fetch(`${Ne}/tags/projects/${n}/import/rockwell/csv`,{method:"POST",headers:{Authorization:`Bearer ${fe.getToken()}`},body:s})).json().catch(()=>({success:!1,error:"Network error"}))}static async importRockwellL5X(n,r){const s=new FormData;return s.append("file",r),await(await fetch(`${Ne}/tags/projects/${n}/import/rockwell/l5x`,{method:"POST",headers:{Authorization:`Bearer ${fe.getToken()}`},body:s})).json().catch(()=>({success:!1,error:"Network error"}))}static async importSiemensCsv(n,r){const s=new FormData;return s.append("file",r),await(await fetch(`${Ne}/tags/projects/${n}/import/siemens/csv`,{method:"POST",headers:{Authorization:`Bearer ${fe.getToken()}`},body:s})).json().catch(()=>({success:!1,error:"Network error"}))}static async importSiemensXml(n,r){const s=new FormData;s.append("file",r);const a=await fetch(`${Ne}/tags/projects/${n}/import/siemens/xml`,{method:"POST",headers:{Authorization:`Bearer ${fe.getToken()}`},body:s});if(!a.ok){const i=await a.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to import Siemens XML")}return a.json()}static async formatTagsForVendor(n,r,s){const a=await fetch(`${Ne}/tags/format/${r}`,{method:"POST",headers:Le(),body:JSON.stringify({projectId:n,tags:s})});if(!a.ok){const i=await a.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to format tags for vendor")}return a.json()}static async validateAddressesForVendor(n,r){const s=await fetch(`${Ne}/tags/validate-addresses/${n}`,{method:"POST",headers:Le(),body:JSON.stringify({addresses:r})});if(!s.ok){const a=await s.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to validate addresses")}return s.json()}static async getTagStats(n){const r=await fetch(`${Ne}/tags/stats/${n}`,{headers:Le()});if(!r.ok){const s=await r.json().catch(()=>({error:"Network error"}));throw new Error(s.error||"Failed to fetch tag statistics")}return r.json()}}const kc=f.createContext(void 0),mw=({children:e})=>{const[n,r]=f.useState([]),[s,a]=f.useState(!1),[i,o]=f.useState(null),[l,d]=f.useState({}),[c,u]=f.useState({page:1,pageSize:50,total:0,totalPages:0}),m=f.useCallback(v=>{d(E=>({...E,...v}))},[]),p=f.useCallback(async v=>{a(!0),o(null);try{const E=v||l,k=await Pe.getTags(E);r(k.data.tags),u(k.data.pagination),v&&d(C=>({...C,...v}))}catch(E){const k=E instanceof Error?E.message:"Failed to fetch tags";o(k),console.error("Error fetching tags:",E)}finally{a(!1)}},[l]),h=f.useCallback(async v=>{o(null);try{const k=(await Pe.createTag(v)).data;return r(C=>[k,...C]),u(C=>({...C,total:C.total+1})),k}catch(E){const k=E instanceof Error?E.message:"Failed to create tag";throw o(k),E}},[]),x=f.useCallback(async(v,E)=>{o(null);try{const C=(await Pe.updateTag(v,E)).data;return r(S=>S.map(y=>y.id===v?C:y)),C}catch(k){const C=k instanceof Error?k.message:"Failed to update tag";throw o(C),k}},[]),g=f.useCallback(async v=>{o(null);try{await Pe.deleteTag(v),r(E=>E.filter(k=>k.id!==v)),u(E=>({...E,total:Math.max(0,E.total-1)}))}catch(E){const k=E instanceof Error?E.message:"Failed to delete tag";throw o(k),E}},[]),b=f.useCallback(async()=>{await p(l)},[p,l]),N=f.useCallback(()=>{o(null)},[]),j={tags:n,loading:s,error:i,filters:l,pagination:c,fetchTags:p,createTag:h,updateTag:x,deleteTag:g,setFilters:m,clearError:N,refreshTags:b};return t.jsx(kc.Provider,{value:j,children:e})},hw=()=>{const e=f.useContext(kc);if(!e)throw new Error("useTags must be used within a TagsProvider");return e},to=[{vendor:"rockwell",formats:["csv","xlsx","l5x"],displayName:"Rockwell (Allen-Bradley)"},{vendor:"siemens",formats:["csv","xlsx","xml"],displayName:"Siemens (TIA Portal)"},{vendor:"beckhoff",formats:["csv","xlsx","xml"],displayName:"Beckhoff (TwinCAT)"}];function pw({isOpen:e,onClose:n,projectId:r,projectName:s,tags:a}){const[i,o]=f.useState({step:"select"}),l=j=>a.filter(v=>v.vendor===j).length,d=a.length;f.useEffect(()=>{e&&o({step:"select"})},[e]);const c=j=>{o(v=>({...v,selectedVendor:j}))},u=j=>{o(v=>({...v,selectedFormat:j}))},m=()=>{o(j=>({...j,step:"confirm"}))},p=async()=>{if(!i.selectedVendor||!i.selectedFormat)return;const j=l(i.selectedVendor);if(j===0){o(v=>({...v,step:"error",errorMessage:`No ${i.selectedVendor} tags found in this project. Please import or create ${i.selectedVendor} tags first.`}));return}o(v=>({...v,step:"progress"}));try{j>1e3&&await new Promise(k=>setTimeout(k,1e3));let v;i.selectedVendor==="beckhoff"?i.selectedFormat==="csv"?v=await Pe.exportBeckhoffCsv(r):i.selectedFormat==="xml"?v=await Pe.exportBeckhoffXml(r):i.selectedFormat==="xlsx"?v=await Pe.exportBeckhoffXlsx(r):v=await Pe.exportBeckhoffCsv(r):i.selectedVendor==="siemens"?i.selectedFormat==="csv"?v=await Pe.exportSiemensCsv(r):i.selectedFormat==="xml"?v=await Pe.exportSiemensXml(r):i.selectedFormat==="xlsx"?v=await Pe.exportSiemensXlsx(r):v=await Pe.exportSiemensCsv(r):i.selectedVendor==="rockwell"?i.selectedFormat==="csv"?v=await Pe.exportRockwellCsv(r):i.selectedFormat==="l5x"?v=await Pe.exportRockwellL5X(r):i.selectedFormat==="xlsx"?v=await Pe.exportRockwellXlsx(r):v=await Pe.exportRockwellCsv(r):v={blob:await Pe.exportVendorTags(r,i.selectedVendor,i.selectedFormat),filename:`${s}-${i.selectedVendor}-tags.${i.selectedFormat}`};const E=window.URL.createObjectURL(v.blob);o(k=>({...k,step:"success",downloadUrl:E,filename:v.filename}))}catch(v){let E="Unknown error occurred";v instanceof Error?E=v.message:typeof v=="string"&&(E=v),(E.includes("Failed to fetch")||E.includes("NetworkError"))&&(E="Network error occurred. Please check your connection and try again."),o(k=>({...k,step:"error",errorMessage:E}))}},h=async()=>{if(i.downloadUrl&&i.filename)try{const v=await(await fetch(i.downloadUrl)).blob();uw(v,i.filename),window.URL.revokeObjectURL(i.downloadUrl)}catch(j){console.error("Download failed:",j);const v=document.createElement("a");v.href=i.downloadUrl,v.download=i.filename,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(i.downloadUrl)}},x=()=>{o(j=>({...j,step:"select"}))},g=()=>{o(j=>({...j,step:"select"}))},b=i.selectedVendor&&i.selectedFormat,N=to.find(j=>j.vendor===i.selectedVendor);return d===0?t.jsx(lt,{isOpen:e,onClose:n,title:"Export Tags",size:"md",children:t.jsxs("div",{className:"flex flex-col items-center py-8 text-center",children:[t.jsx(ze,{className:"w-16 h-16 text-amber-500 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Tags to Export"}),t.jsx("p",{className:"text-gray-600 mb-6",children:"Please generate or import tags before exporting."}),t.jsx("button",{onClick:n,className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary-dark transition-colors",children:"Close"})]})}):t.jsx(lt,{isOpen:e,onClose:n,title:i.step==="select"?"Export Your Tags":i.step==="confirm"?"Confirm Export":i.step==="progress"?"Exporting Tags":i.step==="success"?"Export Complete!":"Export Failed",size:"md",children:t.jsxs("div",{className:"space-y-6",children:[i.step==="select"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Choose your export vendor and format:"}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Vendor"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:to.map(j=>{const v=l(j.vendor);return t.jsxs("div",{onClick:()=>c(j.vendor),className:`border rounded-lg p-3 cursor-pointer transition-colors ${i.selectedVendor===j.vendor?"border-primary bg-primary/5":v===0?"border-gray-200 bg-gray-50 opacity-60 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,style:{pointerEvents:v===0?"none":"auto"},children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:j.displayName}),t.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Formats: ",j.formats.map(E=>E.toUpperCase()).join(", ")]})]}),t.jsxs("div",{className:`text-sm font-medium ${v===0?"text-gray-400":"text-blue-600"}`,children:[v," tags"]})]}),v===0&&t.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"No tags available for this vendor"})]},j.vendor)})})]}),i.selectedVendor&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Format"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:N?.formats.map(j=>t.jsxs("div",{onClick:()=>u(j),className:`border rounded-lg p-3 cursor-pointer transition-colors text-center ${i.selectedFormat===j?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[t.jsx("div",{className:"font-medium",children:j.toUpperCase()}),j==="l5x"&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Rockwell Studio 5000 format"}),j==="xml"&&i.selectedVendor==="siemens"&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TIA Portal XML"}),j==="xml"&&i.selectedVendor==="beckhoff"&&t.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TwinCAT XML"})]},j))})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(ze,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Tip:"})," Select the format compatible with your PLC programming environment."]})]})}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:m,disabled:!b,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"})]})]}),i.step==="confirm"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center py-4",children:[t.jsxs("div",{className:"text-lg font-medium text-gray-900 mb-4",children:["You are about to export ",l(i.selectedVendor)," ",N?.displayName," tags for project '",s,"' in ",i.selectedFormat?.toUpperCase()," format."]}),t.jsx("div",{className:"text-sm text-gray-600",children:"Click Export to start."})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("button",{onClick:g,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Back"}),t.jsxs("button",{onClick:p,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors flex items-center gap-2",children:[t.jsx(Bt,{className:"w-4 h-4"}),"Export"]})]})]}),i.step==="progress"&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx(hn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Preparing your export file..."}),t.jsx("div",{className:"text-sm text-gray-600",children:"Please do not close this window."})]}),i.step==="success"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center py-6",children:[t.jsx(et,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Export complete!"}),t.jsxs("div",{className:"text-gray-600 mb-6",children:["Your file ",i.filename," is ready to download."]}),t.jsxs("button",{onClick:h,className:"bg-primary text-white px-6 py-3 rounded-md hover:bg-primary-dark transition-colors flex items-center gap-2 mx-auto",children:[t.jsx(fd,{className:"w-5 h-5"}),"Download Now"]})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"})})]}),i.step==="error"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center py-6",children:[t.jsx(ze,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Export failed."}),t.jsxs("div",{className:"text-gray-600 mb-2",children:[t.jsx("strong",{children:"Reason:"})," ",i.errorMessage]}),t.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"Please try again or contact support if the problem persists."})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"}),t.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Try Again"})]})]})]})})}const Fn=[{vendor:"rockwell",formats:["csv","l5x"],displayName:"Rockwell (Allen-Bradley Studio 5000)",description:"Import tags from Studio 5000 CSV exports or L5X XML files",supportedHeaders:["Tag Name","Data Type","Scope","Description","External Access","Default Value","Address"]},{vendor:"siemens",formats:["csv","xlsx","xml"],displayName:"Siemens (TIA Portal)",description:"Import tags from TIA Portal CSV/XLSX exports or PLCOpen XML"},{vendor:"beckhoff",formats:["csv","xml"],displayName:"Beckhoff (TwinCAT)",description:"Import tags from TwinCAT CSV exports or ADS XML files",supportedHeaders:["Name","DataType","Address","Comment","InitialValue","Scope","AccessMode"]}];function fw({isOpen:e,onClose:n,projectId:r,projectName:s,onSuccess:a}){const[i,o]=f.useState({step:"upload"}),l=f.useRef(null);f.useEffect(()=>{e&&o({step:"upload"})},[e]);const d=j=>{o(v=>({...v,selectedVendor:j}))},c=async j=>{!i.selectedFile||!i.selectedVendor||(o(v=>({...v,selectedFormat:j,step:"progress"})),await u(i.selectedVendor,j,i.selectedFile))},u=async(j,v,E)=>{o(k=>({...k,step:"progress"}));try{let k;if(j==="beckhoff")if(v==="csv")k=await Pe.importBeckhoffCsv(r,E);else if(v==="xml")k=await Pe.importBeckhoffXml(r,E);else throw new Error("Unsupported format for Beckhoff");else if(j==="siemens")if(v==="csv")k=await Pe.importSiemensCsv(r,E);else if(v==="xml")k=await Pe.importSiemensXml(r,E);else throw v==="xlsx"?new Error("XLSX import for Siemens is not supported."):new Error("Unsupported format for Siemens");else if(j==="rockwell")if(v==="csv")k=await Pe.importRockwellCsv(r,E);else if(v==="l5x")k=await Pe.importRockwellL5X(r,E);else throw new Error("Unsupported format for Rockwell");else throw new Error("Unsupported vendor");if(!k||k.success===!1){o(C=>({...C,step:"error",importResult:k,errorMessage:k&&k.error||"Import failed on server"}));return}if(k.errors&&k.errors.length>0&&!k.errorReport){const C=["Row,Errors"];k.errors.forEach(S=>{C.push(`${S.row},"${S.errors.join(", ")}"`)}),k.errorReport=btoa(C.join(`
`))}o(C=>({...C,step:"success",importResult:k})),a&&k.inserted&&a(k.inserted),window.dispatchEvent(new CustomEvent("pandaura:tags-imported",{detail:{projectId:r,importedCount:k.inserted}}))}catch(k){let C="Unknown error occurred";k instanceof Error?C=k.message:typeof k=="string"&&(C=k),o(S=>({...S,step:"error",errorMessage:C}))}},m=async j=>{const v=j.target.files?.[0];if(v){o(E=>({...E,selectedFile:v,step:"detect"}));try{const E=[];let k;const C=v.name.split(".").pop()?.toLowerCase();C==="csv"?k="csv":C==="xml"?k="xml":C==="xlsx"?k="xlsx":C==="l5x"&&(k="l5x");const y=(await v.text()).toLowerCase();(y.includes("rockwell")||y.includes("studio 5000")||y.includes("allen-bradley"))&&E.push("rockwell"),(y.includes("siemens")||y.includes("tia portal"))&&E.push("siemens"),(y.includes("beckhoff")||y.includes("twincat"))&&E.push("beckhoff"),E.length===1&&k?o(A=>({...A,selectedVendor:E[0],detectedVendors:E,detectedFormat:k,step:"manual-select"})):o(A=>({...A,detectedVendors:E,detectedFormat:k,step:"manual-select"}))}catch(E){console.error("Error detecting file format:",E),o(k=>({...k,step:"manual-select"}))}}},p=()=>{o({step:"upload"}),l.current&&(l.current.value="")},h=()=>{o(j=>({...j,step:"upload"}))},x=Fn.find(j=>j.vendor===i.selectedVendor),g=i.detectedVendors&&i.detectedVendors.length>0?i.detectedVendors[0]:void 0,b=g?Fn.find(j=>j.vendor===g)?.displayName||g:void 0,N=i.detectedFormat?i.detectedFormat.toUpperCase():void 0;return t.jsx(lt,{isOpen:e,onClose:n,title:i.step==="upload"?"Import Tags":i.step==="detect"?"Detecting Format...":i.step==="manual-select"?"Select Format":i.step==="progress"?"Importing Tags":i.step==="success"?"Import Complete!":"Import Failed",size:"lg",children:t.jsxs("div",{className:"space-y-6",children:[i.step==="upload"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload your tag file"}),t.jsxs("div",{className:"text-gray-600",children:[t.jsx("p",{className:"mb-4",children:"Supported formats:"}),t.jsxs("ul",{className:"text-left mx-auto max-w-md space-y-2",children:[t.jsx("li",{children:"● Rockwell: .csv (Studio 5000 Tag Database), .l5x (XML)"}),t.jsx("li",{children:"● Siemens: .csv, .xlsx, .xml"}),t.jsx("li",{children:"● Beckhoff: .csv, .xml"})]}),t.jsx("p",{className:"mt-4 text-sm italic",children:"Tip: Export your tags from your PLC software in one of these formats."})]})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>l.current?.click(),children:[t.jsx("input",{ref:l,type:"file",accept:".csv,.xlsx,.xml,.l5x",onChange:m,className:"hidden"}),t.jsx(jn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Choose file to upload"}),t.jsx("div",{className:"text-gray-600",children:"Click to browse or drag and drop your tag file"})]})})]}),i.step==="detect"&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx(hn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Analyzing your file..."}),t.jsx("div",{className:"text-sm text-gray-600",children:"Please wait while we detect the file format."})]}),i.step==="manual-select"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"File Format Detection"}),t.jsx("p",{className:"text-gray-600",children:i.detectedVendors?.length===0?"We couldn't identify your file's vendor/format. Please select the vendor and format manually:":g&&N?`Detected vendor: ${b} — format ${N}. Please confirm to proceed.`:"Multiple possible vendors detected. Please confirm the correct vendor and format (other options are disabled until you change the file):"})]}),t.jsx("div",{className:"space-y-4",children:i.detectedVendors&&i.detectedVendors.length===1&&i.detectedFormat?t.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Detected file"}),t.jsxs("div",{className:"flex items-center justify-between mt-2",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:Fn.find(j=>j.vendor===i.detectedVendors[0])?.displayName}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Format: ",t.jsx("span",{className:"font-medium",children:i.detectedFormat.toUpperCase()})]})]}),t.jsx("div",{className:"text-xs text-green-700 bg-green-50 px-2 py-1 rounded",children:"Detected"})]})]}),t.jsx("div",{className:"mt-2 text-sm text-gray-700",children:"The importer detected the vendor and format for your file. Other vendors and formats are disabled to avoid accidental imports."}),t.jsx("div",{className:"mt-4 flex items-center justify-end",children:t.jsxs("button",{onClick:()=>c(i.detectedFormat),className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:["Confirm & Import ",i.detectedFormat.toUpperCase()]})}),t.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 text-xs text-gray-500",children:Fn.filter(j=>j.vendor!==i.detectedVendors[0]).map(j=>t.jsxs("div",{className:"p-2 border rounded bg-white opacity-50",children:[j.displayName," — Not detected"]},j.vendor))})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Vendor"}),t.jsx("div",{className:"grid grid-cols-1 gap-3",children:Fn.map(j=>t.jsxs("button",{onClick:()=>d(j.vendor),className:`
                            p-4 border-2 rounded-lg text-left transition-all
                            ${i.selectedVendor===j.vendor?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}
                          `,disabled:i.detectedVendors&&i.detectedVendors.length>0&&!i.detectedVendors.includes(j.vendor),children:[t.jsx("div",{className:"font-medium text-gray-900",children:j.displayName}),t.jsx("div",{className:"text-sm text-gray-600 mt-1",children:j.description}),i.detectedVendors?.includes(j.vendor)&&t.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Detected in file"})]},j.vendor))})]}),i.selectedVendor&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Format"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:x?.formats.map(j=>t.jsxs("button",{onClick:()=>c(j),className:`
                              p-3 border-2 rounded-lg text-center font-medium transition-all
                              ${i.selectedFormat===j?"border-primary bg-primary text-white":"border-gray-200 text-gray-700 hover:border-gray-300"}
                            `,disabled:i.detectedFormat&&i.detectedFormat!==j,children:[j.toUpperCase(),i.detectedFormat===j&&t.jsx("div",{className:"text-xs mt-1",children:"Detected"})]},j))})]})]})})]}),i.step==="progress"&&t.jsxs("div",{className:"text-center py-8",children:[t.jsx(hn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Importing your tags..."}),t.jsx("div",{className:"text-sm text-gray-600",children:"Please wait while your tags are being processed."})]}),i.step==="success"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center py-6",children:[t.jsx(et,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import completed successfully!"}),t.jsxs("div",{className:"text-gray-600 mb-4",children:[i.importResult?.inserted||0," tags were imported"]}),i.importResult?.errors&&i.importResult.errors.length>0&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-left mb-4",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx(Jn,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-yellow-800 mb-2",children:[i.importResult.errors.length," rows had issues:"]}),t.jsxs("div",{className:"text-sm text-yellow-700 space-y-1 max-h-32 overflow-y-auto",children:[i.importResult.errors.slice(0,5).map((j,v)=>t.jsxs("div",{children:["Row ",j.row,": ",j.errors.join(", ")]},v)),i.importResult.errors.length>5&&t.jsxs("div",{className:"text-yellow-600 italic",children:["... and ",i.importResult.errors.length-5," more"]})]}),i.importResult.errorReport&&t.jsx("div",{className:"mt-3",children:t.jsxs("a",{href:`data:text/csv;base64,${i.importResult.errorReport}`,download:"import-errors.csv",className:"inline-flex items-center text-sm text-yellow-700 hover:text-yellow-800",children:[t.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Download Error Report"]})})]})]})})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Import More"}),t.jsx("button",{onClick:n,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Done"})]})]}),i.step==="error"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center py-6",children:[t.jsx(ze,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),t.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import failed"}),t.jsxs("div",{className:"text-gray-600 mb-2",children:[t.jsx("strong",{children:"Error:"})," ",i.errorMessage]})]}),i.importResult?.errors&&i.importResult.errors.length>0&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-left mb-4",children:[t.jsxs("div",{className:"font-medium text-yellow-800 mb-2",children:[i.importResult.errors.length," rows had issues:"]}),t.jsx("div",{className:"text-sm text-yellow-700 space-y-1 max-h-48 overflow-y-auto",children:i.importResult.errors.map((j,v)=>t.jsxs("div",{children:["Row ",j.row,": ",j.errors.join(", ")]},v))}),i.importResult.errorReport&&t.jsx("div",{className:"mt-3",children:t.jsxs("a",{href:`data:text/csv;base64,${i.importResult.errorReport}`,download:"import-errors.csv",className:"inline-flex items-center text-sm text-yellow-700 hover:text-yellow-800",children:[t.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Download Error Report"]})})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:h,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Try Again"}),t.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Upload New File"})]})]})]})]})})}const xw=[{pattern:/^I:\d+\/\d+$/i,description:"Input: I:x/y (e.g., I:1/0)"},{pattern:/^O:\d+\/\d+$/i,description:"Output: O:x/y (e.g., O:2/0)"},{pattern:/^N\d+:\d+$/i,description:"Integer: Nx:y (e.g., N7:0)"},{pattern:/^F\d+:\d+$/i,description:"Float: Fx:y (e.g., F8:0)"},{pattern:/^B\d+:\d+$/i,description:"Binary: Bx:y (e.g., B3:0)"},{pattern:/^T\d+:\d+$/i,description:"Timer: Tx:y (e.g., T4:0)"},{pattern:/^C\d+:\d+$/i,description:"Counter: Cx:y (e.g., C5:0)"},{pattern:/^R\d+:\d+$/i,description:"Control: Rx:y (e.g., R6:0)"},{pattern:/^S\d+:\d+$/i,description:"String: Sx:y (e.g., S2:0)"},{pattern:/^[A-Za-z_][A-Za-z0-9_]*$/i,description:"Symbolic: MyTag_1"}],gw=[{pattern:/^I\d+\.\d+$/i,description:"Input: Ix.y (e.g., I0.0)"},{pattern:/^Q\d+\.\d+$/i,description:"Output: Qx.y (e.g., Q0.0)"},{pattern:/^M\d+\.\d+$/i,description:"Memory: Mx.y (e.g., M0.0)"},{pattern:/^DB\d+\.DB[BWDX]\d+$/i,description:"Data Block: DBx.DBYz (e.g., DB1.DBD0)"},{pattern:/^L\d+\.\d+$/i,description:"Local: Lx.y (e.g., L0.0)"},{pattern:/^[A-Za-z_][A-Za-z0-9_]*$/i,description:"Symbolic: MyTag_1"}],yw=[{pattern:/^%[IQMT]\d+(\.\d+)?$/i,description:"I/O: %Xx.y (e.g., %I0.0, %Q2)"},{pattern:/^%[IQMT][BWDL]\d+$/i,description:"Typed Memory: %XYz (e.g., %MW100)"},{pattern:/^GVL\.[a-zA-Z_][\w]*$/i,description:"GVL Reference: GVL.Variable"},{pattern:/^[a-zA-Z_][\w]*$/i,description:"Symbolic: MyVariable"}];function no(e,n){if(!e||!e.trim())return{isValid:!1,errorMessage:"Address is required"};const r=e.trim();let s=[],a="";switch(n.toLowerCase()){case"rockwell":s=xw,a="Rockwell";break;case"siemens":s=gw,a="Siemens";break;case"beckhoff":s=yw,a="Beckhoff";break;default:return{isValid:!1,errorMessage:"Unsupported vendor"}}return s.some(({pattern:o})=>o.test(r))?{isValid:!0}:{isValid:!1,errorMessage:`Invalid ${a} address format: ${e}`,suggestedFormats:s.map(o=>o.description)}}function bw(e){switch(e.toLowerCase()){case"rockwell":return["I:1/0","O:2/0","N7:0","F8:0","MyTag_1"];case"siemens":return["I0.0","Q0.0","M0.0","DB1.DBD0","MyTag_1"];case"beckhoff":return["%I0.0","%Q2.1","%MW100","GVL.MyVar","MyVariable"];default:return[]}}function jw(e){switch(e.toLowerCase()){case"rockwell":return"Rockwell Allen-Bradley addressing: I:x/y, O:x/y, Nx:y, Fx:y, or symbolic names";case"siemens":return"Siemens TIA Portal addressing: Ix.y, Qx.y, Mx.y, DBx.DBYz, or symbolic names";case"beckhoff":return"Beckhoff TwinCAT addressing: %Xx.y, %XYz, GVL.Variable, or symbolic names";default:return"Please select a vendor to see address format guidelines"}}const gt={rockwell:{name:"Rockwell (Allen-Bradley)",dataTypes:["BOOL","INT","DINT","REAL","STRING"],scopes:["Local","Global","Input","Output"],description:"Studio 5000 Compatible Data Types",allowCustomTypes:!1},siemens:{name:"Siemens",dataTypes:["BOOL","INT","DINT","REAL","STRING"],scopes:["Input","Output","Memory"],description:"TIA Portal Compatible Data Types",allowCustomTypes:!1},beckhoff:{name:"Beckhoff",dataTypes:["BOOL","INT","DINT","REAL","STRING"],scopes:["Input","Output","Internal","Global","Local"],description:"TwinCAT Compatible Data Types + Custom Types",allowCustomTypes:!0}},ww=e=>gt[e]?.dataTypes||[],vw=e=>gt[e]?.scopes||[],ro=(e,n)=>e==="beckhoff"?n.trim().length>0:ww(e).includes(n),Nw=(e,n)=>vw(e).includes(n),kw=[{value:"rockwell",label:gt.rockwell.name},{value:"siemens",label:gt.siemens.name},{value:"beckhoff",label:gt.beckhoff.name}],Cs=e=>gt[e].dataTypes.map(n=>({value:n,label:n})),Sw=e=>gt[e].scopes.map(n=>({value:n.toLowerCase(),label:n}));function Cw({isOpen:e,onClose:n,onSuccess:r,projectId:s,onCreate:a,customTypes:i=[],onCustomTypeAdded:o}){const{showToast:l}=St(),[d,c]=f.useState(""),[u,m]=f.useState(!1),[p,h]=f.useState(i);f.useEffect(()=>{h(i)},[i]);const[x,g]=f.useState({name:"",description:"",type:"BOOL",address:"",default_value:"",vendor:"rockwell",scope:"global",tag_type:"memory",is_ai_generated:!1}),[b,N]=f.useState({}),[j,v]=f.useState(!1),E=()=>{const y={};if(x.name.trim()||(y.name="Tag name is required"),x.description.trim()||(y.description="Description is required"),ro(x.vendor,x.type)||(y.type=`Data type '${x.type}' is not supported by ${x.vendor.charAt(0).toUpperCase()+x.vendor.slice(1)}`),!x.address.trim())y.address="Address is required";else{const A=no(x.address,x.vendor);A.isValid||(y.address=A.errorMessage)}return N(y),Object.keys(y).length===0},k=async()=>{if(E()){v(!0);try{const y={...x,project_id:s,name:x.name.trim(),description:x.description.trim(),address:x.address.trim(),default_value:x.default_value?.trim()||""};await a(y),l({variant:"success",title:"Success!",message:`Tag "${x.name.trim()}" has been created successfully.`,duration:4e3}),r(),C()}catch(y){console.error("Failed to create tag:",y),l({variant:"error",title:"Error",message:y.message||"Failed to create tag. Please try again.",duration:5e3})}finally{v(!1)}}},C=()=>{g({name:"",description:"",type:"BOOL",address:"",default_value:"",vendor:"rockwell",scope:"global",tag_type:"memory",is_ai_generated:!1}),c(""),m(!1),N({}),v(!1),n()},S=(y,A)=>{if(g(w=>{const F={...w,[y]:A};if(y==="vendor"){const T=A;if(!ro(T,w.type)){const R=gt[T].dataTypes[0]==="BOOL"?"BOOL":"INT";F.type=R}if(!Nw(T,w.scope)){const R=gt[T].scopes[0].toLowerCase()==="global"?"global":"local";F.scope=R}(T==="siemens"||T==="rockwell"&&!["input","output","memory"].includes(w.tag_type))&&(F.tag_type="memory")}return F}),b[y]&&N(w=>({...w,[y]:void 0})),y==="vendor"&&x.address){const w=no(x.address,A);w.isValid||N(F=>({...F,address:w.errorMessage}))}};return t.jsx(lt,{isOpen:e,onClose:C,title:"Create New Tag",size:"lg",actions:t.jsxs(t.Fragment,{children:[t.jsx(J,{variant:"secondary",onClick:C,disabled:j,children:"Cancel"}),t.jsx(J,{onClick:k,disabled:j,loading:j,children:j?"Creating...":"Create Tag"})]}),children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{children:t.jsx(kt,{label:"Vendor",options:kw,value:x.vendor,onChange:y=>S("vendor",y),required:!0})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsx(Qe,{label:"Tag Name",placeholder:"Enter tag name (e.g., Motor_01_Start)",value:x.name,onChange:y=>S("name",y.target.value),error:b.name,required:!0})}),t.jsxs("div",{children:[t.jsx(Qe,{label:"Address",placeholder:`Enter ${x.vendor} address`,value:x.address,onChange:y=>S("address",y.target.value),error:b.address,required:!0}),t.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[t.jsx("div",{className:"mb-1",children:jw(x.vendor)}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Examples:"})," ",bw(x.vendor).join(", ")]})]})]})]}),t.jsx("div",{children:t.jsx(Mn,{label:"Description",placeholder:"Enter tag description",value:x.description,onChange:y=>S("description",y.target.value),error:b.description,rows:3,required:!0})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("div",{children:x.vendor==="beckhoff"?t.jsxs("div",{children:[u?t.jsx(Qe,{label:"Custom Data Type",placeholder:"Enter custom data type name (e.g., ST_CUSTOM_STRUCT)",value:d,onChange:y=>{const A=y.target.value.toUpperCase();c(A)},onBlur:y=>{const A=d.trim();A?(p.some(w=>w.value===A)||h(w=>[...w,{value:A,label:A}]),S("type",A),m(!1),c(""),i.some(w=>w.value===A)||o?.(A)):(m(!1),c(""),S("type",Cs(x.vendor)[0].value))},required:!0}):t.jsx(kt,{label:"Data Type",options:(()=>{const y=[...Cs(x.vendor),...p.map(A=>({value:A.value,label:A.label||A.value}))];return x.type&&!y.some(A=>A.value===x.type)&&x.type!=="custom"&&y.unshift({value:x.type,label:x.type}),y.push({value:"custom",label:"+ Add Custom Type"}),y})(),value:x.type,onChange:y=>{y==="custom"?m(!0):S("type",y)},required:!0}),x.type!=="custom"&&t.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Common Types:"})," ",gt[x.vendor].dataTypes.join(", ")]}),p.length>0&&t.jsxs("div",{className:"mt-1",children:[t.jsx("span",{className:"font-medium",children:"Custom Types:"})," ",p.map(y=>y.value).join(", ")]}),t.jsxs("div",{className:"mt-1",children:[t.jsx("span",{className:"font-medium",children:"Note:"})," You can add custom data types for Beckhoff PLCs"]})]})]}):t.jsxs("div",{children:[t.jsx(kt,{label:"Data Type",options:Cs(x.vendor),value:x.type,onChange:y=>S("type",y),required:!0}),t.jsx("div",{className:"mt-1 text-xs text-gray-500",children:t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Supported Types:"})," ",gt[x.vendor].dataTypes.join(", ")]})})]})}),t.jsxs("div",{children:[t.jsx(kt,{label:"Scope",options:Sw(x.vendor),value:x.scope,onChange:y=>S("scope",y),required:!0}),t.jsx("div",{className:"mt-1 text-xs text-gray-500",children:x.vendor==="siemens"?t.jsx("div",{children:"Scope defined by DB (Data Block), I (Inputs), Q (Outputs), M (Memory)"}):x.vendor==="rockwell"?t.jsx("div",{children:"Scope affects tag category in Studio 5000"}):t.jsx("div",{children:"Scope defines variable accessibility"})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("div",{children:t.jsx(kt,{label:"Tag Type",options:[{value:"input",label:"Input"},{value:"output",label:"Output"},{value:"memory",label:"Memory"},{value:"temp",label:"Temp"},{value:"constant",label:"Constant"}].filter(y=>x.vendor==="siemens"?["memory","input","output","temp"].includes(y.value):x.vendor==="rockwell"?["input","output","memory"].includes(y.value):!0),value:x.tag_type,onChange:y=>S("tag_type",y),required:!0})}),t.jsx("div",{children:t.jsx(Qe,{label:"Default Value",placeholder:"Enter default value (optional)",value:x.default_value||"",onChange:y=>S("default_value",y.target.value)})})]}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),t.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Name:"})," ",x.name||"Not specified"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Address:"})," ",x.address||"Not specified"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Type:"})," ",x.type," (",x.vendor,")"]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Scope:"})," ",x.scope]})]})]})]})})}const so={rockwell:["BOOL","INT","DINT","REAL","STRING"],siemens:["BOOL","INT","DINT","REAL","STRING"],beckhoff:["BOOL","INT","DINT","REAL","STRING"]},Aw=e=>so[e]||so.rockwell,Ew=({sessionMode:e=!1})=>{const{projectId:n}=Wn(),r=He(),{showToast:s}=St(),a=window.location.pathname.startsWith("/workspace/"),{isConnected:i,isConnecting:o,lastError:l,lastSyncTime:d,queuedSyncs:c,latestTags:u,onTagsUpdated:m,offTagsUpdated:p}=Nc(),{tags:h,loading:x,error:g,filters:b,pagination:N,fetchTags:j,createTag:v,updateTag:E,deleteTag:k,setFilters:C,clearError:S,refreshTags:y}=hw(),[A,w]=f.useState(!1),[F,T]=f.useState(null),[R,M]=f.useState({}),O=f.useRef({}),[$,H]=f.useState(null),[re,le]=f.useState([]),[D,B]=f.useState(!1),[oe,P]=f.useState(!1),[xe,ve]=f.useState(!1),[ne,ce]=f.useState(null),[Fe,st]=f.useState(!1),[ct,ft]=f.useState(!1),[Ft,dt]=f.useState(!1),[ut,jt]=f.useState(null),[Me,At]=f.useState(null),[Wt,Et]=f.useState(!1),X=f.useRef(null),be=f.useCallback(I=>{if(I.type==="tags_updated"&&I.success&&I.tags){if(console.log(`📡 Received real-time tag update: ${I.tags.length} tags`),At(Date.now()),$){const V=setTimeout(()=>{y().catch(ae=>{console.error("Failed to refresh tags:",ae),s({variant:"error",title:"Sync Error",message:"Failed to refresh tags. Please try again."})})},500);return()=>clearTimeout(V)}s({variant:"success",title:"Tags Updated",message:`${I.parsedCount||I.tags.length} tags synced from Logic Studio`,duration:3e3})}else I.type==="tags_updated"&&!I.success&&(console.error("Tag sync failed:",I.error),s({variant:"error",title:"Sync Failed",message:I.error||"Failed to sync tags from Logic Studio",duration:5e3}))},[$,y,s]);f.useEffect(()=>{let I=!0,V;return(async()=>{if(I)try{m(be),V=setInterval(()=>{!i&&!o&&I&&(s({variant:"warning",title:"Sync Disconnected",message:"Tag sync connection lost. Attempting to reconnect...",duration:5e3}),Et(!0))},3e4)}catch(Te){console.error("Failed to initialize tag sync:",Te),I&&s({variant:"error",title:"Sync Error",message:"Failed to initialize tag sync. Please try again.",duration:5e3})}})(),()=>{I=!1,V&&clearInterval(V),p(be)}},[be,m,p,i,o,s]);const Ie=async I=>{try{const ae=(await Ae.getProjects()).find(Te=>Te.id===I);ae&&jt(ae)}catch(V){console.error("Failed to load current project:",V)}};f.useEffect(()=>{const I=V=>{X.current&&!X.current.contains(V.target)&&w(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]),f.useEffect(()=>{let I=null;if(n)I=parseInt(n),localStorage.setItem("currentProjectId",I.toString());else{const V=localStorage.getItem("currentProjectId");V&&(I=parseInt(V))}I&&!isNaN(I)?(H(I),C({projectId:I}),!n&&!e&&!a&&r(`/tag-database/${I}`,{replace:!0})):!e&&!a&&(H(null),_())},[n,C,r,e,a]);const _=async()=>{try{B(!0);const I=await Ae.getProjects();le(I)}catch(I){console.error("Failed to load projects:",I)}finally{B(!1)}};f.useEffect(()=>{$&&(j({projectId:$}),ut||Ie($))},[$]),f.useEffect(()=>{const I=V=>{const{projectId:ae,importedCount:Te}=V.detail;ae===$&&Et(!0)};return window.addEventListener("pandaura:tags-imported",I),()=>{window.removeEventListener("pandaura:tags-imported",I)}},[$]);const Q=h.filter(I=>!(b.search&&!I.name.toLowerCase().includes(b.search.toLowerCase())&&!I.description.toLowerCase().includes(b.search.toLowerCase())||b.vendor&&b.vendor!=="all"&&I.vendor!==b.vendor||b.type&&b.type!=="all"&&I.type!==b.type||b.dataType&&b.dataType!=="all"&&I.data_type!==b.dataType||b.scope&&b.scope!=="all"&&I.scope!==b.scope||b.tagType&&b.tagType!=="all"&&I.tag_type!==b.tagType||b.isAIGenerated&&!I.is_ai_generated)),me=async I=>{const V=R[I];if(!V||Object.keys(V).length===0)return;const ae=O.current[I];ae&&(clearTimeout(ae),delete O.current[I]);try{const Te=await E(I,V);s({variant:"success",title:"Tag Updated",message:"Changes saved",duration:3e3}),window.dispatchEvent(new CustomEvent("pandaura:tags-updated",{detail:{projectId:$,action:"update",tagId:I,tagName:Te?.name||"Unknown"}})),M(wt=>{const Ea={...wt};return delete Ea[I],Ea})}catch(Te){console.error("Error flushing tag update:",Te);const wt=Te instanceof Error?Te.message:"Failed to update tag";s({variant:"error",title:"Update Failed",message:wt,duration:5e3})}},L=(I,V,ae)=>{try{if(!h.find(wt=>wt.id===I))throw new Error("Tag not found");M(wt=>({...wt,[I]:{...wt[I]||{},[V]:ae}}))}catch(Te){console.error("Error updating tag field:",Te);const wt=Te instanceof Error?Te.message:"Failed to update tag field";s({variant:"error",title:"Update Failed",message:wt,duration:5e3})}},U=I=>{ce(I),ve(!0)},K=async()=>{if(ne){st(!0);try{await k(ne.id),s({variant:"success",title:"Tag Deleted",message:`Tag "${ne.name}" has been successfully deleted.`,duration:4e3}),window.dispatchEvent(new CustomEvent("pandaura:tags-updated",{detail:{projectId:$,action:"delete",tagName:ne.name}})),ve(!1),ce(null)}catch(I){console.error("Error deleting tag:",I),s({variant:"error",title:"Delete Failed",message:I instanceof Error?I.message:"Failed to delete tag. Please try again.",duration:5e3})}finally{st(!1)}}},q=()=>{ve(!1),ce(null)},te=async I=>{try{await me(parseInt(I)),T(null)}catch(V){console.error("Error saving tag:",V)}},ue=()=>{if(!$){s({variant:"error",title:"No Project Selected",message:"Please select a project first before adding tags.",duration:4e3});return}P(!0)},$e=async I=>{try{await v(I),await y(),window.dispatchEvent(new CustomEvent("pandaura:tags-updated",{detail:{projectId:$,action:"create",tagName:I.name}}))}catch(V){throw console.error("Error creating tag:",V),V}},Se=()=>{if(!$){s({variant:"error",message:"Please select a project first"});return}ft(!0),w(!1)},_e=()=>{if(!$){s({variant:"error",title:"No Project Selected",message:"Please select a project first before importing tags.",duration:3e3});return}dt(!0)},se=I=>{s({variant:"success",title:"Import Successful",message:`Successfully imported ${I} tags.`,duration:5e3}),y()},Z=async I=>{if(!$){alert("Please select a project first"),s({variant:"error",message:"Please select a project first"});return}try{const V=await Pe.exportTags({project_id:$,format:I});s({variant:"success",message:V.message}),w(!1)}catch(V){console.error("Error exporting tags:",V),s({variant:"error",message:"Failed to export tags: "+(V instanceof Error?V.message:"Unknown error")})}},G=(I,V)=>{const ae=V==="all"||V===""?void 0:V;if(I==="isAIGenerated"){C({isAIGenerated:ae==="true"?!0:ae==="false"?!1:void 0});return}if(I==="dataType"){C({dataType:ae});return}if(I==="tagType"){C({tagType:ae});return}C({[I]:ae})},Y=()=>{C({projectId:$||void 0,search:void 0,vendor:void 0,type:void 0,dataType:void 0,scope:void 0,tagType:void 0,isAIGenerated:void 0})};return t.jsxs("div",{className:"flex flex-col h-full bg-background text-primary",children:[g&&t.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mx-6 mt-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{children:g}),t.jsx("button",{onClick:S,className:"text-red-500 hover:text-red-700",children:t.jsx(Ye,{className:"w-4 h-4"})})]})}),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"sticky top-0 z-30 bg-white border-b border-light px-6 py-4 flex justify-between items-center shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold text-primary",children:"Tag Database Manager"}),$&&t.jsxs("div",{className:"text-sm text-secondary mt-1",children:["Project ID: ",$,re.length>0&&t.jsxs("span",{className:"ml-2",children:["-"," ",re.find(I=>I.id===$)?.project_name||"Unknown Project"]})]})]}),!e&&t.jsx("div",{className:"flex items-center gap-2",children:o?t.jsxs("div",{className:"flex items-center gap-1 text-yellow-600",children:[t.jsx(It,{className:"w-4 h-4 animate-pulse"}),t.jsx("span",{className:"text-xs",children:"Connecting..."})]}):i?t.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[t.jsx(Co,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs",children:"Live Sync"}),Me&&t.jsxs("span",{className:"text-xs text-gray-500",children:["(Updated"," ",Math.round((Date.now()-Me)/1e3),"s ago)"]})]}):t.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[t.jsx(So,{className:"w-4 h-4"}),t.jsx("span",{className:"text-xs",children:"Offline"})]})})]}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsxs("button",{onClick:_e,disabled:x||!$,className:"bg-primary text-white px-4 py-2 rounded-md flex items-center gap-2 text-sm hover:bg-primary transition-colors cursor-pointer disabled:opacity-50",title:"Import Beckhoff tags from CSV or XML files",children:[t.jsx(jn,{className:"w-4 h-4"}),"Import Tags"]}),t.jsx("div",{className:"relative",ref:X,children:A&&t.jsx("div",{className:"absolute right-0 mt-2 bg-white border border-light rounded-md shadow-md w-56 z-50",children:["Rockwell CSV","TIA XML","Beckhoff XLS"].map(I=>t.jsx("div",{onClick:()=>Z(I.toLowerCase()),className:"px-4 py-2 text-sm hover:bg-gray-100 cursor-pointer transition",children:I},I))})}),t.jsxs("button",{onClick:Se,disabled:x||!$||h.length===0,className:"bg-primary border border-light px-4 py-2 rounded-md flex items-center gap-2 text-sm hover:bg-primary transition-colors cursor-pointer disabled:opacity-50 text-white hover:text-white",title:h.length===0?"No tags to export. Please add tags first.":"Export tags in vendor-specific formats",children:[t.jsx(Bt,{className:"w-4 h-4"}),"Export your tags"]}),t.jsx("button",{onClick:y,disabled:x,className:"bg-white border border-light px-2 py-2 rounded-md text-sm hover:bg-accent-light transition-colors cursor-pointer disabled:opacity-50",children:t.jsx(Ue,{className:`w-4 h-4 ${x?"animate-spin":""}`})})]})]}),t.jsxs("div",{className:"sticky top-[64px] z-20 bg-white border-b border-light px-6 py-3 flex flex-wrap items-center gap-4",children:[t.jsx("input",{type:"text",placeholder:"Search tags...",value:b.search||"",onChange:I=>G("search",I.target.value),className:"border border-light rounded px-4 py-2 text-sm w-64 focus:outline-none focus:ring-2 focus:ring-accent"}),t.jsxs("select",{value:b.vendor||"all",onChange:I=>G("vendor",I.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"all",children:"All Vendors"}),t.jsx("option",{value:"rockwell",children:"Rockwell"}),t.jsx("option",{value:"siemens",children:"Siemens"}),t.jsx("option",{value:"beckhoff",children:"Beckhoff"})]}),t.jsxs("select",{value:b.tagType||"all",onChange:I=>G("tagType",I.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"all",children:"All Tag Types"}),t.jsx("option",{value:"input",children:"Input"}),t.jsx("option",{value:"output",children:"Output"}),t.jsx("option",{value:"memory",children:"Memory"})]}),t.jsxs("select",{value:b.type||"all",onChange:I=>G("type",I.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"all",children:"All Data Types"}),t.jsx("option",{value:"BOOL",children:"BOOL"}),t.jsx("option",{value:"INT",children:"INT"}),t.jsx("option",{value:"REAL",children:"REAL"}),t.jsx("option",{value:"DINT",children:"DINT"}),t.jsx("option",{value:"STRING",children:"STRING"})]}),t.jsxs("select",{value:b.scope||"all",onChange:I=>G("scope",I.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"all",children:"All Scopes"}),t.jsx("option",{value:"global",children:"Global"}),t.jsx("option",{value:"local",children:"Local"}),t.jsx("option",{value:"input",children:"Input"}),t.jsx("option",{value:"output",children:"Output"})]}),t.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:b.isAIGenerated||!1,onChange:I=>C({isAIGenerated:I.target.checked?!0:void 0}),className:"accent-primary cursor-pointer"}),"Show AI-generated only"]}),t.jsxs("button",{onClick:ue,disabled:x,className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors flex items-center gap-2 disabled:opacity-50",children:[t.jsx(fn,{className:"w-4 h-4"}),"Add Tag"]})]}),x&&t.jsxs("div",{className:"flex justify-center items-center py-8",children:[t.jsx(Ue,{className:"w-6 h-6 animate-spin text-primary"}),t.jsx("span",{className:"ml-2 text-primary",children:"Loading tags..."})]}),t.jsxs("div",{className:"flex-1 px-6 py-4 pb-32 overflow-auto",children:[t.jsxs("div",{className:"bg-white border border-light rounded-md shadow-sm overflow-hidden",children:[t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-light",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Tag Name"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Description"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Type"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Data Type"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Address"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Default"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Vendor"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Scope"}),t.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Actions"})]})}),t.jsx("tbody",{children:Q.map(I=>t.jsxs("tr",{className:"border-b border-light hover:bg-gray-50",children:[t.jsx("td",{className:"p-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[F===I.id?t.jsx("input",{type:"text",value:R[I.id]?.name??I.name,onChange:V=>L(I.id,"name",V.target.value),className:"border border-light rounded px-2 py-1 text-sm w-full font-mono",autoFocus:!0}):t.jsx("span",{className:"font-mono text-sm",children:I.name}),I.is_ai_generated&&t.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-1 rounded",children:"AI"})]})}),t.jsx("td",{className:"p-3",children:F===I.id?t.jsx("input",{type:"text",value:R[I.id]?.description??I.description,onChange:V=>L(I.id,"description",V.target.value),className:"border border-light rounded px-2 py-1 text-sm w-full"}):t.jsx("span",{className:"text-sm text-muted",children:I.description})}),t.jsx("td",{className:"p-3",children:F===I.id?t.jsxs("select",{value:R[I.id]?.tag_type??I.tag_type,onChange:V=>L(I.id,"tag_type",V.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:"input",children:"Input"}),t.jsx("option",{value:"output",children:"Output"}),t.jsx("option",{value:"memory",children:"Memory"})]}):t.jsx("span",{className:`text-xs px-2 py-1 rounded ${I.tag_type==="input"?"bg-blue-100 text-blue-700":I.tag_type==="output"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:I.tag_type.charAt(0).toUpperCase()+I.tag_type.slice(1)})}),t.jsx("td",{className:"p-3",children:F===I.id?t.jsx("select",{value:R[I.id]?.type??I.type,onChange:V=>L(I.id,"type",V.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:Aw(I.vendor).map(V=>t.jsx("option",{value:V,children:V},V))}):t.jsx("span",{className:"text-sm font-mono",children:I.type})}),t.jsx("td",{className:"p-3",children:F===I.id?t.jsx("input",{type:"text",value:R[I.id]?.address??I.address,onChange:V=>L(I.id,"address",V.target.value),className:"border border-light rounded px-2 py-1 text-sm font-mono w-20"}):t.jsx("span",{className:"text-sm font-mono text-muted",children:I.address})}),t.jsx("td",{className:"p-3",children:F===I.id?t.jsx("input",{type:"text",value:R[I.id]?.default_value??I.default_value,onChange:V=>L(I.id,"default_value",V.target.value),className:"border border-light rounded px-2 py-1 text-sm font-mono w-16"}):t.jsx("span",{className:"text-sm font-mono text-muted",children:I.default_value})}),t.jsx("td",{className:"p-3",children:F===I.id?t.jsxs("select",{value:R[I.id]?.vendor??I.vendor,onChange:V=>L(I.id,"vendor",V.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:"rockwell",children:"Rockwell"}),t.jsx("option",{value:"siemens",children:"Siemens"}),t.jsx("option",{value:"beckhoff",children:"Beckhoff"})]}):t.jsx("span",{className:`text-xs px-2 py-1 rounded ${I.vendor==="rockwell"?"bg-red-100 text-red-700":I.vendor==="siemens"?"bg-teal-100 text-teal-700":"bg-orange-100 text-orange-700"}`,children:I.vendor.charAt(0).toUpperCase()+I.vendor.slice(1)})}),t.jsx("td",{className:"p-3",children:F===I.id?t.jsxs("select",{value:R[I.id]?.scope??I.scope,onChange:V=>L(I.id,"scope",V.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[t.jsx("option",{value:"global",children:"Global"}),t.jsx("option",{value:"local",children:"Local"}),t.jsx("option",{value:"input",children:"Input"}),t.jsx("option",{value:"output",children:"Output"})]}):t.jsx("span",{className:"text-sm",children:I.scope})}),t.jsx("td",{className:"p-3",children:t.jsx("div",{className:"flex gap-1",children:F===I.id?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>te(I.id.toString()),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:t.jsx(Zs,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{M(V=>{const ae={...V};return delete ae[I.id],ae}),T(null)},className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:t.jsx(Ye,{className:"w-4 h-4"})})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>T(I.id),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:t.jsx(iu,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>U(I),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:t.jsx(bn,{className:"w-4 h-4"})})]})})})]},I.id))})]}),Q.length===0&&!x&&t.jsxs("div",{className:"text-center py-8 text-muted",children:[t.jsx("div",{className:"mb-2",children:"No tags match your current filters"}),t.jsx("button",{onClick:Y,className:"text-accent hover:underline text-sm",children:"Clear all filters"})]})]}),N.total>0&&t.jsxs("div",{className:"mt-4 text-center text-sm text-muted",children:["Showing ",Q.length," of ",N.total," tags (Page"," ",N.page," of ",N.totalPages,")"]})]}),t.jsx(lt,{isOpen:xe,onClose:q,title:"Confirm Delete",size:"md",actions:t.jsxs(t.Fragment,{children:[t.jsx(J,{variant:"outline",onClick:q,disabled:Fe,children:"Cancel"}),t.jsx(J,{variant:"primary",onClick:K,loading:Fe,className:"bg-red-600 hover:bg-red-700 text-white",children:Fe?"Deleting...":"Delete Tag"})]}),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Jn,{className:"w-6 h-6 text-red-600"})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-gray-900 mb-2",children:["Are you sure you want to delete the tag"," ",t.jsxs("strong",{children:['"',ne?.name,'"']}),"?"]}),t.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. The tag will be permanently removed from the database."}),ne&&t.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded border text-sm",children:t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{children:[t.jsx("strong",{children:"Type:"})," ",ne.type]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Address:"})," ",ne.address]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Vendor:"})," ",ne.vendor]}),t.jsxs("div",{children:[t.jsx("strong",{children:"Scope:"})," ",ne.scope]})]})})]})]})}),$&&t.jsx(Cw,{isOpen:oe,onClose:()=>P(!1),onSuccess:()=>P(!1),projectId:$,onCreate:$e}),$&&ut&&t.jsx(pw,{isOpen:ct,onClose:()=>ft(!1),projectId:$,projectName:ut.project_name,tags:h}),$&&ut&&t.jsx(fw,{isOpen:Ft,onClose:()=>dt(!1),projectId:$,projectName:ut.project_name,onSuccess:se})]})]})},fr=e=>t.jsx(mw,{children:t.jsx(Ew,{...e})});function Tw(){const e=He(),n=Rr(),{user:r,organizations:s,selectedOrg:a,logout:i,isAuthenticated:o,isLoading:l}=pt(),[d,c]=f.useState("overview"),[u,m]=f.useState(!1),[p,h]=f.useState(!1);f.useEffect(()=>{!l&&!o&&e("/signin",{replace:!0})},[l,o,e]);const[x,g]=f.useState({name:r?.fullName||"Loading...",email:r?.email||"Loading...",company:a?.org_name||"Loading...",timezone:"America/New_York",language:"English",tier:"Enterprise",lastLogin:"Loading..."});f.useEffect(()=>{r&&a&&g(T=>({...T,name:r.fullName,email:r.email,company:a.org_name||"Unknown Organization",tier:a.role||"Enterprise"}))},[r,a]);const[b,N]=f.useState({defaultVendor:"Rockwell",defaultExportFormat:"PDF",documentBranding:!0,aiVerbosity:"Detailed",defaultModule:"Logic Studio",codeFontSize:14,notifications:{system:!0,aiUpdates:!0,docGeneration:!1}}),[j]=f.useState([{name:"Sarah Johnson",email:"sarah@example.com",role:"Admin",lastActive:"2 hours ago"},{name:"Mike Davis",email:"mike@example.com",role:"Engineer",lastActive:"1 day ago"},{name:"Lisa Chen",email:"lisa@example.com",role:"Viewer",lastActive:"3 days ago"}]),[v]=f.useState([{name:"Production API",created:"Jul 15, 2025",lastUsed:"Aug 4, 2025",key:"pk_live_..."},{name:"Development API",created:"Jun 22, 2025",lastUsed:"Aug 2, 2025",key:"pk_test_..."}]),E=T=>{console.log(`Saving ${T} changes`),alert(`${T} settings saved successfully!`)},k=()=>{const T=n.state?.from;if(T)e(T);else{const R=window.history.length>1;e(R?-1:"/home")}},C=()=>t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Profile Information"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),t.jsx("input",{type:"text",value:x.name,onChange:T=>g(R=>({...R,name:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email Address"}),t.jsx("input",{type:"email",value:x.email,onChange:T=>g(R=>({...R,email:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name"}),t.jsx("input",{type:"text",value:x.company,onChange:T=>g(R=>({...R,company:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",disabled:!0,placeholder:"Based on current organization"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Timezone"}),t.jsxs("select",{value:x.timezone,onChange:T=>g(R=>({...R,timezone:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"America/New_York",children:"Eastern Time (EST/EDT)"}),t.jsx("option",{value:"America/Chicago",children:"Central Time (CST/CDT)"}),t.jsx("option",{value:"America/Denver",children:"Mountain Time (MST/MDT)"}),t.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PST/PDT)"}),t.jsx("option",{value:"UTC",children:"UTC"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Language"}),t.jsxs("select",{value:x.language,onChange:T=>g(R=>({...R,language:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"English",children:"English"}),t.jsx("option",{value:"Spanish",children:"Español"}),t.jsx("option",{value:"German",children:"Deutsch"}),t.jsx("option",{value:"French",children:"Français"})]})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Logo (Optional)"}),t.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[t.jsx(jn,{className:"w-8 h-8 text-muted mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-muted",children:"Upload PNG logo for document exports"}),t.jsx("button",{className:"mt-2 text-accent hover:underline text-sm",children:"Browse Files"})]})]}),t.jsxs("div",{className:"mt-6",children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notification Preferences"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:!0,className:"accent-primary"}),t.jsx("span",{className:"text-sm",children:"System alerts and maintenance notifications"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:!0,className:"accent-primary"}),t.jsx("span",{className:"text-sm",children:"AI model updates and new features"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",className:"accent-primary"}),t.jsx("span",{className:"text-sm",children:"Document generation completion alerts"})]})]})]}),t.jsxs("button",{onClick:()=>E("Profile"),className:"mt-6 bg-primary text-white px-6 py-2 rounded flex items-center gap-2 hover:bg-secondary transition-colors",children:[t.jsx(Dt,{className:"w-4 h-4"}),"Save Changes"]})]}),t.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium",children:"Organization & Account Details"}),s.length>1&&t.jsxs("span",{className:"text-xs text-muted bg-blue-50 px-2 py-1 rounded",children:[s.length," organizations"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100",children:[t.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Current Organization"}),t.jsx("p",{className:"text-lg font-semibold text-blue-900",children:a?.org_name||"Loading..."}),t.jsx("p",{className:"text-sm text-blue-700 mt-1",children:a?.industry||"Industry not specified"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:"Your Role & Permissions"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${a?.role==="Admin"?"bg-red-100 text-red-800 border border-red-200":a?.role==="Editor"?"bg-blue-100 text-blue-800 border border-blue-200":a?.role==="Viewer"?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:a?.role||"Loading..."}),t.jsx("span",{className:"text-sm text-muted",children:a?.role==="Admin"?"Full system access":a?.role==="Editor"?"Create & modify content":a?.role==="Viewer"?"View-only access":""})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:"Account Security"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Two-Factor Authentication"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-2 h-2 rounded-full ${r?.twoFactorEnabled?"bg-green-500":"bg-red-500"}`}),t.jsx("span",{className:`text-sm font-medium ${r?.twoFactorEnabled?"text-green-700":"text-red-700"}`,children:r?.twoFactorEnabled?"Enabled":"Disabled"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm",children:"Account ID"}),t.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:r?.userId?.substring(0,8)||"..."})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:"Organization Details"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted",children:"Size:"}),t.jsx("span",{className:"font-medium",children:a?.size||"Not specified"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted",children:"License:"}),t.jsx("span",{className:"font-medium",children:"On-Premise"})]})]})]})]})]}),s&&s.length>1&&t.jsxs("div",{className:"mt-6 pt-6 border-t border-light",children:[t.jsxs("h4",{className:"text-sm font-medium mb-3",children:["Your Organizations (",s.length,")"]}),t.jsx("div",{className:"space-y-2",children:s.map(T=>t.jsx("div",{className:`p-3 rounded-lg border ${T.org_id===a?.org_id?"border-accent bg-accent/5":"border-light"}`,children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:T.org_name}),t.jsx("p",{className:"text-sm text-muted",children:T.industry||"Industry not specified"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${T.role==="Admin"?"bg-red-100 text-red-700":T.role==="Editor"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:T.role}),T.org_id===a?.org_id&&t.jsx("p",{className:"text-xs text-accent mt-1",children:"Current"})]})]})},T.org_id))})]})]})]}),S=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Platform Preferences"}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default PLC Vendor"}),t.jsxs("select",{value:b.defaultVendor,onChange:T=>N(R=>({...R,defaultVendor:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"Rockwell",children:"Rockwell Automation"}),t.jsx("option",{value:"Siemens",children:"Siemens"}),t.jsx("option",{value:"Beckhoff",children:"Beckhoff"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Export Format"}),t.jsxs("select",{value:b.defaultExportFormat,onChange:T=>N(R=>({...R,defaultExportFormat:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"PDF",children:"PDF"}),t.jsx("option",{value:"DOCX",children:"Microsoft Word (DOCX)"}),t.jsx("option",{value:"ZIP",children:"ZIP Bundle"}),t.jsx("option",{value:"XLSX",children:"Excel (XLSX)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"AI Assistant Behavior"}),t.jsxs("select",{value:b.aiVerbosity,onChange:T=>N(R=>({...R,aiVerbosity:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"Brief",children:"Brief replies"}),t.jsx("option",{value:"Detailed",children:"Detailed explanations"}),t.jsx("option",{value:"Verbose",children:"Verbose with examples"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Module on Login"}),t.jsxs("select",{value:b.defaultModule,onChange:T=>N(R=>({...R,defaultModule:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"Pandaura AS",children:"Pandaura AS"}),t.jsx("option",{value:"Logic Studio",children:"Logic Studio"}),t.jsx("option",{value:"AutoDocs",children:"AutoDocs"}),t.jsx("option",{value:"Tag Database Manager",children:"Tag Database Manager"}),t.jsx("option",{value:"Projects",children:"Projects"})]})]})]}),t.jsx("div",{className:"mt-6",children:t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:b.documentBranding,onChange:T=>N(R=>({...R,documentBranding:T.target.checked})),className:"accent-primary"}),t.jsx("span",{className:"text-sm",children:"Include company branding on exported documents"})]})}),t.jsxs("div",{className:"mt-6",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Code Editor Font Size"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("input",{type:"range",min:"10",max:"20",value:b.codeFontSize,onChange:T=>N(R=>({...R,codeFontSize:parseInt(T.target.value)})),className:"flex-1"}),t.jsxs("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:[b.codeFontSize,"px"]})]})]}),t.jsxs("button",{onClick:()=>E("Preferences"),className:"mt-6 bg-primary text-white px-6 py-2 rounded flex items-center gap-2 hover:bg-secondary transition-colors",children:[t.jsx(Dt,{className:"w-4 h-4"}),"Save Preferences"]})]})}),y=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium",children:"Team Management"}),t.jsx("span",{className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded",children:"Enterprise Plan"})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Invite New Member"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"email",placeholder:"Enter email address...",className:"flex-1 border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),t.jsxs("select",{className:"border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"Engineer",children:"Engineer"}),t.jsx("option",{value:"Admin",children:"Admin"}),t.jsx("option",{value:"Viewer",children:"Viewer"})]}),t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors",children:"Invite"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Team Members (3/10 seats used)"}),t.jsx("div",{className:"space-y-2",children:j.map((T,R)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:T.name}),t.jsx("div",{className:"text-xs text-muted",children:T.email})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-xs text-muted",children:T.lastActive}),t.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:T.role}),t.jsx("button",{className:"text-muted hover:text-red-500",children:t.jsx(Ds,{className:"w-4 h-4"})})]})]},R))})]})]})}),A=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Security & Authentication"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Change Password"}),t.jsxs("div",{className:"space-y-3 max-w-md",children:[t.jsx("input",{type:"password",placeholder:"Current password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),t.jsx("input",{type:"password",placeholder:"New password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),t.jsx("input",{type:"password",placeholder:"Confirm new password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors",children:"Update Password"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Two-Factor Authentication"}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Pt,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm",children:"2FA is enabled via TOTP app"})]}),t.jsx("button",{onClick:()=>h(!0),className:"text-sm text-green-600 hover:underline",children:"Manage"})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Active Sessions"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(vo,{className:"w-4 h-4 text-muted"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:"Current Session"}),t.jsx("div",{className:"text-xs text-muted",children:"Chrome on macOS • 192.168.1.100"})]})]}),t.jsx("span",{className:"text-xs text-green-600",children:"Active"})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(nu,{className:"w-4 h-4 text-muted"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm",children:"Mobile Browser"}),t.jsx("div",{className:"text-xs text-muted",children:"Safari on iOS • 2 hours ago"})]})]}),t.jsx("button",{className:"text-xs text-red-600 hover:underline",children:"Terminate"})]})]}),t.jsx("button",{className:"mt-3 text-sm text-red-600 hover:underline",children:"Sign Out Everywhere"})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium mb-2",children:"Session Timeout"}),t.jsxs("select",{className:"border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"30",children:"30 minutes"}),t.jsx("option",{value:"120",children:"2 hours"}),t.jsx("option",{value:"480",children:"8 hours"}),t.jsx("option",{value:"never",children:"Never"})]})]})]})]})}),w=()=>t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-lg font-medium",children:"API Keys"}),t.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors",children:"Generate New Key"})]}),t.jsx("div",{className:"space-y-3",children:v.map((T,R)=>t.jsxs("div",{className:"flex items-center justify-between p-4 border border-light rounded",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-sm",children:T.name}),t.jsxs("div",{className:"text-xs text-muted",children:["Created: ",T.created," • Last used: ",T.lastUsed]}),t.jsxs("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded mt-1 inline-block",children:[T.key,"••••••••••••••••"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"text-sm text-muted hover:text-primary",children:"Regenerate"}),t.jsx("button",{className:"text-sm text-red-600 hover:text-red-700",children:"Revoke"})]})]},R))}),t.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Jn,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),t.jsxs("div",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"On-Premise Security:"})," API keys are stored locally and encrypted. All API calls are processed within your network infrastructure."]})]})})]})}),F=[{id:"overview",label:"Overview",icon:No},{id:"preferences",label:"Preferences",icon:Or},...x.tier!=="Individual"?[{id:"team",label:"Team Settings",icon:Mr}]:[],{id:"billing",label:"Billing & Plan",icon:cd},{id:"api",label:"API Keys",icon:Pd},{id:"security",label:"Security / 2FA",icon:Pt}];return t.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[l||!r?t.jsx("div",{className:"flex-1 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-muted",children:"Loading profile..."})]})}):t.jsxs(t.Fragment,{children:[t.jsx("header",{className:"bg-white border-b border-light px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("button",{onClick:k,className:"p-2 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2 text-muted hover:text-primary",title:"Go back",children:[t.jsx(ht,{className:"w-5 h-5"}),t.jsx("span",{className:"text-sm",children:"Back"})]}),t.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center font-bold text-lg",children:x.name?x.name.split(" ").map(T=>T[0]).join(""):"??"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-bold",children:x.name}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a?.role==="Admin"?"bg-red-100 text-red-700":a?.role==="Editor"?"bg-blue-100 text-blue-700":a?.role==="Viewer"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:a?.role||x.tier}),a?.org_name&&t.jsxs("span",{children:["@ ",a.org_name]}),t.jsx("span",{children:"•"}),t.jsxs("span",{children:["Last login: ",x.lastLogin]})]})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{className:"text-sm text-muted hover:text-primary",children:"Edit Profile"}),t.jsxs("button",{onClick:()=>{i(),e("/signin")},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",children:[t.jsx(Ds,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsx("nav",{className:"w-64 bg-white border-r border-light p-4",children:t.jsx("div",{className:"space-y-1",children:F.map(T=>{const R=T.icon;return t.jsxs("button",{onClick:()=>c(T.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded text-left transition-colors ${d===T.id?"bg-accent-light text-accent":"text-muted hover:text-primary hover:bg-gray-50"}`,children:[t.jsx(R,{className:"w-4 h-4"}),T.label]},T.id)})})}),t.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[d==="overview"&&C(),d==="preferences"&&S(),d==="team"&&y(),d==="security"&&A(),d==="api"&&w(),d==="billing"&&t.jsxs("div",{className:"bg-white border border-light rounded-lg p-6 text-center",children:[t.jsx("h3",{className:"text-lg font-medium mb-2",children:"Billing & Plan Management"}),t.jsx("p",{className:"text-muted mb-4",children:"On-premise deployments use local license management"}),t.jsx("div",{className:"text-sm text-left max-w-md mx-auto",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Current Role:"}),t.jsx("span",{className:"font-medium",children:a?.role||x.tier})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Organization:"}),t.jsx("span",{className:"font-medium",children:a?.org_name||"Loading..."})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"License Type:"}),t.jsx("span",{className:"font-medium",children:"On-Premise"})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Access Level:"}),t.jsx("span",{className:"font-medium",children:a?.role==="Admin"?"Full Access":a?.role==="Editor"?"Edit & View":a?.role==="Viewer"?"View Only":"Loading..."})]})]})})]})]})]})]}),t.jsx(Ao,{})]})}function Pw(){return t.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:t.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-48 w-auto animate-pulse filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),t.jsx("p",{className:"text-primary text-lg font-semibold animate-pulse",children:"Loading Pandaura..."})]})})}function Dw({email:e,onVerify:n,onBack:r,isLoading:s=!1}){const[a,i]=f.useState(""),[o,l]=f.useState(!1),[d,c]=f.useState(""),[u,m]=f.useState(0);f.useEffect(()=>{a.length===6&&!s&&p()},[a,s]);const p=async()=>{if(a.length!==6){c("Please enter a 6-digit code");return}c("");try{const g=await n(a,o);g.success||(m(b=>b+1),c(g.message||"Invalid authentication code"),i(""))}catch(g){m(b=>b+1),c(g.message||"Verification failed"),i("")}},h=g=>{const b=g.target.value.replace(/[^0-9]/g,"");b.length<=6&&(i(b),c(""))},x=g=>{g.key==="Enter"&&a.length===6&&!s&&p()};return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),t.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[t.jsx("img",{src:Ve,alt:"Pandaura AS Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),t.jsx("h1",{className:"text-2xl font-bold text-primary text-center mt-3",children:"Two-Factor Authentication"}),t.jsxs("p",{className:"text-sm text-muted text-center mt-2 max-w-md",children:["Enter the 6-digit code from your authenticator app for ",t.jsx("strong",{children:e})]})]}),t.jsx("div",{className:"w-full max-w-sm bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"twofa-code",name:"twofa-code",type:"text",inputMode:"numeric",pattern:"[0-9]*",required:!0,autoFocus:!0,autoComplete:"one-time-code",maxLength:6,value:a,onChange:h,onKeyPress:x,disabled:s,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all text-center text-2xl tracking-[0.5em] font-mono",placeholder:"000000"}),t.jsx("label",{htmlFor:"twofa-code",className:`absolute left-4 top-2 text-sm text-muted transition-all 
                           peer-focus:text-xs peer-focus:text-secondary`,children:"Authentication Code"})]}),t.jsx("div",{className:"flex justify-center space-x-2",children:Array.from({length:6},(g,b)=>t.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${b<a.length?"bg-accent":"bg-light"}`},b))}),t.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer text-sm text-muted mt-4",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:g=>l(g.target.checked),disabled:s,className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),t.jsx("span",{children:"Trust this device for 30 days"})]})]}),d&&t.jsxs("div",{className:"text-error text-sm text-center bg-error-light border border-error/20 rounded-md p-3 flex items-center justify-center",children:[t.jsx(ze,{className:"w-4 h-4 mr-2"}),d,u>0&&t.jsxs("span",{className:"ml-2 text-xs",children:["(Attempt ",u,"/5)"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{type:"button",onClick:p,disabled:a.length!==6||s,className:"w-full bg-primary hover:bg-secondary disabled:bg-disabled disabled:text-muted text-white py-3 rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:s?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Verifying..."]}):"Verify & Sign In"}),t.jsxs("button",{type:"button",onClick:r,disabled:s,className:"w-full text-muted hover:text-primary text-sm transition-colors flex items-center justify-center",children:[t.jsx(ht,{className:"w-4 h-4 mr-1"}),"Back to login"]})]}),u>=3&&t.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-amber-800",children:[t.jsx("strong",{children:"Having trouble?"})," Make sure your device's time is synchronized and you're using the latest code from your authenticator app."]})})]})}),t.jsx("div",{className:"mt-8 pt-4 text-center space-x-4 text-xs text-muted z-10",children:t.jsx("span",{children:"Need help? Contact your system administrator"})})]})}function Iw({organizations:e,onOrgSelect:n,userEmail:r,isLoading:s=!1}){const[a,i]=f.useState(null),o=()=>{a&&n(a)},l=c=>{switch(c){case"Admin":return"text-red-600 bg-red-50 border-red-200";case"Editor":return"text-blue-600 bg-blue-50 border-blue-200";case"Viewer":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},d=c=>c?{startup:"1-10 employees",small:"11-50 employees",medium:"51-200 employees",large:"201-1000 employees",enterprise:"1000+ employees"}[c]||c:"";return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),t.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[t.jsx("img",{src:Ve,alt:"Pandaura AS Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),t.jsx("h1",{className:"text-2xl font-bold text-primary text-center mt-3",children:"Select Organization"}),t.jsx("p",{className:"text-sm text-muted text-center mt-2 max-w-md",children:"You have access to multiple organizations. Choose which one to sign in to."}),t.jsxs("p",{className:"text-xs text-secondary text-center mt-1",children:["Signed in as: ",t.jsx("strong",{children:r})]})]}),t.jsx("div",{className:"w-full max-w-md bg-surface border border-light rounded-lg shadow-card z-10 p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:"Your Organizations"}),t.jsx("div",{className:"space-y-3",children:e.map(c=>t.jsx("div",{children:t.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all hover:border-accent/50 ${a?.org_id===c.org_id?"border-accent bg-accent/5":"border-light bg-transparent"}`,children:[t.jsx("input",{type:"radio",name:"organization",value:c.org_id,checked:a?.org_id===c.org_id,onChange:()=>i(c),disabled:s,className:"sr-only"}),t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(Ks,{className:"w-8 h-8 text-accent"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-base font-semibold text-primary",children:c.org_name}),t.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium border ${l(c.role)}`,children:c.role}),c.industry&&t.jsx("span",{className:"text-xs text-muted",children:c.industry})]}),c.size&&t.jsxs("p",{className:"text-xs text-muted mt-1 flex items-center",children:[t.jsx(Mr,{className:"w-3 h-3 mr-1"}),d(c.size)]})]})]}),a?.org_id===c.org_id&&t.jsx($t,{className:"w-5 h-5 text-accent flex-shrink-0"})]})})]})},c.org_id))}),t.jsx("div",{className:"pt-4",children:t.jsx(J,{onClick:o,disabled:!a||s,className:"w-full",children:s?"Signing in...":"Continue"})})]})}),t.jsx("div",{className:"mt-8 pt-4 text-center text-xs text-muted z-10",children:t.jsx("p",{children:"You can switch organizations later from your profile settings"})})]})}const ao=["The future of automation isn't wired — it's written.","Logic is your language. We just make it speak faster.","Great integrators don't copy-paste. They build systems that last.","Your plant doesn't wait. Neither should your tools.","Structured text. Unstructured power.","You didn't choose automation for paperwork.","Code once. Deploy everywhere. Trust always.","Real engineers ship reliable logic.","Automation that adapts, not breaks.","Your vision. Our intelligence. Perfect integration."];function Rw(){const e=He(),{login:n,setSelectedOrg:r,organizations:s,isAuthenticated:a,isLoading:i}=pt(),[o,l]=f.useState(""),[d,c]=f.useState(""),[u,m]=f.useState(!1),[p,h]=f.useState(!1),[x,g]=f.useState("credentials"),[b,N]=f.useState([]),[j,v]=f.useState(""),[E,k]=f.useState(!1),[C,S]=f.useState(!1);f.useEffect(()=>{!i&&a&&!C&&e("/home",{replace:!0})},[a,i,C,e]);const[y,A]=f.useState(""),[w,F]=f.useState([]);f.useEffect(()=>{let H;return C&&(console.log("🎉 Splash screen shown - starting 3 second timer"),H=window.setTimeout(()=>{console.log("🎉 Splash timeout completed - navigating to home"),S(!1),e("/home")},3e3)),()=>{H&&(console.log("🧹 Cleaning up splash timeout"),window.clearTimeout(H))}},[C,e]),f.useEffect(()=>{const H=ao.filter(D=>!w.includes(D)),re=H.length>0?H:ao,le=re[Math.floor(Math.random()*re.length)];A(le),F(D=>[...D,le])},[]);const T=async H=>{if(H.preventDefault(),!o.trim()||!d.trim()){v("Please enter both email and password.");return}k(!0),v("");try{const re=await n(o.trim(),d);re.requiresTwoFactor?g("twoFactor"):re.success?O():v(re.message||"Invalid credentials")}catch(re){console.error("Login error:",re),v(re.message||"Login failed. Please try again.")}finally{k(!1)}},R=async(H,re)=>{k(!0),v("");try{const le=await n(o.trim(),d,H);return le.success?(console.log("🔐 2FA verification successful"),re&&localStorage.setItem("pandaura_trusted_device","true"),console.log("🔐 About to call handleSuccessfulLogin"),O(),{success:!0}):{success:!1,message:le.message||"Invalid authentication code"}}catch(le){return console.error("2FA verification error:",le),{success:!1,message:le.message||"Verification failed"}}finally{console.log("🔐 Setting isLoading to false"),k(!1)}},M=H=>{r(H),g("complete"),e("/home")},O=()=>{console.log("🎉 handleSuccessfulLogin called - setting showSplash to true"),S(!0)},$=()=>{g("credentials"),v("")};return console.log("🔍 Render check - showSplash:",C,"currentStep:",x,"isLoading:",E),C?(console.log("🎉 Showing splash screen"),t.jsx(Pw,{})):x==="twoFactor"?(console.log("🔐 Showing 2FA screen"),t.jsx(Dw,{email:o,onVerify:R,onBack:$,isLoading:E})):x==="orgSelection"&&b.length>1?t.jsx(Iw,{organizations:b,onOrgSelect:M,userEmail:o,isLoading:E}):t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),t.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[t.jsx("img",{src:Ve,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),t.jsx("h1",{className:"text-3xl font-bold text-primary text-center mt-4",children:"Pandaura AS"}),t.jsx("h2",{className:"text-lg text-secondary text-center",children:"Industrial Automation Suite"}),y&&t.jsx("div",{className:"mt-4 text-center max-w-md animate-fade-in",children:t.jsxs("p",{className:"text-sm text-muted italic px-4 py-2 bg-surface/50 rounded-md border border-light/50",children:['"',y,'"']})})]}),t.jsxs("div",{className:"w-full max-w-sm bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:[t.jsx("h3",{className:"text-xl font-semibold text-primary text-center mb-6",children:"Sign in to Pandaura AS"}),t.jsxs("form",{className:"space-y-6",onSubmit:T,autoComplete:"on",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"username",autoFocus:!0,value:o,onChange:H=>l(H.target.value),disabled:E,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all disabled:opacity-50",placeholder:" "}),t.jsx("label",{htmlFor:"email",className:`absolute left-4 top-2 text-sm text-muted transition-all 
                         peer-focus:text-xs peer-focus:text-secondary peer-placeholder-shown:text-base peer-placeholder-shown:top-4 peer-placeholder-shown:text-disabled`,children:"Email Address"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{id:"password",name:"password",type:p?"text":"password",required:!0,autoComplete:"current-password",value:d,onChange:H=>c(H.target.value),disabled:E,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all disabled:opacity-50",placeholder:" "}),t.jsx("label",{htmlFor:"password",className:`absolute left-4 top-2 text-sm text-muted transition-all 
                         peer-focus:text-xs peer-focus:text-secondary peer-placeholder-shown:text-base peer-placeholder-shown:top-4 peer-placeholder-shown:text-disabled`,children:"Password"}),t.jsx("button",{type:"button",onClick:()=>h(H=>!H),disabled:E,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary transition-colors disabled:opacity-50",children:p?t.jsx(vr,{className:"w-5 h-5"}):t.jsx(mn,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer text-sm text-muted",children:[t.jsx("input",{type:"checkbox",checked:u,onChange:H=>m(H.target.checked),disabled:E,className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),t.jsx("span",{children:"Remember me"})]}),t.jsx("button",{type:"button",className:"text-sm text-accent hover:text-secondary transition-colors",onClick:()=>{alert("Password reset functionality will be implemented soon.")},children:"Forgot password?"})]}),j&&t.jsx("div",{className:"text-error text-sm text-center bg-error-light border border-error/20 rounded-md p-3",children:j}),t.jsx("button",{type:"submit",disabled:E,className:"w-full bg-primary hover:bg-secondary disabled:bg-disabled disabled:text-muted text-white py-3 rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:E?"Signing in...":"Continue"})]}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-light"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-surface text-muted",children:"or continue with"})})]}),t.jsx("div",{className:"mt-4",children:t.jsxs("button",{type:"button",disabled:!0,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-light rounded-md shadow-sm bg-surface text-sm font-medium text-muted hover:bg-light disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Ks,{className:"w-5 h-5 mr-2"}),"Enterprise SSO (Coming Soon)"]})})]}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-light text-center space-x-4 text-xs text-muted",children:[t.jsx("button",{onClick:()=>e("/terms"),className:"hover:text-primary transition-colors",children:"Terms of Use"}),t.jsx("span",{children:"•"}),t.jsx("button",{onClick:()=>e("/privacy"),className:"hover:text-primary transition-colors",children:"Privacy Policy"})]})]}),t.jsxs("div",{className:"mt-8 text-center text-sm text-muted z-10",children:["Don't have an account?"," ",t.jsx("button",{onClick:()=>e("/signup"),className:"text-accent hover:text-secondary font-medium transition-colors",children:"Sign up here"})]})]})}const Sa=e=>{switch(e.toLowerCase()){case"completed":return"bg-green-100 text-green-700";case"in progress":return"bg-blue-100 text-blue-700";case"active":return"bg-blue-100 text-blue-700";case"archived":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},Ca=e=>{if(!e||e==="N/A")return"bg-gray-100 text-gray-500";switch(e.toLowerCase()){case"rockwell":case"rockwell automation":return"bg-red-100 text-red-700";case"siemens":return"bg-teal-100 text-teal-700";case"beckhoff":return"bg-orange-100 text-orange-700";case"schneider":case"schneider electric":return"bg-green-100 text-green-700";case"omron":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}},Aa=e=>!e||e==="N/A"?"bg-gray-100 text-gray-500":"bg-purple-100 text-purple-700";function Fw({project:e,onOpenOverview:n,onDelete:r}){return t.jsx("div",{className:`bg-surface rounded-lg border border-light p-6 hover:shadow-sm transition-all ${e.status==="archived"?"opacity-60":""}`,children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:e.name}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Sa(e.status)}`,children:e.status==="active"?"Active":e.status})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-secondary mb-3",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Client:"}),t.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${Aa(e.client)}`,children:e.client})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Vendor:"}),t.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${Ca(e.vendor)}`,children:e.vendor})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Modified:"})," ",e.lastModified]})]}),t.jsx("p",{className:"text-sm text-muted",children:e.description})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[t.jsx(J,{onClick:()=>n(e),size:"sm",icon:$t,iconPosition:"right",children:"Open Overview"}),t.jsx(J,{onClick:()=>r(e),variant:"ghost",size:"sm",icon:bn,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete Project"})]})]})})}function Lw({projects:e,onOpenOverview:n,onDelete:r}){return t.jsx("div",{className:"bg-surface rounded-lg border border-light overflow-hidden",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-light",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Project Name"}),t.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Client"}),t.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Vendor"}),t.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Status"}),t.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Last Modified"}),t.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Actions"})]})}),t.jsx("tbody",{children:e.map(s=>t.jsxs("tr",{className:`border-b border-light hover:bg-gray-50 transition-colors ${s.status==="archived"?"opacity-60":""}`,children:[t.jsx("td",{className:"p-4",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:s.name}),t.jsx("p",{className:"text-sm text-muted mt-1",children:s.description})]})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Aa(s.client)}`,children:s.client})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ca(s.vendor)}`,children:s.vendor})}),t.jsx("td",{className:"p-4",children:t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Sa(s.status)}`,children:s.status==="active"?"Active":s.status})}),t.jsx("td",{className:"p-4 text-secondary",children:s.lastModified}),t.jsx("td",{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(J,{onClick:()=>n(s),size:"sm",icon:$t,iconPosition:"right",children:"Open Overview"}),t.jsx(J,{onClick:()=>r(s),variant:"ghost",size:"sm",icon:bn,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete Project"})]})})]},s.id))})]})})}const Ow=[{value:"all",label:"All Projects"},{value:"active",label:"Active"},{value:"archived",label:"Archived"}];function Mw({onBack:e,onOpenProject:n,onDeleteProject:r,onNewProject:s,refreshTrigger:a=0,onRefreshComplete:i}){const{isAuthenticated:o,token:l,user:d}=pt(),[c,u]=f.useState([]),[m,p]=f.useState(!0),[h,x]=f.useState(""),[g,b]=f.useState(""),[N,j]=f.useState("all"),[v,E]=f.useState("grid"),k=async()=>{if(!o||!l){console.log("ProjectsList: User not authenticated, skipping project load"),p(!1),x("Please log in to view projects");return}try{p(!0),x("");const A=(await Ae.getProjects()).map(Dr);console.log("ProjectsList: Loaded",A.length,"projects"),u(A),i&&i()}catch(y){console.error("Failed to load projects:",y),x(y.message||"Failed to load projects")}finally{p(!1)}};f.useEffect(()=>{o&&l&&k()},[a,o,l]);const C=y=>{r(y)},S=c.filter(y=>{const A=(y.name||"").toLowerCase().includes(g.toLowerCase())||(y.client||"").toLowerCase().includes(g.toLowerCase())||(y.description||"").toLowerCase().includes(g.toLowerCase()),w=N==="all"||y.status===N;return A&&w});return t.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(J,{onClick:e,variant:"ghost",icon:Fr,size:"sm",children:"Back"}),t.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects"}),t.jsxs("span",{className:"text-sm text-secondary px-2 py-1 bg-light rounded",children:[S.length," projects"]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(J,{onClick:k,variant:"ghost",icon:Ue,disabled:m,size:"sm",children:m?"Loading...":"Refresh"}),t.jsxs("div",{className:"flex border border-light rounded overflow-hidden",children:[t.jsx("button",{onClick:()=>E("grid"),className:`p-2 ${v==="grid"?"bg-accent text-white":"bg-white text-muted hover:bg-gray-50"}`,title:"Card View",children:t.jsx(Nd,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>E("list"),className:`p-2 ${v==="list"?"bg-accent text-white":"bg-white text-muted hover:bg-gray-50"}`,title:"Table View",children:t.jsx(Rd,{className:"w-4 h-4"})})]}),t.jsx(J,{onClick:s,icon:fn,iconPosition:"left",children:"New Project"})]})]}),t.jsxs("div",{className:"flex gap-4 mb-6",children:[t.jsx("div",{className:"flex-1",children:t.jsx(Qe,{type:"search",placeholder:"Search projects...",value:g,onChange:y=>b(y.target.value),icon:On,iconPosition:"left"})}),t.jsx("div",{className:"w-48",children:t.jsx(kt,{options:Ow,value:N,onChange:j,placeholder:"Filter projects"})})]}),h&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{children:h}),t.jsx(J,{onClick:k,variant:"ghost",size:"sm",children:"Retry"})]})}),m&&!h&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(Ue,{className:"w-8 h-8 text-secondary mx-auto mb-4 animate-spin"}),t.jsx("p",{className:"text-secondary",children:"Loading projects..."})]}),!m&&!h&&t.jsx("div",{className:v==="grid"?"space-y-4":"",children:S.length===0?t.jsxs("div",{className:"text-center py-12 bg-surface rounded-lg border border-light",children:[t.jsx(Ts,{className:"w-16 h-16 text-muted mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-primary mb-2",children:"No projects found"}),t.jsx("p",{className:"text-secondary mb-4",children:g||N!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first project."}),!g&&N==="all"&&t.jsx(J,{onClick:s,icon:fn,iconPosition:"left",children:"Create New Project"})]}):v==="grid"?S.map(y=>t.jsx(Fw,{project:y,onOpenOverview:n,onDelete:C},y.id)):t.jsx(Lw,{projects:S,onOpenOverview:n,onDelete:C})})]})}function io(e,n=!1){return e==null?"":typeof e=="string"?(n&&e.trim(),e):typeof e=="boolean"?e?"Yes":"No":typeof e=="number"?String(e):typeof e=="object"?Array.isArray(e)?e.length>0?e.join(", "):"None":Object.keys(e).length===0?"None":Object.entries(e).filter(([s,a])=>a!=null&&a!=="").map(([s,a])=>{const i=s.replace(/([A-Z])/g," $1").replace(/^./,o=>o.toUpperCase());return typeof a=="boolean"?`${i}: ${a?"Yes":"No"}`:typeof a=="object"&&a!==null?`${i}: ${JSON.stringify(a)}`:typeof a=="string"&&a.length>50?`${i}: ${a.substring(0,50)}...`:`${i}: ${a}`}).join(`
`)||"Empty":String(e)}function _w({section:e,isExpanded:n,onToggle:r}){const s=e.icon,a=e.key==="editorCode",i=e.key==="tags",o=e.key==="metadata";return t.jsxs("div",{className:"border border-gray-200 rounded-lg mb-3",children:[t.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50 ${e.hasChanges?"bg-yellow-50 border-yellow-200":""}`,onClick:r,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(s,{className:"w-4 h-4 text-gray-600"}),t.jsx("span",{className:"font-medium",children:e.label}),e.hasChanges&&t.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded-full",children:"Changed"}),a&&e.hasChanges&&t.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-full",children:"Code Modified"})]}),n?t.jsx(Ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(yn,{className:"w-4 h-4 text-gray-400"})]}),n&&t.jsx("div",{className:"border-t border-gray-200 p-3",children:e.hasChanges?t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Previous Version ",a?"(Before)":""]}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-2",children:i?t.jsx("div",{className:"flex flex-col gap-1",children:Array.isArray(e.fromValue)&&e.fromValue.length>0?e.fromValue.map((l,d)=>t.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:typeof l=="string"?l:l.name||JSON.stringify(l)},d)):t.jsx("span",{className:"text-gray-400 text-xs",children:"No tags"})}):o?t.jsx("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap font-mono overflow-auto max-h-96",children:JSON.stringify(e.fromValue,null,2)}):t.jsx("pre",{className:`text-sm text-gray-800 whitespace-pre-wrap ${a?"font-mono":""}`,children:io(e.fromValue,a)})})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Current Version ",a?"(After)":""]}),t.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-2",children:i?t.jsx("div",{className:"flex flex-col gap-1",children:Array.isArray(e.toValue)&&e.toValue.length>0?e.toValue.map((l,d)=>t.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:typeof l=="string"?l:l.name||JSON.stringify(l)},d)):t.jsx("span",{className:"text-gray-400 text-xs",children:"No tags"})}):o?t.jsx("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap font-mono overflow-auto max-h-96",children:JSON.stringify(e.toValue,null,2)}):t.jsx("pre",{className:`text-sm text-gray-800 whitespace-pre-wrap ${a?"font-mono":""}`,children:io(e.toValue,a)})})]})]}):t.jsx("div",{className:"text-sm text-gray-500 italic",children:"No changes in this section"})})]})}function zw({projectId:e,fromVersion:n,toVersion:r,isOpen:s,onClose:a}){const[i,o]=f.useState(null),[l,d]=f.useState(null),[c,u]=f.useState(!1),[m,p]=f.useState(null),[h,x]=f.useState(new Set),[g,b]=f.useState(!1),{getVersionData:N}=nr({projectId:e,autoCreateVersions:!1});f.useEffect(()=>{s&&e&&n&&r&&j()},[s,e,n,r]);const j=async()=>{u(!0),p(null);try{console.log("VersionDiffViewer: Loading version data for comparison:",{fromVersion:n,toVersion:r});const[S,y]=await Promise.all([N(n),N(r)]);console.log("VersionDiffViewer: Loaded version data:",{fromVersionData:S,toVersionData:y,fromKeys:Object.keys(S||{}),toKeys:Object.keys(y||{})}),o(S),d(y),console.log("VersionDiffViewer: Version data loaded successfully")}catch(S){console.error("VersionDiffViewer: Error loading version data:",S),p(S.message||"Failed to load version data")}finally{u(!1)}},v=S=>{const y=new Set(h);y.has(S)?y.delete(S):y.add(S),x(y)},k=(()=>{if(!i||!l)return[];console.log("VersionDiffViewer: Creating diff sections with data:",{fromData:i,toData:l});const S=[];let y;if(i.module==="LogicStudio"||l.module==="LogicStudio"||i.state?.module==="LogicStudio"||l.state?.module==="LogicStudio"||i.moduleStates?.LogicStudio||l.moduleStates?.LogicStudio||i.logicStudioCode||l.logicStudioCode){const A=i.editorCode||i.logicStudioCode||i.state?.editorCode||i.moduleStates?.LogicStudio?.editorCode||i.logic?.code||"",w=l.editorCode||l.logicStudioCode||l.state?.editorCode||l.moduleStates?.LogicStudio?.editorCode||l.logic?.code||"";console.log("VersionDiffViewer: Found PLC code:",{fromCode:A.length,toCode:w.length});const F=i.prompt||i.ai_prompt||i.state?.prompt||i.moduleStates?.LogicStudio?.prompt||i.logic?.ai_prompt||"",T=l.prompt||l.ai_prompt||l.state?.prompt||l.moduleStates?.LogicStudio?.prompt||l.logic?.ai_prompt||"";y={key:"prompt",label:"AI Prompt",icon:pn,fromValue:F,toValue:T,hasChanges:F!==T};const R=i.tags||[],M=l.tags||[];S.push({key:"tags",label:"Tags",icon:Ke,fromValue:R,toValue:M,hasChanges:JSON.stringify(R)!==JSON.stringify(M)});const O={tags:i.tags||[]},$={tags:l.tags||[]};S.push({key:"metadata",label:"Metadata",icon:cn,fromValue:O,toValue:$,hasChanges:JSON.stringify(O)!==JSON.stringify($)}),i.projectName,i.clientName,i.projectType,i.description,l.projectName,l.clientName,l.projectType,l.description,(i.editorSettings||l.editorSettings)&&S.push({key:"editorSettings",label:"Editor Settings",icon:_t,fromValue:i.editorSettings||{},toValue:l.editorSettings||{},hasChanges:JSON.stringify(i.editorSettings||{})!==JSON.stringify(l.editorSettings||{})});const H={lastActivity:i.lastActivity||"",timestamp:i.timestamp||"",collapseLevel:i.collapseLevel||0},re={lastActivity:l.lastActivity||"",timestamp:l.timestamp||"",collapseLevel:l.collapseLevel||0};S.push({key:"activityTracking",label:"Activity & State",icon:cn,fromValue:H,toValue:re,hasChanges:JSON.stringify(H)!==JSON.stringify(re)})}return(i.module==="TagManager"||l.module==="TagManager")&&S.push({key:"filters",label:"Tag Filters",icon:cn,fromValue:i.filters||{},toValue:l.filters||{},hasChanges:JSON.stringify(i.filters||{})!==JSON.stringify(l.filters||{})}),(i.module==="AskPandaura"||l.module==="AskPandaura")&&S.push({key:"chatMessage",label:"Chat Message",icon:pn,fromValue:i.chatMessage||"",toValue:l.chatMessage||"",hasChanges:(i.chatMessage||"")!==(l.chatMessage||"")}),S.push({key:"lastActivity",label:"Last Activity",icon:Ke,fromValue:i.lastActivity||"",toValue:l.lastActivity||"",hasChanges:(i.lastActivity||"")!==(l.lastActivity||"")}),y&&S.push(y),S})(),C=k.filter(S=>S.hasChanges);return t.jsx(lt,{isOpen:s,onClose:a,title:`Compare Versions ${n} → ${r}`,size:"xl",children:t.jsx("div",{className:"space-y-4",children:c?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),t.jsx("p",{className:"text-gray-500 mt-2",children:"Loading version data..."})]}):m?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-2",children:"Failed to load version data"}),t.jsx("p",{className:"text-sm text-gray-500 mb-4",children:m}),t.jsx(J,{onClick:j,variant:"outline",children:"Try Again"})]}):k.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ke,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),t.jsx("p",{className:"text-gray-500",children:"No data available for comparison"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsxs("h3",{className:"font-medium text-blue-900 mb-2",children:["Comparison Summary",g&&t.jsx("span",{className:"ml-2 text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded",children:"Changes Only"})]}),t.jsxs("div",{className:"text-sm text-blue-700",children:[t.jsxs("p",{children:[t.jsx("strong",{children:C.length})," section",C.length!==1?"s":""," changed out of ",t.jsx("strong",{children:k.length})," total sections",g&&t.jsxs("span",{className:"ml-1",children:["(showing ",C.length," changed sections)"]})]}),C.length>0&&t.jsxs("p",{className:"mt-1",children:["Changed: ",C.map(S=>S.label).join(", ")]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(J,{size:"sm",variant:"outline",onClick:()=>{const S=new Set(k.map(y=>y.key));x(S),b(!1)},children:"Expand All"}),t.jsx(J,{size:"sm",variant:"outline",onClick:()=>{x(new Set),b(!1)},children:"Collapse All"}),t.jsx(J,{size:"sm",variant:"outline",onClick:()=>{const S=new Set(C.map(y=>y.key));x(S),b(!0)},className:g?"bg-blue-100 border-blue-300":"",children:"Show Changes Only"}),g&&t.jsx(J,{size:"sm",variant:"outline",onClick:()=>{b(!1),x(new Set)},children:"Show All Sections"})]}),t.jsx("div",{className:"space-y-3",children:(g?C:k).map(S=>t.jsx(_w,{section:S,isExpanded:h.has(S.key),onToggle:()=>v(S.key)},S.key))})]})})})}function $w({version:e,projectId:n,onClose:r,onConfirm:s,onSuccess:a}){const{showToast:i}=St(),[o,l]=f.useState(!1),d=async()=>{if(e)try{l(!0),await Ae.deleteVersion(n,e.version_number),i({variant:"success",title:"Version Deleted",message:`Version ${e.version_number} has been deleted successfully.`,duration:4e3}),s(e),a&&a(),r()}catch(u){console.error("Failed to delete version:",u),i({variant:"error",title:"Delete Failed",message:u.message||"Failed to delete version. Please try again.",duration:5e3})}finally{l(!1)}},c=u=>{const m=new Date(u.created_at).toLocaleDateString(),p=new Date(u.created_at).toLocaleTimeString();return`${m} at ${p}`};return t.jsxs(lt,{isOpen:!!e,onClose:r,title:"Delete Version",size:"sm",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-secondary mb-4",children:["Are you sure you want to delete ",t.jsxs("strong",{children:["Version ",e?.version_number]}),"?"]}),e&&t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Version:"}),t.jsxs("span",{className:"text-gray-900",children:["#",e.version_number]})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Created:"}),t.jsx("span",{className:"text-gray-900",children:c(e)})]}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Type:"}),t.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e.is_auto?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:e.is_auto?"Auto":"Manual"})]}),e.message&&t.jsxs("div",{className:"text-sm",children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Message:"}),t.jsx("p",{className:"text-gray-900 mt-1",children:e.message})]})]})}),t.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone and will permanently remove this version from the project history."})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(J,{variant:"ghost",onClick:r,disabled:o,children:"Cancel"}),t.jsx(J,{variant:"danger",onClick:d,disabled:o,children:o?"Deleting...":"Delete Version"})]})]})}function Bw({versions:e,isLoading:n=!1,error:r=null,onViewDiff:s,onRollback:a,onDelete:i,onRefresh:o,projectId:l}){const[d,c]=f.useState(!1),[u,m]=f.useState(1),p=5,[h,x]=f.useState(!1),[g,b]=f.useState(null),[N,j]=f.useState(null),v=[...e].sort((R,M)=>M.version_number-R.version_number),E=Math.ceil(v.length/p),k=(u-1)*p,C=k+p,S=v.slice(k,C),y=R=>{m(R)},A=R=>{j(R)},w=R=>{i&&i(R)},F=()=>{j(null)},T=R=>{try{return new Date(R).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return R}};return t.jsxs(De,{children:[t.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer border-b border-light hover:bg-background transition-colors",onClick:()=>c(!d),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bo,{className:"w-5 h-5 text-accent"}),t.jsx("h3",{className:"font-semibold text-primary",children:"Version History"}),t.jsxs("span",{className:"text-sm text-muted",children:["(",v.length," versions)"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[o&&t.jsx(J,{size:"sm",variant:"ghost",icon:Ue,onClick:()=>{o()},className:`p-1 ${n?"animate-spin":""}`,title:"Refresh version history"}),d?t.jsx(Kc,{className:"w-4 h-4 text-muted"}):t.jsx(Ut,{className:"w-4 h-4 text-muted"})]})]}),d&&t.jsx("div",{className:"p-4",children:n?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ue,{className:"w-8 h-8 text-muted mx-auto mb-3 animate-spin"}),t.jsx("p",{className:"text-secondary",children:"Loading version history..."})]}):r?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(ze,{className:"w-8 h-8 text-red-500 mx-auto mb-3"}),t.jsx("p",{className:"text-red-600 mb-2",children:"Failed to load version history"}),t.jsx("p",{className:"text-sm text-muted mb-4",children:r}),o&&t.jsx(J,{size:"sm",variant:"outline",icon:Ue,onClick:o,children:"Try Again"})]}):v.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(It,{className:"w-12 h-12 text-muted mx-auto mb-3"}),t.jsx("p",{className:"text-secondary",children:"No version history available"}),t.jsx("p",{className:"text-sm text-muted mt-2",children:"Versions will appear here as you save your project"})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"space-y-3 mb-4",children:S.map((R,M)=>{const O=k+M===0;return t.jsxs("div",{className:`flex items-center justify-between p-4 rounded-md border transition-colors ${O?"bg-accent-light border-accent":"bg-background border-light hover:border-accent"}`,children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsxs("span",{className:"font-medium text-primary",children:["Version ",R.version_number]}),O&&t.jsx("span",{className:"bg-accent text-white text-xs px-2 py-0.5 rounded-full",children:"Current"}),t.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${R.is_auto?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:R.is_auto?"Auto-save":"Manual"})]}),t.jsxs("div",{className:"text-sm text-secondary mb-1",children:[t.jsxs("span",{className:"font-medium",children:["User ",R.user_id]})," • ",T(R.created_at)]}),R.message&&t.jsx("p",{className:"text-sm text-muted",children:R.message}),t.jsx("div",{className:"flex items-center gap-4 text-xs text-muted mt-2",children:t.jsxs("span",{children:["Created ",new Date(R.created_at).toLocaleDateString()]})})]}),t.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[M<v.length-1&&l&&t.jsx(J,{size:"sm",variant:"outline",icon:mn,onClick:()=>{const $=v[M+1];b({from:$.version_number,to:R.version_number}),x(!0)},title:"Compare with previous version",children:"Diff"}),s&&t.jsx(J,{size:"sm",variant:"outline",icon:mn,onClick:()=>s(R),title:"View Changes",children:"View"}),!O&&t.jsxs(t.Fragment,{children:[t.jsx(J,{size:"sm",variant:"ghost",icon:Nr,onClick:()=>a(R),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Rollback to this version",children:"Rollback"}),i&&t.jsx(J,{size:"sm",variant:"ghost",icon:bn,onClick:()=>A(R),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete this version",children:"Delete"})]})]})]},R.id)})}),E>1&&t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-light",children:[t.jsxs("div",{className:"text-sm text-secondary",children:["Showing ",k+1,"-",Math.min(C,v.length)," of ",v.length," versions"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(J,{size:"sm",variant:"ghost",onClick:()=>y(u-1),disabled:u===1,children:"Previous"}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:E},(R,M)=>M+1).map(R=>t.jsx(J,{size:"sm",variant:u===R?"primary":"ghost",onClick:()=>y(R),className:"w-8 h-8 p-0",children:R},R))}),t.jsx(J,{size:"sm",variant:"ghost",onClick:()=>y(u+1),disabled:u===E,children:"Next"})]})]})]})}),l&&g&&t.jsx(zw,{projectId:l,fromVersion:g.from,toVersion:g.to,isOpen:h,onClose:()=>{x(!1),b(null)}}),l&&t.jsx($w,{version:N,projectId:l,onClose:F,onConfirm:w,onSuccess:o})]})}const Uw=e=>{if(!e)return"No state data available";try{return JSON.stringify(e,null,2)}catch{return"Invalid state data"}},Vw=e=>e==null?"Not set":typeof e=="string"?e.trim()===""?"Empty":e:typeof e=="boolean"?e?"Yes":"No":typeof e=="number"?String(e):typeof e=="object"?Array.isArray(e)?e.length>0?e.join(", "):"None":Object.keys(e).length===0?"None":Object.entries(e).filter(([r,s])=>s!=null&&s!=="").map(([r,s])=>{const a=r.replace(/([A-Z])/g," $1").replace(/^./,i=>i.toUpperCase());return typeof s=="boolean"?`${a}: ${s?"Yes":"No"}`:typeof s=="object"&&s!==null?`${a}: ${JSON.stringify(s)}`:typeof s=="string"&&s.length>100?`${a}: ${s.substring(0,100)}...`:`${a}: ${s}`}).join(`
`)||"Empty":String(e),xr=({title:e,icon:n,data:r,isExpanded:s,onToggle:a,important:i=!1})=>t.jsxs("div",{className:`border rounded-lg mb-3 ${i?"border-blue-200 bg-blue-50":"border-gray-200"}`,children:[t.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-50",onClick:a,children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(n,{className:`w-4 h-4 ${i?"text-blue-600":"text-gray-600"}`}),t.jsx("span",{className:`font-medium ${i?"text-blue-900":"text-gray-900"}`,children:e}),i&&t.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded-full",children:"Key Data"})]}),s?t.jsx(Ut,{className:"w-4 h-4 text-gray-400"}):t.jsx(yn,{className:"w-4 h-4 text-gray-400"})]}),s&&t.jsx("div",{className:"border-t border-gray-200 p-3",children:t.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:t.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:Vw(r)})})})]});function Hw({version:e,onClose:n,onRollback:r,onExport:s,projectId:a}){const[i,o]=f.useState(!1),[l,d]=f.useState(!1),[c,u]=f.useState(new Set(["logicStudioCore"])),[m,p]=f.useState(null),[h,x]=f.useState(!1);if(f.useEffect(()=>{e&&a&&e.version_number&&(x(!0),Ae.getVersion(a,e.version_number).then(k=>{console.log("VersionDiffModal: Loaded full version data:",k),p(k)}).catch(k=>{console.error("VersionDiffModal: Failed to load version data:",k),p(null)}).finally(()=>{x(!1)}))},[e,a]),!e)return null;const g=()=>{r(e),o(!1),n()},b=()=>{s&&s(e)},N=k=>{const C=new Set(c);C.has(k)?C.delete(k):C.add(k),u(C)},j=k=>{try{return new Date(k).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return new Date().toLocaleString()}},E=(()=>{if(!m)return{basicInfo:{"Version Number":e.version_number,Created:j(e.created_at),"Save Type":e.is_auto?"Auto-save":"Manual Save",Message:e.message||"No message provided",Status:h?"Loading...":"Data not loaded"}};if(m.moduleStates?.LogicStudio||m.state?.module==="LogicStudio"){const k=m.moduleStates?.LogicStudio||m.state||{};return{logicStudioCore:{"PLC Vendor":k.vendor||"siemens","Code Lines":k.editorCode?k.editorCode.split(`
`).length:0,"Has PLC Code":!!(k.editorCode&&k.editorCode.trim()),"Has AI Prompt":!!(k.prompt&&k.prompt.trim()),"Prompt Length":k.prompt?`${k.prompt.length} characters`:"0 characters","Last Activity":k.lastActivity||"Unknown"},projectInfo:{"Project Name":k.projectName||m.projectMetadata?.project_name||"Unnamed Project","Client Name":k.clientName||"No client specified","Project Type":k.projectType||"Not specified",Description:k.description||"No description",Module:k.module||"LogicStudio"},codeContent:{"Full PLC Code":k.editorCode||"No code available","Code Preview":k.editorCode?k.editorCode.length>200?`${k.editorCode.substring(0,200)}...`:k.editorCode:"No code"},aiPrompt:{"AI Prompt":k.prompt||"No prompt set","Prompt Preview":k.prompt?k.prompt.length>200?`${k.prompt.substring(0,200)}...`:k.prompt:"No prompt"},technicalDetails:{"PLC Vendor":k.vendor||"siemens","Collapse Level":k.collapseLevel||0,Timestamp:m.timestamp?new Date(m.timestamp).toLocaleString():"Unknown","Version Number":e.version_number,"Save Type":e.is_auto?"Auto-save":"Manual Save",Created:j(e.created_at)},rawData:m}}return{basicInfo:{"Version Number":e.version_number,Created:j(e.created_at),"Save Type":e.is_auto?"Auto-save":"Manual Save",Message:e.message||"No message provided","Data Type":"Non-Logic Studio data"},rawData:m}})();return t.jsxs(t.Fragment,{children:[t.jsxs(lt,{isOpen:!!e,onClose:n,title:`Version ${e.version_number} - Project State`,size:"lg",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-background rounded-lg p-4 border border-light",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"text-lg font-semibold text-primary",children:["Version ",e.version_number]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.is_auto?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:e.is_auto?"Auto-save":"Manual"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[s&&t.jsx(J,{size:"sm",variant:"outline",icon:Bt,onClick:b,children:"Export"}),t.jsx(J,{size:"sm",variant:"outline",icon:Nr,onClick:()=>o(!0),className:"text-orange-600 hover:text-orange-700",children:"Rollback"})]})]}),t.jsxs("div",{className:"text-sm text-secondary",children:[t.jsxs("span",{className:"font-medium",children:["User ",e.user_id]})," • ",j(e.created_at)]}),e.message&&t.jsx("p",{className:"text-sm text-primary mt-2",children:e.message})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-medium text-primary",children:"Project State Snapshot"}),t.jsx(J,{size:"sm",variant:"outline",icon:_t,onClick:()=>d(!l),children:l?"Hide Raw Data":"Show Raw Data"})]}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:h?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),t.jsx("p",{className:"text-gray-600",children:"Loading Logic Studio metadata..."})]}):t.jsxs(t.Fragment,{children:[E.codeContent&&t.jsx(xr,{title:"PLC Code Content",icon:_t,data:E.codeContent,isExpanded:c.has("codeContent"),onToggle:()=>N("codeContent")}),E.aiPrompt&&t.jsx(xr,{title:"AI Prompt",icon:pn,data:E.aiPrompt,isExpanded:c.has("aiPrompt"),onToggle:()=>N("aiPrompt")}),E.basicInfo&&!E.logicStudioCore&&t.jsx(xr,{title:"Version Information",icon:Ke,data:E.basicInfo,isExpanded:c.has("basicInfo"),onToggle:()=>N("basicInfo"),important:!0}),E.rawData&&t.jsx(xr,{title:"Raw Version Data (Debug)",icon:cn,data:E.rawData,isExpanded:c.has("rawData"),onToggle:()=>N("rawData")})]})}),l&&t.jsxs("div",{className:"bg-background border border-light rounded-md p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(_t,{className:"w-5 h-5 text-accent"}),t.jsx("span",{className:"font-medium text-primary",children:"Raw Version Data (JSON)"})]}),t.jsx("div",{className:"bg-surface rounded-md p-3 max-h-96 overflow-y-auto",children:t.jsx("pre",{className:"text-xs text-primary whitespace-pre-wrap font-mono",children:Uw(e)})})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:t.jsxs("p",{className:"text-sm text-blue-800",children:[t.jsx("strong",{children:"Note:"})," We stores complete project state snapshots. Rolling back will restore the entire project to this version's state."]})})]})]}),t.jsx("div",{className:"flex justify-end gap-3 mt-6",children:t.jsx(J,{variant:"ghost",onClick:n,children:"Close"})})]}),t.jsxs(lt,{isOpen:i,onClose:()=>o(!1),title:"Confirm Rollback",size:"sm",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("p",{className:"text-secondary mb-4",children:["Are you sure you want to rollback to ",t.jsxs("strong",{children:["Version ",e.version_number]}),"?"]}),t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-3",children:t.jsxs("p",{className:"text-sm text-orange-800",children:[t.jsx("strong",{children:"Warning:"})," This action will create a new version with the rollback changes. Your current work will be preserved in a separate version."]})})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(J,{variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),t.jsxs(J,{variant:"danger",onClick:g,icon:Nr,children:["Rollback to Version ",e.version_number]})]})]})]})}function qw(e){return t.jsx(Ot,{children:t.jsx(Ww,{...e})})}function Ww({project:e,onBack:n,onOpenWorkspace:r}){const[s,a]=f.useState(!1),[i,o]=f.useState(!1),[l,d]=f.useState(null),{project:c,isLoading:u,error:m,isDirty:p,lastSaved:h,autosave:x,save:g}=Bb(e?.id||0),{versions:b,isLoading:N,error:j,rollbackToVersion:v,deleteVersion:E,refreshVersions:k}=nr({projectId:e?.id||0,autoCreateVersions:!0}),{safeVersions:C,recentActivity:S}=f.useMemo(()=>{const O=b||[];return{safeVersions:O,recentActivity:O.slice(0,5).map($=>({action:$.is_auto?"Auto-saved project":"Manually saved version",user:`User ${$.user_id}`,timestamp:new Date($.created_at).toLocaleString(),details:$.message||`Version ${$.version_number} created`}))}},[b]),y=f.useCallback(async()=>{if(g)try{const O={currentView:"overview",savedAt:new Date().toISOString(),hasUnsavedChanges:!1};await g(O),a(!1),o(!1),console.log("Project saved successfully")}catch(O){console.error("Failed to save project:",O)}},[g]),A=f.useCallback(()=>{s||p?o(!0):r(e)},[s,p,r,e]),w=f.useCallback(()=>{o(!1),r(e)},[r,e]),F=f.useCallback(O=>{d(O)},[]),T=f.useCallback(async O=>{if(v)try{console.log("Rolling back to version:",O.version_number),await v(O.version_number),console.log("Rollback completed successfully")}catch($){console.error("Rollback failed:",$);const H=$ instanceof Error?$.message:"Failed to rollback to version. Please try again.";console.error(H)}},[v]),R=f.useCallback(async O=>{if(E)try{console.log("Deleting version:",O.version_number),await E(O.version_number),console.log("Version deleted successfully")}catch($){console.error("Delete failed:",$);const H=$ instanceof Error?$.message:"Failed to delete version. Please try again.";console.error(H)}},[E]);if(f.useEffect(()=>{if(!p||!x)return;const O=setTimeout(async()=>{const $={currentView:"overview",lastActivity:new Date().toISOString(),hasUnsavedChanges:s};await x($),console.log("Auto-saved project state")},3e4);return()=>clearTimeout(O)},[p,s,x]),f.useEffect(()=>{const O=$=>{if(s||p)return $.preventDefault(),$.returnValue="You have unsaved changes. Are you sure you want to leave?",$.returnValue};return window.addEventListener("beforeunload",O),()=>window.removeEventListener("beforeunload",O)},[s,p]),f.useEffect(()=>{e?.id&&console.log("Project Overview - Version Control Debug:",{projectId:e.id,versionsLoading:N,versionsError:j,versionsCount:C.length,versions:C,recentActivityCount:S.length})},[e?.id,N,j,C,S]),!e)return t.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:t.jsxs("div",{className:"text-center py-12 bg-red-50 rounded-lg border border-red-200",children:[t.jsx(ze,{className:"w-8 h-8 text-red-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-red-700 mb-2",children:"No Project Selected"}),t.jsx("p",{className:"text-red-600 mb-4",children:"No project data was provided."}),t.jsx(J,{onClick:n,children:"Back to Projects"})]})});if(u)return t.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent mx-auto mb-4"}),t.jsx("p",{className:"text-secondary",children:"Loading project..."})]})});if(m)return t.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:t.jsxs("div",{className:"text-center py-12 bg-red-50 rounded-lg border border-red-200",children:[t.jsx(ze,{className:"w-8 h-8 text-red-500 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-red-700 mb-2",children:"Failed to load project"}),t.jsx("p",{className:"text-red-600 mb-4",children:m}),t.jsx(J,{onClick:()=>window.location.reload(),children:"Try Again"})]})});const M=c||e;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(J,{onClick:n,variant:"ghost",icon:Fr,size:"sm",children:"Back to Projects"}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-3xl font-bold text-primary",children:["Project: ",M.name]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-secondary",children:[t.jsxs("span",{children:["Last modified ",M.lastModified]}),p&&t.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[t.jsx(It,{className:"w-4 h-4"}),t.jsx("span",{children:"Auto-saving..."})]}),h&&t.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[t.jsx(Dt,{className:"w-4 h-4"}),t.jsxs("span",{children:["Saved ",h.toLocaleTimeString()]})]})]})]})]}),t.jsx("div",{className:"flex items-center gap-3",children:(s||p)&&t.jsx(J,{onClick:y,variant:"secondary",icon:Dt,iconPosition:"left",children:"Save Changes"})})]}),(s||p)&&t.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ze,{className:"w-5 h-5 text-orange-600"}),t.jsx("p",{className:"text-orange-700",children:"You have unsaved changes. These will be auto-saved every 30 seconds, or you can save them manually."})]})}),i&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Unsaved Changes"}),t.jsx("p",{className:"text-secondary mb-6",children:"You have unsaved changes. Would you like to save them before opening the workspace?"}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(J,{variant:"ghost",onClick:w,children:"Don't Save"}),t.jsx(J,{onClick:y,icon:Dt,iconPosition:"left",children:"Save & Continue"})]})]})}),t.jsx(De,{className:"mb-6",children:t.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-secondary",children:"Name"}),t.jsx("p",{className:"text-primary",children:M.name})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-secondary",children:"Client"}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${Aa(M.client)}`,children:M.client})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"text-sm font-medium text-secondary",children:"Type"}),t.jsx("p",{className:"text-primary w-fit",children:M.type})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-secondary",children:"Target PLC Vendor"}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${Ca(M.vendor)}`,children:M.vendor})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-secondary",children:"Status"}),t.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${Sa(M.status)}`,children:M.status==="active"?"Active":M.status})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-secondary",children:"Description"}),t.jsx("p",{className:"text-primary",children:M.description})]})]})]})}),t.jsx("div",{className:"mb-6",children:t.jsx(J,{onClick:A,size:"lg",icon:$t,iconPosition:"right",className:"w-full py-4",children:"Open Full Project Workspace"})}),t.jsxs("div",{className:"grid gap-6",children:[t.jsx(Bw,{versions:C,isLoading:N,error:j,projectId:e.id,onViewDiff:F,onRollback:T,onDelete:R,onRefresh:k}),t.jsxs(De,{children:[t.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-light",children:[t.jsx(Ra,{className:"w-5 h-5 text-accent"}),t.jsx("h3",{className:"font-semibold text-primary",children:"Recent Activity"})]}),t.jsx("div",{className:"p-4",children:N?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),t.jsx("p",{className:"text-secondary",children:"Loading recent activity..."})]}):S.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ra,{className:"w-12 h-12 text-muted mx-auto mb-3"}),t.jsx("p",{className:"text-secondary",children:"No recent activity"}),t.jsx("p",{className:"text-xs text-muted mt-1",children:"Activity will appear here as you work on the project"})]}):t.jsx("div",{className:"space-y-3",children:S.map((O,$)=>t.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-md",children:[t.jsx("div",{className:"w-2 h-2 bg-accent rounded-full mt-2 flex-shrink-0"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-primary",children:O.action}),t.jsxs("p",{className:"text-xs text-muted",children:[O.user," • ",O.timestamp]}),O.details&&t.jsx("p",{className:"text-xs text-secondary mt-1",children:O.details})]})]},$))})})]})]})]}),t.jsx(Hw,{version:l,projectId:e.id,onClose:()=>d(null),onRollback:O=>{T(O),d(null)}})]})}const Gw=[{value:"",label:"Select project type"},{value:"new-installation",label:"New Installation"},{value:"migration",label:"Migration/Upgrade"},{value:"integration",label:"System Integration"},{value:"maintenance",label:"Maintenance/Support"},{value:"industrial-automation",label:"Industrial Automation"}],Jw=[{value:"",label:"Select PLC vendor"},{value:"siemens",label:"Siemens"},{value:"rockwell",label:"Rockwell Automation"},{value:"beckhoff",label:"Beckhoff"}];function Xw({isOpen:e,onClose:n,onSubmit:r,onSuccess:s}){const{showToast:a}=St(),[i,o]=f.useState({name:"",client:"",type:"",vendor:"",description:""}),[l,d]=f.useState({}),[c,u]=f.useState(!1),[m,p]=f.useState(""),h=async()=>{const g={};if(i.name.trim()||(g.name="Project name is required"),i.vendor&&!["siemens","rockwell","beckhoff"].includes(i.vendor)&&(g.vendor="Please select a valid PLC vendor"),d(g),p(""),Object.keys(g).length===0){u(!0);try{const b={projectName:i.name.trim(),clientName:i.client.trim()||void 0,projectType:i.type||void 0,targetPLCVendor:i.vendor,description:i.description.trim()||void 0},N=await Ae.createProject(b);console.log("Project created successfully:",N),a({variant:"success",title:"Success!",message:`Project "${i.name.trim()}" has been created successfully.`,duration:4e3}),r(i),s&&s(),x()}catch(b){console.error("Failed to create project:",b),p(b.message||"Failed to create project. Please try again.")}finally{u(!1)}}},x=()=>{o({name:"",client:"",type:"",vendor:"",description:""}),d({}),n()};return t.jsxs(lt,{isOpen:e,onClose:x,title:"Create New Project",size:"lg",children:[t.jsxs("div",{className:"space-y-4",children:[m&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:m}),t.jsx(Qe,{label:"Project Name",required:!0,value:i.name,onChange:g=>o(b=>({...b,name:g.target.value})),placeholder:"Enter project name",error:l.name,disabled:c}),t.jsx(Qe,{label:"Client Name",value:i.client,onChange:g=>o(b=>({...b,client:g.target.value})),placeholder:"Enter client name",disabled:c}),t.jsx(kt,{label:"Project Type",options:Gw,value:i.type,onChange:g=>o(b=>({...b,type:g})),disabled:c}),t.jsx(kt,{label:"Target PLC Vendor",options:Jw,value:i.vendor,onChange:g=>o(b=>({...b,vendor:g})),error:l.vendor,disabled:c}),t.jsx(Mn,{label:"Brief Description",value:i.description,onChange:g=>o(b=>({...b,description:g.target.value})),placeholder:"Describe the project scope and objectives...",rows:3,disabled:c})]}),t.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[t.jsx(J,{variant:"ghost",onClick:x,disabled:c,children:"Cancel"}),t.jsx(J,{onClick:h,disabled:c,children:c?"Creating...":"Create Project"})]})]})}function Yw({project:e,onClose:n,onConfirm:r,onSuccess:s}){const{showToast:a}=St(),[i,o]=f.useState(!1),l=async()=>{if(e)try{o(!0),await Ae.deleteProject(e.id),a({variant:"success",title:"Project Deleted",message:`Project "${e.name}" has been deleted successfully.`,duration:4e3}),r(e),s&&s(),n()}catch(d){console.error("Failed to delete project:",d),a({variant:"error",title:"Delete Failed",message:d.message||"Failed to delete project. Please try again.",duration:5e3})}finally{o(!1)}};return t.jsxs(lt,{isOpen:!!e,onClose:n,title:"Delete Project",size:"sm",children:[t.jsx("div",{className:"mb-6",children:t.jsxs("p",{className:"text-secondary",children:["Are you sure you want to delete ",t.jsx("strong",{children:e?.name}),"? This action cannot be undone and will permanently remove all project data, including version history and activity logs."]})}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(J,{variant:"ghost",onClick:n,disabled:i,children:"Cancel"}),t.jsx(J,{variant:"danger",onClick:l,disabled:i,children:i?"Deleting...":"Delete Project"})]})]})}function Qw({tools:e,onBack:n}){const r=He();return t.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx(J,{onClick:n,variant:"ghost",icon:Fr,size:"sm",children:"Back"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Quick Tools"}),t.jsx("p",{className:"text-secondary",children:"Single-use sessions for quick tasks and testing"})]})]}),t.jsx("div",{className:"grid gap-4",children:e.map(s=>t.jsxs("button",{onClick:()=>!s.comingSoon&&r(s.path),disabled:s.comingSoon,className:`flex items-center gap-4 p-6 bg-surface rounded-lg border border-light transition-all text-left relative ${s.comingSoon?"opacity-75 cursor-not-allowed":"hover:border-accent hover:shadow-sm"}`,children:[t.jsx("div",{className:`p-3 rounded-lg ${s.comingSoon?"bg-gray-100":"bg-accent-light"}`,children:t.jsx(s.icon,{className:`w-6 h-6 ${s.comingSoon?"text-gray-400":"text-accent"}`})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:s.name}),s.comingSoon&&t.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full border border-green-200",children:"Coming Soon"})]}),t.jsx("p",{className:"text-secondary",children:s.description})]}),!s.comingSoon&&t.jsx($t,{className:"w-5 h-5 text-muted flex-shrink-0"})]},s.name))})]})}const Kw=[{name:"Logic Studio",icon:yo,path:"/tool/logic",description:"Turn natural language into vendor-ready PLC code instantly.",comingSoon:!1},{name:"Tag Database Manager",icon:cn,path:"/tool/tags",description:"Organize and maintain all your PLC tags in one place.",comingSoon:!1},{name:"AutoDocs",icon:Ke,path:"/tool/autodocs",description:"Auto-generate professional PLC documentation.",comingSoon:!1},{name:"SignalFlow",icon:Vt,path:"/tool/signalflow",description:"Visualize and trace signal paths through your automation system.",comingSoon:!0},{name:"Pandaura AS Assistant",icon:ta,path:"/tool/assistant",description:"Get instant help with automation documents, logic files, and real-time support.",comingSoon:!1}];function gr(){const e=He(),n=Rr(),{projectId:r}=Wn(),{isAuthenticated:s,isLoading:a,user:i,token:o}=pt(),[l,d]=f.useState(!1),[c,u]=f.useState(null),[m,p]=f.useState(0),[h,x]=f.useState(null),[g,b]=f.useState(!1);Ge.useEffect(()=>{console.log("Home component mounted/updated"),console.log("Authentication state:",{isAuthenticated:s,isLoading:a,hasUser:!!i,hasToken:!!o,currentPath:n.pathname}),console.log("Token storage debug:",{contextToken:o?`${o.substring(0,10)}...`:"none",localStorageToken:localStorage.getItem("authToken")?`${localStorage.getItem("authToken").substring(0,10)}...`:"none",localStorageKeys:Object.keys(localStorage),userInfo:i?{userId:i.userId,email:i.email}:"none"})},[s,a,i,o,n.pathname]);const N=n.pathname==="/home/projects",j=n.pathname.startsWith("/home/projects/")&&r,v=n.pathname==="/home/quick-tools";f.useEffect(()=>{(async()=>{if(r&&s&&o){b(!0);try{console.log("Loading project with ID:",r);const A=await Ae.getProjects();console.log("All projects from API:",A.map(F=>({id:F.id,name:F.project_name})));const w=A.find(F=>F.id.toString()===r);w?(console.log("Found project:",w.project_name),x(Dr(w))):(console.warn("Project not found with ID:",r),console.log("Available project IDs:",A.map(F=>F.id)),x(null))}catch(A){console.error("Failed to load project:",A),x(null)}finally{b(!1)}}else console.log("Clearing selected project - projectId:",r,"isAuthenticated:",s,"hasToken:",!!o),x(null),b(!1)})()},[r,s,o]);const E=y=>{console.log("Creating project:",y),p(A=>A+1)},k=y=>{console.log("Delete confirmed for project:",y.name)},C=y=>{e(`/home/projects/${y.id}`)},S=y=>{if(!s){console.log("User not authenticated, redirecting to login"),e("/signin");return}console.log("User authenticated, navigating to workspace"),localStorage.setItem("currentProjectId",y.id.toString()),e(`/workspace/${y.id}/pandaura-as`,{state:{project:y}})};return j?(console.log("Project Overview View - Debug:",{projectId:r,isAuthenticated:s,isLoading:a,loadingProject:g,selectedProject:h?h.name:"null",pathname:n.pathname}),a?(console.log("Auth loading, showing spinner"),t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-secondary",children:"Loading authentication..."})]})})):s?g?(console.log("Project loading, showing spinner"),t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-secondary",children:"Loading project..."})]})})):h?(console.log("Rendering project overview for:",h.name),t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})})}),t.jsx(qw,{project:h,onBack:()=>e("/home/projects"),onOpenWorkspace:S})]})):(console.log("Project not found, showing error state"),t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})})}),t.jsx("div",{className:"flex items-center justify-center",style:{height:"calc(100vh - 88px)"},children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ts,{className:"w-16 h-16 text-muted mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-primary mb-2",children:"Project not found"}),t.jsxs("p",{className:"text-secondary mb-4",children:["The requested project (ID: ",r,") could not be found or you don't have access to it."]}),t.jsx(J,{onClick:()=>e("/home/projects"),children:"Back to Projects"})]})})]})):(console.log("Project overview accessed but user not authenticated, redirecting to signin"),setTimeout(()=>e("/signin"),100),t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-secondary",children:"Redirecting to sign in..."})]})}))):N?a?t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-secondary",children:"Loading authentication..."})]})}):s?t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})})}),t.jsx(Mw,{onBack:()=>e("/home"),onOpenProject:C,onDeleteProject:y=>u(y),onNewProject:()=>d(!0),refreshTrigger:m}),t.jsx(Xw,{isOpen:l,onClose:()=>d(!1),onSubmit:E,onSuccess:()=>p(y=>y+1)}),t.jsx(Yw,{project:c,onClose:()=>u(null),onConfirm:k,onSuccess:()=>p(y=>y+1)})]}):(console.log("Projects view accessed but user not authenticated, redirecting to signin"),setTimeout(()=>e("/signin"),100),t.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),t.jsx("p",{className:"text-secondary",children:"Redirecting to sign in..."})]})})):v?t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})})}),t.jsx(Qw,{tools:Kw,onBack:()=>e("/home")})]}):t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light",children:t.jsx("div",{className:"flex items-center gap-3",children:t.jsx("img",{src:Ve,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-4xl font-bold text-primary mb-4",children:"Welcome to Pandaura AS"}),t.jsx("p",{className:"text-lg text-secondary max-w-2xl mx-auto",children:"Your complete industrial automation suite. Choose how you want to work today."})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:[t.jsx(De,{variant:"elevated",icon:Ts,title:"Projects",subtitle:"Manage your automation projects with full history and collaboration.",className:"text-center",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-xs text-secondary bg-background rounded-md p-3 border border-light",children:"Access all modules with persistent project history, version control, and team collaboration features."})}),t.jsx(J,{onClick:()=>e("/home/projects"),className:"w-full py-4",icon:$t,iconPosition:"right",size:"lg",children:"Browse Projects"})]})}),t.jsx(De,{variant:"elevated",icon:Vt,title:"Quick Tools",subtitle:"Single-use sessions for quick tasks and testing.",className:"text-center",children:t.jsxs("div",{children:[t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-xs text-secondary bg-background rounded-md p-3 border border-light",children:"These tools are available for one-time use. You can upload files, use all features, and export results — but your session will not be saved."})}),t.jsx(J,{onClick:()=>e("/home/quick-tools"),className:"w-full py-4",variant:"outline",icon:$t,iconPosition:"right",size:"lg",children:"Launch Quick Tools"})]})})]}),t.jsxs("div",{className:"flex items-center justify-center mb-8",children:[t.jsx("div",{className:"h-px bg-light flex-1"}),t.jsx("span",{className:"px-4 text-sm text-muted",children:"Pandaura Labs"}),t.jsx("div",{className:"h-px bg-light flex-1"})]}),t.jsxs("div",{className:"text-center text-sm text-muted space-x-6",children:[t.jsx("span",{children:"© 2025"}),t.jsx("button",{onClick:()=>e("/feedback"),className:"hover:text-primary transition-colors",children:"Support"}),t.jsx("button",{onClick:()=>e("/terms"),className:"hover:text-primary transition-colors",children:"Terms"}),t.jsx("button",{onClick:()=>e("/privacy"),className:"hover:text-primary transition-colors",children:"Privacy"})]})]})]})}function Zw(){He();const[e,n]=f.useState(""),[r,s]=f.useState(""),[a,i]=f.useState(""),[o,l]=f.useState(!1),[d,c]=f.useState("idle"),u=async h=>{if(h.preventDefault(),!(!e.trim()&&!r.trim()&&!a.trim())){l(!0),c("idle");try{await new Promise(g=>setTimeout(g,2e3));const x=m();console.log("Feedback submission:",x),c("success"),setTimeout(()=>{n(""),s(""),i(""),c("idle")},3e3)}catch{c("error")}finally{l(!1)}}},m=()=>{let h="";return e.trim()&&(h+=`— Feedback About the App —
`+e.trim()+`

`),r.trim()&&(h+=`— Feedback About the AI —
`+r.trim()+`

`),a.trim()&&(h+=`— Advanced Feedback —
`+a.trim()+`

`),h+=`Submitted on: ${new Date().toLocaleString()}
`,h+=`User Session: ${Math.random().toString(36).substr(2,9)}`,h},p=e.trim()||r.trim()||a.trim();return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx(dh,{title:"Feedback",subtitle:"Help us improve Pandaura AS",showBackButton:!0}),t.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"We'd love to hear from you"}),t.jsx("p",{className:"text-muted",children:"Your feedback helps us build better automation tools. Share your thoughts in any or all sections below."})]}),t.jsxs("form",{onSubmit:u,className:"space-y-8",children:[t.jsx(De,{title:"Your thoughts on the app",subtitle:"What's been working well? What's been frustrating? Tell us anything about your experience with Pandaura.",children:t.jsx(Mn,{value:e,onChange:h=>n(h.target.value),placeholder:"Share your experience with the app...",rows:6,maxLength:2e3,helpText:"Optional • Be as detailed as you'd like",showCharCount:!0})}),t.jsx(De,{title:"Your thoughts on the AI",subtitle:"How helpful has the AI been for you? Any moments it surprised you—or totally missed the mark?",children:t.jsx(Mn,{value:r,onChange:h=>s(h.target.value),placeholder:"Tell us about your AI assistant experience...",rows:6,maxLength:2e3,helpText:"Optional • We're always improving the AI",showCharCount:!0})}),t.jsx(De,{title:"Want to go deeper?",subtitle:"If you've got technical notes, feature requests, or specific examples — we'd love to hear them here.",children:t.jsx(Mn,{value:a,onChange:h=>i(h.target.value),placeholder:"Share technical feedback, feature requests, or specific examples...",rows:6,maxLength:3e3,helpText:"Optional • Technical details welcome",showCharCount:!0})}),t.jsxs(De,{children:[d==="success"&&t.jsx(dn,{variant:"success",className:"mb-4",children:"Thanks — we seriously read every message. ✅"}),d==="error"&&t.jsx(dn,{variant:"error",className:"mb-4",children:"Something went wrong. Try again or email us directly at pandauracares@mail.com. ❌"}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("p",{className:"text-sm text-muted",children:["Your feedback goes directly to ",t.jsx("span",{className:"font-mono",children:"pandauracares@mail.com"})]}),t.jsx(J,{type:"submit",disabled:!p||o,loading:o,icon:o?wo:Gn,children:o?"Sending...":"Send Feedback"})]})]})]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx("p",{className:"text-xs text-muted",children:"All feedback is sent securely and never shared with third parties. We read everything and use it to improve Pandaura AS."})})]})]})}function e0(){const e=He(),[n,r]=f.useState(new Set),[s,a]=f.useState(!1),[i,o]=f.useState(""),[l,d]=f.useState(!1),c=p=>{const h=new Set(n);h.has(p)?h.delete(p):h.add(p),r(h)},u=p=>{p.preventDefault(),i.trim()&&(console.log("Privacy feedback:",i),d(!0),o(""),setTimeout(()=>{d(!1),a(!1)},2e3))},m=[{id:"data-collection",title:"What We Don't Collect",icon:"🔒",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"We don't collect your code. Ever."}),t.jsx("p",{className:"text-muted",children:"Pandaura AS runs entirely on-premise. Your PLC logic, structured text, tag databases, and any project files never leave your local machine. There's no cloud syncing, no background uploads, and no external servers involved."})]})},{id:"ai-privacy",title:"AI Model Privacy",icon:"🧠",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"The AI doesn't train on your data."}),t.jsx("p",{className:"text-muted",children:"The AI features built into Pandaura (like logic generation, signal tracing, and auto-documentation) do not learn from your inputs. Your prompts and results are used in real time to help you — and that's it. Nothing is saved, reused, or sent to a central server."})]})},{id:"file-uploads",title:"Uploaded Files",icon:"📂",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"Uploaded files stay local."}),t.jsx("p",{className:"text-muted",children:"Files uploaded for context (like machine specs, manuals, or existing logic files) are only used during that session — they're never saved or transmitted elsewhere. Everything resets when the session ends or the app is closed."})]})},{id:"case-studies",title:"Case Study Consent",icon:"🤝",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"Case studies are always opt-in."}),t.jsx("p",{className:"text-muted",children:"We'll only collect feedback or usage examples if you explicitly submit a case study. Even then, all identifying data must be removed by you. If anything sensitive is left in by mistake, we'll delete it immediately upon notice — no questions asked."})]})},{id:"diagnostics",title:"Troubleshooting & Diagnostics (Optional)",icon:"🔧",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"You're in control of diagnostics."}),t.jsx("p",{className:"text-muted",children:"If you reach out for support, you can choose whether or not to share technical logs. By default, no diagnostic data is collected or sent. You're always in full control of what you share."})]})},{id:"user-accounts",title:"User Accounts & Sessions",icon:"👤",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"No user tracking."}),t.jsx("p",{className:"text-muted",children:"Pandaura doesn't require a cloud login, and we don't track behavior. If we add optional features like user profiles or saved projects in the future, they'll also stay entirely local unless you opt in to share."})]})},{id:"feedback",title:"Feedback You Submit",icon:"📧",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"Feedback goes straight to us — nowhere else."}),t.jsx("p",{className:"text-muted",children:"If you submit app or AI feedback, it's sent directly to our internal support email: pandauracares@mail.com. It's never sold, stored in the cloud, or analyzed by third parties. We read it. That's all."})]})},{id:"user-control",title:"Your Control, Always",icon:"✅",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"You can clear all local data at any time."}),t.jsx("p",{className:"text-muted",children:"We give you full control to reset, clear, or delete all project data stored locally. You'll always be able to start fresh — no hidden caches, no stored prompts, no buried files."})]})},{id:"contact",title:"Contacting Us",icon:"📞",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-primary font-medium",children:"Questions about privacy? Reach out to us directly."}),t.jsxs("div",{className:"space-y-2 text-muted",children:[t.jsxs("p",{children:["Email: ",t.jsx("span",{className:"font-mono text-primary",children:"pandauracares@mail.com"})]}),t.jsxs("p",{children:["Case Study Privacy Team: ",t.jsx("span",{className:"font-mono text-primary",children:"privacy@pandauralabs.com"})]})]})]})}];return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Privacy Policy"}),t.jsx("p",{className:"text-sm text-secondary",children:t.jsx("button",{onClick:()=>e("/terms"),className:"hover:text-primary transition-colors underline",children:"View Terms of Use"})})]})]}),t.jsxs("button",{onClick:()=>a(!s),className:"p-3 hover:bg-background rounded-full transition-colors relative",title:"Privacy Feedback",children:[t.jsx(ta,{className:"w-5 h-5 text-secondary"}),s&&t.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-surface border border-light rounded-lg shadow-lg p-4 z-50",children:[t.jsx("h3",{className:"font-medium text-primary mb-2",children:"Have ideas for better privacy?"}),t.jsx("p",{className:"text-xs text-muted mb-3",children:"We take your trust seriously. If there's a privacy feature you think we should add, or if something feels unclear, let us know."}),l?t.jsx("div",{className:"text-center py-4",children:t.jsx("p",{className:"text-sm text-green-600",children:"Thank you for your feedback! ✓"})}):t.jsxs("form",{onSubmit:u,className:"space-y-3",children:[t.jsx("textarea",{value:i,onChange:p=>o(p.target.value),placeholder:"Your privacy feedback...",className:"w-full px-3 py-2 bg-background border border-light rounded text-sm resize-none focus:outline-none focus:ring-2 focus:ring-accent",rows:3,maxLength:500}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-xs text-muted",children:[i.length,"/500"]}),t.jsxs("button",{type:"submit",disabled:!i.trim(),className:"bg-primary text-white px-3 py-1 rounded text-xs hover:bg-secondary transition-colors disabled:opacity-50 flex items-center gap-1",children:[t.jsx(Gn,{className:"w-3 h-3"}),"Send"]})]})]}),t.jsx("p",{className:"text-xs text-muted mt-2",children:"Your message goes straight to our core team. All feedback welcome."})]})]})]})}),t.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.jsx("div",{className:"space-y-4 mb-8",children:m.map(p=>t.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>c(p.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:p.icon}),t.jsx("h2",{className:"text-lg font-semibold text-primary",children:p.title})]}),n.has(p.id)?t.jsx(Ut,{className:"w-5 h-5 text-secondary"}):t.jsx(yn,{className:"w-5 h-5 text-secondary"})]}),n.has(p.id)&&t.jsx("div",{className:"px-6 pb-6 border-t border-light",children:t.jsx("div",{className:"pt-4",children:p.content})})]},p.id))}),t.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-6 text-center",children:[t.jsx("div",{className:"text-2xl mb-2",children:"🔐"}),t.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:"We built Pandaura to be local-first — because we know your data is critical."}),t.jsx("p",{className:"text-muted",children:"You control your environment. You own your code. That will never change."})]})]})]})}function t0(){const e=He(),[n,r]=f.useState(new Set),s=o=>{const l=new Set(n);l.has(o)?l.delete(o):l.add(o),r(l)},a=()=>{console.log("Downloading Terms of Use PDF..."),alert("PDF download would be available in production version.")},i=[{id:"introduction",title:"Introduction",content:t.jsx("div",{className:"space-y-4",children:t.jsx("p",{className:"text-muted",children:"Welcome to Pandaura AS. These Terms of Use govern your use of the Pandaura AS software platform, licensed and operated by Pandaura Labs AS. By using our software, you agree to the terms below. If you do not agree, you should not use the software."})})},{id:"scope",title:"Scope of Use",content:t.jsx("div",{className:"space-y-4",children:t.jsx("p",{className:"text-muted",children:"Pandaura AS is licensed software designed for use in professional industrial automation environments. You may use the software solely within your organization for engineering, configuration, logic generation, and automation project development."})})},{id:"licensing",title:"Licensing & Ownership",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-muted",children:"Pandaura AS is licensed, not sold. All rights, title, and interest in the software—including AI-generated logic, interface design, and proprietary workflows—remain the property of Pandaura Labs AS."}),t.jsx("p",{className:"text-muted",children:"You may not reverse engineer, decompile, or resell the software without express written permission."})]})},{id:"responsibilities",title:"User Responsibilities",content:t.jsx("div",{className:"space-y-4",children:t.jsxs("ul",{className:"space-y-2 text-muted list-disc list-inside",children:[t.jsx("li",{children:"You are responsible for how the software is used within your organization."}),t.jsx("li",{children:"You must ensure only authorized users access the software."}),t.jsx("li",{children:"You agree not to use Pandaura AS for unlawful or unsafe automation tasks."})]})})},{id:"ai-content",title:"AI-Generated Content",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-muted",children:"Pandaura AS includes AI systems that assist in generating automation logic. While powerful, this logic may require review by qualified engineers."}),t.jsx("p",{className:"text-muted font-medium",children:"You remain solely responsible for validating and approving all outputs used in real-world environments."})]})},{id:"data-privacy",title:"Data & Privacy",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-muted",children:"Pandaura AS is a fully on-premise platform. We do not collect or transmit user data, logic, or documents externally."}),t.jsx("p",{className:"text-muted font-medium",children:"Your data remains 100% within your environment, under your control."})]})},{id:"updates",title:"Software Updates",content:t.jsx("div",{className:"space-y-4",children:t.jsx("p",{className:"text-muted",children:"Any software updates or patches will be delivered offline, and it is your responsibility to apply them. Pandaura Labs is not liable for issues arising from the use of outdated software versions."})})},{id:"warranty",title:"Warranty Disclaimer",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-muted font-medium",children:'Pandaura AS is provided "as is" without warranties of any kind.'}),t.jsx("p",{className:"text-muted",children:"We do not guarantee uninterrupted operation, nor do we accept liability for logic errors, production downtime, or misconfigurations caused by user input or AI-generated suggestions."})]})},{id:"liability",title:"Limitation of Liability",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-muted",children:"To the maximum extent permitted by law, Pandaura Labs AS shall not be liable for any indirect, incidental, or consequential damages resulting from the use of Pandaura AS."}),t.jsx("p",{className:"text-muted",children:"Your sole remedy for dissatisfaction with the software is to stop using it."})]})},{id:"termination",title:"Termination",content:t.jsx("div",{className:"space-y-4",children:t.jsx("p",{className:"text-muted",children:"Pandaura Labs reserves the right to revoke access or terminate licenses if terms are violated or if the software is used in breach of ethical or legal standards."})})},{id:"governing-law",title:"Governing Law",content:t.jsx("div",{className:"space-y-4",children:t.jsx("p",{className:"text-muted",children:"These Terms are governed by the laws of Norway. Any disputes shall be resolved in the appropriate courts of Oslo, Norway."})})},{id:"contact",title:"Contact",content:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-muted",children:"For licensing inquiries or enterprise agreements, please contact your Pandaura Labs representative directly."}),t.jsx("p",{className:"text-xs text-muted italic",children:"(Note: No public email or feedback form is provided on this page.)"})]})}];return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Terms of Use"}),t.jsx("p",{className:"text-sm text-secondary",children:t.jsx("button",{onClick:()=>e("/privacy"),className:"hover:text-primary transition-colors underline",children:"View Privacy Policy"})})]})]}),t.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-secondary transition-colors text-sm",children:[t.jsx(Bt,{className:"w-4 h-4"}),"Download Terms of Use (PDF)"]})]})}),t.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Terms of Use"}),t.jsx("p",{className:"text-sm text-muted",children:"Last Updated: August 5, 2025"})]}),t.jsx("div",{className:"space-y-4 mb-8",children:i.map(o=>t.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>s(o.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:o.title}),n.has(o.id)?t.jsx(Ut,{className:"w-5 h-5 text-secondary"}):t.jsx(yn,{className:"w-5 h-5 text-secondary"})]}),n.has(o.id)&&t.jsx("div",{className:"px-6 pb-6 border-t border-light",children:t.jsx("div",{className:"pt-4",children:o.content})})]},o.id))}),t.jsx("div",{className:"text-center text-sm text-muted",children:t.jsx("p",{children:"For questions about these terms, please contact your Pandaura Labs representative."})})]})]})}function As(){const e=He(),[n,r]=f.useState(null),[s]=f.useState([{id:"1",title:"Water Treatment Automation",status:"completed",lastModified:"2 days ago"},{id:"2",title:"Packaging Line Integration",status:"draft",lastModified:"1 week ago"}]),[a,i]=f.useState([{id:"overview",title:"Project Overview",description:"Basic project information and scope",isExpanded:!0},{id:"challenge",title:"Technical Challenge",description:"What made this project unique or difficult",isExpanded:!1},{id:"pandaura",title:"How Pandaura Helped",description:"Which features were used and their impact",isExpanded:!1},{id:"outcome",title:"Outcome & Results",description:"Final results and client feedback",isExpanded:!1},{id:"media",title:"Media Uploads",description:"Screenshots, PDFs, and documentation",isExpanded:!1},{id:"privacy",title:"Privacy & Security",description:"Data protection and sharing preferences",isExpanded:!1}]),[o,l]=f.useState(""),[d,c]=f.useState({title:"",company:"",industry:"",platforms:[],scope:"",timeline:"",challenge:"",uniqueAspects:"",featuresUsed:[],howPandauraHelped:"",aiUsed:"",timeSavings:"",outcome:"",clientQuote:"",metrics:"",removeClientData:!0,confirmNoSensitiveData:!1}),[u,m]=f.useState([]),p={selectProject:"Link this case study to an existing project for automatic data import",projectTitle:"Give your case study a clear, descriptive title that highlights the key achievement",plcPlatforms:"Select all PLC platforms that were used in this project",scopeSummary:"Briefly describe what the project covered - scope, systems involved, and scale",finalOutcome:"Describe the successful completion and measurable results of the project",uploadFiles:"Upload project documentation, screenshots, or technical diagrams (max 10MB each)"},h=({id:S,content:y})=>{const[A,w]=f.useState({x:0,y:0}),F=Ge.useRef(null),T=()=>{if(F.current){const R=F.current.getBoundingClientRect();w({x:R.left+R.width/2,y:R.top-10})}r(S)};return t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:F,className:"relative inline-block",children:t.jsx(jo,{className:"w-4 h-4 inline ml-1 text-muted hover:text-primary cursor-help transition-colors",onMouseEnter:T,onMouseLeave:()=>r(null)})}),n===S&&t.jsxs("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-xs rounded-md whitespace-nowrap shadow-lg pointer-events-none",style:{left:`${A.x}px`,top:`${A.y}px`,transform:"translate(-50%, -100%)",zIndex:99999},children:[y,t.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})},x=S=>{i(y=>y.map(A=>A.id===S?{...A,isExpanded:!A.isExpanded}:A))},g=(S,y,A)=>{(S==="platforms"||S==="featuresUsed")&&c(w=>({...w,[S]:A?[...w[S],y]:w[S].filter(F=>F!==y)}))},b=S=>{S.target.files&&m(y=>[...y,...Array.from(S.target.files)])},N=S=>{m(y=>y.filter((A,w)=>w!==S))},j=()=>{console.log("Saving draft...",d),alert("Case study saved as draft locally.")},v=()=>{if(!d.confirmNoSensitiveData){alert("Please confirm that no sensitive client data is included before uploading.");return}console.log("Uploading to Case Study Hub...",d),window.confirm("Looks great. Once you submit, your case study will be visible to others on the Pandaura Case Study Hub. Just make sure you've removed anything private — you're always in full control.")&&alert("✅ Case study uploaded to Pandaura Case Study Hub!")},E=["Oil & Gas","Pharmaceutical","Food & Beverage","OEM","Automotive","Water Treatment","Power Generation","Manufacturing","Chemical","Other"],k=["Rockwell","Siemens","Beckhoff","Schneider","Omron","ABB","Other"],C=["Logic Studio","Tag Manager","SignalFlow","AutoDocs","Assistant / Mini"];return t.jsxs("div",{className:"min-h-screen bg-background",children:[t.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:t.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-4",children:[t.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Create a Case Study"}),t.jsx("p",{className:"text-sm text-secondary",children:"Generate professional case studies from your projects"})]})]})}),t.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[t.jsxs("div",{className:"bg-surface border border-light rounded-lg p-6 mb-8",children:[t.jsx("div",{className:"flex items-center justify-between mb-4",children:t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Project Selection"})}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Select Project (Optional)",t.jsx(h,{id:"selectProject",content:p.selectProject})]}),t.jsxs("select",{value:o,onChange:S=>l(S.target.value),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"",children:"Start from scratch"}),t.jsx("option",{value:"water-treatment",children:"Water Treatment Plant"}),t.jsx("option",{value:"packaging-line",children:"Packaging Line Control"}),t.jsx("option",{value:"hvac-system",children:"HVAC System Integration"})]})]}),t.jsx("div",{className:"flex items-end",children:t.jsxs("button",{onClick:()=>{console.log("Starting new case study...")},className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary transition-colors",children:[t.jsx(fn,{className:"w-4 h-4"}),"Start New Case Study"]})})]}),s.length>0&&t.jsxs("div",{className:"mt-6",children:[t.jsx("h3",{className:"text-sm font-medium text-secondary mb-3",children:"Recent Case Studies"}),t.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:s.map(S=>t.jsx("button",{className:"text-left p-3 bg-background border border-light rounded-md hover:border-accent transition-colors",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-primary",children:S.title}),t.jsxs("p",{className:"text-xs text-muted",children:[S.status," • ",S.lastModified]})]}),t.jsx("div",{className:`w-2 h-2 rounded-full ${S.status==="completed"?"bg-green-500":"bg-yellow-500"}`})]})},S.id))})]})]}),t.jsxs("div",{className:"space-y-6",children:[a.map(S=>t.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[t.jsxs("button",{onClick:()=>x(S.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-primary",children:S.title}),t.jsx("p",{className:"text-sm text-muted",children:S.description})]}),S.isExpanded?t.jsx(Ut,{className:"w-5 h-5 text-secondary"}):t.jsx(yn,{className:"w-5 h-5 text-secondary"})]}),S.isExpanded&&t.jsx("div",{className:"px-6 pb-6 border-t border-light",children:t.jsxs("div",{className:"pt-6 space-y-4",children:[S.id==="overview"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Project Title",t.jsx(h,{id:"projectTitle",content:p.projectTitle})]}),t.jsx("input",{type:"text",value:d.title,onChange:y=>c(A=>({...A,title:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Smart Water Treatment Integration"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Integrator Name / Company (Optional)"}),t.jsx("input",{type:"text",value:d.company,onChange:y=>c(A=>({...A,company:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"Your company name"})]})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Client Industry"}),t.jsxs("select",{value:d.industry,onChange:y=>c(A=>({...A,industry:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[t.jsx("option",{value:"",children:"Select industry..."}),E.map(y=>t.jsx("option",{value:y,children:y},y))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Timeline (Optional)"}),t.jsx("input",{type:"text",value:d.timeline,onChange:y=>c(A=>({...A,timeline:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., 3 months, Q1 2024"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["PLC Platforms Used",t.jsx(h,{id:"plcPlatforms",content:p.plcPlatforms})]}),t.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:k.map(y=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.platforms.includes(y),onChange:A=>g("platforms",y,A.target.checked),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),t.jsx("span",{className:"text-sm text-primary",children:y})]},y))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Scope Summary",t.jsx(h,{id:"scopeSummary",content:p.scopeSummary})]}),t.jsx("textarea",{value:d.scope,onChange:y=>c(A=>({...A,scope:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the overall project scope and objectives..."})]})]}),S.id==="challenge"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What was the original challenge or complexity?"}),t.jsx("textarea",{value:d.challenge,onChange:y=>c(A=>({...A,challenge:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the technical challenges you faced..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What made this project unique or difficult?"}),t.jsx("textarea",{value:d.uniqueAspects,onChange:y=>c(A=>({...A,uniqueAspects:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"What set this project apart from typical automation work..."})]})]}),S.id==="pandaura"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Which Pandaura AS features were used?"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:C.map(y=>t.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.featuresUsed.includes(y),onChange:A=>g("featuresUsed",y,A.target.checked),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),t.jsx("span",{className:"text-sm text-primary",children:y})]},y))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Describe how Pandaura made the project easier or faster"}),t.jsx("textarea",{value:d.howPandauraHelped,onChange:y=>c(A=>({...A,howPandauraHelped:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Explain the specific ways Pandaura helped..."})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Any AI-generated logic or documents used?"}),t.jsx("textarea",{value:d.aiUsed,onChange:y=>c(A=>({...A,aiUsed:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Describe AI assistance received..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Time savings or value gained? (Optional)"}),t.jsx("textarea",{value:d.timeSavings,onChange:y=>c(A=>({...A,timeSavings:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Quantify benefits if possible..."})]})]})]}),S.id==="outcome"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Final project outcome",t.jsx(h,{id:"finalOutcome",content:p.finalOutcome})]}),t.jsx("textarea",{value:d.outcome,onChange:y=>c(A=>({...A,outcome:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the successful outcome and results..."})]}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What did the client say? (Optional quote/testimonial)"}),t.jsx("textarea",{value:d.clientQuote,onChange:y=>c(A=>({...A,clientQuote:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Client feedback or testimonial..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Did Pandaura reduce time, errors, or handoff problems?"}),t.jsx("textarea",{value:d.metrics,onChange:y=>c(A=>({...A,metrics:y.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Specific improvements achieved..."})]})]})]}),S.id==="media"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Upload Files (Optional)",t.jsx(h,{id:"uploadFiles",content:p.uploadFiles})]}),t.jsxs("div",{className:"border-2 border-dashed border-light rounded-lg p-6 text-center",children:[t.jsx("input",{type:"file",multiple:!0,onChange:b,className:"hidden",id:"file-upload",accept:".jpg,.jpeg,.png,.pdf,.doc,.docx"}),t.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"flex justify-center",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsx(Lr,{className:"w-8 h-8 text-muted"}),t.jsx(Ke,{className:"w-8 h-8 text-muted"})]})}),t.jsx("p",{className:"text-primary",children:"Click to upload files"}),t.jsx("p",{className:"text-xs text-muted",children:"Screenshots, PDFs, exported logic blocks"}),t.jsx("p",{className:"text-xs text-muted",children:"Max 10MB per file • JPG, PNG, PDF, DOC"})]})})]})]}),u.length>0&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-secondary mb-2",children:"Uploaded Files"}),t.jsx("div",{className:"space-y-2",children:u.map((y,A)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-background border border-light rounded-md",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Ke,{className:"w-4 h-4 text-muted"}),t.jsx("span",{className:"text-sm text-primary",children:y.name}),t.jsxs("span",{className:"text-xs text-muted",children:["(",(y.size/1024).toFixed(1)," KB)"]})]}),t.jsx("button",{onClick:()=>N(A),className:"text-error hover:text-error-dark transition-colors",children:t.jsx(bn,{className:"w-4 h-4"})})]},A))})]})]}),S.id==="privacy"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"bg-accent/5 border border-accent/20 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(Pt,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium text-primary mb-2",children:"Privacy & Security Controls"}),t.jsx("p",{className:"text-sm text-muted",children:"You're always in control. Please double-check that any identifying info is removed — we'll never expose sensitive details."})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.removeClientData,onChange:y=>c(A=>({...A,removeClientData:y.target.checked})),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2 mt-1"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-primary",children:"Remove client-identifying data"}),t.jsx("p",{className:"text-xs text-muted",children:"Automatically sanitize client names and sensitive information (recommended)"})]})]}),t.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:d.confirmNoSensitiveData,onChange:y=>c(A=>({...A,confirmNoSensitiveData:y.target.checked})),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2 mt-1"}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-medium text-primary",children:"I confirm this case study contains no confidential or sensitive client data"}),t.jsx("p",{className:"text-xs text-muted",children:"Required before uploading to public Case Study Hub"})]})]})]})]})]})})]},S.id)),t.jsxs("div",{className:"bg-surface border border-light rounded-lg p-6",children:[t.jsxs("div",{className:"flex flex-wrap gap-4 justify-between",children:[t.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-6 py-3 bg-background border border-light rounded-md hover:border-accent transition-colors",children:[t.jsx(Dt,{className:"w-4 h-4"}),"Save Draft"]}),t.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-md hover:bg-secondary transition-colors",children:[t.jsx(jn,{className:"w-4 h-4"}),"Upload to Case Study Hub"]})]}),t.jsx("p",{className:"text-xs text-muted mt-3 text-center",children:"Drafts are stored locally only. Uploading shares your case study publicly with the automation community."})]})]})]})]})}function n0(){const e=pt(),[n,r]=f.useState({auth:{isAuthenticated:!1,token:null,user:null},api:{canConnect:!1,error:null},projects:{count:0,data:[],error:null}}),[s,a]=f.useState(!1),[i,o]=f.useState(""),l=async()=>{a(!0),o("");try{const c={projectName:`Test Project ${Date.now()}`,clientName:"Debug Client",projectType:"industrial-automation",targetPLCVendor:"siemens",description:"This is a test project created from the debug page"},u=await Ae.createProject(c);console.log("Created test project:",u),await d()}catch(c){console.error("Failed to create test project:",c),o(c.message||"Failed to create project")}finally{a(!1)}},d=async()=>{const c={auth:{isAuthenticated:e.isAuthenticated,token:e.token,user:e.user},api:{canConnect:!1,error:null},projects:{count:0,data:[],error:null}};if(e.isAuthenticated&&e.token)try{const u=await Ae.getProjects();c.api.canConnect=!0,c.projects.count=u.length,c.projects.data=u}catch(u){c.api.error=u.message,c.projects.error=u.message}else c.api.error="Not authenticated",c.projects.error="Not authenticated";r(c)};return f.useEffect(()=>{d()},[e.isAuthenticated,e.token]),t.jsx("div",{className:"min-h-screen bg-background p-6",children:t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects Debug Dashboard"}),t.jsx(De,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Authentication Status"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`w-3 h-3 rounded-full ${n.auth.isAuthenticated?"bg-green-500":"bg-red-500"}`}),t.jsxs("span",{children:["Authenticated: ",n.auth.isAuthenticated?"Yes":"No"]})]}),t.jsx("div",{children:t.jsxs("span",{children:["User: ",n.auth.user?.email||"None"]})}),t.jsx("div",{children:t.jsxs("span",{children:["Token: ",n.auth.token?"Present":"Missing"]})})]})]})}),t.jsx(De,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"API Connection"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`w-3 h-3 rounded-full ${n.api.canConnect?"bg-green-500":"bg-red-500"}`}),t.jsxs("span",{children:["API Connection: ",n.api.canConnect?"Working":"Failed"]})]}),n.api.error&&t.jsxs(dn,{variant:"error",children:["API Error: ",n.api.error]})]})]})}),t.jsx(De,{children:t.jsxs("div",{className:"p-6",children:[t.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Projects (",n.projects.count,")"]}),n.projects.error?t.jsxs(dn,{variant:"error",children:["Projects Error: ",n.projects.error]}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{children:["Total Projects: ",n.projects.count]}),t.jsxs("div",{className:"space-x-2",children:[t.jsx(J,{onClick:d,variant:"secondary",size:"sm",children:"Refresh"}),t.jsx(J,{onClick:l,disabled:!n.auth.isAuthenticated||s,children:s?"Creating...":"Create Test Project"})]})]}),i&&t.jsxs(dn,{variant:"error",children:["Create Project Error: ",i]}),n.projects.data.length>0&&t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:[t.jsx("h3",{className:"font-medium mb-2",children:"Project List:"}),n.projects.data.map((c,u)=>t.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2 last:border-b-0",children:[t.jsx("div",{className:"font-medium",children:c.project_name}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Client: ",c.client_name||"N/A"," | Type: ",c.project_type||"N/A"," | Vendor: ",c.target_plc_vendor||"N/A"]}),t.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(c.created_at).toLocaleString()]})]},c.id||u))]})]})]})}),t.jsx(De,{children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsx("p",{children:"1. Make sure you're logged in (authentication status should be green)"}),t.jsx("p",{children:"2. Check that the API connection is working (should be green)"}),t.jsx("p",{children:"3. Create a test project using the button above"}),t.jsx("p",{children:"4. Navigate to /home/projects to see your projects"}),t.jsx("p",{children:"5. Click on a project to view the Project Overview screen"})]})]})})]})})}function r0({autoRefresh:e=!1,refreshInterval:n=3e4,className:r=""}){const[s,a]=f.useState(null),[i,o]=f.useState(!1),[l,d]=f.useState(null),[c,u]=f.useState(null),m=async()=>{try{o(!0),u(null);const b=await de.checkHealth();a(b),d(new Date)}catch(b){u(b instanceof Error?b.message:"Health check failed"),a(null)}finally{o(!1)}},p=async()=>{try{o(!0);const b=await de.ping();console.log("Ping test result:",b)}catch(b){console.error("Ping test failed:",b)}finally{o(!1)}},h=async()=>{try{o(!0);const b=await de.warmupModel();console.log("Warmup result:",b)}catch(b){console.error("Warmup failed:",b)}finally{o(!1)}};f.useEffect(()=>{m()},[]),f.useEffect(()=>{if(e&&n>0){const b=setInterval(m,n);return()=>clearInterval(b)}},[e,n]);const x=b=>{switch(b?.toLowerCase()){case"healthy":case"ok":return"text-green-600";case"warning":return"text-yellow-600";case"error":case"unhealthy":return"text-red-600";default:return"text-gray-600"}},g=b=>{switch(b?.toLowerCase()){case"healthy":case"ok":return t.jsx(et,{className:"w-4 h-4 text-green-600"});case"warning":return t.jsx(It,{className:"w-4 h-4 text-yellow-600"});case"error":case"unhealthy":return t.jsx(La,{className:"w-4 h-4 text-red-600"});default:return t.jsx(It,{className:"w-4 h-4 text-gray-600"})}};return t.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg p-4 ${r}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"AI Service Health"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:p,disabled:i,className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors disabled:opacity-50",children:"Ping Test"}),t.jsx("button",{onClick:h,disabled:i,className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded hover:bg-purple-200 transition-colors disabled:opacity-50",children:"Warmup"}),t.jsx("button",{onClick:m,disabled:i,className:"p-1 hover:bg-gray-100 rounded transition-colors disabled:opacity-50",children:t.jsx(Ue,{className:`w-4 h-4 text-gray-600 ${i?"animate-spin":""}`})})]})]}),c&&t.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[t.jsx(La,{className:"w-4 h-4"}),t.jsx("span",{className:"font-medium",children:"Connection Error"})]}),t.jsx("p",{className:"text-red-600 mt-1",children:c})]}),s&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[g(s.status),t.jsx("span",{className:`text-sm font-medium ${x(s.status)}`,children:s.status||"Unknown"})]}),l&&t.jsx("span",{className:"text-xs text-gray-500",children:l.toLocaleTimeString()})]}),t.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(Mt,{className:"w-4 h-4 text-blue-600"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Model"})]}),t.jsx("p",{className:"text-sm text-gray-600",children:s.model_name||"Not specified"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-purple-50 p-2 rounded",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(Mt,{className:"w-3 h-3 text-purple-600"}),t.jsx("span",{className:"text-xs font-medium text-purple-700",children:"Memory"})]}),t.jsxs("p",{className:"text-xs text-purple-600",children:[s.memory_sessions||0," sessions"]})]}),t.jsxs("div",{className:`p-2 rounded ${s.image_support?"bg-green-50":"bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(Lr,{className:`w-3 h-3 ${s.image_support?"text-green-600":"text-gray-400"}`}),t.jsx("span",{className:`text-xs font-medium ${s.image_support?"text-green-700":"text-gray-500"}`,children:"Images"})]}),t.jsx("p",{className:`text-xs ${s.image_support?"text-green-600":"text-gray-400"}`,children:s.image_support?"Enabled":"Disabled"})]}),t.jsxs("div",{className:`p-2 rounded ${s.document_support?"bg-blue-50":"bg-gray-50"}`,children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(Ke,{className:`w-3 h-3 ${s.document_support?"text-blue-600":"text-gray-400"}`}),t.jsx("span",{className:`text-xs font-medium ${s.document_support?"text-blue-700":"text-gray-500"}`,children:"Documents"})]}),t.jsx("p",{className:`text-xs ${s.document_support?"text-blue-600":"text-gray-400"}`,children:s.document_support?"Enabled":"Disabled"})]}),t.jsxs("div",{className:"bg-orange-50 p-2 rounded",children:[t.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[t.jsx(Vt,{className:"w-3 h-3 text-orange-600"}),t.jsx("span",{className:"text-xs font-medium text-orange-700",children:"Streaming"})]}),t.jsx("p",{className:"text-xs text-orange-600",children:"Available"})]})]}),s.supported_formats&&s.supported_formats.length>0&&t.jsxs("div",{className:"text-xs",children:[t.jsx("p",{className:"text-gray-600 mb-1",children:"Supported formats:"}),t.jsx("p",{className:"text-gray-500 font-mono",children:s.supported_formats.join(", ")})]})]})]})}function s0({onFilesSelected:e,onUploadComplete:n,maxFiles:r=10,disabled:s=!1,className:a="",wrapperType:i="A"}){const[o,l]=f.useState([]),[d,c]=f.useState(!1),[u,m]=f.useState(!1),p=f.useRef(null),h=()=>`file_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x=w=>{const F=de.getFileTypeCategory(w,i),T={file:w,id:h(),category:F};if(F==="image"){const R=new FileReader;R.onload=M=>{T.preview=M.target?.result,l(O=>O.map($=>$.id===T.id?T:$))},R.readAsDataURL(w)}return T},g=w=>{const F=Array.from(w),T=F.filter(O=>de.isFileSupported(O,i));if(T.length!==F.length&&console.warn("Some files were rejected due to unsupported format"),o.length+T.length>r){console.warn(`Maximum ${r} files allowed`);return}const R=T.map(x),M=[...o,...R];l(M),e(M.map(O=>O.file))},b=w=>{if(w.preventDefault(),c(!1),s||u)return;const F=w.dataTransfer.files;g(F)},N=w=>{w.preventDefault(),!s&&!u&&c(!0)},j=w=>{w.preventDefault(),c(!1)},v=w=>{w.target.files&&w.target.files.length>0&&g(w.target.files)},E=w=>{const F=o.filter(T=>T.id!==w);l(F),e(F.map(T=>T.file))},k=()=>{l([]),e([]),p.current&&(p.current.value="")},C=()=>{!s&&!u&&p.current?.click()},S=w=>{switch(w){case"image":return t.jsx(Lr,{className:"w-4 h-4"});case"document":return t.jsx(Ke,{className:"w-4 h-4"});case"plc":return t.jsx(Ke,{className:"w-4 h-4"});default:return t.jsx(ze,{className:"w-4 h-4"})}},y=w=>{switch(w){case"image":return"text-green-600 bg-green-50 border-green-200";case"document":return"text-blue-600 bg-blue-50 border-blue-200";case"plc":return"text-purple-600 bg-purple-50 border-purple-200";default:return"text-red-600 bg-red-50 border-red-200"}},A=w=>{if(w===0)return"0 Bytes";const F=1024,T=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(w)/Math.log(F));return parseFloat((w/Math.pow(F,R)).toFixed(2))+" "+T[R]};return t.jsxs("div",{className:`space-y-4 ${a}`,children:[t.jsxs("div",{className:`
          border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200
          ${d&&!s?"border-primary bg-blue-50":"border-gray-300"}
          ${s?"opacity-50 cursor-not-allowed":"hover:border-primary hover:bg-gray-50 cursor-pointer"}
        `,onDrop:b,onDragOver:N,onDragLeave:j,onClick:C,children:[t.jsx("input",{ref:p,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt,.csv,.xls,.xlsx,.ppt,.pptx",onChange:v,className:"hidden",disabled:s}),t.jsx(ea,{className:`w-12 h-12 mx-auto mb-4 ${s?"text-gray-300":"text-gray-400"}`}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:`text-sm font-medium ${s?"text-gray-400":"text-gray-700"}`,children:d?"Drop files here":"Click to upload or drag and drop"}),t.jsx("p",{className:"text-xs text-gray-500",children:"Images: PNG, JPG, GIF, WebP | Documents: PDF, DOC, TXT, CSV, XLS, PPT"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Maximum ",r," files, up to 50MB each"]})]})]}),o.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Selected Files (",o.length,"/",r,")"]}),t.jsx("button",{onClick:k,className:"text-xs text-red-600 hover:text-red-800 transition-colors",disabled:s||u,children:"Clear All"})]}),t.jsx("div",{className:"grid gap-2",children:o.map(w=>t.jsxs("div",{className:`
                  flex items-center gap-3 p-3 rounded-lg border transition-all
                  ${y(w.category)}
                `,children:[t.jsx("div",{className:"flex-shrink-0",children:w.preview?t.jsx("img",{src:w.preview,alt:w.file.name,className:"w-10 h-10 object-cover rounded"}):t.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded bg-white",children:S(w.category)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium truncate",children:w.file.name}),t.jsxs("p",{className:"text-xs opacity-75",children:[A(w.file.size)," • ",w.category]})]}),t.jsx("button",{onClick:F=>{F.stopPropagation(),E(w.id)},className:"flex-shrink-0 p-1 hover:bg-white hover:bg-opacity-50 rounded transition-colors",disabled:s||u,children:t.jsx(Ye,{className:"w-4 h-4"})})]},w.id))})]}),u&&t.jsxs("div",{className:"flex items-center justify-center p-4 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mr-3"}),t.jsx("span",{className:"text-sm text-primary",children:"Processing files..."})]})]})}function a0({isStreaming:e,streamContent:n,isComplete:r,onStreamComplete:s,className:a=""}){const[i,o]=f.useState(""),[l,d]=f.useState(!0),[c,u]=f.useState(null);return f.useEffect(()=>{(e||r)&&o(n)},[n,e,r]),f.useEffect(()=>{if(!e||r){d(!1);return}const m=setInterval(()=>{d(p=>!p)},500);return()=>clearInterval(m)},[e,r]),f.useEffect(()=>{r&&(d(!1),s&&n&&s(n))},[r,n,s]),f.useEffect(()=>{const m=p=>{p.detail&&p.detail.fullResponse&&u(p.detail.fullResponse)};return window.addEventListener("streamComplete",m),()=>window.removeEventListener("streamComplete",m)},[]),!e&&!r&&!i?null:t.jsxs("div",{className:`px-4 py-3 text-sm bg-gray-50 ${a}`,children:[t.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[t.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-xs font-medium text-white",children:t.jsx("img",{src:Ve,alt:"Pandaura",className:"w-5 h-5 rounded-full object-cover"})}),t.jsxs("div",{className:"flex-1",children:[e&&!r&&t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Vt,{className:"w-3 h-3 text-blue-500"}),t.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Streaming response"})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-pulse"}),t.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}})]})]}),t.jsx("div",{className:"text-gray-800 prose prose-sm max-w-none",children:e&&i?t.jsxs("div",{className:"relative",children:[t.jsx(gn,{children:i}),l&&t.jsx("span",{className:"inline-block w-2 h-4 bg-blue-500 ml-1 animate-pulse"})]}):e&&!i?t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(hn,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:"Preparing response..."})]}):r&&i?t.jsx("div",{className:"relative",children:t.jsx(gn,{children:i})}):t.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[t.jsx(hn,{className:"w-4 h-4 animate-spin"}),t.jsx("span",{children:"Preparing response..."})]})}),r&&i&&t.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-green-600",children:[t.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),t.jsx("span",{children:"Response complete"})]})]})]}),r&&c&&c.artifacts?.code?.length>0&&t.jsx("div",{className:"mt-4 space-y-3",children:c.artifacts.code.map((m,p)=>t.jsx(cc,{artifact:m,onSaveToProject:()=>{console.log("Save to project:",m)},onMoveToLogicStudio:()=>{console.log("Move to logic studio:",m)}},p))})]})}function i0(){const[e,n]=f.useState([]),[r,s]=f.useState(!1),[a]=f.useState(()=>de.generateSessionId()),[i,o]=f.useState(!1),[l,d]=f.useState(""),[c,u]=f.useState(!1),[m,p]=f.useState([]),h=(j,v,E,k)=>{n(C=>[...C,{test:j,success:v,data:E,error:k,timestamp:new Date().toISOString()}])},x=async()=>{s(!0),n([]);try{console.log("🧪 Testing health check...");const j=await de.checkHealth();h("Health Check",!0,j),console.log("🧪 Testing ping...");const v=await de.ping();h("Ping Test",!0,v),console.log("🧪 Testing simple query...");const E=await de.sendMessage({prompt:"What is automation engineering?",sessionId:a});h("Simple Query",!0,E),console.log("🧪 Testing memory - introduction...");const k=await de.sendMessage({prompt:"Hi, I am John Doe",sessionId:a});h("Memory - Introduction",!0,k),console.log("🧪 Testing memory - recall...");const C=await de.sendMessage({prompt:"Who am I?",sessionId:a});h("Memory - Recall",!0,C),console.log("🧪 Testing format response...");const S=await de.testFormat("Create a simple motor starter logic");h("Format Test",!0,S)}catch(j){h("Test Suite",!1,null,j instanceof Error?j.message:"Unknown error")}finally{s(!1)}},g=async()=>{o(!0),d(""),u(!1);try{console.log("🧪 Testing streaming...");const j=await de.sendStreamingMessage({prompt:"Tell me a detailed explanation about PLC programming with examples",sessionId:a,stream:!0},v=>{if(v.type==="chunk"&&v.content)d(E=>E+v.content);else if(v.type==="end")u(!0),o(!1);else if(v.type==="error")throw new Error(v.error||"Streaming error")});h("Streaming Test",!0,{fullResponse:j})}catch(j){h("Streaming Test",!1,null,j instanceof Error?j.message:"Unknown error"),o(!1)}},b=async()=>{if(m.length===0){h("File Upload Test",!1,null,"No files selected");return}try{console.log("🧪 Testing file upload...");const j=m.filter(E=>de.getFileTypeCategory(E)==="image"),v=m.filter(E=>de.getFileTypeCategory(E)==="document");if(j.length>0){const E=await de.uploadAndAnalyzeImages({prompt:"What do you see in these images?",sessionId:a,images:j});h("Image Upload Test",!0,E)}if(v.length>0){const E=await de.uploadAndAnalyzeDocuments({prompt:"Analyze these documents and summarize the key points",sessionId:a,files:v});h("Document Upload Test",!0,E)}}catch(j){h("File Upload Test",!1,null,j instanceof Error?j.message:"Unknown error")}},N=async()=>{try{console.log("🧪 Testing memory clear...");const j=await de.clearMemory(a);h("Clear Memory Test",!0,j)}catch(j){h("Clear Memory Test",!1,null,j instanceof Error?j.message:"Unknown error")}};return t.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(du,{className:"w-8 h-8 text-blue-600"}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Integration Test Suite"})]}),t.jsx("p",{className:"text-gray-600",children:"Test all the OpenAI wrapper APIs and features to ensure everything is working correctly."})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(r0,{autoRefresh:!0,refreshInterval:3e4}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Controls"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:x,disabled:r,className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:[t.jsx(Gn,{className:"w-4 h-4"}),"Run Basic Tests"]}),t.jsxs("button",{onClick:g,disabled:i,className:"w-full flex items-center justify-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50",children:[t.jsx(Vt,{className:"w-4 h-4"}),"Test Streaming"]}),t.jsxs("button",{onClick:b,disabled:m.length===0,className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",children:[t.jsx(jn,{className:"w-4 h-4"}),"Test File Upload (",m.length," files)"]}),t.jsxs("button",{onClick:N,className:"w-full flex items-center justify-center gap-2 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:[t.jsx(Mt,{className:"w-4 h-4"}),"Clear Memory"]})]})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"File Upload Test"}),t.jsx(s0,{onFilesSelected:p,maxFiles:5})]}),t.jsx(mc,{sessionId:a})]}),t.jsxs("div",{className:"space-y-6",children:[(i||l)&&t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Streaming Test"}),t.jsx(a0,{isStreaming:i,streamContent:l,isComplete:c})]}),t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Results"}),t.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.length===0?t.jsx("p",{className:"text-gray-500 text-center py-8",children:"No tests run yet. Click a test button to start."}):e.map((j,v)=>t.jsxs("div",{className:`p-3 rounded-lg border ${j.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:`font-medium ${j.success?"text-green-800":"text-red-800"}`,children:j.test}),t.jsx("span",{className:`text-xs px-2 py-1 rounded ${j.success?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:j.success?"PASS":"FAIL"})]}),j.error&&t.jsx("p",{className:"text-red-600 text-sm mb-2",children:j.error}),j.data&&t.jsxs("details",{className:"text-sm",children:[t.jsx("summary",{className:"cursor-pointer text-gray-600 hover:text-gray-800",children:"View Response Data"}),t.jsx("pre",{className:"mt-2 p-2 bg-gray-100 rounded text-xs overflow-x-auto",children:JSON.stringify(j.data,null,2)})]}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(j.timestamp).toLocaleTimeString()})]},v))})]})]})]})]})})}const Sc=f.createContext(void 0),oo={orgChoice:null,organizationCreated:!1},o0=({children:e})=>{const[n,r]=f.useState(oo),s=(o,l)=>{r(d=>({...d,[o]:l}))},a=()=>{r(oo)},i=!!(n.orgChoice&&n.accountData?.fullName&&n.accountData?.email&&n.accountData?.password&&(n.orgChoice==="join"?n.inviteData:n.orgData)&&n.securityData?.verified&&n.consentData?.termsAccepted&&n.consentData?.privacyAccepted&&n.environmentData&&n.organizationCreated);return t.jsx(Sc.Provider,{value:{signUpData:n,updateSignUpData:s,clearSignUpData:a,isComplete:i},children:e})},qt=()=>{const e=f.useContext(Sc);if(!e)throw new Error("useSignUp must be used within SignUpProvider");return e};function lo({nextStep:e}){const n=He();return t.jsx("div",{className:"w-full max-w-md mx-auto",children:t.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("img",{src:Ve,alt:"Pandaura AS Logo",className:"h-20 w-auto filter-none mb-6",style:{filter:"none",imageRendering:"crisp-edges"}}),t.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-2",children:"Welcome to Pandaura AS"}),t.jsx("p",{className:"text-secondary text-center mb-8",children:"Your complete industrial automation platform for PLCs, SCADA, and robotics"}),t.jsxs("div",{className:"w-full space-y-4",children:[t.jsx(J,{onClick:e,className:"w-full",size:"lg",children:"Create Organization / Join Team"}),t.jsx(J,{onClick:()=>n("/signin"),variant:"outline",className:"w-full",size:"lg",children:"Sign In"})]}),t.jsx("div",{className:"mt-8 text-center text-sm text-muted",children:t.jsx("p",{children:"Secure • On-Premise • Zero Trust"})})]})})})}function l0({nextStep:e,prevStep:n,onOrgChoice:r}){const{signUpData:s}=qt(),[a,i]=f.useState(s.orgChoice),[o,l]=f.useState(s.inviteData?.code||""),[d,c]=f.useState(!1),[u,m]=f.useState(""),{validateInvite:p}=pt(),h=()=>{r("create"),e()},x=async()=>{if(!o.trim()){m("Please enter an invite code");return}c(!0),m("");try{const b=await p(o.trim());b.valid?(r("join",{code:o.trim(),orgName:b.orgName,role:b.role,email:b.email}),e()):m(b.message||"Invalid or expired invite code")}catch{m("Failed to validate invite code. Please try again.")}finally{c(!1)}},g=b=>{navigator.clipboard.writeText(b),l(b)};return t.jsx("div",{className:"w-full max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("button",{onClick:n,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Get Started"})]}),t.jsx("p",{className:"text-secondary mb-6",children:"Choose how you'd like to begin with Pandaura AS:"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${a==="create"?"border-accent bg-accent-light":"border-light hover:border-accent/50"}`,onClick:()=>i("create"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`p-2 rounded-md mr-4 ${a==="create"?"bg-accent text-white":"bg-gray-100 text-secondary"}`,children:t.jsx(Ks,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-primary",children:"Create New Organization"}),t.jsx("p",{className:"text-sm text-secondary",children:"Start fresh and set up your team's automation workspace"})]})]})}),t.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${a==="join"?"border-accent bg-accent-light":"border-light hover:border-accent/50"}`,onClick:()=>i("join"),children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:`p-2 rounded-md mr-4 ${a==="join"?"bg-accent text-white":"bg-gray-100 text-secondary"}`,children:t.jsx(Mr,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-primary",children:"Join Existing Team"}),t.jsx("p",{className:"text-sm text-secondary",children:"Use an invite code to join your organization"})]})]})})]}),a==="join"&&t.jsxs("div",{className:"mt-6 space-y-4",children:[t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[t.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"For Testing - Sample Invite Codes:"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-mono text-sm text-blue-800",children:"TESTCODE123"}),t.jsx("div",{className:"text-xs text-blue-600",children:"Viewer role • test@example.com"})]}),t.jsx("button",{onClick:()=>g("TESTCODE123"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:t.jsx(Qr,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-mono text-sm text-blue-800",children:"ADMINCODE456"}),t.jsx("div",{className:"text-xs text-blue-600",children:"Admin role • admin@example.com"})]}),t.jsx("button",{onClick:()=>g("ADMINCODE456"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:t.jsx(Qr,{className:"w-4 h-4"})})]}),t.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-mono text-sm text-blue-800",children:"EDITORCODE789"}),t.jsx("div",{className:"text-xs text-blue-600",children:"Editor role • editor@example.com"})]}),t.jsx("button",{onClick:()=>g("EDITORCODE789"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:t.jsx(Qr,{className:"w-4 h-4"})})]})]}),t.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Click the copy icon to use any of these test codes."})]}),t.jsxs("div",{children:[t.jsx(Qe,{label:"Invite Code",placeholder:"Enter your invite code or paste invite link",value:o,onChange:b=>l(b.target.value),error:u,disabled:d}),t.jsx("p",{className:"text-xs text-muted mt-2",children:"Contact your organization admin for an invite code"})]}),t.jsx(J,{onClick:x,disabled:!o.trim()||d,className:"w-full",loading:d,children:d?"Validating...":"Validate & Continue"})]}),a==="create"&&t.jsx("div",{className:"mt-6",children:t.jsx(J,{onClick:h,className:"w-full",children:"Continue to Organization Setup"})}),t.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:t.jsx("p",{children:"Need help? Contact your administrator or check your email for an invite."})})]})})}const c0=[{value:"manufacturing",label:"Manufacturing"},{value:"automotive",label:"Automotive"},{value:"food-beverage",label:"Food & Beverage"},{value:"oil-gas",label:"Oil & Gas"},{value:"pharmaceuticals",label:"Pharmaceuticals"},{value:"water-treatment",label:"Water Treatment"},{value:"power-energy",label:"Power & Energy"},{value:"mining",label:"Mining"},{value:"chemical",label:"Chemical"},{value:"other",label:"Other"}],d0=[{value:"1-10",label:"1-10 employees"},{value:"11-50",label:"11-50 employees"},{value:"51-200",label:"51-200 employees"},{value:"201-1000",label:"201-1000 employees"},{value:"1000+",label:"1000+ employees"}];function u0({nextStep:e,prevStep:n,onOrgData:r,isJoining:s=!1,inviteData:a}){const{signUpData:i}=qt(),[o,l]=f.useState({orgName:a?.orgName||i.orgData?.orgName||"",industry:i.orgData?.industry||"",size:i.orgData?.size||""}),[d,c]=f.useState({});f.useEffect(()=>{i.orgData&&l(h=>({...h,orgName:a?.orgName||i.orgData?.orgName||h.orgName,industry:i.orgData?.industry||h.industry,size:i.orgData?.size||h.size}))},[i.orgData,a?.orgName]);const u=(h,x)=>{l(g=>({...g,[h]:x})),d[h]&&c(g=>({...g,[h]:""}))},m=()=>{const h={};return!s&&!o.orgName.trim()&&(h.orgName="Organization name is required"),o.industry||(h.industry="Please select your industry"),o.size||(h.size="Please select organization size"),c(h),Object.keys(h).length===0},p=()=>{m()&&(r(o),e())};return t.jsx("div",{className:"w-full max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("button",{onClick:n,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsx("h2",{className:"text-xl font-semibold text-primary",children:s?"Organization Details":"Create Organization"})]}),s&&t.jsxs("div",{className:"mb-6 p-4 bg-accent-light rounded-lg",children:[t.jsxs("p",{className:"text-sm text-primary",children:[t.jsx("strong",{children:"Joining:"})," ",a?.orgName]}),t.jsxs("p",{className:"text-sm text-secondary",children:["Role: ",a?.role]})]}),t.jsxs("div",{className:"space-y-4",children:[!s&&t.jsx(Qe,{label:"Organization / Company Name",placeholder:"Enter your organization name",value:o.orgName,onChange:h=>u("orgName",h.target.value),error:d.orgName,required:!0}),t.jsx(kt,{label:"Industry Sector",placeholder:"Select your industry",options:c0,value:o.industry,onChange:h=>u("industry",h),error:d.industry,required:!0}),t.jsx(kt,{label:"Organization Size",placeholder:"Select organization size",options:d0,value:o.size,onChange:h=>u("size",h),error:d.size,required:!0})]}),t.jsx("div",{className:"mt-8",children:t.jsx(J,{onClick:p,className:"w-full",size:"lg",children:"Continue to Account Setup"})}),t.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:t.jsx("p",{children:"This information helps us customize your automation workspace"})})]})})}function co(e){return/.+@.+\..+/.test(e)}function uo(e){return{length:e.length>=12,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/[0-9]/.test(e),special:/[^A-Za-z0-9]/.test(e)}}function mo({nextStep:e,prevStep:n,onAccountData:r,isJoining:s=!1,inviteData:a}){const[i,o]=f.useState({fullName:"",email:"",password:"",confirmPassword:""}),[l,d]=f.useState({}),[c,u]=f.useState(!1),[m,p]=f.useState(!1),[h,x]=f.useState(!1),{createOrganization:g,acceptInvite:b}=pt(),{signUpData:N,updateSignUpData:j}=qt(),{showToast:v}=St();Ge.useEffect(()=>{N.accountData&&o(y=>({...y,fullName:N.accountData?.fullName||y.fullName,email:N.accountData?.email||y.email,password:N.accountData?.password||y.password,confirmPassword:N.accountData?.confirmPassword||y.confirmPassword}))},[N.accountData]);const E=(y,A)=>{const w={...i,[y]:A};if(o(w),j("accountData",{fullName:w.fullName,email:w.email,password:w.password,confirmPassword:w.confirmPassword}),l[y]&&d(F=>({...F,[y]:""})),y==="email"&&A&&!co(A)&&d(F=>({...F,email:"Please enter a valid email address"})),y==="confirmPassword"||y==="password"&&w.confirmPassword){const F=y==="password"?A:w.password,T=y==="confirmPassword"?A:w.confirmPassword;d(T&&F!==T?R=>({...R,confirmPassword:"Passwords do not match"}):R=>({...R,confirmPassword:""}))}},k=()=>{const y={};if(i.fullName.trim()||(y.fullName="Full name is required"),i.email.trim()?co(i.email)||(y.email="Please enter a valid email address"):y.email="Email is required",!i.password)y.password="Password is required";else{const A=uo(i.password);Object.values(A).every(Boolean)||(y.password="Password does not meet all requirements")}return i.confirmPassword?i.password!==i.confirmPassword&&(y.confirmPassword="Passwords do not match"):y.confirmPassword="Please confirm your password",d(y),Object.keys(y).length===0},C=async()=>{if(k()){x(!0);try{if(j("accountData",{fullName:i.fullName,email:i.email,password:i.password,confirmPassword:i.confirmPassword}),r(i),N.orgChoice==="create"&&N.orgData&&!s){const y=await g({orgName:N.orgData.orgName,industry:N.orgData.industry,size:N.orgData.size,fullName:i.fullName,email:i.email,password:i.password});y.success?(v({variant:"success",title:"Organization Created!",message:`Welcome to ${N.orgData.orgName}! Your organization has been successfully created.`,duration:5e3}),j("organizationCreated",!0),e()):v({variant:"error",title:"Organization Creation Failed",message:y.message||"Failed to create organization. Please try again.",duration:5e3})}else if(N.orgChoice==="join"&&N.inviteData&&s){const y=await b({code:N.inviteData.code,fullName:i.fullName,email:i.email,password:i.password});y.success?(v({variant:"success",title:"Welcome to the Team!",message:`Successfully joined ${N.inviteData.orgName}! Your account has been created.`,duration:5e3}),j("organizationCreated",!0),e()):v({variant:"error",title:"Join Organization Failed",message:y.message||"Failed to join organization. Please try again.",duration:5e3})}else e()}catch(y){console.error("Organization creation error:",y),v({variant:"error",title:"Error",message:"An unexpected error occurred. Please try again.",duration:5e3})}finally{x(!1)}}},S=uo(i.password);return t.jsx("div",{className:"w-full max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("button",{onClick:n,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Account Setup"})]}),s&&a&&t.jsxs("div",{className:"mb-6 p-4 bg-accent-light rounded-lg",children:[t.jsxs("p",{className:"text-sm text-primary",children:[t.jsx("strong",{children:"Joining:"})," ",a.orgName]}),t.jsxs("p",{className:"text-sm text-secondary",children:["Role: ",a.role]}),t.jsx("p",{className:"text-xs text-secondary mt-2",children:"You can use any email address for your account."})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(Qe,{label:"Full Name",placeholder:"Enter your full name",value:i.fullName,onChange:y=>E("fullName",y.target.value),error:l.fullName,required:!0}),t.jsx(Qe,{label:"Work Email",type:"email",placeholder:"Enter your work email",value:i.email,onChange:y=>E("email",y.target.value),error:l.email,required:!0}),t.jsxs("div",{className:"relative",children:[t.jsx(Qe,{label:"Create Password",type:c?"text":"password",placeholder:"Create a strong password",value:i.password,onChange:y=>E("password",y.target.value),error:l.password,required:!0}),t.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-8 text-secondary hover:text-primary transition-colors",children:c?t.jsx(vr,{className:"w-5 h-5"}):t.jsx(mn,{className:"w-5 h-5"})})]}),i.password&&t.jsxs("div",{className:"text-xs space-y-1 p-3 bg-gray-50 rounded-md",children:[t.jsx("p",{className:"font-medium text-secondary mb-2",children:"Password Requirements:"}),t.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[t.jsxs("div",{className:`flex items-center ${S.length?"text-green-600":"text-gray-400"}`,children:[t.jsx("span",{className:"mr-2",children:S.length?"✓":"○"}),"At least 12 characters"]}),t.jsxs("div",{className:`flex items-center ${S.uppercase?"text-green-600":"text-gray-400"}`,children:[t.jsx("span",{className:"mr-2",children:S.uppercase?"✓":"○"}),"Uppercase letter"]}),t.jsxs("div",{className:`flex items-center ${S.lowercase?"text-green-600":"text-gray-400"}`,children:[t.jsx("span",{className:"mr-2",children:S.lowercase?"✓":"○"}),"Lowercase letter"]}),t.jsxs("div",{className:`flex items-center ${S.number?"text-green-600":"text-gray-400"}`,children:[t.jsx("span",{className:"mr-2",children:S.number?"✓":"○"}),"Number"]}),t.jsxs("div",{className:`flex items-center ${S.special?"text-green-600":"text-gray-400"}`,children:[t.jsx("span",{className:"mr-2",children:S.special?"✓":"○"}),"Special character"]})]})]}),t.jsxs("div",{className:"relative",children:[t.jsx(Qe,{label:"Confirm Password",type:m?"text":"password",placeholder:"Confirm your password",value:i.confirmPassword,onChange:y=>E("confirmPassword",y.target.value),error:l.confirmPassword,required:!0}),t.jsx("button",{type:"button",onClick:()=>p(!m),className:"absolute right-3 top-8 text-secondary hover:text-primary transition-colors",children:m?t.jsx(vr,{className:"w-5 h-5"}):t.jsx(mn,{className:"w-5 h-5"})})]})]}),t.jsx("div",{className:"mt-8",children:t.jsx(J,{onClick:C,className:"w-full",size:"lg",disabled:h,children:h?"Creating Organization...":"Continue to Security Setup"})}),t.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:t.jsx("p",{children:"Strong passwords help protect your automation workspace"})})]})})}function ho({nextStep:e,prevStep:n,onSecurityData:r}){const{signUpData:s,updateSignUpData:a}=qt(),{setupTwoFactor:i,verifyTwoFactor:o,login:l,logout:d,isAuthenticated:c,token:u}=pt(),{showToast:m}=St(),[p,h]=f.useState(s.securityData?.method||null),[x,g]=f.useState(s.securityData?.code||""),[b,N]=f.useState(s.securityData?.secret||""),[j,v]=f.useState(s.securityData?.qrCodeUrl||""),[E,k]=f.useState(""),[C,S]=f.useState(!1),[y,A]=f.useState(!1),[w,F]=f.useState(s.securityData?.verified||!1),[T,R]=f.useState(!1),[M,O]=f.useState(0),[$,H]=f.useState(0),[re,le]=f.useState(!1);f.useEffect(()=>{p==="totp"&&!b&&!j&&s.accountData&&D()},[p,b,j,s.accountData]);const D=async()=>{if(!s.accountData?.email||!s.accountData?.password){k("Account credentials not available. Please go back and complete account creation.");return}if(s.orgChoice==="create"&&!s.organizationCreated){k("Organization not yet created. Please go back and complete the previous step.");return}S(!0),k("");try{let ne=!c||!u;if(console.log("🔍 Authentication check:",{isAuthenticated:c,hasToken:!!u,orgChoice:s.orgChoice,organizationCreated:s.organizationCreated,needsLogin:ne}),ne){R(!0),console.log("🔐 User not authenticated, logging in...");const Fe=await l(s.accountData.email,s.accountData.password);if(!Fe.success)throw new Error(Fe.message||"Failed to authenticate");R(!1),console.log("✅ Login successful for 2FA setup")}else console.log("✅ User already authenticated, proceeding with 2FA setup");console.log("🔒 Calling setupTwoFactor...");const ce=await i();console.log("✅ setupTwoFactor result:",ce),N(ce.secret),v(ce.qrCodeUrl),a("securityData",{...s.securityData,method:"totp",secret:ce.secret,qrCodeUrl:ce.qrCodeUrl,code:x}),m({variant:"success",title:"2FA Setup Initiated",message:"Please scan the QR code with your authenticator app."})}catch(ne){console.error("2FA setup error:",ne),console.error("Error details:",{message:ne.message,response:ne.response?.data,status:ne.response?.status,config:ne.config}),O(ce=>ce+1),k(ne.message||"Failed to setup 2FA. Please try again."),m({variant:"error",title:"2FA Setup Failed",message:`Attempt ${M+1}/3: Unable to generate QR code. ${M>=2?"Please contact support if issue persists.":"Please try again."}`})}finally{S(!1),R(!1)}},B=()=>{N(""),v(""),k(""),D()},oe=async()=>{if(x.length!==6){k("Please enter a 6-digit code");return}A(!0),k("");try{const ne=await o(x);if(ne.success){F(!0);const ce={method:p,secret:b,qrCodeUrl:j,code:x,verified:!0};a("securityData",ce),r(ce),m({variant:"success",title:"2FA Verified",message:"Two-factor authentication has been successfully enabled."}),setTimeout(()=>{e()},1500)}else throw new Error(ne.message)}catch(ne){console.error("2FA verification error:",ne),H(ce=>ce+1),k(ne.message||"Invalid verification code. Please try again."),m({variant:"error",title:"Verification Failed",message:`Attempt ${$+1}/5: Invalid code. ${$>=4?"Please check your authenticator app setup.":"Please check your authenticator app and try again."}`})}finally{A(!1)}},P=ne=>{h(ne),k(""),g(""),F(!1),ne==="sms"&&a("securityData",{method:"sms",code:"",verified:!1})},xe=()=>{if(!p){k("Please select a security method.");return}if(p==="totp"&&!w){k("Please verify your 2FA setup before continuing.");return}if(p==="sms"&&x.length!==6){k("Please enter the 6-digit SMS code.");return}const ne={method:p,secret:b,qrCodeUrl:j,code:x,verified:p==="sms"||w};a("securityData",ne),r(ne),e()},ve=p==="totp"?w:p==="sms"&&x.length===6;return t.jsx("div",{className:"w-full max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("button",{onClick:n,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Secure Your Account"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block mb-3 text-base font-medium text-secondary",children:"Choose your security method:"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:`flex items-center border-2 rounded-lg px-4 py-3 cursor-pointer transition-all ${p==="totp"?"border-accent bg-accent/5":"border-gray-200 bg-transparent hover:border-accent/50"}`,children:[t.jsx("input",{type:"radio",name:"method",value:"totp",checked:p==="totp",onChange:()=>P("totp"),className:"hidden"}),t.jsx("span",{className:"mr-3",children:p==="totp"?t.jsx(et,{className:"w-5 h-5 text-accent"}):t.jsx(Oa,{className:"w-5 h-5 text-gray-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-base font-medium text-primary",children:"Authenticator App (TOTP)"}),t.jsx("p",{className:"text-sm text-secondary mt-1",children:"Recommended - Use Google Authenticator or similar app"})]}),w&&p==="totp"&&t.jsx(et,{className:"w-5 h-5 text-green-600 ml-2"})]}),t.jsxs("label",{className:`flex items-center border-2 rounded-lg px-4 py-3 cursor-pointer transition-all ${p==="sms"?"border-accent bg-accent/5":"border-gray-200 bg-transparent hover:border-accent/50"}`,children:[t.jsx("input",{type:"radio",name:"method",value:"sms",checked:p==="sms",onChange:()=>P("sms"),className:"hidden"}),t.jsx("span",{className:"mr-3",children:p==="sms"?t.jsx(et,{className:"w-5 h-5 text-accent"}):t.jsx(Oa,{className:"w-5 h-5 text-gray-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"text-base font-medium text-primary",children:"SMS Backup Code"}),t.jsx("p",{className:"text-sm text-secondary mt-1",children:"Receive codes via text message"})]})]})]})]}),p==="totp"&&t.jsxs("div",{className:"space-y-4",children:[!b&&!j&&t.jsxs("div",{className:"text-center py-4",children:[t.jsx(J,{onClick:D,disabled:C||!s.accountData?.email,className:"w-full",children:C?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"w-4 h-4 mr-2 animate-spin"}),T?"Authenticating...":"Setting up 2FA..."]}):"Setup Authenticator App"}),!s.accountData?.email&&t.jsxs("p",{className:"text-sm text-yellow-600 mt-2 flex items-center justify-center",children:[t.jsx(ze,{className:"w-4 h-4 mr-1"}),"Account credentials not available"]})]}),j&&t.jsxs("div",{className:"text-center space-y-4",children:[t.jsx("p",{className:"text-sm text-secondary",children:"Scan this QR code with your authenticator app:"}),t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"w-48 h-48 border-2 border-gray-200 rounded-lg flex items-center justify-center bg-white",children:t.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=192x192&data=${encodeURIComponent(j)}`,alt:"2FA QR Code",className:"w-44 h-44"})})}),M>0&&M<3&&t.jsx("div",{className:"mt-4",children:t.jsxs(J,{onClick:B,variant:"outline",size:"sm",disabled:C,children:[t.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Retry QR Code Generation"]})})]}),j&&t.jsxs("div",{className:"space-y-2",children:[t.jsx(Qe,{label:"Verification Code",placeholder:"Enter 6-digit code",value:x,onChange:ne=>{const ce=ne.target.value.replace(/\D/g,"");g(ce),k("")},maxLength:6,error:E,disabled:w,className:"text-center text-lg font-mono"}),!w&&t.jsxs("div",{className:"space-y-3",children:[t.jsx(J,{onClick:oe,disabled:x.length!==6||y,className:"w-full",variant:w?"success":"primary",children:y?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify & Enable 2FA"}),$>0&&$<5&&t.jsxs("p",{className:"text-sm text-yellow-600 text-center",children:["Attempt ",$,"/5 - Double-check the code in your authenticator app"]}),$>=3&&!w&&t.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"Having trouble?"})," Make sure your device's time is synchronized and you're using the latest code."]})})]}),w&&t.jsx("div",{className:"text-center py-2",children:t.jsxs("div",{className:"inline-flex items-center text-green-600",children:[t.jsx(et,{className:"w-5 h-5 mr-2"}),t.jsx("span",{className:"font-medium",children:"2FA Successfully Enabled!"})]})})]})]}),p==="sms"&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-yellow-800",children:[t.jsx("strong",{children:"Note:"})," SMS-based 2FA is available as a backup option. For this demo, enter any 6-digit code to continue."]})}),t.jsx(Qe,{label:"SMS Verification Code",placeholder:"Enter 6-digit SMS code",value:x,onChange:ne=>{const ce=ne.target.value.replace(/\D/g,"");g(ce),k("")},maxLength:6,error:E,className:"text-center text-lg font-mono"})]}),E&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[t.jsx(ze,{className:"w-4 h-4 mr-2"}),E]})}),t.jsxs("div",{className:"flex justify-between pt-4",children:[t.jsx(J,{variant:"secondary",onClick:n,disabled:y,children:"Back"}),t.jsx(J,{onClick:xe,disabled:!ve||y,children:p==="totp"&&w?"Continue":"Next"})]})]})]})})}function po({nextStep:e,prevStep:n,onConsentData:r}){const{signUpData:s}=qt(),[a,i]=f.useState(s.consentData?.termsAccepted||!1),[o,l]=f.useState(s.consentData?.privacyAccepted||!1),[d,c]=f.useState({}),u=()=>{const m={};a||(m.consent1="You must acknowledge zero-trust policy."),o||(m.consent2="You must agree to the EULA."),c(m),Object.keys(m).length===0&&(r({termsAccepted:a,privacyAccepted:o}),e())};return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-fit bg-background relative overflow-hidden py-0 px-4",children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),t.jsx("div",{className:"z-10 mb-8 flex flex-col items-center",children:t.jsx("img",{src:Ve,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),t.jsxs("div",{className:"w-[600px] max-w-lg bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:[t.jsx("h3",{className:"text-xl font-semibold text-primary text-center mb-6",children:"Zero-Trust Ready Consent"}),t.jsxs("form",{className:"space-y-6",onSubmit:m=>{m.preventDefault(),u()},children:[t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a,onChange:m=>i(m.target.checked),className:"accent-accent w-[15px] h-[15px] mt-1"}),t.jsx("span",{className:"text-primary text-base",children:"I acknowledge Pandaura AS uses role-based access and activity monitoring in accordance with zero-trust security principles."})]}),d.consent1&&t.jsx("p",{className:"text-error text-sm mt-2",children:d.consent1})]}),t.jsx("div",{className:"relative",children:t.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:m=>l(m.target.checked),className:"accent-accent w-[15px] h-[15px] mt-1"}),t.jsx("span",{className:"text-primary text-base",children:"I agree to the End User License Agreement."})]})}),t.jsx("a",{href:"/eula",target:"_blank",rel:"noopener noreferrer",className:"text-[#9090ee] underline ml-2 text-sm",children:"View EULA"}),d.consent2&&t.jsx("p",{className:"text-error text-sm mt-2",children:d.consent2}),t.jsxs("div",{className:"flex justify-between pt-2",children:[t.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 text-muted font-medium transition-all",onClick:n,children:"Back"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:"Next"})]})]})]})]})}function m0(){const e=localStorage.getItem("pandaura_instance_id");if(e)return e;const n="INST-"+Math.random().toString(36).substr(2,9).toUpperCase();return localStorage.setItem("pandaura_instance_id",n),n}function h0(){const e=document.createElement("canvas"),n=e.getContext("2d");n.textBaseline="top",n.font="14px Arial",n.fillText("Device fingerprint",2,2);const r=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,Intl.DateTimeFormat().resolvedOptions().timeZone,e.toDataURL()].join("|");let s=0;for(let a=0;a<r.length;a++){const i=r.charCodeAt(a);s=(s<<5)-s+i,s=s&s}return Math.abs(s).toString(36)}function fo({nextStep:e,prevStep:n,onEnvironmentData:r}){const{signUpData:s,updateSignUpData:a}=qt(),{showToast:i}=St(),[o,l]=f.useState(s.environmentData?.instanceId||""),[d,c]=f.useState(s.environmentData?.fingerprint||""),[u,m]=f.useState(!1),[p,h]=f.useState(""),[x,g]=f.useState(s.environmentData?.bound||!1),[b,N]=f.useState(0),[j,v]=f.useState(!1),[E,k]=f.useState(!1);f.useEffect(()=>{const A=m0(),w=h0();l(A),c(w);const F=s.orgChoice==="create";k(F),a("environmentData",{...s.environmentData,instanceId:A,fingerprint:w})},[]);const C=async()=>{m(!0),h("");try{console.log("Starting device binding for email:",s.accountData?.email);const A=await fetch(`${Kt.apiBaseUrl}/api/v1/auth/signup-device-bind`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({instanceId:o,deviceFingerprintHash:d,email:s.accountData?.email})});if(!A.ok){const F=await A.json().catch(()=>({}));throw new Error(F.message||"Failed to bind device")}g(!0),N(0);const w={instanceId:o,fingerprint:d,bound:!0,bindingTimestamp:new Date().toISOString(),isOrgCreator:E};a("environmentData",w),r(w),i({variant:"success",title:"Device Bound Successfully",message:"Your account is now securely bound to this device."}),setTimeout(()=>{e()},2e3)}catch(A){console.error("Device binding error:",A),N(w=>w+1),h(A.message||"Failed to bind device. Please try again."),i({variant:"error",title:"Device Binding Failed",message:`Attempt ${b+1}/3: ${A.message||"Device binding failed"}`})}finally{m(!1)}},S=()=>{h(""),g(!1),C()},y=()=>{if(!E){h("Manual override is only available for organization creators."),i({variant:"error",title:"Access Denied",message:"Manual override is restricted to organization creators only."});return}const A={instanceId:o,fingerprint:d,bound:!0,manualOverride:!0,bindingTimestamp:new Date().toISOString(),isOrgCreator:E};a("environmentData",A),r(A),i({variant:"success",title:"Manual Override Applied",message:"Device binding bypassed by organization creator."}),e()};return t.jsx("div",{className:"w-full max-w-md mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.jsxs("div",{className:"flex items-center mb-6",children:[t.jsx("button",{onClick:n,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:t.jsx(ht,{className:"w-5 h-5 text-secondary"})}),t.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Environment Binding"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"text-center space-y-3",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center",children:t.jsx(Pt,{className:"w-8 h-8 text-accent"})})}),t.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Secure Your Account"}),t.jsx("p",{className:"text-sm text-secondary",children:E?"As an organization creator, bind your device for enhanced security.":"Bind your account to this device and environment to prevent unauthorized access."}),E&&t.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-md",children:t.jsxs("p",{className:"text-xs text-blue-700",children:[t.jsx(Pt,{className:"w-3 h-3 inline mr-1"}),"Organization Creator: Manual override available if binding fails"]})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(vo,{className:"w-5 h-5 text-secondary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-primary",children:"Device Instance"}),t.jsx("p",{className:"text-xs text-secondary font-mono",children:o})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(Pt,{className:"w-5 h-5 text-secondary"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-primary",children:"Device Fingerprint"}),t.jsxs("p",{className:"text-xs text-secondary font-mono",children:[d.substring(0,16),"..."]})]})]})]}),x?t.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx(et,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-800",children:"Device Successfully Bound"}),t.jsx("p",{className:"text-xs text-green-600",children:"Your account is now secured to this environment"})]})]})}):t.jsxs("div",{className:"space-y-4",children:[t.jsx(J,{onClick:C,disabled:u,className:"w-full",size:"lg",children:u?t.jsxs(t.Fragment,{children:[t.jsx(Ue,{className:"w-4 h-4 mr-2 animate-spin"}),"Binding Device..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Pt,{className:"w-4 h-4 mr-2"}),"Bind This Device"]})}),b>0&&b<3&&!x&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs(J,{onClick:S,variant:"outline",className:"w-full",disabled:u,children:[t.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Retry Device Binding"]}),t.jsxs("p",{className:"text-sm text-yellow-600 text-center",children:["Attempt ",b,"/3 failed. Please try again."]})]}),(b>=3||E)&&!x&&t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsx("p",{className:"text-sm text-red-800",children:b>=3?t.jsxs(t.Fragment,{children:[t.jsx("strong",{children:"Multiple binding attempts failed."}),E?" As an organization creator, you can use manual override.":" Please contact support."]}):t.jsx(t.Fragment,{children:"Organization creators can use manual override if needed."})})}),(b>=3||E)&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>v(!j),className:"text-sm text-accent hover:text-accent-dark underline",children:[j?"Hide":"Show"," organization creator options"]}),j&&t.jsxs("div",{className:"p-3 bg-gray-50 border rounded-lg space-y-3",children:[t.jsx("p",{className:"text-sm font-medium text-secondary",children:"Organization Creator Options:"}),t.jsx(J,{onClick:y,variant:"outline",size:"sm",className:"w-full border-yellow-300 text-yellow-700 hover:bg-yellow-50",disabled:!E,children:E?"Manual Override (Creator)":"Override Not Available"}),t.jsxs("p",{className:"text-xs text-yellow-600",children:["⚠️ ",E?"As organization creator, you can bypass device binding. Use with caution.":"Manual override is only available to organization creators."]})]})]})]})]}),p&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:t.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[t.jsx(ze,{className:"w-4 h-4 mr-2"}),p]})}),t.jsxs("div",{className:"pt-4 space-y-3",children:[t.jsx("div",{className:"text-center",children:t.jsx("p",{className:"text-xs text-secondary",children:"Device binding prevents credential reuse on unauthorized devices"})}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx(J,{variant:"secondary",onClick:n,disabled:u,children:"Back"}),x&&t.jsx(J,{onClick:e,children:"Continue to Finish"})]})]})]})]})]})})}function xo({onComplete:e,isLoading:n}){const{signUpData:r}=qt(),s=()=>r.orgChoice==="create"?r.orgData?.orgName||"your organization":r.orgChoice==="join"?r.inviteData?.orgName||"the organization":"your organization",a=()=>r.orgChoice==="join"?r.inviteData?.role||"Member":"Admin",i=()=>r.securityData?.verified?"2FA Authentication enabled":r.securityData?.method==="sms"?"SMS backup authentication configured":"Basic authentication",o=()=>r.environmentData?.bound?r.environmentData.manualOverride?"Device binding overridden by administrator":"Device securely bound to account":"Device binding skipped";return t.jsx("div",{className:"w-full max-w-lg mx-auto",children:t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.jsxs("div",{className:"text-center space-y-4 mb-8",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(et,{className:"w-12 h-12 text-green-600"})})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-primary mb-2",children:"Welcome to Pandaura AS!"}),t.jsxs("p",{className:"text-lg text-secondary",children:["Account created and joined ",t.jsx("strong",{children:s()})]}),t.jsx("p",{className:"text-sm text-secondary mt-1",children:"You're ready to collaborate with your team."})]})]}),t.jsxs("div",{className:"space-y-4 mb-8",children:[t.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wide",children:"Setup Summary"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[t.jsx(Mr,{className:"w-5 h-5 text-blue-600"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-blue-900",children:s()}),t.jsxs("p",{className:"text-xs text-blue-600",children:["Role: ",a()]})]}),t.jsx(et,{className:"w-4 h-4 text-green-600"})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[t.jsx(Pt,{className:"w-5 h-5 text-green-600"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-green-900",children:"Security Setup"}),t.jsx("p",{className:"text-xs text-green-600",children:i()})]}),t.jsx(et,{className:"w-4 h-4 text-green-600"})]}),t.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[t.jsx(Pt,{className:"w-5 h-5 text-purple-600"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Device Security"}),t.jsx("p",{className:"text-xs text-purple-600",children:o()})]}),t.jsx(et,{className:"w-4 h-4 text-green-600"})]})]})]}),t.jsx("div",{className:"p-4 bg-gray-50 rounded-lg mb-8",children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-secondary",children:"Account Email:"}),t.jsx("span",{className:"text-sm text-primary",children:r.accountData?.email})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-secondary",children:"Full Name:"}),t.jsx("span",{className:"text-sm text-primary",children:r.accountData?.fullName})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-secondary",children:"Organization:"}),t.jsx("span",{className:"text-sm text-primary",children:s()})]}),r.environmentData?.instanceId&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-secondary",children:"Device Instance:"}),t.jsx("span",{className:"text-xs font-mono text-secondary",children:r.environmentData.instanceId})]})]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx(J,{onClick:e,disabled:n,className:"w-full",size:"lg",children:n?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Finalizing Setup..."]}):t.jsxs(t.Fragment,{children:["Go to Dashboard",t.jsx($t,{className:"w-4 h-4 ml-2"})]})}),t.jsx("p",{className:"text-center text-xs text-secondary",children:"Your organization context and team permissions are now active."})]}),t.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:t.jsxs("p",{className:"text-xs text-yellow-800",children:[t.jsx("strong",{children:"Security Notice:"})," Your account has been configured with enhanced security features.",r.securityData?.verified&&" Keep your authenticator app accessible for future logins.",r.environmentData?.bound&&" Your device binding helps protect against unauthorized access."]})})]})})}function p0(){const[e,n]=f.useState(0),[r,s]=f.useState(!1),{createOrganization:a,acceptInvite:i,login:o,isAuthenticated:l,isLoading:d}=pt(),{signUpData:c,updateSignUpData:u,clearSignUpData:m,isComplete:p}=qt(),h=He();f.useEffect(()=>{!d&&!l?console.log("🔍 SignUp: User not authenticated, staying in signup flow"):!d&&l&&c.orgChoice&&console.log("🔍 SignUp: User is authenticated and in signup flow, continuing with steps")},[l,d,c.orgChoice]);const x=()=>n(A=>A+1),g=()=>n(A=>Math.max(A-1,0)),b=(A,w)=>{u("orgChoice",A),A==="join"&&w&&u("inviteData",w)},N=A=>{u("orgData",A)},j=A=>{u("accountData",A)},v=A=>{u("securityData",A)},E=A=>{u("consentData",A)},k=A=>{u("environmentData",A)},C=()=>{console.log("🧹 SignUp: Clearing all signup data including localStorage for future sessions"),m(),localStorage.removeItem("pandaura_instance_id"),console.log("✅ SignUp: All signup data cleared - form will be empty on next visit")},S=async()=>{if(!c.accountData)throw new Error("Account data is required");s(!0);try{if(c.organizationCreated){C(),h("/home",{replace:!0});return}if(c.orgChoice==="create"){if(!c.orgData)throw new Error("Organization data is required");const A=await a({orgName:c.orgData.orgName,industry:c.orgData.industry,size:c.orgData.size,fullName:c.accountData.fullName,email:c.accountData.email,password:c.accountData.password});if(A.success)C(),h("/home",{replace:!0});else throw new Error(A.message||"Failed to create organization")}else if(c.orgChoice==="join"){if(!c.inviteData)throw new Error("Invite data is required");const A=await i({code:c.inviteData.code,fullName:c.accountData.fullName,email:c.accountData.email,password:c.accountData.password});if(A.success)C(),h("/home",{replace:!0});else throw new Error(A.message||"Failed to join organization")}}catch(A){console.error("Sign up error:",A),alert("Sign up failed. Please try again.")}finally{s(!1)}},y=()=>{switch(e){case 0:return t.jsx(lo,{nextStep:x});case 1:return t.jsx(l0,{nextStep:x,prevStep:g,onOrgChoice:b});case 2:return c.orgChoice==="join"?t.jsx(mo,{nextStep:x,prevStep:g,onAccountData:j,isJoining:!0,inviteData:c.inviteData}):t.jsx(u0,{nextStep:x,prevStep:g,onOrgData:N,isJoining:!1,inviteData:c.inviteData});case 3:return c.orgChoice==="join"?t.jsx(ho,{nextStep:x,prevStep:g,onSecurityData:v}):t.jsx(mo,{nextStep:x,prevStep:g,onAccountData:j,isJoining:!1,inviteData:c.inviteData});case 4:return c.orgChoice==="join"?t.jsx(po,{nextStep:x,prevStep:g,onConsentData:E}):t.jsx(ho,{nextStep:x,prevStep:g,onSecurityData:v});case 5:return c.orgChoice==="join"?t.jsx(fo,{nextStep:x,prevStep:g,onEnvironmentData:k}):t.jsx(po,{nextStep:x,prevStep:g,onConsentData:E});case 6:return c.orgChoice==="join"?t.jsx(xo,{onComplete:S,isLoading:r}):t.jsx(fo,{nextStep:x,prevStep:g,onEnvironmentData:k});case 7:return t.jsx(xo,{onComplete:S,isLoading:r});default:return t.jsx(lo,{nextStep:x})}};return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-8 px-4",children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),t.jsxs("div",{className:"z-10 w-full max-w-md",children:[e>0&&e<7&&t.jsxs("div",{className:"mb-8",children:[t.jsx("div",{className:"flex justify-center mb-2",children:t.jsxs("span",{className:"text-sm text-secondary",children:["Step ",e," of 6"]})}),t.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:t.jsx("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${e/6*100}%`}})})]}),y()]})]})}function f0(){const{isAuthenticated:e,isLoading:n}=pt();return n?t.jsx("div",{className:"flex-1 flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),t.jsx("p",{className:"text-muted",children:"Loading..."})]})}):t.jsx(Es,{to:"/signup",replace:!0})}function x0(){return Ge.useEffect(()=>{ra()},[]),t.jsx(sh,{children:t.jsx(o0,{children:t.jsx(hh,{children:t.jsx(wu,{children:t.jsx(Tc,{children:t.jsxs(Pc,{children:[t.jsx(je,{path:"/",element:t.jsx(f0,{})}),t.jsx(je,{path:"/signup",element:t.jsx(p0,{})}),t.jsx(je,{path:"/signin",element:t.jsx(Rw,{})}),t.jsx(je,{path:"/eula",element:t.jsx(ah,{})}),t.jsx(je,{path:"/home",element:t.jsx(Be,{children:t.jsx(gr,{})})}),t.jsx(je,{path:"/home/projects",element:t.jsx(Be,{children:t.jsx(gr,{})})}),t.jsx(je,{path:"/home/projects/:projectId",element:t.jsx(Be,{children:t.jsx(gr,{})})}),t.jsx(je,{path:"/home/quick-tools",element:t.jsx(Be,{children:t.jsx(gr,{})})}),t.jsx(je,{path:"/debug/projects",element:t.jsx(Be,{children:t.jsx(n0,{})})}),t.jsx(je,{path:"/debug/ai",element:t.jsx(Be,{children:t.jsx(i0,{})})}),t.jsx(je,{path:"/app",element:t.jsx(Es,{to:"/pandaura-as",replace:!0})}),t.jsx(je,{path:"/pandaura-as",element:t.jsx(Be,{children:t.jsx(xt,{children:t.jsx(bs,{})})})}),t.jsx(je,{path:"/logic-studio",element:t.jsx(Be,{children:t.jsx(xt,{children:t.jsx(Ot,{children:t.jsx(ks,{})})})})}),t.jsx(je,{path:"/autodocs",element:t.jsx(Be,{children:t.jsx(xt,{children:t.jsx(Ss,{})})})}),t.jsx(je,{path:"/tag-database",element:t.jsx(Be,{children:t.jsx(xt,{children:t.jsx(Ot,{children:t.jsx(fr,{})})})})}),t.jsx(je,{path:"/tag-database/:projectId",element:t.jsx(Be,{children:t.jsx(xt,{children:t.jsx(Ot,{children:t.jsx(fr,{})})})})}),t.jsx(je,{path:"/case-studies",element:t.jsx(Be,{children:t.jsx(xt,{children:t.jsx(As,{})})})}),t.jsx(je,{path:"/workspace/:projectId/pandaura-as",element:t.jsx(Be,{children:t.jsx(Rn,{children:t.jsx(xt,{children:t.jsx(bs,{})})})})}),t.jsx(je,{path:"/workspace/:projectId/logic-studio",element:t.jsx(Be,{children:t.jsx(Rn,{children:t.jsx(xt,{children:t.jsx(Ot,{children:t.jsx(ks,{})})})})})}),t.jsx(je,{path:"/workspace/:projectId/autodocs",element:t.jsx(Be,{children:t.jsx(Rn,{children:t.jsx(xt,{children:t.jsx(Ss,{})})})})}),t.jsx(je,{path:"/workspace/:projectId/tag-database",element:t.jsx(Be,{children:t.jsx(Rn,{children:t.jsx(xt,{children:t.jsx(Ot,{children:t.jsx(fr,{})})})})})}),t.jsx(je,{path:"/workspace/:projectId/case-studies",element:t.jsx(Be,{children:t.jsx(Rn,{children:t.jsx(xt,{children:t.jsx(As,{})})})})}),t.jsx(je,{path:"/tool/logic",element:t.jsx(En,{children:t.jsx(Ot,{children:t.jsx(ks,{sessionMode:!0})})})}),t.jsx(je,{path:"/tool/tags",element:t.jsx(En,{children:t.jsx(Ot,{children:t.jsx(fr,{sessionMode:!0})})})}),t.jsx(je,{path:"/tool/autodocs",element:t.jsx(En,{children:t.jsx(Ss,{sessionMode:!0})})}),t.jsx(je,{path:"/tool/signalflow",element:t.jsx(En,{children:t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-primary",children:"SignalFlow (Coming Soon)"}),t.jsx("p",{className:"text-muted mt-2",children:"Signal path visualization and tracing"})]})})}),t.jsx(je,{path:"/tool/assistant",element:t.jsx(En,{children:t.jsx(bs,{sessionMode:!0})})}),t.jsx(je,{path:"/profile",element:t.jsx(Be,{children:t.jsx(Tw,{})})}),t.jsx(je,{path:"/feedback",element:t.jsx(Zw,{})}),t.jsx(je,{path:"/privacy",element:t.jsx(e0,{})}),t.jsx(je,{path:"/terms",element:t.jsx(t0,{})}),t.jsx(je,{path:"/case-study-library",element:t.jsx(As,{})}),t.jsx(je,{path:"*",element:t.jsx(Es,{to:"/signin",replace:!0})})]})})})})})})}ra();Lc.createRoot(document.getElementById("root")).render(t.jsx(Ge.StrictMode,{children:t.jsx(x0,{})}));
