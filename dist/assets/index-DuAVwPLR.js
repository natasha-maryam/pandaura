import{r as Pa,a as Ea,g as Ta}from"./vendor-DavUf6mE.js";import{r as u,u as K,a as Et,R as Z,b as hs,B as Oa,c as Da,d as B,N as Ht}from"./router-DQvsklb9.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();var Gt={exports:{}},Je={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps;function Ra(){if(Ps)return Je;Ps=1;var t=Pa(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function i(c,l,d){var h,g={},y=null,f=null;d!==void 0&&(y=""+d),l.key!==void 0&&(y=""+l.key),l.ref!==void 0&&(f=l.ref);for(h in l)a.call(l,h)&&!n.hasOwnProperty(h)&&(g[h]=l[h]);if(c&&c.defaultProps)for(h in l=c.defaultProps,l)g[h]===void 0&&(g[h]=l[h]);return{$$typeof:s,type:c,key:y,ref:f,props:g,_owner:o.current}}return Je.Fragment=r,Je.jsx=i,Je.jsxs=i,Je}var Es;function Ma(){return Es||(Es=1,Gt.exports=Ra()),Gt.exports}var e=Ma(),mt={},Ts;function Ia(){if(Ts)return mt;Ts=1;var t=Ea();return mt.createRoot=t.createRoot,mt.hydrateRoot=t.hydrateRoot,mt}var Fa=Ia();const La=Ta(Fa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$a=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,a)=>a?a.toUpperCase():r.toLowerCase()),Os=t=>{const s=$a(t);return s.charAt(0).toUpperCase()+s.slice(1)},gr=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim(),za=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ua={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=u.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:o="",children:n,iconNode:i,...c},l)=>u.createElement("svg",{ref:l,...Ua,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:gr("lucide",o),...!n&&!za(c)&&{"aria-hidden":"true"},...c},[...i.map(([d,h])=>u.createElement(d,h)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=(t,s)=>{const r=u.forwardRef(({className:a,...o},n)=>u.createElement(Ba,{ref:n,iconNode:s,className:gr(`lucide-${_a(Os(t))}`,`lucide-${t}`,a),...o}));return r.displayName=Os(t),r};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ds=D("activity",Va);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],he=D("arrow-left",qa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ee=D("arrow-right",Ha);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],as=D("bot",Ga);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ya=D("brain",Wa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],xs=D("building-2",Xa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ps=D("check",Ja);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qe=D("chevron-down",Ka);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Tt=D("chevron-left",Qa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ot=D("chevron-right",Za);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],tn=D("chevron-up",en);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ue=D("circle-alert",sn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ce=D("circle-check-big",rn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rs=D("circle",an);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fr=D("clock",nn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],br=D("cloud-upload",on);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],jr=D("code",ln);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Wt=D("copy",cn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],yr=D("cpu",dn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],mn=D("credit-card",un);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],vr=D("database",hn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Be=D("download",xn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Nt=D("eye-off",pn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rt=D("eye",gn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],bn=D("file-down",fn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Te=D("file-text",jn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],ns=D("folder-open",yn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],Nn=D("git-compare",vn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Sn=D("grid-3x3",wn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Cn=D("history",kn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Pn=D("house",An);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Tn=D("image",En);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Nr=D("info",On);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Rn=D("key",Dn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],os=D("lightbulb",Mn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Fn=D("list",In);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wr=D("loader-circle",Ln);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],$n=D("loader",_n);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ms=D("log-out",zn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Is=D("map-pin",Un);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Vn=D("maximize-2",Bn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Hn=D("menu",qn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],gs=D("message-circle",Gn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Yn=D("message-square",Wn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Jn=D("minimize-2",Xn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=[["path",{d:"M5 12h14",key:"1ays0h"}]],Sr=D("minus",Kn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],kr=D("monitor",Qn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]],eo=D("plug",Zn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Me=D("plus",to);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],me=D("refresh-cw",so);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],wt=D("rotate-ccw",ro);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ze=D("save",ao);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],et=D("search",no);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Dt=D("send",oo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fs=D("settings",io);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],we=D("shield",lo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],uo=D("smartphone",co);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ho=D("sparkles",mo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],po=D("square-pen",xo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],fo=D("tag",go);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rt=D("trash-2",bo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ot=D("triangle-alert",jo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ve=D("upload",yo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Cr=D("user",vo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Mt=D("users",No);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Ar=D("wand-sparkles",wo);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fe=D("x",So);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],It=D("zap",ko),te="/assets/logo-CwhF-OLf.png";function Le(){const[t,s]=u.useState(null),r=K(),a=Et(),o=u.useRef(null),n=i=>{s(c=>c===i?null:i)};return u.useEffect(()=>{const i=c=>{o.current&&!o.current.contains(c.target)&&s(null)};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[]),e.jsxs("div",{ref:o,className:"flex space-x-4 items-center relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>n("integrations"),title:"Integrations",className:"p-2 rounded hover:bg-gray-200",children:e.jsx(eo,{className:"w-5 h-5"})}),t==="integrations"&&e.jsxs("div",{className:"absolute right-0 mt-2 w-72 bg-white rounded shadow-lg p-4 text-sm z-50",children:[e.jsx("div",{className:"font-semibold mb-3 text-primary",children:"Productivity Tools"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{onClick:()=>{console.log("Connecting to Google Drive API..."),alert("Google Drive integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"G"})}),e.jsx("span",{children:"Google Drive API"})]}),e.jsxs("li",{onClick:()=>{console.log("Connecting to Google Docs API..."),alert("Google Docs integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"📄"})}),e.jsx("span",{children:"Google Docs API"})]}),e.jsxs("li",{onClick:()=>{console.log("Connecting to Dropbox API..."),alert("Dropbox integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-700 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"📦"})}),e.jsx("span",{children:"Dropbox API"})]}),e.jsxs("li",{onClick:()=>{console.log("Connecting to Excel API..."),alert("Excel API integration would be configured here"),s(null)},className:"flex items-center gap-3 p-2 rounded-md hover:bg-gray-100 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-6 h-6 bg-green-600 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"📊"})}),e.jsx("span",{children:"Excel API"})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>n("profile"),title:"User Profile",className:"p-2 rounded-full border hover:bg-gray-200",children:e.jsx(Cr,{className:"w-5 h-5"})}),t==="profile"&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded shadow-lg py-2 text-sm z-50",children:e.jsxs("ul",{className:"text-gray-800",children:[e.jsx("li",{onClick:()=>{console.log("Navigating to profile..."),r("/profile",{state:{from:a.pathname}}),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"👤 Profile"}),e.jsx("li",{onClick:()=>{console.log("Navigating to feedback..."),r("/feedback"),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"💬 Feedback"}),e.jsx("li",{onClick:()=>{console.log("Navigating to privacy..."),r("/privacy"),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"🔐 Privacy"}),e.jsx("li",{onClick:()=>{console.log("Navigating to case study library..."),r("/case-study-library"),s(null)},className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",children:"📂 Case Studies"})]})})]})]})}function Pr(){const[t,s]=u.useState(!1),[r,a]=u.useState(!1),[o,n]=u.useState(""),[i,c]=u.useState([{id:"1",text:"Pandaura AS (Mini) is your smart co-engineer. It adapts to whatever page you're on and helps with tips, training, logic guidance, and more — always context-aware, always available.",sender:"pandaura",timestamp:new Date().toLocaleTimeString()}]),l=u.useRef(null),d=u.useRef(null),h=()=>{d.current?.scrollIntoView({behavior:"smooth"})};u.useEffect(()=>{h()},[i]),u.useEffect(()=>{const f=N=>{if(l.current&&!l.current.contains(N.target)){const p=document.querySelector("[data-pandaura-orb]");p&&!p.contains(N.target)&&s(!1)}};return t&&document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[t]);const g=()=>{if(!o.trim())return;const f={id:Date.now().toString(),text:o,sender:"user",timestamp:new Date().toLocaleTimeString()};c(N=>[...N,f]),n(""),setTimeout(()=>{const N=["I understand you're working on that. Let me help you with the PLC logic structure. Would you like me to explain the safety interlocks?","That's a great question about motor control. In industrial automation, we typically use three-wire control circuits for safety. Let me walk you through it.","For tag management, I recommend organizing your variables by function: Inputs (I_), Outputs (O_), and Memory (M_). This follows industry best practices.","I can help you generate the structured text code for that. Which PLC vendor are you targeting - Rockwell, Siemens, or Beckhoff?","Let me analyze your logic. Based on what you've described, you'll need to consider emergency stop circuits, guard door interlocks, and overload protection."],p=N[Math.floor(Math.random()*N.length)],x={id:(Date.now()+1).toString(),text:p,sender:"pandaura",timestamp:new Date().toLocaleTimeString()};c(S=>[...S,x])},1e3)},y=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),g())};return e.jsxs(e.Fragment,{children:[e.jsx("button",{"data-pandaura-orb":!0,onClick:()=>s(!t),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary rounded-full flex items-center justify-center shadow-lg hover:scale-105 transition-transform z-50",title:"Ask Pandaura AS (Mini)",children:e.jsx(as,{className:"w-6 h-6 text-white"})}),t&&e.jsxs("div",{ref:l,className:`fixed bottom-24 right-6 bg-white border border-light rounded-lg shadow-xl z-50 transition-all duration-300 ${r?"w-80 h-16":"w-80 h-96"}`,children:[e.jsxs("div",{className:"bg-primary text-white p-3 rounded-t-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Pandaura AS (Mini)"}),e.jsx("span",{className:"text-xs bg-green-500 px-1 rounded",children:"Online"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>a(!r),className:"hover:bg-white hover:bg-opacity-20 p-1 rounded",children:r?e.jsx(Vn,{className:"w-3 h-3"}):e.jsx(Jn,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>s(!1),className:"hover:bg-white hover:bg-opacity-20 p-1 rounded",children:e.jsx(fe,{className:"w-3 h-3"})})]})]}),!r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"h-64 overflow-y-auto p-3 space-y-3",children:[i.map(f=>e.jsx("div",{className:`flex ${f.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-2 text-sm ${f.sender==="user"?"bg-primary text-white":"bg-gray-100 text-primary"}`,children:[e.jsx("div",{children:f.text}),e.jsx("div",{className:`text-xs mt-1 ${f.sender==="user"?"text-blue-200":"text-gray-500"}`,children:f.timestamp})]})},f.id)),e.jsx("div",{ref:d})]}),e.jsx("div",{className:"border-t border-light p-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:o,onChange:f=>n(f.target.value),onKeyPress:y,placeholder:"Ask about PLCs, automation, tags...",className:"flex-1 border border-light rounded px-3 py-2 text-sm resize-none focus:outline-none focus:ring-2 focus:ring-accent",rows:1}),e.jsx("button",{onClick:g,disabled:!o.trim(),className:"bg-primary text-white p-2 rounded hover:bg-secondary transition-colors disabled:opacity-50",children:e.jsx(Dt,{className:"w-4 h-4"})})]})})]})]})]})}const Er=u.createContext(void 0),bs=()=>{const t=u.useContext(Er);if(!t)throw new Error("useModuleState must be used within a ModuleStateProvider");return t},Co=({children:t})=>{const[s,r]=u.useState({}),a=u.useCallback(l=>s[l]||{},[s]),o=u.useCallback((l,d)=>{r(h=>{const g=h[l]||{},y={...g,...d};return JSON.stringify(g)===JSON.stringify(y)?h:{...h,[l]:y}})},[]),n=u.useCallback(l=>{r(d=>{if(!d[l])return d;const h={...d};return delete h[l],h})},[]),i=u.useCallback((l,d)=>{const h=setTimeout(()=>{try{const g=JSON.parse(localStorage.getItem("pandaura_module_states")||"{}");g[l]=d,localStorage.setItem("pandaura_module_states",JSON.stringify(g))}catch(g){console.warn("Failed to save module state to localStorage:",g)}},100);return o(l,d),()=>clearTimeout(h)},[o]);Z.useEffect(()=>{try{const l=JSON.parse(localStorage.getItem("pandaura_module_states")||"{}");r(l)}catch(l){console.warn("Failed to load module states from localStorage:",l)}},[]);const c=u.useMemo(()=>({getModuleState:a,setModuleState:o,clearModuleState:n,saveModuleState:i}),[a,o,n,i]);return e.jsx(Er.Provider,{value:c,children:t})},Tr=!1,Or=!0;console.log("🔍 Environment Detection:",{"import.meta.env.DEV":!1,"import.meta.env.PROD":!0,"import.meta.env.MODE":"production",VITE_DEPLOYMENT_MODE:"production",isDevelopment:Tr,isProduction:Or});const Ao=()=>(console.log("✅ Using explicit API URL:","https://pandaura-backend-production.up.railway.app"),"https://pandaura-backend-production.up.railway.app"),He={apiBaseUrl:Ao(),deploymentMode:"production",appTitle:"Pandaura AS",features:{analytics:!0,externalFonts:!0,cdnAssets:!0},upload:{maxFileSize:parseInt("10485760"),endpoint:"/api/v1/upload",allowedTypes:["pdf","docx","txt","png","jpg","jpeg"]},auth:{type:"local",sessionTimeout:parseInt("28800000")},network:{timeout:3e4,retries:3},onPremise:{showStatus:!0,offlineMode:!0,localOnly:!0}},Po=()=>{const t=window.location.hostname,s=window.location.port;return{hostname:t,port:s,isLocal:t==="localhost"||t==="127.0.0.1",displayUrl:s?`${t}:${s}`:t}},js=()=>{console.log("🔍 Environment Debug:",{isDevelopment:Tr,isProduction:Or,"import.meta.env.DEV":!1,"import.meta.env.PROD":!0,"import.meta.env.MODE":"production",VITE_API_BASE_URL:"https://pandaura-backend-production.up.railway.app","Final API URL":He.apiBaseUrl})},ht=[{name:"Logic Studio",path:"/logic-studio",icon:yr},{name:"Tag Database Manager",path:"/tag-database",icon:vr},{name:"AutoDocs",path:"/autodocs",icon:Te},{name:"Pandaura AS",path:"/pandaura-as",icon:gs}],Eo={"Pandaura AS":["Your AI co-engineer for automation, electrical, robotics, and everything in between."],"Logic Studio":["Turn natural language into fully structured PLC code — instantly and vendor-ready."],AutoDocs:["Auto-generate PLC docs for end-user delivery—specs, IO lists, logic summaries, and more"],"Tag Database Manager":["Organize, edit, and maintain all your PLC tags in one centralized system."],Projects:["Manage and organize your automation projects, files, and collaborative workspaces."]};function ge({children:t}){const[s,r]=u.useState(!0),[a,o]=u.useState(!1),n=K(),i=Et(),{projectId:c}=hs(),{saveModuleState:l}=bs(),d=i.pathname.startsWith("/workspace/"),h=u.useMemo(()=>{if(d&&c){const v=ht.map(C=>({...C,path:`/workspace/${c}${C.path}`}));return console.log("🔧 SharedLayout: Using project-specific tool paths:",{projectId:c,originalPaths:ht.map(C=>C.path),projectPaths:v.map(C=>C.path)}),v}return console.log("🔧 SharedLayout: Using standard tool paths"),ht},[d,c]),g=()=>{const v=i.pathname,C=h.find(P=>P.path===v);return C?C.name:ht.find(P=>v.includes(P.path.substring(1)))?.name||"Pandaura AS"},y=u.useCallback(v=>{console.log("🔧 SharedLayout: Navigating to tool:",{toolPath:v,currentPath:i.pathname,projectId:c,isProjectWorkspace:d}),n(v)},[n,i.pathname,c,d]),f=u.useCallback(()=>{o(!0)},[]),N=u.useCallback(()=>{const v=g();console.log(`Auto-saving ${v} progress...`),o(!1),n("/home")},[n]),p=u.useCallback(()=>{o(!1),n("/home")},[n]),x=()=>{const v=Po();return e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:f,className:"hover:opacity-80 transition-opacity",title:"Go to Home",children:e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsxs("div",{className:"flex flex-col text-xs",children:[e.jsx("span",{className:"text-primary font-medium",children:He.appTitle}),e.jsxs("span",{className:"text-muted",children:["Running on ",v.displayUrl," (Offline Mode)"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"bg-yellow-100 border border-yellow-200 text-yellow-800 px-2 py-1 rounded text-xs",children:"Offline Mode"}),e.jsx(Le,{})]})]})},S=u.useMemo(()=>e.jsxs("div",{className:`h-full overflow-y-auto scrollbar-hide bg-gray-light border-r border-light shadow-card p-2 space-y-4 transition-all duration-200 will-change-transform ${s?"w-72":"w-16"}`,style:{scrollBehavior:"smooth"},children:[e.jsx("button",{className:"text-secondary mb-2 focus:outline-none hover:text-primary transition-colors",onClick:()=>r(!s),"aria-label":"Toggle sidebar",title:"Toggle sidebar",children:e.jsx(Hn,{className:"w-8 h-8"})}),h.map(v=>{const C=v.icon,w=g()===v.name;return e.jsxs("div",{children:[e.jsxs("div",{onClick:()=>y(v.path),className:`flex items-center ${s?"":"justify-center"} cursor-pointer py-3 rounded-md transition-colors duration-150 ${w?" text-primary shadow-sm":"hover:bg-gray hover:text-primary hover:shadow-sm"}`,children:[e.jsx(C,{className:"w-6 h-6 min-w-[1.5rem] min-h-[1.5rem]"}),s&&e.jsx("span",{className:"text-sm font-medium ml-2",children:v.name})]}),s&&e.jsx("div",{className:"ml-7 mt-1 space-y-1 text-xs text-muted",children:Eo[v.name]?.map((P,b)=>e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-disabled",children:"→"}),e.jsx("span",{children:P})]},b))})]},v.name)})]}),[s,i.pathname,y]),j=()=>a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-96 p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Save Current Progress?"}),e.jsx("button",{onClick:()=>o(!1),className:"text-secondary hover:text-primary",children:e.jsx(fe,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm text-secondary mb-6",children:"Do you want to save your current progress before returning to the Home screen?"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 border border-light rounded-md text-sm hover:bg-gray-100 transition-colors",children:"Don't Save"}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary text-white rounded-md text-sm hover:bg-secondary transition-colors",children:"Save & Go Home"})]})]})});return e.jsxs("div",{className:"flex flex-col h-screen bg-background text-primary",children:[x(),e.jsxs("div",{className:"flex flex-1 overflow-hidden min-w-0",children:[S,e.jsx("div",{className:"flex-1 overflow-y-auto will-change-scroll",style:{scrollBehavior:"smooth"},children:t})]}),e.jsx(Pr,{}),j()]})}function Ke({children:t}){const s=K();return e.jsxs("div",{className:"flex flex-col h-screen bg-background text-primary",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>s(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Back to Home",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-12 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full",children:"Quick Session"}),e.jsx("span",{className:"text-xs text-muted",children:"One-time use"})]})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-md",children:[e.jsx(ot,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-xs text-yellow-800",children:"Session data will not be saved"})]}),e.jsxs("button",{onClick:()=>s("/home"),className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-secondary transition-colors text-sm",children:[e.jsx(Pn,{className:"w-4 h-4"}),"Home"]})]})]}),e.jsx("div",{className:"bg-accent/5 border-b border-accent/20 px-6 py-3",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("p",{className:"text-sm text-accent-dark",children:[e.jsx("strong",{children:"Quick Session Mode:"})," You can upload files, use all features, and export results — but your session will not be saved. For persistent projects,",e.jsx("button",{onClick:()=>s("/app"),className:"underline hover:text-primary transition-colors ml-1",children:"start a full project workflow"}),"."]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t})]})}function Dr(t,s){return function(){return t.apply(s,arguments)}}const{toString:To}=Object.prototype,{getPrototypeOf:ys}=Object,{iterator:Ft,toStringTag:Rr}=Symbol,Lt=(t=>s=>{const r=To.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),be=t=>(t=t.toLowerCase(),s=>Lt(s)===t),_t=t=>s=>typeof s===t,{isArray:Ge}=Array,at=_t("undefined");function it(t){return t!==null&&!at(t)&&t.constructor!==null&&!at(t.constructor)&&re(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Mr=be("ArrayBuffer");function Oo(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Mr(t.buffer),s}const Do=_t("string"),re=_t("function"),Ir=_t("number"),lt=t=>t!==null&&typeof t=="object",Ro=t=>t===!0||t===!1,jt=t=>{if(Lt(t)!=="object")return!1;const s=ys(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Rr in t)&&!(Ft in t)},Mo=t=>{if(!lt(t)||it(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Io=be("Date"),Fo=be("File"),Lo=be("Blob"),_o=be("FileList"),$o=t=>lt(t)&&re(t.pipe),zo=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||re(t.append)&&((s=Lt(t))==="formdata"||s==="object"&&re(t.toString)&&t.toString()==="[object FormData]"))},Uo=be("URLSearchParams"),[Bo,Vo,qo,Ho]=["ReadableStream","Request","Response","Headers"].map(be),Go=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ct(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),Ge(t))for(a=0,o=t.length;a<o;a++)s.call(null,t[a],a,t);else{if(it(t))return;const n=r?Object.getOwnPropertyNames(t):Object.keys(t),i=n.length;let c;for(a=0;a<i;a++)c=n[a],s.call(null,t[c],c,t)}}function Fr(t,s){if(it(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,o;for(;a-- >0;)if(o=r[a],s===o.toLowerCase())return o;return null}const De=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Lr=t=>!at(t)&&t!==De;function is(){const{caseless:t}=Lr(this)&&this||{},s={},r=(a,o)=>{const n=t&&Fr(s,o)||o;jt(s[n])&&jt(a)?s[n]=is(s[n],a):jt(a)?s[n]=is({},a):Ge(a)?s[n]=a.slice():s[n]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&ct(arguments[a],r);return s}const Wo=(t,s,r,{allOwnKeys:a}={})=>(ct(s,(o,n)=>{r&&re(o)?t[n]=Dr(o,r):t[n]=o},{allOwnKeys:a}),t),Yo=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Xo=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},Jo=(t,s,r,a)=>{let o,n,i;const c={};if(s=s||{},t==null)return s;do{for(o=Object.getOwnPropertyNames(t),n=o.length;n-- >0;)i=o[n],(!a||a(i,t,s))&&!c[i]&&(s[i]=t[i],c[i]=!0);t=r!==!1&&ys(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},Ko=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},Qo=t=>{if(!t)return null;if(Ge(t))return t;let s=t.length;if(!Ir(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},Zo=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&ys(Uint8Array)),ei=(t,s)=>{const a=(t&&t[Ft]).call(t);let o;for(;(o=a.next())&&!o.done;){const n=o.value;s.call(t,n[0],n[1])}},ti=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},si=be("HTMLFormElement"),ri=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,o){return a.toUpperCase()+o}),Fs=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),ai=be("RegExp"),_r=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};ct(r,(o,n)=>{let i;(i=s(o,n,t))!==!1&&(a[n]=i||o)}),Object.defineProperties(t,a)},ni=t=>{_r(t,(s,r)=>{if(re(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(re(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},oi=(t,s)=>{const r={},a=o=>{o.forEach(n=>{r[n]=!0})};return Ge(t)?a(t):a(String(t).split(s)),r},ii=()=>{},li=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function ci(t){return!!(t&&re(t.append)&&t[Rr]==="FormData"&&t[Ft])}const di=t=>{const s=new Array(10),r=(a,o)=>{if(lt(a)){if(s.indexOf(a)>=0)return;if(it(a))return a;if(!("toJSON"in a)){s[o]=a;const n=Ge(a)?[]:{};return ct(a,(i,c)=>{const l=r(i,o+1);!at(l)&&(n[c]=l)}),s[o]=void 0,n}}return a};return r(t,0)},ui=be("AsyncFunction"),mi=t=>t&&(lt(t)||re(t))&&re(t.then)&&re(t.catch),$r=((t,s)=>t?setImmediate:s?((r,a)=>(De.addEventListener("message",({source:o,data:n})=>{o===De&&n===r&&a.length&&a.shift()()},!1),o=>{a.push(o),De.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",re(De.postMessage)),hi=typeof queueMicrotask<"u"?queueMicrotask.bind(De):typeof process<"u"&&process.nextTick||$r,xi=t=>t!=null&&re(t[Ft]),A={isArray:Ge,isArrayBuffer:Mr,isBuffer:it,isFormData:zo,isArrayBufferView:Oo,isString:Do,isNumber:Ir,isBoolean:Ro,isObject:lt,isPlainObject:jt,isEmptyObject:Mo,isReadableStream:Bo,isRequest:Vo,isResponse:qo,isHeaders:Ho,isUndefined:at,isDate:Io,isFile:Fo,isBlob:Lo,isRegExp:ai,isFunction:re,isStream:$o,isURLSearchParams:Uo,isTypedArray:Zo,isFileList:_o,forEach:ct,merge:is,extend:Wo,trim:Go,stripBOM:Yo,inherits:Xo,toFlatObject:Jo,kindOf:Lt,kindOfTest:be,endsWith:Ko,toArray:Qo,forEachEntry:ei,matchAll:ti,isHTMLForm:si,hasOwnProperty:Fs,hasOwnProp:Fs,reduceDescriptors:_r,freezeMethods:ni,toObjectSet:oi,toCamelCase:ri,noop:ii,toFiniteNumber:li,findKey:Fr,global:De,isContextDefined:Lr,isSpecCompliantForm:ci,toJSONObject:di,isAsyncFn:ui,isThenable:mi,setImmediate:$r,asap:hi,isIterable:xi};function _(t,s,r,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}A.inherits(_,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const zr=_.prototype,Ur={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ur[t]={value:t}});Object.defineProperties(_,Ur);Object.defineProperty(zr,"isAxiosError",{value:!0});_.from=(t,s,r,a,o,n)=>{const i=Object.create(zr);return A.toFlatObject(t,i,function(l){return l!==Error.prototype},c=>c!=="isAxiosError"),_.call(i,t.message,s,r,a,o),i.cause=t,i.name=t.name,n&&Object.assign(i,n),i};const pi=null;function ls(t){return A.isPlainObject(t)||A.isArray(t)}function Br(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function Ls(t,s,r){return t?t.concat(s).map(function(o,n){return o=Br(o),!r&&n?"["+o+"]":o}).join(r?".":""):s}function gi(t){return A.isArray(t)&&!t.some(ls)}const fi=A.toFlatObject(A,{},null,function(s){return/^is[A-Z]/.test(s)});function $t(t,s,r){if(!A.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=A.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,x){return!A.isUndefined(x[p])});const a=r.metaTokens,o=r.visitor||h,n=r.dots,i=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(s);if(!A.isFunction(o))throw new TypeError("visitor must be a function");function d(N){if(N===null)return"";if(A.isDate(N))return N.toISOString();if(A.isBoolean(N))return N.toString();if(!l&&A.isBlob(N))throw new _("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(N)||A.isTypedArray(N)?l&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function h(N,p,x){let S=N;if(N&&!x&&typeof N=="object"){if(A.endsWith(p,"{}"))p=a?p:p.slice(0,-2),N=JSON.stringify(N);else if(A.isArray(N)&&gi(N)||(A.isFileList(N)||A.endsWith(p,"[]"))&&(S=A.toArray(N)))return p=Br(p),S.forEach(function(v,C){!(A.isUndefined(v)||v===null)&&s.append(i===!0?Ls([p],C,n):i===null?p:p+"[]",d(v))}),!1}return ls(N)?!0:(s.append(Ls(x,p,n),d(N)),!1)}const g=[],y=Object.assign(fi,{defaultVisitor:h,convertValue:d,isVisitable:ls});function f(N,p){if(!A.isUndefined(N)){if(g.indexOf(N)!==-1)throw Error("Circular reference detected in "+p.join("."));g.push(N),A.forEach(N,function(S,j){(!(A.isUndefined(S)||S===null)&&o.call(s,S,A.isString(j)?j.trim():j,p,y))===!0&&f(S,p?p.concat(j):[j])}),g.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return f(t),s}function _s(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function vs(t,s){this._pairs=[],t&&$t(t,this,s)}const Vr=vs.prototype;Vr.append=function(s,r){this._pairs.push([s,r])};Vr.toString=function(s){const r=s?function(a){return s.call(this,a,_s)}:_s;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function bi(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qr(t,s,r){if(!s)return t;const a=r&&r.encode||bi;A.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let n;if(o?n=o(s,r):n=A.isURLSearchParams(s)?s.toString():new vs(s,r).toString(a),n){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t}class $s{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){A.forEach(this.handlers,function(a){a!==null&&s(a)})}}const Hr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ji=typeof URLSearchParams<"u"?URLSearchParams:vs,yi=typeof FormData<"u"?FormData:null,vi=typeof Blob<"u"?Blob:null,Ni={isBrowser:!0,classes:{URLSearchParams:ji,FormData:yi,Blob:vi},protocols:["http","https","file","blob","url","data"]},Ns=typeof window<"u"&&typeof document<"u",cs=typeof navigator=="object"&&navigator||void 0,wi=Ns&&(!cs||["ReactNative","NativeScript","NS"].indexOf(cs.product)<0),Si=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ki=Ns&&window.location.href||"http://localhost",Ci=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ns,hasStandardBrowserEnv:wi,hasStandardBrowserWebWorkerEnv:Si,navigator:cs,origin:ki},Symbol.toStringTag,{value:"Module"})),Q={...Ci,...Ni};function Ai(t,s){return $t(t,new Q.classes.URLSearchParams,{visitor:function(r,a,o,n){return Q.isNode&&A.isBuffer(r)?(this.append(a,r.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...s})}function Pi(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Ei(t){const s={},r=Object.keys(t);let a;const o=r.length;let n;for(a=0;a<o;a++)n=r[a],s[n]=t[n];return s}function Gr(t){function s(r,a,o,n){let i=r[n++];if(i==="__proto__")return!0;const c=Number.isFinite(+i),l=n>=r.length;return i=!i&&A.isArray(o)?o.length:i,l?(A.hasOwnProp(o,i)?o[i]=[o[i],a]:o[i]=a,!c):((!o[i]||!A.isObject(o[i]))&&(o[i]=[]),s(r,a,o[i],n)&&A.isArray(o[i])&&(o[i]=Ei(o[i])),!c)}if(A.isFormData(t)&&A.isFunction(t.entries)){const r={};return A.forEachEntry(t,(a,o)=>{s(Pi(a),o,r,0)}),r}return null}function Ti(t,s,r){if(A.isString(t))try{return(s||JSON.parse)(t),A.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const dt={transitional:Hr,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",o=a.indexOf("application/json")>-1,n=A.isObject(s);if(n&&A.isHTMLForm(s)&&(s=new FormData(s)),A.isFormData(s))return o?JSON.stringify(Gr(s)):s;if(A.isArrayBuffer(s)||A.isBuffer(s)||A.isStream(s)||A.isFile(s)||A.isBlob(s)||A.isReadableStream(s))return s;if(A.isArrayBufferView(s))return s.buffer;if(A.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(n){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Ai(s,this.formSerializer).toString();if((c=A.isFileList(s))||a.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return $t(c?{"files[]":s}:s,l&&new l,this.formSerializer)}}return n||o?(r.setContentType("application/json",!1),Ti(s)):s}],transformResponse:[function(s){const r=this.transitional||dt.transitional,a=r&&r.forcedJSONParsing,o=this.responseType==="json";if(A.isResponse(s)||A.isReadableStream(s))return s;if(s&&A.isString(s)&&(a&&!this.responseType||o)){const i=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(s)}catch(c){if(i)throw c.name==="SyntaxError"?_.from(c,_.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Q.classes.FormData,Blob:Q.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{dt.headers[t]={}});const Oi=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Di=t=>{const s={};let r,a,o;return t&&t.split(`
`).forEach(function(i){o=i.indexOf(":"),r=i.substring(0,o).trim().toLowerCase(),a=i.substring(o+1).trim(),!(!r||s[r]&&Oi[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},zs=Symbol("internals");function Qe(t){return t&&String(t).trim().toLowerCase()}function yt(t){return t===!1||t==null?t:A.isArray(t)?t.map(yt):String(t)}function Ri(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const Mi=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Yt(t,s,r,a,o){if(A.isFunction(a))return a.call(this,s,r);if(o&&(s=r),!!A.isString(s)){if(A.isString(a))return s.indexOf(a)!==-1;if(A.isRegExp(a))return a.test(s)}}function Ii(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function Fi(t,s){const r=A.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(o,n,i){return this[a].call(this,s,o,n,i)},configurable:!0})})}let ae=class{constructor(s){s&&this.set(s)}set(s,r,a){const o=this;function n(c,l,d){const h=Qe(l);if(!h)throw new Error("header name must be a non-empty string");const g=A.findKey(o,h);(!g||o[g]===void 0||d===!0||d===void 0&&o[g]!==!1)&&(o[g||l]=yt(c))}const i=(c,l)=>A.forEach(c,(d,h)=>n(d,h,l));if(A.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(A.isString(s)&&(s=s.trim())&&!Mi(s))i(Di(s),r);else if(A.isObject(s)&&A.isIterable(s)){let c={},l,d;for(const h of s){if(!A.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[d=h[0]]=(l=c[d])?A.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}i(c,r)}else s!=null&&n(r,s,a);return this}get(s,r){if(s=Qe(s),s){const a=A.findKey(this,s);if(a){const o=this[a];if(!r)return o;if(r===!0)return Ri(o);if(A.isFunction(r))return r.call(this,o,a);if(A.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Qe(s),s){const a=A.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||Yt(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let o=!1;function n(i){if(i=Qe(i),i){const c=A.findKey(a,i);c&&(!r||Yt(a,a[c],c,r))&&(delete a[c],o=!0)}}return A.isArray(s)?s.forEach(n):n(s),o}clear(s){const r=Object.keys(this);let a=r.length,o=!1;for(;a--;){const n=r[a];(!s||Yt(this,this[n],n,s,!0))&&(delete this[n],o=!0)}return o}normalize(s){const r=this,a={};return A.forEach(this,(o,n)=>{const i=A.findKey(a,n);if(i){r[i]=yt(o),delete r[n];return}const c=s?Ii(n):String(n).trim();c!==n&&delete r[n],r[c]=yt(o),a[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return A.forEach(this,(a,o)=>{a!=null&&a!==!1&&(r[o]=s&&A.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(o=>a.set(o)),a}static accessor(s){const a=(this[zs]=this[zs]={accessors:{}}).accessors,o=this.prototype;function n(i){const c=Qe(i);a[c]||(Fi(o,i),a[c]=!0)}return A.isArray(s)?s.forEach(n):n(s),this}};ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(ae.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});A.freezeMethods(ae);function Xt(t,s){const r=this||dt,a=s||r,o=ae.from(a.headers);let n=a.data;return A.forEach(t,function(c){n=c.call(r,n,o.normalize(),s?s.status:void 0)}),o.normalize(),n}function Wr(t){return!!(t&&t.__CANCEL__)}function We(t,s,r){_.call(this,t??"canceled",_.ERR_CANCELED,s,r),this.name="CanceledError"}A.inherits(We,_,{__CANCEL__:!0});function Yr(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new _("Request failed with status code "+r.status,[_.ERR_BAD_REQUEST,_.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Li(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function _i(t,s){t=t||10;const r=new Array(t),a=new Array(t);let o=0,n=0,i;return s=s!==void 0?s:1e3,function(l){const d=Date.now(),h=a[n];i||(i=d),r[o]=l,a[o]=d;let g=n,y=0;for(;g!==o;)y+=r[g++],g=g%t;if(o=(o+1)%t,o===n&&(n=(n+1)%t),d-i<s)return;const f=h&&d-h;return f?Math.round(y*1e3/f):void 0}}function $i(t,s){let r=0,a=1e3/s,o,n;const i=(d,h=Date.now())=>{r=h,o=null,n&&(clearTimeout(n),n=null),t(...d)};return[(...d)=>{const h=Date.now(),g=h-r;g>=a?i(d,h):(o=d,n||(n=setTimeout(()=>{n=null,i(o)},a-g)))},()=>o&&i(o)]}const St=(t,s,r=3)=>{let a=0;const o=_i(50,250);return $i(n=>{const i=n.loaded,c=n.lengthComputable?n.total:void 0,l=i-a,d=o(l),h=i<=c;a=i;const g={loaded:i,total:c,progress:c?i/c:void 0,bytes:l,rate:d||void 0,estimated:d&&c&&h?(c-i)/d:void 0,event:n,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(g)},r)},Us=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},Bs=t=>(...s)=>A.asap(()=>t(...s)),zi=Q.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,Q.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(Q.origin),Q.navigator&&/(msie|trident)/i.test(Q.navigator.userAgent)):()=>!0,Ui=Q.hasStandardBrowserEnv?{write(t,s,r,a,o,n){const i=[t+"="+encodeURIComponent(s)];A.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),A.isString(a)&&i.push("path="+a),A.isString(o)&&i.push("domain="+o),n===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Bi(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Vi(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Xr(t,s,r){let a=!Bi(s);return t&&(a||r==!1)?Vi(t,s):s}const Vs=t=>t instanceof ae?{...t}:t;function Ie(t,s){s=s||{};const r={};function a(d,h,g,y){return A.isPlainObject(d)&&A.isPlainObject(h)?A.merge.call({caseless:y},d,h):A.isPlainObject(h)?A.merge({},h):A.isArray(h)?h.slice():h}function o(d,h,g,y){if(A.isUndefined(h)){if(!A.isUndefined(d))return a(void 0,d,g,y)}else return a(d,h,g,y)}function n(d,h){if(!A.isUndefined(h))return a(void 0,h)}function i(d,h){if(A.isUndefined(h)){if(!A.isUndefined(d))return a(void 0,d)}else return a(void 0,h)}function c(d,h,g){if(g in s)return a(d,h);if(g in t)return a(void 0,d)}const l={url:n,method:n,data:n,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(d,h,g)=>o(Vs(d),Vs(h),g,!0)};return A.forEach(Object.keys({...t,...s}),function(h){const g=l[h]||o,y=g(t[h],s[h],h);A.isUndefined(y)&&g!==c||(r[h]=y)}),r}const Jr=t=>{const s=Ie({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:n,headers:i,auth:c}=s;s.headers=i=ae.from(i),s.url=qr(Xr(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let l;if(A.isFormData(r)){if(Q.hasStandardBrowserEnv||Q.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((l=i.getContentType())!==!1){const[d,...h]=l?l.split(";").map(g=>g.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...h].join("; "))}}if(Q.hasStandardBrowserEnv&&(a&&A.isFunction(a)&&(a=a(s)),a||a!==!1&&zi(s.url))){const d=o&&n&&Ui.read(n);d&&i.set(o,d)}return s},qi=typeof XMLHttpRequest<"u",Hi=qi&&function(t){return new Promise(function(r,a){const o=Jr(t);let n=o.data;const i=ae.from(o.headers).normalize();let{responseType:c,onUploadProgress:l,onDownloadProgress:d}=o,h,g,y,f,N;function p(){f&&f(),N&&N(),o.cancelToken&&o.cancelToken.unsubscribe(h),o.signal&&o.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(o.method.toUpperCase(),o.url,!0),x.timeout=o.timeout;function S(){if(!x)return;const v=ae.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),w={data:!c||c==="text"||c==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:v,config:t,request:x};Yr(function(b){r(b),p()},function(b){a(b),p()},w),x=null}"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(S)},x.onabort=function(){x&&(a(new _("Request aborted",_.ECONNABORTED,t,x)),x=null)},x.onerror=function(){a(new _("Network Error",_.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let C=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const w=o.transitional||Hr;o.timeoutErrorMessage&&(C=o.timeoutErrorMessage),a(new _(C,w.clarifyTimeoutError?_.ETIMEDOUT:_.ECONNABORTED,t,x)),x=null},n===void 0&&i.setContentType(null),"setRequestHeader"in x&&A.forEach(i.toJSON(),function(C,w){x.setRequestHeader(w,C)}),A.isUndefined(o.withCredentials)||(x.withCredentials=!!o.withCredentials),c&&c!=="json"&&(x.responseType=o.responseType),d&&([y,N]=St(d,!0),x.addEventListener("progress",y)),l&&x.upload&&([g,f]=St(l),x.upload.addEventListener("progress",g),x.upload.addEventListener("loadend",f)),(o.cancelToken||o.signal)&&(h=v=>{x&&(a(!v||v.type?new We(null,t,x):v),x.abort(),x=null)},o.cancelToken&&o.cancelToken.subscribe(h),o.signal&&(o.signal.aborted?h():o.signal.addEventListener("abort",h)));const j=Li(o.url);if(j&&Q.protocols.indexOf(j)===-1){a(new _("Unsupported protocol "+j+":",_.ERR_BAD_REQUEST,t));return}x.send(n||null)})},Gi=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,o;const n=function(d){if(!o){o=!0,c();const h=d instanceof Error?d:this.reason;a.abort(h instanceof _?h:new We(h instanceof Error?h.message:h))}};let i=s&&setTimeout(()=>{i=null,n(new _(`timeout ${s} of ms exceeded`,_.ETIMEDOUT))},s);const c=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(n):d.removeEventListener("abort",n)}),t=null)};t.forEach(d=>d.addEventListener("abort",n));const{signal:l}=a;return l.unsubscribe=()=>A.asap(c),l}},Wi=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,o;for(;a<r;)o=a+s,yield t.slice(a,o),a=o},Yi=async function*(t,s){for await(const r of Xi(t))yield*Wi(r,s)},Xi=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:a}=await s.read();if(r)break;yield a}}finally{await s.cancel()}},qs=(t,s,r,a)=>{const o=Yi(t,s);let n=0,i,c=l=>{i||(i=!0,a&&a(l))};return new ReadableStream({async pull(l){try{const{done:d,value:h}=await o.next();if(d){c(),l.close();return}let g=h.byteLength;if(r){let y=n+=g;r(y)}l.enqueue(new Uint8Array(h))}catch(d){throw c(d),d}},cancel(l){return c(l),o.return()}},{highWaterMark:2})},zt=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Kr=zt&&typeof ReadableStream=="function",Ji=zt&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Qr=(t,...s)=>{try{return!!t(...s)}catch{return!1}},Ki=Kr&&Qr(()=>{let t=!1;const s=new Request(Q.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Hs=64*1024,ds=Kr&&Qr(()=>A.isReadableStream(new Response("").body)),kt={stream:ds&&(t=>t.body)};zt&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!kt[s]&&(kt[s]=A.isFunction(t[s])?r=>r[s]():(r,a)=>{throw new _(`Response type '${s}' is not supported`,_.ERR_NOT_SUPPORT,a)})})})(new Response);const Qi=async t=>{if(t==null)return 0;if(A.isBlob(t))return t.size;if(A.isSpecCompliantForm(t))return(await new Request(Q.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(A.isArrayBufferView(t)||A.isArrayBuffer(t))return t.byteLength;if(A.isURLSearchParams(t)&&(t=t+""),A.isString(t))return(await Ji(t)).byteLength},Zi=async(t,s)=>{const r=A.toFiniteNumber(t.getContentLength());return r??Qi(s)},el=zt&&(async t=>{let{url:s,method:r,data:a,signal:o,cancelToken:n,timeout:i,onDownloadProgress:c,onUploadProgress:l,responseType:d,headers:h,withCredentials:g="same-origin",fetchOptions:y}=Jr(t);d=d?(d+"").toLowerCase():"text";let f=Gi([o,n&&n.toAbortSignal()],i),N;const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let x;try{if(l&&Ki&&r!=="get"&&r!=="head"&&(x=await Zi(h,a))!==0){let w=new Request(s,{method:"POST",body:a,duplex:"half"}),P;if(A.isFormData(a)&&(P=w.headers.get("content-type"))&&h.setContentType(P),w.body){const[b,m]=Us(x,St(Bs(l)));a=qs(w.body,Hs,b,m)}}A.isString(g)||(g=g?"include":"omit");const S="credentials"in Request.prototype;N=new Request(s,{...y,signal:f,method:r.toUpperCase(),headers:h.normalize().toJSON(),body:a,duplex:"half",credentials:S?g:void 0});let j=await fetch(N,y);const v=ds&&(d==="stream"||d==="response");if(ds&&(c||v&&p)){const w={};["status","statusText","headers"].forEach(k=>{w[k]=j[k]});const P=A.toFiniteNumber(j.headers.get("content-length")),[b,m]=c&&Us(P,St(Bs(c),!0))||[];j=new Response(qs(j.body,Hs,b,()=>{m&&m(),p&&p()}),w)}d=d||"text";let C=await kt[A.findKey(kt,d)||"text"](j,t);return!v&&p&&p(),await new Promise((w,P)=>{Yr(w,P,{data:C,headers:ae.from(j.headers),status:j.status,statusText:j.statusText,config:t,request:N})})}catch(S){throw p&&p(),S&&S.name==="TypeError"&&/Load failed|fetch/i.test(S.message)?Object.assign(new _("Network Error",_.ERR_NETWORK,t,N),{cause:S.cause||S}):_.from(S,S&&S.code,t,N)}}),us={http:pi,xhr:Hi,fetch:el};A.forEach(us,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Gs=t=>`- ${t}`,tl=t=>A.isFunction(t)||t===null||t===!1,Zr={getAdapter:t=>{t=A.isArray(t)?t:[t];const{length:s}=t;let r,a;const o={};for(let n=0;n<s;n++){r=t[n];let i;if(a=r,!tl(r)&&(a=us[(i=String(r)).toLowerCase()],a===void 0))throw new _(`Unknown adapter '${i}'`);if(a)break;o[i||"#"+n]=a}if(!a){const n=Object.entries(o).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let i=s?n.length>1?`since :
`+n.map(Gs).join(`
`):" "+Gs(n[0]):"as no adapter specified";throw new _("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return a},adapters:us};function Jt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new We(null,t)}function Ws(t){return Jt(t),t.headers=ae.from(t.headers),t.data=Xt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Zr.getAdapter(t.adapter||dt.adapter)(t).then(function(a){return Jt(t),a.data=Xt.call(t,t.transformResponse,a),a.headers=ae.from(a.headers),a},function(a){return Wr(a)||(Jt(t),a&&a.response&&(a.response.data=Xt.call(t,t.transformResponse,a.response),a.response.headers=ae.from(a.response.headers))),Promise.reject(a)})}const ea="1.11.0",Ut={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Ut[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Ys={};Ut.transitional=function(s,r,a){function o(n,i){return"[Axios v"+ea+"] Transitional option '"+n+"'"+i+(a?". "+a:"")}return(n,i,c)=>{if(s===!1)throw new _(o(i," has been removed"+(r?" in "+r:"")),_.ERR_DEPRECATED);return r&&!Ys[i]&&(Ys[i]=!0,console.warn(o(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(n,i,c):!0}};Ut.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function sl(t,s,r){if(typeof t!="object")throw new _("options must be an object",_.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const n=a[o],i=s[n];if(i){const c=t[n],l=c===void 0||i(c,n,t);if(l!==!0)throw new _("option "+n+" must be "+l,_.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new _("Unknown option "+n,_.ERR_BAD_OPTION)}}const vt={assertOptions:sl,validators:Ut},ye=vt.validators;let Re=class{constructor(s){this.defaults=s||{},this.interceptors={request:new $s,response:new $s}}async request(s,r){try{return await this._request(s,r)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const n=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?n&&!String(a.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+n):a.stack=n}catch{}}throw a}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=Ie(this.defaults,r);const{transitional:a,paramsSerializer:o,headers:n}=r;a!==void 0&&vt.assertOptions(a,{silentJSONParsing:ye.transitional(ye.boolean),forcedJSONParsing:ye.transitional(ye.boolean),clarifyTimeoutError:ye.transitional(ye.boolean)},!1),o!=null&&(A.isFunction(o)?r.paramsSerializer={serialize:o}:vt.assertOptions(o,{encode:ye.function,serialize:ye.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),vt.assertOptions(r,{baseUrl:ye.spelling("baseURL"),withXsrfToken:ye.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=n&&A.merge(n.common,n[r.method]);n&&A.forEach(["delete","get","head","post","put","patch","common"],N=>{delete n[N]}),r.headers=ae.concat(i,n);const c=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(l=l&&p.synchronous,c.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let h,g=0,y;if(!l){const N=[Ws.bind(this),void 0];for(N.unshift(...c),N.push(...d),y=N.length,h=Promise.resolve(r);g<y;)h=h.then(N[g++],N[g++]);return h}y=c.length;let f=r;for(g=0;g<y;){const N=c[g++],p=c[g++];try{f=N(f)}catch(x){p.call(this,x);break}}try{h=Ws.call(this,f)}catch(N){return Promise.reject(N)}for(g=0,y=d.length;g<y;)h=h.then(d[g++],d[g++]);return h}getUri(s){s=Ie(this.defaults,s);const r=Xr(s.baseURL,s.url,s.allowAbsoluteUrls);return qr(r,s.params,s.paramsSerializer)}};A.forEach(["delete","get","head","options"],function(s){Re.prototype[s]=function(r,a){return this.request(Ie(a||{},{method:s,url:r,data:(a||{}).data}))}});A.forEach(["post","put","patch"],function(s){function r(a){return function(n,i,c){return this.request(Ie(c||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Re.prototype[s]=r(),Re.prototype[s+"Form"]=r(!0)});let rl=class ta{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(n){r=n});const a=this;this.promise.then(o=>{if(!a._listeners)return;let n=a._listeners.length;for(;n-- >0;)a._listeners[n](o);a._listeners=null}),this.promise.then=o=>{let n;const i=new Promise(c=>{a.subscribe(c),n=c}).then(o);return i.cancel=function(){a.unsubscribe(n)},i},s(function(n,i,c){a.reason||(a.reason=new We(n,i,c),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new ta(function(o){s=o}),cancel:s}}};function al(t){return function(r){return t.apply(null,r)}}function nl(t){return A.isObject(t)&&t.isAxiosError===!0}const ms={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ms).forEach(([t,s])=>{ms[s]=t});function sa(t){const s=new Re(t),r=Dr(Re.prototype.request,s);return A.extend(r,Re.prototype,s,{allOwnKeys:!0}),A.extend(r,s,null,{allOwnKeys:!0}),r.create=function(o){return sa(Ie(t,o))},r}const U=sa(dt);U.Axios=Re;U.CanceledError=We;U.CancelToken=rl;U.isCancel=Wr;U.VERSION=ea;U.toFormData=$t;U.AxiosError=_;U.Cancel=U.CanceledError;U.all=function(s){return Promise.all(s)};U.spread=al;U.isAxiosError=nl;U.mergeConfig=Ie;U.AxiosHeaders=ae;U.formToJSON=t=>Gr(A.isHTMLForm(t)?new FormData(t):t);U.getAdapter=Zr.getAdapter;U.HttpStatusCode=ms;U.default=U;const{Axios:Fd,AxiosError:Ld,CanceledError:_d,isCancel:$d,CancelToken:zd,VERSION:Ud,all:Bd,Cancel:Vd,isAxiosError:qd,spread:Hd,toFormData:Gd,AxiosHeaders:Wd,HttpStatusCode:Yd,formToJSON:Xd,getAdapter:Jd,mergeConfig:Kd}=U,ra=u.createContext(void 0),ol=`${He.apiBaseUrl}/api/v1`;U.defaults.baseURL=ol;const il=({children:t})=>{const[s,r]=u.useState(null),[a,o]=u.useState(null),[n,i]=u.useState([]),[c,l]=u.useState(null),[d,h]=u.useState(!0),g=!!a&&!!s;u.useEffect(()=>{console.log("🔍 AuthContext: Authentication state changed:",{isAuthenticated:g,hasToken:!!a,hasUser:!!s,userEmail:s?.email,isLoading:d})},[g,a,s,d]),u.useEffect(()=>{a?(U.defaults.headers.common.Authorization=`Bearer ${a}`,localStorage.setItem("authToken",a)):(delete U.defaults.headers.common.Authorization,localStorage.removeItem("authToken"))},[a]),u.useEffect(()=>{console.log("🔍 AuthContext: Initializing authentication state");const C=localStorage.getItem("authToken"),w=localStorage.getItem("authUser"),P=localStorage.getItem("authOrgs"),b=localStorage.getItem("authSelectedOrg");if(console.log("🔍 AuthContext: Stored data found:",{hasToken:!!C,hasUser:!!w,hasOrgs:!!P,hasSelectedOrg:!!b,tokenPrefix:C?`${C.substring(0,10)}...`:"none"}),C&&w)try{console.log("🔍 AuthContext: Restoring authentication state");const m=JSON.parse(w);r(m),o(C),P&&i(JSON.parse(P)),b&&l(JSON.parse(b)),console.log("🔍 AuthContext: Authentication state restored successfully",{userEmail:m.email,userId:m.userId})}catch(m){console.error("Failed to restore auth state:",m),localStorage.removeItem("authToken"),localStorage.removeItem("authUser"),localStorage.removeItem("authOrgs"),localStorage.removeItem("authSelectedOrg")}else console.log("🔍 AuthContext: No stored authentication data found");h(!1)},[]);const y=async(C,w,P)=>{try{const b=await U.post("/auth/login",{email:C,password:w,twoFactorToken:P});if(b.data.requiresTwoFactor)return{requiresTwoFactor:!0,success:!1,message:b.data.message};const{token:m,userId:k,fullName:O,email:I,twoFactorEnabled:T,orgId:R,role:L,orgName:F,organizations:z}=b.data;o(m);const H={userId:k,fullName:O||"",email:I||C,twoFactorEnabled:T||!1};r(H),localStorage.setItem("authUser",JSON.stringify(H));const Y=z.map(ee=>({org_id:ee.org_id,org_name:ee.org_name,role:ee.role,industry:ee.industry,size:ee.size}));i(Y),localStorage.setItem("authOrgs",JSON.stringify(Y));const Ne=Y.find(ee=>ee.org_id===R)||Y[0];return l(Ne),localStorage.setItem("authSelectedOrg",JSON.stringify(Ne)),{success:!0,message:"Login successful"}}catch(b){return console.error("Login error:",b),{success:!1,message:b.response?.data?.error||"Login failed"}}},f=()=>{o(null),r(null),i([]),l(null)},N=async C=>{try{const w=await U.post("/auth/orgs",C),{token:P,userId:b,orgId:m,role:k}=w.data;o(P),r({userId:b,fullName:C.fullName,email:C.email,twoFactorEnabled:!1});const O={org_id:m,org_name:C.orgName,role:k,industry:C.industry,size:C.size};return i([O]),l(O),{success:!0,message:"Organization created successfully"}}catch(w){return console.error("Create organization error:",w),{success:!1,message:w.response?.data?.error||"Failed to create organization"}}},p=async C=>{try{const w=await U.get(`/auth/invites/validate?code=${C}`);return{valid:w.data.valid,orgName:w.data.orgName,role:w.data.role,email:w.data.email}}catch(w){return console.error("Validate invite error:",w),{valid:!1,message:w.response?.data?.error||"Invalid invite code"}}},x=async C=>{try{const w=await U.post("/auth/invites/accept",C),{token:P,userId:b,orgId:m,role:k}=w.data;o(P),r({userId:b,fullName:C.fullName,email:C.email,twoFactorEnabled:!1});const I=(await U.get(`/auth/users/${b}/orgs`,{headers:{Authorization:`Bearer ${P}`}})).data.map(R=>({org_id:R.org_id,org_name:R.org_name,role:R.role,industry:R.industry,size:R.size}));i(I);const T=I.find(R=>R.org_id===m)||I[0];return l(T),{success:!0,message:"Successfully joined organization"}}catch(w){return console.error("Accept invite error:",w),{success:!1,message:w.response?.data?.error||"Failed to accept invite"}}},S=async()=>{const C=await U.post("/auth/setup-2fa");return{secret:C.data.secret,qrCodeUrl:C.data.otpauth_url}},j=async C=>{try{return await U.post("/auth/verify-2fa",{token:C}),s&&r({...s,twoFactorEnabled:!0}),{success:!0,message:"2FA enabled successfully"}}catch(w){return{success:!1,message:w.response?.data?.error||"2FA verification failed"}}},v=async(C,w)=>{try{return await U.post("/auth/device-bind",{instanceId:C,deviceFingerprintHash:w}),{success:!0,message:"Device bound successfully"}}catch(P){return{success:!1,message:P.response?.data?.error||"Device binding failed"}}};return e.jsx(ra.Provider,{value:{user:s,token:a,organizations:n,selectedOrg:c,isAuthenticated:g,isLoading:d,setSelectedOrg:l,login:y,logout:f,createOrganization:N,validateInvite:p,acceptInvite:x,setupTwoFactor:S,verifyTwoFactor:j,bindDevice:v},children:t})},je=()=>{const t=u.useContext(ra);if(!t)throw new Error("useAuth must be used within AuthProvider");return t};function oe({children:t,redirectTo:s="/signin"}){const{isAuthenticated:r,isLoading:a,user:o,token:n}=je(),i=K(),[c,l]=Z.useState(!1);return u.useEffect(()=>{if(console.log("🛡️ ProtectedRoute: Auth check",{isLoading:a,isAuthenticated:r,hasToken:!!n,hasUser:!!o,userEmail:o?.email,redirectTo:s,currentPath:window.location.pathname,localStorage_token:!!localStorage.getItem("authToken"),localStorage_user:!!localStorage.getItem("authUser"),hasInitialized:c}),!a&&!c&&(console.log("🛡️ ProtectedRoute: Authentication initialization complete"),l(!0)),!a&&c&&!r){const d=setTimeout(()=>{r||(console.log("🚨 ProtectedRoute: Redirecting to signin - not authenticated after delay",{reason:n?o?"Unknown":"No user":"No token",hasLocalToken:!!localStorage.getItem("authToken"),hasLocalUser:!!localStorage.getItem("authUser")}),i(s,{replace:!0}))},100);return()=>clearTimeout(d)}},[a,r,i,s,n,o,c]),a||!c?e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted",children:a?"Loading authentication...":"Initializing..."})]})}):r?e.jsx(e.Fragment,{children:t}):null}function Kt({sessionMode:t=!1}){const{getModuleState:s,saveModuleState:r}=bs(),a=K(),o=s("AskPandaura"),[n,i]=u.useState(o.chatMessage||""),[c,l]=u.useState(!1),[d,h]=u.useState(!1);u.useEffect(()=>{const y=()=>{const p=document.querySelector('[class*="w-72"], [class*="w-16"]');if(p){const x=p.classList.contains("w-16");h(x)}};setTimeout(y,100);const f=new MutationObserver(y),N=document.body;return f.observe(N,{attributes:!0,attributeFilter:["class"],subtree:!0}),()=>f.disconnect()},[]),u.useEffect(()=>{if(!t){const y=setTimeout(()=>{r("AskPandaura",{chatMessage:n})},1e3);return()=>clearTimeout(y)}},[n,t,r]);const g=()=>c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg w-96 max-h-[80vh] overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-light",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Conversations"}),e.jsx("button",{onClick:()=>l(!1),className:"text-secondary hover:text-primary",children:e.jsx(fe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-4 border-b border-light",children:e.jsxs("button",{onClick:()=>{i(""),l(!1)},className:"w-full flex items-center justify-center gap-2 bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary transition-colors",children:[e.jsx(Me,{className:"w-4 h-4"}),"New Chat"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto max-h-[400px]",children:e.jsx("div",{className:"p-4 space-y-2",children:[{id:1,title:"TIA Portal Safety IO Configuration",time:"2 hours ago"},{id:2,title:"Motor Control Logic Help",time:"Yesterday"},{id:3,title:"SCADA System Design",time:"3 days ago"},{id:4,title:"PLC Programming Best Practices",time:"1 week ago"}].map(y=>e.jsxs("div",{onClick:()=>{i(""),l(!1),console.log("Loading conversation:",y.title)},className:"p-3 rounded-md hover:bg-gray-100 cursor-pointer transition-colors border border-light",children:[e.jsx("div",{className:"font-medium text-sm text-primary truncate",children:y.title}),e.jsx("div",{className:"text-xs text-muted mt-1",children:y.time})]},y.id))})})]})});return e.jsxs("div",{className:"flex flex-col bg-white h-full relative",children:[e.jsxs("div",{className:"p-6 max-w-4xl mx-auto flex-1 pb-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"Pandaura AS"}),e.jsx("p",{className:"text-sm text-secondary",children:"Your AI co-engineer for automation, electrical, robotics, and everything in between."})]}),e.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"View Conversations",children:e.jsx(Yn,{className:"w-6 h-6 text-primary"})})]}),e.jsxs("div",{className:"text-muted mt-4 px-6 flex flex-col items-center text-center",children:[e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-24 w-auto mb-4 filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Ask Pandaura Anything"}),e.jsx("p",{className:"text-sm",children:"Start a conversation with Pandaura or upload a document to begin."})]}),e.jsxs("div",{className:"space-y-6 mt-8 scrollable-container optimized-text",children:[e.jsx("div",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-xs font-medium text-gray-700",children:"You"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-gray-800",children:"I need to create a motor starter logic with safety interlocks for a conveyor system. Can you help me generate the structured text code for Rockwell PLC?"})})]})}),e.jsx("div",{className:"px-4 py-3 text-sm bg-gray-50",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-xs font-medium text-white",children:"P"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800 mb-3",children:"I'll help you create a comprehensive motor starter logic with safety interlocks. Here's a structured approach:"}),e.jsxs("div",{className:"text-gray-800 mb-3",children:[e.jsx("strong",{children:"Key Components:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Emergency stop circuit with latching"}),e.jsx("li",{children:"Guard door safety switches"}),e.jsx("li",{children:"Motor overload protection"}),e.jsx("li",{children:"Start/stop pushbutton logic"}),e.jsx("li",{children:"Status indicators and fault diagnostics"})]})]}),e.jsx("p",{className:"text-gray-800",children:"Would you like me to generate the complete ST code with these safety features included?"})]})]})}),e.jsx("div",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-xs font-medium text-gray-700",children:"You"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-gray-800",children:"Yes, please generate the code and also create the tag database for all the I/O points."})})]})}),e.jsx("div",{className:"px-4 py-3 text-sm bg-gray-50",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-xs font-medium text-white",children:"P"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800 mb-3",children:"Perfect! I'll generate both the ST logic and create a comprehensive tag database. Let me switch you to Logic Studio to generate the code, and then we can use the Tag Database Manager to organize all I/O points with proper naming conventions and documentation."}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>a("/logic-studio"),className:"bg-primary text-white px-3 py-1 rounded text-xs hover:bg-secondary transition-colors",children:"→ Open in Logic Studio"}),e.jsx("button",{onClick:()=>a("/tag-database"),className:"bg-white border border-light px-3 py-1 rounded text-xs hover:bg-accent-light transition-colors",children:"📋 Generate Tag Database"})]})]})]})})]})]}),e.jsx("div",{className:`fixed bottom-0 right-0 bg-white border-t px-6 py-4 shadow-md z-30 transition-all duration-200 ${d?"left-16":"left-72"}`,children:e.jsxs("div",{className:"flex items-end gap-3 max-w-4xl mx-auto",children:[e.jsx("textarea",{value:n,onChange:y=>i(y.target.value),placeholder:"Ask about PLCs, SCADA, HMI, robotics, motor control, or upload documents...",className:"flex-1 border border-light rounded-md px-4 py-3 bg-surface shadow-sm text-sm text-primary placeholder-muted resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all min-h-[44px] max-h-[120px]",rows:1,style:{height:"auto"},onInput:y=>{const f=y.target;f.style.height="auto",f.style.height=Math.min(f.scrollHeight,120)+"px"}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{console.log("Opening file upload dialog")},className:"bg-white border border-light p-3 rounded-md hover:bg-accent-light transition-colors shadow-sm",title:"Upload documents",children:e.jsx(br,{className:"w-4 h-4 text-primary"})}),e.jsx("button",{onClick:()=>{n.trim()&&(console.log("Sending message:",n),i(""))},className:"bg-primary text-white px-6 py-3 rounded-md hover:bg-secondary transition-colors text-sm font-medium shadow-sm",disabled:!n.trim(),children:e.jsx(Dt,{className:"w-4 h-4"})})]})]})}),g()]})}function ll(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Xs(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,a)}return r}function Js(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Xs(Object(r),!0).forEach(function(a){ll(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xs(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function cl(t,s){if(t==null)return{};var r={},a=Object.keys(t),o,n;for(n=0;n<a.length;n++)o=a[n],!(s.indexOf(o)>=0)&&(r[o]=t[o]);return r}function dl(t,s){if(t==null)return{};var r=cl(t,s),a,o;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(o=0;o<n.length;o++)a=n[o],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function ul(t,s){return ml(t)||hl(t,s)||xl(t,s)||pl()}function ml(t){if(Array.isArray(t))return t}function hl(t,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],a=!0,o=!1,n=void 0;try{for(var i=t[Symbol.iterator](),c;!(a=(c=i.next()).done)&&(r.push(c.value),!(s&&r.length===s));a=!0);}catch(l){o=!0,n=l}finally{try{!a&&i.return!=null&&i.return()}finally{if(o)throw n}}return r}}function xl(t,s){if(t){if(typeof t=="string")return Ks(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ks(t,s)}}function Ks(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function pl(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gl(t,s,r){return s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Qs(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,a)}return r}function Zs(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Qs(Object(r),!0).forEach(function(a){gl(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qs(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function fl(){for(var t=arguments.length,s=new Array(t),r=0;r<t;r++)s[r]=arguments[r];return function(a){return s.reduceRight(function(o,n){return n(o)},a)}}function Ze(t){return function s(){for(var r=this,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return o.length>=t.length?t.apply(this,o):function(){for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return s.apply(r,[].concat(o,c))}}}function Ct(t){return{}.toString.call(t).includes("Object")}function bl(t){return!Object.keys(t).length}function nt(t){return typeof t=="function"}function jl(t,s){return Object.prototype.hasOwnProperty.call(t,s)}function yl(t,s){return Ct(s)||Pe("changeType"),Object.keys(s).some(function(r){return!jl(t,r)})&&Pe("changeField"),s}function vl(t){nt(t)||Pe("selectorType")}function Nl(t){nt(t)||Ct(t)||Pe("handlerType"),Ct(t)&&Object.values(t).some(function(s){return!nt(s)})&&Pe("handlersType")}function wl(t){t||Pe("initialIsRequired"),Ct(t)||Pe("initialType"),bl(t)&&Pe("initialContent")}function Sl(t,s){throw new Error(t[s]||t.default)}var kl={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Pe=Ze(Sl)(kl),xt={changes:yl,selector:vl,handler:Nl,initial:wl};function Cl(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xt.initial(t),xt.handler(s);var r={current:t},a=Ze(El)(r,s),o=Ze(Pl)(r),n=Ze(xt.changes)(t),i=Ze(Al)(r);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return xt.selector(d),d(r.current)}function l(d){fl(a,o,n,i)(d)}return[c,l]}function Al(t,s){return nt(s)?s(t.current):s}function Pl(t,s){return t.current=Zs(Zs({},t.current),s),s}function El(t,s,r){return nt(s)?s(t.current):Object.keys(r).forEach(function(a){var o;return(o=s[a])===null||o===void 0?void 0:o.call(s,t.current[a])}),r}var Tl={create:Cl},Ol={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Dl(t){return function s(){for(var r=this,a=arguments.length,o=new Array(a),n=0;n<a;n++)o[n]=arguments[n];return o.length>=t.length?t.apply(this,o):function(){for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];return s.apply(r,[].concat(o,c))}}}function Rl(t){return{}.toString.call(t).includes("Object")}function Ml(t){return t||er("configIsRequired"),Rl(t)||er("configType"),t.urls?(Il(),{paths:{vs:t.urls.monacoBase}}):t}function Il(){console.warn(aa.deprecation)}function Fl(t,s){throw new Error(t[s]||t.default)}var aa={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},er=Dl(Fl)(aa),Ll={config:Ml},_l=function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return function(o){return r.reduceRight(function(n,i){return i(n)},o)}};function na(t,s){return Object.keys(s).forEach(function(r){s[r]instanceof Object&&t[r]&&Object.assign(s[r],na(t[r],s[r]))}),Js(Js({},t),s)}var $l={type:"cancelation",msg:"operation is manually canceled"};function Qt(t){var s=!1,r=new Promise(function(a,o){t.then(function(n){return s?o($l):a(n)}),t.catch(o)});return r.cancel=function(){return s=!0},r}var zl=Tl.create({config:Ol,isInitialized:!1,resolve:null,reject:null,monaco:null}),oa=ul(zl,2),ut=oa[0],Bt=oa[1];function Ul(t){var s=Ll.config(t),r=s.monaco,a=dl(s,["monaco"]);Bt(function(o){return{config:na(o.config,a),monaco:r}})}function Bl(){var t=ut(function(s){var r=s.monaco,a=s.isInitialized,o=s.resolve;return{monaco:r,isInitialized:a,resolve:o}});if(!t.isInitialized){if(Bt({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Qt(Zt);if(window.monaco&&window.monaco.editor)return ia(window.monaco),t.resolve(window.monaco),Qt(Zt);_l(Vl,Hl)(Gl)}return Qt(Zt)}function Vl(t){return document.body.appendChild(t)}function ql(t){var s=document.createElement("script");return t&&(s.src=t),s}function Hl(t){var s=ut(function(a){var o=a.config,n=a.reject;return{config:o,reject:n}}),r=ql("".concat(s.config.paths.vs,"/loader.js"));return r.onload=function(){return t()},r.onerror=s.reject,r}function Gl(){var t=ut(function(r){var a=r.config,o=r.resolve,n=r.reject;return{config:a,resolve:o,reject:n}}),s=window.require;s.config(t.config),s(["vs/editor/editor.main"],function(r){ia(r),t.resolve(r)},function(r){t.reject(r)})}function ia(t){ut().monaco||Bt({monaco:t})}function Wl(){return ut(function(t){var s=t.monaco;return s})}var Zt=new Promise(function(t,s){return Bt({resolve:t,reject:s})}),la={config:Ul,init:Bl,__getMonacoInstance:Wl},Yl={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},es=Yl,Xl={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Jl=Xl;function Kl({children:t}){return Z.createElement("div",{style:Jl.container},t)}var Ql=Kl,Zl=Ql;function ec({width:t,height:s,isEditorReady:r,loading:a,_ref:o,className:n,wrapperProps:i}){return Z.createElement("section",{style:{...es.wrapper,width:t,height:s},...i},!r&&Z.createElement(Zl,null,a),Z.createElement("div",{ref:o,style:{...es.fullWidth,...!r&&es.hide},className:n}))}var tc=ec,ca=u.memo(tc);function sc(t){u.useEffect(t,[])}var da=sc;function rc(t,s,r=!0){let a=u.useRef(!0);u.useEffect(a.current||!r?()=>{a.current=!1}:t,s)}var ie=rc;function tt(){}function _e(t,s,r,a){return ac(t,a)||nc(t,s,r,a)}function ac(t,s){return t.editor.getModel(ua(t,s))}function nc(t,s,r,a){return t.editor.createModel(s,r,a?ua(t,a):void 0)}function ua(t,s){return t.Uri.parse(s)}function oc({original:t,modified:s,language:r,originalLanguage:a,modifiedLanguage:o,originalModelPath:n,modifiedModelPath:i,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:l=!1,theme:d="light",loading:h="Loading...",options:g={},height:y="100%",width:f="100%",className:N,wrapperProps:p={},beforeMount:x=tt,onMount:S=tt}){let[j,v]=u.useState(!1),[C,w]=u.useState(!0),P=u.useRef(null),b=u.useRef(null),m=u.useRef(null),k=u.useRef(S),O=u.useRef(x),I=u.useRef(!1);da(()=>{let F=la.init();return F.then(z=>(b.current=z)&&w(!1)).catch(z=>z?.type!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>P.current?L():F.cancel()}),ie(()=>{if(P.current&&b.current){let F=P.current.getOriginalEditor(),z=_e(b.current,t||"",a||r||"text",n||"");z!==F.getModel()&&F.setModel(z)}},[n],j),ie(()=>{if(P.current&&b.current){let F=P.current.getModifiedEditor(),z=_e(b.current,s||"",o||r||"text",i||"");z!==F.getModel()&&F.setModel(z)}},[i],j),ie(()=>{let F=P.current.getModifiedEditor();F.getOption(b.current.editor.EditorOption.readOnly)?F.setValue(s||""):s!==F.getValue()&&(F.executeEdits("",[{range:F.getModel().getFullModelRange(),text:s||"",forceMoveMarkers:!0}]),F.pushUndoStop())},[s],j),ie(()=>{P.current?.getModel()?.original.setValue(t||"")},[t],j),ie(()=>{let{original:F,modified:z}=P.current.getModel();b.current.editor.setModelLanguage(F,a||r||"text"),b.current.editor.setModelLanguage(z,o||r||"text")},[r,a,o],j),ie(()=>{b.current?.editor.setTheme(d)},[d],j),ie(()=>{P.current?.updateOptions(g)},[g],j);let T=u.useCallback(()=>{if(!b.current)return;O.current(b.current);let F=_e(b.current,t||"",a||r||"text",n||""),z=_e(b.current,s||"",o||r||"text",i||"");P.current?.setModel({original:F,modified:z})},[r,s,o,t,a,n,i]),R=u.useCallback(()=>{!I.current&&m.current&&(P.current=b.current.editor.createDiffEditor(m.current,{automaticLayout:!0,...g}),T(),b.current?.editor.setTheme(d),v(!0),I.current=!0)},[g,d,T]);u.useEffect(()=>{j&&k.current(P.current,b.current)},[j]),u.useEffect(()=>{!C&&!j&&R()},[C,j,R]);function L(){let F=P.current?.getModel();c||F?.original?.dispose(),l||F?.modified?.dispose(),P.current?.dispose()}return Z.createElement(ca,{width:f,height:y,isEditorReady:j,loading:h,_ref:m,className:N,wrapperProps:p})}var ic=oc;u.memo(ic);function lc(t){let s=u.useRef();return u.useEffect(()=>{s.current=t},[t]),s.current}var cc=lc,pt=new Map;function dc({defaultValue:t,defaultLanguage:s,defaultPath:r,value:a,language:o,path:n,theme:i="light",line:c,loading:l="Loading...",options:d={},overrideServices:h={},saveViewState:g=!0,keepCurrentModel:y=!1,width:f="100%",height:N="100%",className:p,wrapperProps:x={},beforeMount:S=tt,onMount:j=tt,onChange:v,onValidate:C=tt}){let[w,P]=u.useState(!1),[b,m]=u.useState(!0),k=u.useRef(null),O=u.useRef(null),I=u.useRef(null),T=u.useRef(j),R=u.useRef(S),L=u.useRef(),F=u.useRef(a),z=cc(n),H=u.useRef(!1),Y=u.useRef(!1);da(()=>{let G=la.init();return G.then(ne=>(k.current=ne)&&m(!1)).catch(ne=>ne?.type!=="cancelation"&&console.error("Monaco initialization: error:",ne)),()=>O.current?ee():G.cancel()}),ie(()=>{let G=_e(k.current,t||a||"",s||o||"",n||r||"");G!==O.current?.getModel()&&(g&&pt.set(z,O.current?.saveViewState()),O.current?.setModel(G),g&&O.current?.restoreViewState(pt.get(n)))},[n],w),ie(()=>{O.current?.updateOptions(d)},[d],w),ie(()=>{!O.current||a===void 0||(O.current.getOption(k.current.editor.EditorOption.readOnly)?O.current.setValue(a):a!==O.current.getValue()&&(Y.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:a,forceMoveMarkers:!0}]),O.current.pushUndoStop(),Y.current=!1))},[a],w),ie(()=>{let G=O.current?.getModel();G&&o&&k.current?.editor.setModelLanguage(G,o)},[o],w),ie(()=>{c!==void 0&&O.current?.revealLine(c)},[c],w),ie(()=>{k.current?.editor.setTheme(i)},[i],w);let Ne=u.useCallback(()=>{if(!(!I.current||!k.current)&&!H.current){R.current(k.current);let G=n||r,ne=_e(k.current,a||t||"",s||o||"",G||"");O.current=k.current?.editor.create(I.current,{model:ne,automaticLayout:!0,...d},h),g&&O.current.restoreViewState(pt.get(G)),k.current.editor.setTheme(i),c!==void 0&&O.current.revealLine(c),P(!0),H.current=!0}},[t,s,r,a,o,n,d,h,g,i,c]);u.useEffect(()=>{w&&T.current(O.current,k.current)},[w]),u.useEffect(()=>{!b&&!w&&Ne()},[b,w,Ne]),F.current=a,u.useEffect(()=>{w&&v&&(L.current?.dispose(),L.current=O.current?.onDidChangeModelContent(G=>{Y.current||v(O.current.getValue(),G)}))},[w,v]),u.useEffect(()=>{if(w){let G=k.current.editor.onDidChangeMarkers(ne=>{let xe=O.current.getModel()?.uri;if(xe&&ne.find(V=>V.path===xe.path)){let V=k.current.editor.getModelMarkers({resource:xe});C?.(V)}});return()=>{G?.dispose()}}return()=>{}},[w,C]);function ee(){L.current?.dispose(),y?g&&pt.set(n,O.current.saveViewState()):O.current.getModel()?.dispose(),O.current.dispose()}return Z.createElement(ca,{width:f,height:N,isEditorReady:w,loading:l,_ref:I,className:p,wrapperProps:x})}var uc=dc,mc=u.memo(uc),hc=mc;function xc({message:t,onApply:s}){return e.jsxs("div",{className:"absolute z-50 bg-white border border-light rounded-md shadow-md p-3 w-64 text-sm",children:[e.jsx("div",{className:"text-primary mb-2",children:t}),e.jsx("button",{onClick:s,className:"bg-primary text-white px-3 py-1 rounded-md hover:bg-secondary transition-colors text-xs",children:"✅ Apply Fix"})]})}function pc({suggestion:t,onApply:s,onDismiss:r}){const[a,o]=u.useState(!1);return t?e.jsxs("div",{className:"bg-accent-light border border-accent rounded-md p-3 mb-2 relative",children:[e.jsx("button",{onClick:r,className:"absolute top-2 right-2 text-muted hover:text-primary",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[e.jsx(os,{className:"w-5 h-5 text-accent mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-primary text-sm",children:t.message}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("button",{onClick:()=>o(!a),className:"text-xs bg-white border border-light px-3 py-1 rounded hover:bg-gray-50 transition-colors flex items-center gap-1",children:[e.jsx(jr,{className:"w-3 h-3"}),a?"Hide Preview":"Show Preview"]}),e.jsx("button",{onClick:()=>s(t.refactoredCode),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors",children:"Apply Refactor"}),e.jsx("button",{onClick:r,className:"text-xs text-muted hover:text-primary px-2 py-1",children:"Dismiss"})]}),a&&e.jsx("div",{className:"mt-3 text-xs",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-1",children:"Before:"}),e.jsx("pre",{className:"bg-gray-100 p-2 rounded border text-xs overflow-x-auto",children:t.originalCode})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-1",children:"After:"}),e.jsx("pre",{className:"bg-green-50 p-2 rounded border text-xs overflow-x-auto",children:t.refactoredCode})]})]})})]})]})]}):null}function gc({isVisible:t,selectedText:s,selectedLine:r,position:a,onExplain:o,onRefactor:n,onSimplify:i,onTagEdit:c}){const[l,d]=u.useState(!1),[h,g]=u.useState(""),y=[{id:"explain",icon:e.jsx(os,{className:"w-4 h-4"}),label:"Explain",onClick:()=>{const p=f(s);g(p),d(!0),o(s)},variant:"accent"},{id:"refactor",icon:e.jsx(me,{className:"w-4 h-4"}),label:"Refactor",onClick:()=>n(s),variant:"primary"},{id:"simplify",icon:e.jsx(Ar,{className:"w-4 h-4"}),label:"Simplify",onClick:()=>i(s),variant:"secondary"},{id:"tags",icon:e.jsx(fo,{className:"w-4 h-4"}),label:"Tag Edit",onClick:()=>c(r),variant:"secondary"}],f=p=>p.includes("IF")&&p.includes("THEN")?"This is a conditional logic block that checks if certain conditions are met before executing actions. The IF statement evaluates boolean conditions and executes the THEN clause when true.":p.includes("CASE")?"This CASE statement provides multi-way branching logic, evaluating an expression and executing different code blocks based on matching values. It's more efficient than multiple IF-ELSE statements.":p.includes(":=")?"This is an assignment operation that sets a variable to a specific value. The ':=' operator is used in structured text to assign values to variables.":p.includes("AND")||p.includes("OR")?"This contains boolean logic operators that combine multiple conditions. AND requires all conditions to be true, while OR requires at least one condition to be true.":"This code block contains PLC logic that controls industrial automation processes. The structured text follows IEC 61131-3 standards for programmable controller programming.",N=(p="secondary")=>{const x="p-2 rounded shadow-sm text-xs font-medium transition-all duration-150 flex items-center gap-1 whitespace-nowrap";switch(p){case"primary":return`${x} bg-primary text-white hover:bg-secondary`;case"accent":return`${x} bg-accent text-white hover:bg-purple-600`;default:return`${x} bg-white border border-light text-primary hover:bg-accent-light`}};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed z-50 bg-white border border-light rounded-lg shadow-lg p-1 flex gap-1",style:{left:a.x,top:a.y-50,transform:"translateX(-50%)"},children:y.map(p=>e.jsxs("button",{onClick:p.onClick,className:N(p.variant),title:p.label,children:[p.icon,e.jsx("span",{className:"hidden sm:inline",children:p.label})]},p.id))}),l&&e.jsx("div",{className:"fixed z-40 bg-blue-50 border border-blue-200 rounded-lg shadow-lg p-3 max-w-md",style:{left:a.x,top:a.y+20,transform:"translateX(-50%)"},children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(os,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-800 text-xs mb-1",children:"Code Explanation:"}),e.jsx("div",{className:"text-blue-700 text-xs leading-relaxed",children:h})]})]}),e.jsx("button",{onClick:()=>d(!1),className:"text-blue-400 hover:text-blue-600 flex-shrink-0",children:e.jsx(Nt,{className:"w-3 h-3"})})]})})]}):null}const tr={Rockwell:`PROGRAM Main
    VAR
        MotorStart : BOOL;
        MotorStop : BOOL;
        MotorRunning : BOOL;
    END_VAR

    IF MotorStart AND NOT MotorStop THEN
        MotorRunning := TRUE;
    ELSE
        MotorRunning := FALSE;
    END_IF;
END_PROGRAM`,Siemens:`PROGRAM Main
    VAR
        StartButton : BOOL;
        StopButton : BOOL;
        MotorState : BOOL;
    END_VAR

    IF StartButton = TRUE AND StopButton = FALSE THEN
        MotorState := TRUE;
    ELSE
        MotorState := FALSE;
    END_IF;
END_PROGRAM`,Beckhoff:`PROGRAM PLC_PRG
    VAR
        Start : BOOL;
        Stop : BOOL;
        Output : BOOL;
    END_VAR

    IF Start AND NOT Stop THEN
        Output := TRUE;
    ELSE
        Output := FALSE;
    END_IF;
END_PROGRAM`};function fc({initialCode:t,vendorType:s,onChange:r}){const[a,o]=u.useState(t),[n,i]=u.useState(!1),[c,l]=u.useState({top:0,left:0}),[d,h]=u.useState(!1),[g,y]=u.useState(!1),[f,N]=u.useState(""),[p,x]=u.useState(0),[S,j]=u.useState({x:0,y:0});u.useEffect(()=>{if(!t&&s in tr){const m=tr[s];o(m),r(m)}},[t,s,r]);const v=m=>{const k=m||"";o(k),r(k),k.includes("undefined_tag")?(i(!0),l({top:50,left:200})):i(!1)},C=()=>{const m=a.replace("undefined_tag","defined_tag");o(m),r(m),i(!1)};u.useEffect(()=>{a.includes("IF")&&a.includes("ELSE")&&a.includes("IF")?h(!0):h(!1)},[a]);const w={type:"nested-conditionals",message:"This nested IF structure can be simplified with a CASE block. Want to refactor?",originalCode:`IF condition1 THEN
  IF condition2 THEN
    result := 1;
  ELSE
    result := 2;
  END_IF;
ELSE
  result := 0;
END_IF;`,refactoredCode:`CASE TRUE OF
  condition1 AND condition2: result := 1;
  condition1 AND NOT condition2: result := 2;
  ELSE result := 0;
END_CASE;`,line:10},P=m=>{o(m),r(m),h(!1)},b=m=>{if(m&&m.startLineNumber&&m.endLineNumber){const k=m.startLineNumber,T=a.split(`
`).slice(m.startLineNumber-1,m.endLineNumber).join(`
`);T.trim()?(N(T),x(k),j({x:300,y:k*20+100}),y(!0)):y(!1)}};return e.jsxs("div",{className:"relative w-full h-[90vh]",children:[d&&e.jsx(pc,{suggestion:w,onApply:P,onDismiss:()=>h(!1)}),e.jsx("div",{className:"border border-light rounded shadow-sm h-full",children:e.jsx(hc,{height:"100%",language:"pascal",theme:"vs-light",value:a,onChange:v,onMount:m=>{m.onDidChangeCursorSelection(k=>{b(k.selection)})},options:{fontSize:14,minimap:{enabled:!1},scrollBeyondLastLine:!1,selectOnLineNumbers:!0,glyphMargin:!0,folding:!0,lineNumbers:"on",scrollbar:{vertical:"visible",horizontal:"visible",verticalScrollbarSize:14,horizontalScrollbarSize:14},wordWrap:"on",automaticLayout:!0}})}),n&&e.jsx("div",{className:"absolute z-50",style:{top:c.top,left:c.left},children:e.jsx(xc,{message:"Looks like this tag is undefined. Do you want to auto-fix it?",onApply:C})}),e.jsx(gc,{isVisible:g,selectedText:f,selectedLine:p,position:S,onExplain:m=>console.log("Explaining:",m),onRefactor:m=>console.log("Refactoring:",m),onSimplify:m=>console.log("Simplifying:",m),onTagEdit:m=>console.log("Editing tags for line:",m)})]})}function bc(){return e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2",children:[e.jsx("button",{onClick:()=>{console.log("AI Refactoring logic..."),alert("AI is analyzing your code structure and will suggest improvements for better readability and performance.")},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Refactor Logic",children:e.jsx(Ar,{className:"w-5 h-5 text-primary"})}),e.jsx("button",{onClick:()=>{console.log("AI Explaining code..."),alert(`AI Code Explanation:

This logic implements a motor control sequence with safety interlocks. The code structure follows industry standards with proper error handling and safety protocols.`)},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Explain Code",children:e.jsx(Ya,{className:"w-5 h-5 text-primary"})}),e.jsx("button",{onClick:()=>{console.log("AI Highlighting variables..."),alert(`Variable Analysis:

✓ Input Variables: 12 found
✓ Output Variables: 8 found
✓ Internal Variables: 15 found
✓ Safety Variables: 6 found

All variables are properly documented and follow naming conventions.`)},className:"bg-white border border-light p-3 rounded-full shadow-md hover:bg-accent-light transition-colors",title:"Highlight Variables",children:e.jsx(et,{className:"w-5 h-5 text-primary"})})]})}function jc({suggestions:t=[],onClose:s}){return t.length?e.jsxs("div",{className:"bg-white border border-light rounded-md shadow-sm p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[e.jsx(ho,{className:"w-4 h-4 text-accent"}),"AI Suggestions"]}),s&&e.jsx("button",{onClick:s,className:"text-muted hover:text-primary transition-colors p-1",title:"Close AI Suggestions",children:e.jsx(fe,{className:"w-4 h-4"})})]}),e.jsx("ul",{className:"space-y-1",children:t.map((r,a)=>e.jsx("li",{className:"px-3 py-1 rounded hover:bg-accent-light cursor-pointer text-sm",onClick:()=>{navigator.clipboard.writeText(r)},title:"Click to copy to clipboard",children:r},a))})]}):null}function yc({isEnabled:t,onToggle:s,diffs:r,originalCode:a,modifiedCode:o,aiSummary:n,onReintegrate:i,onRevert:c}){const[l,d]=u.useState(!1);return e.jsxs("div",{className:"border border-light rounded-md bg-white shadow-sm",children:[e.jsx("div",{className:"p-3 border-b border-light",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:h=>s(h.target.checked),className:"accent-primary"}),e.jsx(Nn,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-primary",children:"Compare with Original"})]}),t&&r.length>0&&e.jsxs("span",{className:"text-xs text-accent bg-accent-light px-2 py-1 rounded",children:[r.length," change",r.length!==1?"s":""]})]})}),t&&e.jsx("div",{className:"p-3",children:r.length===0?e.jsxs("div",{className:"text-center text-muted text-sm py-4",children:[e.jsx(ps,{className:"w-5 h-5 mx-auto mb-2 text-green-500"}),"No changes detected"]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded border border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-800 text-xs",children:"AI Analysis:"}),e.jsx("div",{className:"text-blue-700 text-xs",children:n})]})]})}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>d(!l),className:"text-xs bg-white border border-light px-3 py-1 rounded hover:bg-gray-50 transition-colors",children:[l?"Hide":"Show"," Diff View"]}),e.jsx("button",{onClick:i,className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition-colors",children:"Reintegrate into AI"}),e.jsxs("button",{onClick:c,className:"text-xs bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700 transition-colors flex items-center gap-1",children:[e.jsx(wt,{className:"w-3 h-3"}),"Undo Changes"]})]}),l&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-2",children:"Original Code:"}),e.jsx("pre",{className:"bg-gray-100 p-3 rounded border h-40 overflow-auto font-mono",children:a})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-muted mb-2",children:"Modified Code:"}),e.jsx("pre",{className:"bg-green-50 p-3 rounded border h-40 overflow-auto font-mono",children:o})]})]}),e.jsx("div",{className:"space-y-1",children:r.map((h,g)=>e.jsxs("div",{className:`p-2 rounded text-xs ${h.type==="added"?"bg-green-50 border border-green-200":h.type==="removed"?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:[e.jsxs("div",{className:"font-medium mb-1",children:["Line ",h.line,": ",h.type==="added"?"Added":h.type==="removed"?"Removed":"Changed"]}),h.type!=="added"&&e.jsxs("div",{className:"text-red-700",children:["- ",h.original]}),h.type!=="removed"&&e.jsxs("div",{className:"text-green-700",children:["+ ",h.modified]})]},g))})]})})]})}function vc({onSearch:t,onSelectResult:s,placeholder:r="Search routines, logic, variables..."}){const[a,o]=u.useState(""),[n,i]=u.useState([]),[c,l]=u.useState(!1),[d,h]=u.useState(-1),g=u.useRef(null),y=u.useRef(null),f=S=>{if(!S.trim()){i([]),l(!1);return}const j=[{id:"1",type:"routine",title:"Conveyor_2_Start",description:"Motor starter routine for conveyor 2",line:45,routine:"Main",preview:"IF Start_Button AND NOT E_Stop THEN Conveyor_2_Run := TRUE;",confidence:95},{id:"2",type:"block",title:"Overload Protection Logic",description:"Motor overload detection and response",line:78,routine:"Safety_Check",preview:"IF Motor_Current > Max_Current THEN Overload_Fault := TRUE;",confidence:87},{id:"3",type:"variable",title:"Conveyor_2_Status",description:"Boolean status indicator for conveyor 2",line:12,routine:"Main",preview:"VAR Conveyor_2_Status : BOOL := FALSE;",confidence:92}].filter(v=>v.title.toLowerCase().includes(S.toLowerCase())||v.description.toLowerCase().includes(S.toLowerCase())||v.preview.toLowerCase().includes(S.toLowerCase()));i(j),l(j.length>0),h(-1)},N=S=>{if(!(!c||n.length===0))switch(S.key){case"ArrowDown":S.preventDefault(),h(j=>Math.min(j+1,n.length-1));break;case"ArrowUp":S.preventDefault(),h(j=>Math.max(j-1,-1));break;case"Enter":S.preventDefault(),d>=0&&p(n[d]);break;case"Escape":l(!1),h(-1),g.current?.blur();break}},p=S=>{s(S),o(S.title),l(!1),h(-1)},x=S=>{switch(S){case"routine":return e.jsx(Te,{className:"w-4 h-4 text-blue-500"});case"block":return e.jsx(jr,{className:"w-4 h-4 text-green-500"});case"variable":return e.jsx(It,{className:"w-4 h-4 text-purple-500"});case"comment":return e.jsx(Is,{className:"w-4 h-4 text-gray-500"});default:return e.jsx(et,{className:"w-4 h-4 text-gray-500"})}};return u.useEffect(()=>{const S=j=>{y.current&&!y.current.contains(j.target)&&l(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),e.jsxs("div",{ref:y,className:"relative w-full max-w-md",children:[e.jsxs("div",{className:"relative",children:[e.jsx(et,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted"}),e.jsx("input",{ref:g,type:"text",value:a,onChange:S=>{o(S.target.value),f(S.target.value)},onKeyDown:N,onFocus:()=>a.trim()&&l(n.length>0),placeholder:r,className:"w-full pl-10 pr-4 py-2 border border-light rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all"})]}),c&&n.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-light rounded-md shadow-lg z-50 max-h-64 overflow-y-auto",children:n.map((S,j)=>e.jsx("div",{onClick:()=>p(S),className:`p-3 cursor-pointer transition-colors ${j===d?"bg-accent-light":"hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[x(S.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-primary truncate",children:S.title}),e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-1 rounded",children:[S.confidence,"%"]})]}),e.jsx("div",{className:"text-xs text-muted mb-1",children:S.description}),e.jsxs("div",{className:"text-xs text-muted",children:[e.jsx("span",{className:"font-mono",children:S.routine})," • Line ",S.line]}),e.jsx("div",{className:"text-xs font-mono bg-gray-50 p-1 rounded mt-1 truncate",children:S.preview})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(Is,{className:"w-3 h-3 text-muted"})})]})},S.id))}),c&&a.trim()&&n.length===0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-light rounded-md shadow-lg z-50 p-3",children:e.jsxs("div",{className:"text-center text-muted text-sm",children:[e.jsx(et,{className:"w-5 h-5 mx-auto mb-1 opacity-50"}),'No results found for "',a,'"']})})]})}const sr=["Rockwell","Siemens","Beckhoff"];function ts({sessionMode:t=!1}){const{getModuleState:s,saveModuleState:r}=bs(),a=s("LogicStudio"),[o,n]=u.useState(a.prompt||""),[i,c]=u.useState(a.editorCode||`PROGRAM Main
  VAR
    Start_Button    : BOOL;
    Stop_Button     : BOOL;
    Emergency_Stop  : BOOL;
    Motor_Contactor : BOOL;
    Motor_Running   : BOOL;
    Safety_OK       : BOOL;
  END_VAR

  // Safety Circuit
  Safety_OK := NOT Emergency_Stop;

  // Motor Control Logic
  IF Start_Button AND Safety_OK AND NOT Stop_Button THEN
    Motor_Contactor := TRUE;
  ELSIF Stop_Button OR NOT Safety_OK THEN
    Motor_Contactor := FALSE;
  END_IF;

  Motor_Running := Motor_Contactor;

END_PROGRAM`),[l,d]=u.useState(a.vendor||"Rockwell"),[h,g]=u.useState(!1),[y,f]=u.useState(a.showPendingChanges||!1),[N,p]=u.useState(a.showAISuggestions!==void 0?a.showAISuggestions:!0),[x,S]=u.useState(a.vendorContextEnabled||!1),[j,v]=u.useState(a.isCollapsed||!1),[C,w]=u.useState(!1),[P,b]=u.useState(a.collapseLevel||0),m=u.useRef(null);u.useRef(null);const k=u.useRef(null),O=[{line:15,original:"MotorStart := TRUE;",modified:"MotorStart := Start_Button AND NOT E_Stop;",type:"changed"},{line:23,original:"",modified:"// Added safety interlock for conveyor",type:"added"}],I=u.useCallback((()=>{let L;return()=>{t||(clearTimeout(L),L=setTimeout(()=>{r("LogicStudio",{prompt:o,editorCode:i,vendor:l,showPendingChanges:y,showAISuggestions:N,vendorContextEnabled:x,isCollapsed:j,collapseLevel:P})},1e3))}})(),[t,r,o,i,l,y,N,x,j,P]);u.useEffect(()=>{I()},[I]),u.useEffect(()=>{const L=F=>{m.current&&!m.current.contains(F.target)&&g(!1),k.current&&!k.current.contains(F.target)&&w(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const T=u.useCallback(()=>{if(!o.trim()){alert("Please enter a description of the logic you want to generate.");return}console.log("Generating logic from prompt:",o);const L=`// Generated from: "${o}"
PROGRAM Generated_Logic
  VAR
    // Auto-generated variables based on prompt
    Input_Signal : BOOL;
    Output_Signal : BOOL;
    Process_Active : BOOL;
  END_VAR

  // Generated logic based on your description
  IF Input_Signal THEN
    Process_Active := TRUE;
    Output_Signal := Process_Active;
  ELSE
    Process_Active := FALSE;
    Output_Signal := FALSE;
  END_IF;

END_PROGRAM`;c(L),n(""),alert("Logic generated successfully! Review the code in the editor above.")},[o]),R=u.useCallback(L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),T())},[T]);return e.jsxs("div",{className:"flex flex-col h-full bg-background text-primary",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-bold text-primary",children:"Logic Studio"}),e.jsxs("div",{className:"relative",ref:k,children:[e.jsxs("button",{onClick:()=>w(!C),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors text-sm text-gray-600",title:"Collapse Interface",children:[e.jsx(fs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs",children:"Layout"}),j?e.jsx(Ot,{className:"w-3 h-3"}):e.jsx(Tt,{className:"w-3 h-3"})]}),C&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white border border-light rounded-lg shadow-lg p-4 z-20 w-64",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-primary mb-2",children:"Interface Layout"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Adjust the interface to your workflow needs"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"radio",name:"layout",checked:P===0,onChange:()=>{b(0),v(!1)},className:"mr-2"}),"Full Interface"]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"All panels and features visible"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"radio",name:"layout",checked:P===1,onChange:()=>{b(1),v(!0)},className:"mr-2"}),"Compact"]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"Hide side panels, keep core features"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center text-sm",children:[e.jsx("input",{type:"radio",name:"layout",checked:P===2,onChange:()=>{b(2),v(!0)},className:"mr-2"}),"Minimal"]}),e.jsx("p",{className:"text-xs text-gray-500 ml-6",children:"Editor-focused, minimal UI"})]})]}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsx("button",{onClick:()=>w(!1),className:"text-xs bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors",children:"Apply Layout"})})]})]})]}),e.jsx("div",{className:"text-sm text-secondary",children:"Project: Motor_Auto.ap14"})]}),e.jsxs("main",{className:`flex-1 flex flex-col ${P===2?"gap-3 p-3":"gap-6 p-6"} will-change-scroll`,style:{scrollBehavior:"smooth"},children:[P<2&&e.jsx("div",{className:"flex justify-end",children:e.jsx(vc,{onSearch:L=>(console.log("Searching for:",L),[]),onSelectResult:L=>{console.log("Selected result:",L)}})}),e.jsx("div",{className:"flex-1 min-h-[400px]",children:e.jsx("div",{className:"h-full border border-light rounded-md overflow-hidden shadow-sm",children:e.jsx(fc,{initialCode:i,vendorType:l,onChange:L=>c(L)})})}),P===0&&e.jsx(yc,{isEnabled:y,onToggle:f,diffs:O,originalCode:"PROGRAM Main\\n  VAR\\n    MotorStart : BOOL;\\n  END_VAR\\n  MotorStart := TRUE;\\nEND_PROGRAM",modifiedCode:"PROGRAM Main\\n  VAR\\n    MotorStart : BOOL;\\n  END_VAR\\n  // Added safety interlock for conveyor\\n  MotorStart := Start_Button AND NOT E_Stop;\\nEND_PROGRAM",aiSummary:"User added safety interlock logic and documentation. Changes improve safety compliance by checking emergency stop conditions.",onReintegrate:()=>console.log("Reintegrating changes with AI..."),onRevert:()=>{console.log("Reverting changes..."),f(!1)}}),e.jsxs("div",{className:`bg-white border border-light rounded-lg shadow-sm ${P===2?"p-2":"p-4"}`,children:[e.jsxs("div",{className:`flex ${P===2?"gap-2":"gap-3"} items-end`,children:[e.jsx("textarea",{className:`flex-1 border border-light rounded-md px-4 py-3 bg-surface shadow-sm text-sm text-primary placeholder-muted resize-none focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all ${P===2?"min-h-[40px] max-h-[80px]":"min-h-[60px] max-h-[120px]"}`,placeholder:P===2?"Describe logic...":"Describe your logic requirements in natural language...",value:o,onChange:L=>n(L.target.value),onKeyPress:R}),P<2?e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{onClick:()=>g(!h),className:"flex items-center gap-2 border border-light bg-white px-4 py-3 rounded-md shadow-sm text-sm text-primary hover:bg-accent-light transition-all min-h-[60px] whitespace-nowrap",children:["Vendor: ",l,e.jsx(qe,{className:"w-4 h-4"})]}),h&&e.jsx("div",{className:"absolute bottom-full mb-1 w-48 bg-surface border border-light rounded-md shadow-lg z-10",children:sr.map(L=>e.jsx("div",{onClick:()=>{d(L),g(!1)},className:"px-4 py-2 text-sm hover:bg-accent-light cursor-pointer",children:L},L))})]}):e.jsx("select",{value:l,onChange:L=>d(L.target.value),className:"border border-light bg-white px-3 py-2 rounded-md shadow-sm text-sm text-primary min-h-[40px]",children:sr.map(L=>e.jsx("option",{value:L,children:L},L))}),P<2&&e.jsx("button",{onClick:()=>{console.log(`Exporting logic to ${l} format`),alert(`✅ Exporting logic to ${l} format...

Your structured text will be downloaded shortly in ${l}-compatible format.`)},className:"bg-primary text-white px-4 py-3 rounded-md shadow-sm text-sm hover:bg-secondary transition-all min-h-[60px] whitespace-nowrap",title:"Export current logic to vendor-specific format",children:"📤 Export Logic"}),e.jsx("button",{onClick:()=>{console.log("Opening document uploader...")},className:`border border-light bg-white rounded-md shadow-sm hover:bg-accent-light transition-all text-sm ${P===2?"p-2 min-h-[40px]":"p-3 min-h-[60px]"}`,title:"Upload any project documents to improve logic accuracy.",children:e.jsx(br,{className:`text-primary ${P===2?"w-4 h-4":"w-5 h-5"}`})}),e.jsx("button",{onClick:T,className:`bg-primary text-white rounded-md shadow-sm text-sm hover:bg-secondary transition-all whitespace-nowrap ${P===2?"px-4 py-2 min-h-[40px]":"px-6 py-3 min-h-[60px]"}`,disabled:!o.trim(),children:P===2?"Generate":"Generate Logic"})]}),P<2&&e.jsx("div",{className:"text-xs text-muted text-center mt-3",children:"🟢 Define Prompt → 🟡 Upload Docs → 🟡 Choose Vendor → ⚪ Review/Edit Logic"})]}),N&&P===0&&e.jsx(jc,{suggestions:["IF Safety_OK AND Start_Button THEN","Conveyor_Speed := Target_Speed;","Motor_Fault := Overload OR Overcurrent;"],onClose:()=>p(!1)}),P<2&&e.jsxs("div",{className:"bg-white border border-light rounded-md p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-primary mb-3",children:"Quick Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[P===0&&e.jsxs("button",{onClick:()=>f(!y),className:"text-xs bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded transition-colors",children:[y?"📋 Hide":"📋 Show"," Pending Changes"]}),!N&&P===0&&e.jsx("button",{onClick:()=>p(!0),className:"text-xs bg-gray-50 hover:bg-gray-100 px-3 py-2 rounded transition-colors",children:"✨ Show AI Suggestions"}),P===1&&e.jsx("button",{onClick:()=>{b(0),v(!1)},className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 px-3 py-2 rounded transition-colors",children:"🔧 Show All Features"})]})]})]}),P<2&&e.jsx(bc,{})]})}function ss({sessionMode:t=!1}){const[s,r]=u.useState("logic-studio"),[a,o]=u.useState(!1),[n,i]=u.useState([]),[c,l]=u.useState(null),[d,h]=u.useState(!1),[g,y]=u.useState({companyName:"",projectName:"",projectId:"",contactName:"",contactEmail:"",siteAddress:"",deliveryDate:"",integratorCompany:"Pandaura Automation Systems"}),[f,N]=u.useState([{id:"functional-desc",title:"Functional Description",description:"Comprehensive system operation description",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF","TXT"],selected:!1},{id:"sequence-ops",title:"Sequence of Operations",description:"Step-by-step operational procedures",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF"],selected:!1},{id:"tag-database",title:"Tag Database",description:"Complete I/O and variable listing",status:"ready",source:"Tag Database Manager",formats:["XLSX","CSV"],selected:!1},{id:"io-map",title:"I/O Map",description:"Physical input/output assignments",status:"ready",source:"Logic Studio Analysis",formats:["XLSX","PDF"],selected:!1},{id:"logic-summary",title:"Logic Summary Report",description:"High-level logic overview and statistics",status:"ready",source:"Logic Studio ST Code",formats:["DOCX","PDF"],selected:!1},{id:"hmi-tags",title:"HMI Tag List",description:"Human Machine Interface tag definitions",status:"pending",source:"Auto-detected from Logic",formats:["XLSX","CSV"],selected:!1},{id:"alarm-list",title:"Alarm List",description:"System alarm definitions and responses",status:"ready",source:"Logic Studio Analysis",formats:["XLSX","DOCX"],selected:!1},{id:"revision-history",title:"Revision History / Change Log",description:"Project version control and modifications",status:"ready",source:"Auto-generated",formats:["DOCX","PDF"],selected:!1}]),p=b=>{r(b),o(b==="import")},x=b=>{if(!b)return;const m=Array.from(b).map(k=>({name:k.name,tag:S(k.name),status:"pending",type:j(k.name)}));i(k=>[...k,...m]),setTimeout(()=>{i(k=>k.map(O=>m.some(I=>I.name===O.name)?{...O,status:"analyzed"}:O))},2e3)},S=b=>{const m=b.toLowerCase();return m.includes(".st")||m.includes(".acd")||m.includes(".s7p")?"[Logic]":m.includes(".xlsx")||m.includes(".csv")?"[I/O List]":m.includes(".docx")||m.includes(".pdf")?"[Functional Spec]":"[Document]"},j=b=>{const m=b.toLowerCase();return m.includes(".st")||m.includes(".acd")||m.includes(".s7p")?"logic":m.includes(".xlsx")||m.includes(".csv")?"io":m.includes(".docx")||m.includes(".pdf")?"spec":"doc"},v=b=>{N(m=>m.map(k=>k.id===b?{...k,selected:!k.selected}:k))},C=()=>{const b=f.every(m=>m.selected);N(m=>m.map(k=>({...k,selected:!b})))},w=()=>{const b=f.filter(m=>m.selected);if(b.length===0){alert("Please select documents to export");return}console.log("Exporting documents:",b.map(m=>m.title)),alert(`Generating ${b.length} document(s)...
Download will begin shortly.`)},P=c?f.find(b=>b.id===c):null;return e.jsxs("div",{className:"flex flex-col h-full bg-background",children:[e.jsx("header",{className:"bg-white border-b border-light px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"AutoDocs"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative",children:e.jsxs("select",{value:s,onChange:b=>p(b.target.value),className:"border border-light rounded px-4 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"logic-studio",children:"Use Logic from Logic Studio"}),e.jsx("option",{value:"import",children:"Import Logic / Docs"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:C,className:"text-sm text-muted hover:text-primary px-3 py-2",children:f.every(b=>b.selected)?"Deselect All":"Select All"}),e.jsxs("button",{onClick:w,className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Export Selected"]})]})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>h(!d),className:"flex items-center gap-2 w-full p-3 bg-white border border-light rounded-md hover:bg-gray-50 transition-colors",children:[d?e.jsx(Sr,{className:"w-4 h-4"}):e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Add Client Information (Optional)"})]}),d&&e.jsx("div",{className:"mt-3 p-4 bg-white border border-light rounded-md",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Client Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:g.companyName,onChange:b=>y(m=>({...m,companyName:b.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Acme Manufacturing"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Project Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:g.projectName,onChange:b=>y(m=>({...m,projectName:b.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Batch Mixing Control System"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:"Project ID / Reference"}),e.jsx("input",{type:"text",value:g.projectId,onChange:b=>y(m=>({...m,projectId:b.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., PRJ-2025-001"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-muted mb-1",children:["Date of Delivery ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:g.deliveryDate,onChange:b=>y(m=>({...m,deliveryDate:b.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-muted mb-1",children:"Site Address / Location"}),e.jsx("textarea",{value:g.siteAddress,onChange:b=>y(m=>({...m,siteAddress:b.target.value})),className:"w-full border border-light rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-accent",rows:2,placeholder:"Installation site address..."})]})]})})]}),a&&e.jsxs("div",{className:"mb-6 p-4 bg-white border border-light rounded-md",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Smart Upload Panel"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center mb-4",children:[e.jsx(Ve,{className:"w-8 h-8 text-muted mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-muted mb-2",children:["Drag & drop files here or"," ",e.jsx("button",{className:"text-accent hover:underline",children:"browse files"})]}),e.jsx("p",{className:"text-xs text-muted",children:"Supported: .ACD, .S7P, .XML, .ST, .TXT, .DOCX, .PDF, .XLSX, .CSV"}),e.jsx("input",{type:"file",multiple:!0,onChange:b=>x(b.target.files),className:"hidden",accept:".acd,.s7p,.xml,.st,.txt,.docx,.pdf,.xlsx,.csv"})]}),n.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Uploaded Files:"}),n.map((b,m)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm",children:b.name}),e.jsx("span",{className:"text-xs bg-accent-light text-accent px-2 py-1 rounded",children:b.tag}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${b.status==="analyzed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:b.status==="analyzed"?"Analyzed":"Pending"})]}),e.jsx("button",{onClick:()=>i(k=>k.filter((O,I)=>I!==m)),className:"text-muted hover:text-red-500",children:e.jsx(fe,{className:"w-4 h-4"})})]},m))]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(b=>e.jsxs("div",{className:`p-4 bg-white border rounded-md cursor-pointer transition-all ${b.selected?"border-accent bg-accent-light":"border-light hover:border-gray-300"}`,onClick:()=>v(b.id),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.selected,onChange:()=>{},className:"accent-primary"}),e.jsx("h3",{className:"font-medium text-sm",children:b.title})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),l(c===b.id?null:b.id)},className:"text-muted hover:text-primary",title:"Preview",children:e.jsx(rt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m=>{m.stopPropagation(),console.log(`Generating ${b.title}...`),alert(`Generating ${b.title}...
This will create the document using current project data.`)},className:"text-accent hover:text-purple-600",title:"Generate",children:e.jsx(It,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:`flex items-center gap-1 text-xs ${b.status==="ready"?"text-green-600":"text-yellow-600"}`,children:[b.status==="ready"?e.jsx(ps,{className:"w-3 h-3"}):e.jsx(fs,{className:"w-3 h-3"}),b.status==="ready"?"Ready to Generate":"Pending Input"]}),e.jsxs("div",{className:"text-xs text-muted",children:["Generated from: ",b.source]}),e.jsxs("div",{className:"text-xs text-muted",children:["Format: ",b.formats.join(", ")]})]}),e.jsxs("button",{onClick:m=>{m.stopPropagation(),console.log(`Exporting ${b.title}`),alert(`Generating ${b.title}...`)},className:"mt-3 w-full bg-gray-100 hover:bg-gray-200 text-primary px-3 py-1 rounded text-xs transition-colors flex items-center justify-center gap-1",children:[e.jsx(Be,{className:"w-3 h-3"}),"Export"]})]},b.id))})]}),c&&P&&e.jsxs("div",{className:"w-2/5 bg-white border-l border-light p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:P.title}),e.jsxs("p",{className:"text-sm text-muted",children:["Source: ",P.source]})]}),e.jsx("button",{onClick:()=>l(null),className:"text-muted hover:text-primary",children:e.jsx(fe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded border text-sm",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Document Preview:"}),e.jsxs("div",{className:"space-y-2 text-xs font-mono",children:[e.jsx("div",{children:"1. SYSTEM OVERVIEW"}),e.jsxs("div",{className:"ml-4",children:["1.1 Project: ",g.projectName||"Motor Control System"]}),e.jsxs("div",{className:"ml-4",children:["1.2 Client: ",g.companyName||"Industrial Client"]}),e.jsxs("div",{className:"ml-4",children:["1.3 Delivery Date: ",g.deliveryDate||"TBD"]}),e.jsx("div",{children:"2. FUNCTIONAL DESCRIPTION"}),e.jsx("div",{className:"ml-4",children:"2.1 The system controls motor operation with safety interlocks..."}),e.jsx("div",{className:"ml-4",children:"2.2 Emergency stop functionality provides immediate shutdown..."}),e.jsx("div",{children:"3. SEQUENCE OF OPERATIONS"}),e.jsx("div",{className:"ml-4",children:"3.1 System startup sequence..."}),e.jsxs("div",{className:"text-muted",children:["... (continues for ",Math.floor(Math.random()*20)+10," pages)"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{className:"w-full bg-accent text-white px-4 py-2 rounded text-sm hover:bg-purple-600 transition-colors",children:"Regenerate with AI Edits"}),e.jsx("div",{className:"relative",children:e.jsxs("select",{className:"w-full border border-light rounded px-4 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{children:"Export as..."}),P.formats.map(b=>e.jsx("option",{value:b,children:b},b))]})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",className:"accent-primary"}),"Include in ZIP Export"]})]})]})]})]})}js();const q=`${He.apiBaseUrl}/api/v1`;console.log("🔗 TagsAPI initialized with base URL:",q);function J(){const t=localStorage.getItem("authToken");return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}class W{static async getTags(s={}){const r=new URLSearchParams;Object.entries(s).forEach(([i,c])=>{c!=null&&c!==""&&r.append(i,c.toString())});const a=r.toString(),o=`${q}/tags${a?`?${a}`:""}`,n=await fetch(o,{headers:J()});if(!n.ok){const i=await n.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to fetch tags")}return n.json()}static async createTag(s){const r=await fetch(`${q}/tags`,{method:"POST",headers:J(),body:JSON.stringify(s)});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to create tag")}return r.json()}static async getTag(s){const r=await fetch(`${q}/tags/${s}`,{headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to fetch tag")}return r.json()}static async updateTag(s,r){const a=await fetch(`${q}/tags/${s}`,{method:"PUT",headers:J(),body:JSON.stringify(r)});if(!a.ok){const o=await a.json().catch(()=>({error:"Network error"}));throw new Error(o.error||"Failed to update tag")}return a.json()}static async deleteTag(s){const r=await fetch(`${q}/tags/${s}`,{method:"DELETE",headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to delete tag")}return r.json()}static async autoGenerateTags(s){const r=await fetch(`${q}/tags/autogenerate`,{method:"POST",headers:J(),body:JSON.stringify(s)});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to generate tags")}return r.json()}static async exportTags(s){const r=await fetch(`${q}/tags/export`,{method:"POST",headers:J(),body:JSON.stringify(s)});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export tags")}return r.json()}static async exportVendorTags(s,r,a="json"){let o;r==="beckhoff"?a==="csv"||a==="xlsx"?o=`${q}/tags/projects/${s}/export/beckhoff/csv`:a==="xml"?o=`${q}/tags/projects/${s}/export/beckhoff/xml`:o=`${q}/tags/projects/${s}/export/beckhoff/csv`:o=`${q}/tags/projects/${s}/export/${r}/formatted`;const n=await fetch(o,{method:"GET",headers:J()});if(!n.ok){const i=await n.json().catch(()=>({error:"Network error"}));throw new Error(i.error||"Failed to export vendor-specific tags")}return n.blob()}static async exportBeckhoffCsv(s){const r=await fetch(`${q}/tags/projects/${s}/export/beckhoff/csv`,{method:"GET",headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export Beckhoff CSV")}return r.blob()}static async exportBeckhoffXml(s){const r=await fetch(`${q}/tags/projects/${s}/export/beckhoff/xml`,{method:"GET",headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export Beckhoff XML")}return r.blob()}static async exportRockwellCsv(s){const r=await fetch(`${q}/tags/projects/${s}/export/rockwell/csv`,{method:"GET",headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export Rockwell CSV")}return r.blob()}static async exportRockwellL5X(s){const r=await fetch(`${q}/tags/projects/${s}/export/rockwell/l5x`,{method:"GET",headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export Rockwell L5X")}return r.blob()}static async exportSiemensCsv(s){const r=await fetch(`${q}/tags/projects/${s}/export/siemens/csv`,{method:"GET",headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export Siemens CSV")}return r.blob()}static async exportSiemensXml(s){const r=await fetch(`${q}/tags/projects/${s}/export/siemens/xml`,{method:"GET",headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to export Siemens XML")}return r.blob()}static async importBeckhoffCsv(s,r){const a=new FormData;a.append("file",r);const o=await fetch(`${q}/tags/projects/${s}/import/beckhoff/csv`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:a});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to import Beckhoff CSV")}return o.json()}static async importBeckhoffXml(s,r){const a=new FormData;a.append("file",r);const o=await fetch(`${q}/tags/projects/${s}/import/beckhoff/xml`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:a});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to import Beckhoff XML")}return o.json()}static async importRockwellCsv(s,r){const a=new FormData;a.append("file",r);const o=await fetch(`${q}/tags/projects/${s}/import/rockwell/csv`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:a});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to import Rockwell CSV")}return o.json()}static async importRockwellL5X(s,r){const a=new FormData;a.append("file",r);const o=await fetch(`${q}/tags/projects/${s}/import/rockwell/l5x`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:a});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to import Rockwell L5X")}return o.json()}static async importSiemensCsv(s,r){const a=new FormData;a.append("file",r);const o=await fetch(`${q}/tags/projects/${s}/import/siemens/csv`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`},body:a});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to import Siemens CSV")}return o.json()}static async formatTagsForVendor(s,r,a){const o=await fetch(`${q}/tags/format/${r}`,{method:"POST",headers:J(),body:JSON.stringify({projectId:s,tags:a})});if(!o.ok){const n=await o.json().catch(()=>({error:"Network error"}));throw new Error(n.error||"Failed to format tags for vendor")}return o.json()}static async validateAddressesForVendor(s,r){const a=await fetch(`${q}/tags/validate-addresses/${s}`,{method:"POST",headers:J(),body:JSON.stringify({addresses:r})});if(!a.ok){const o=await a.json().catch(()=>({error:"Network error"}));throw new Error(o.error||"Failed to validate addresses")}return a.json()}static async getTagStats(s){const r=await fetch(`${q}/tags/stats/${s}`,{headers:J()});if(!r.ok){const a=await r.json().catch(()=>({error:"Network error"}));throw new Error(a.error||"Failed to fetch tag statistics")}return r.json()}}const ma=u.createContext(void 0),Nc=({children:t})=>{const[s,r]=u.useState([]),[a,o]=u.useState(!1),[n,i]=u.useState(null),[c,l]=u.useState({}),[d,h]=u.useState({page:1,pageSize:50,total:0,totalPages:0}),g=u.useCallback(v=>{l(C=>({...C,...v}))},[]),y=u.useCallback(async v=>{o(!0),i(null);try{const C=v||c,w=await W.getTags(C);r(w.data.tags),h(w.data.pagination),v&&l(P=>({...P,...v}))}catch(C){const w=C instanceof Error?C.message:"Failed to fetch tags";i(w),console.error("Error fetching tags:",C)}finally{o(!1)}},[c]),f=u.useCallback(async v=>{i(null);try{const w=(await W.createTag(v)).data;return r(P=>[w,...P]),h(P=>({...P,total:P.total+1})),w}catch(C){const w=C instanceof Error?C.message:"Failed to create tag";throw i(w),C}},[]),N=u.useCallback(async(v,C)=>{i(null);try{const P=(await W.updateTag(v,C)).data;return r(b=>b.map(m=>m.id===v?P:m)),P}catch(w){const P=w instanceof Error?w.message:"Failed to update tag";throw i(P),w}},[]),p=u.useCallback(async v=>{i(null);try{await W.deleteTag(v),r(C=>C.filter(w=>w.id!==v)),h(C=>({...C,total:Math.max(0,C.total-1)}))}catch(C){const w=C instanceof Error?C.message:"Failed to delete tag";throw i(w),C}},[]),x=u.useCallback(async()=>{await y(c)},[y,c]),S=u.useCallback(()=>{i(null)},[]),j={tags:s,loading:a,error:n,filters:c,pagination:d,fetchTags:y,createTag:f,updateTag:N,deleteTag:p,setFilters:g,clearError:S,refreshTags:x};return e.jsx(ma.Provider,{value:j,children:t})},wc=()=>{const t=u.useContext(ma);if(!t)throw new Error("useTags must be used within a TagsProvider");return t},ve=U.create({baseURL:`${He.apiBaseUrl}/api/v1`,timeout:1e4}),Sc=()=>{const t=localStorage.getItem("authToken");return t?(console.log("ProjectsAPI: Found auth token:",t?`${t.substring(0,20)}...`:"null"),t):(console.warn("ProjectsAPI: No authentication token found. User may not be logged in."),null)};ve.interceptors.request.use(t=>{const s=Sc();return s?(t.headers.Authorization=`Bearer ${s}`,console.log("ProjectsAPI interceptor - Added Authorization header")):console.warn("ProjectsAPI interceptor - No token available for request to:",t.url),t},t=>(console.error("ProjectsAPI request interceptor error:",t),Promise.reject(t)));ve.interceptors.response.use(t=>(console.log("ProjectsAPI Response:",{url:t.config.url,status:t.status,data:t.data}),t),t=>{throw console.error("Projects API Error:",{url:t.config?.url,status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,message:t.message}),t});class de{static async createProject(s){try{const r=await ve.post("/projects",s);if(!r.data.success||!r.data.project)throw new Error(r.data.message||"Failed to create project");return r.data.project}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async getProjects(){try{const s=await ve.get("/projects");if(!s.data.success)throw new Error(s.data.message||"Failed to fetch projects");return s.data.projects||[]}catch(s){throw console.error("ProjectsAPI.getProjects error:",s.response?.data||s.message),s.response?.status===401?new Error("Authentication required. Please log in again."):s.response?.status===403?new Error("Access denied. Please check your permissions."):s.response?.data?.error?new Error(s.response.data.error):s}}static async getProject(s){try{const r=await ve.get(`/projects/${s}`);if(!r.data.success||!r.data.project)throw new Error(r.data.message||"Project not found");return r.data.project}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async updateProject(s,r){try{const a=await ve.patch(`/projects/${s}`,r);if(!a.data.success||!a.data.project)throw new Error(a.data.message||"Failed to update project");return a.data.project}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async autosaveProject(s,r){try{const a=await ve.put(`/projects/${s}/autosave`,{autosaveState:r});if(!a.data.success)throw new Error(a.data.message||"Auto-save failed")}catch(a){console.error("Auto-save failed:",a.response?.data?.error||a.message)}}static async saveProject(s,r){try{const a=await ve.put(`/projects/${s}/save`,{state:r});if(!a.data.success)throw new Error(a.data.message||"Save failed")}catch(a){throw a.response?.data?.error?new Error(a.response.data.error):a}}static async deleteProject(s){try{const r=await ve.delete(`/projects/${s}`);if(!r.data.success)throw new Error(r.data.message||"Failed to delete project")}catch(r){throw r.response?.data?.error?new Error(r.response.data.error):r}}static async checkProjectOwnership(s){try{const r=await ve.get(`/projects/${s}/ownership`);return r.data.success&&r.data.isOwner||!1}catch(r){return console.error("Ownership check failed:",r.response?.data?.error||r.message),!1}}}const kc={primary:"bg-primary hover:bg-secondary text-white",secondary:"bg-secondary hover:bg-primary text-white",outline:"border border-light bg-white hover:bg-accent-light text-primary hover:border-accent",ghost:"hover:bg-accent-light text-primary",danger:"bg-red-600 hover:bg-red-700 text-white",success:"bg-green-600 hover:bg-green-700 text-white"},Cc={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};function M({children:t,onClick:s,type:r="button",variant:a="primary",size:o="md",disabled:n=!1,loading:i=!1,icon:c,iconPosition:l="left",className:d="",title:h}){const y=`inline-flex items-center justify-center rounded-md font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${kc[a]} ${Cc[o]} ${d}`;return e.jsxs("button",{type:r,onClick:s,disabled:n||i,className:y,title:h,children:[i&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c&&l==="left"&&!i&&e.jsx(c,{className:`w-4 h-4 ${t?"mr-2":""}`}),t,c&&l==="right"&&!i&&e.jsx(c,{className:`w-4 h-4 ${t?"ml-2":""}`})]})}function se({id:t,name:s,type:r="text",value:a,onChange:o,placeholder:n,label:i,required:c=!1,disabled:l=!1,autoFocus:d=!1,autoComplete:h,maxLength:g,pattern:y,icon:f,iconPosition:N="right",onIconClick:p,error:x,helpText:S,className:j=""}){const v=t||s,k=`w-full px-4 py-3 bg-surface text-primary border rounded-md shadow-sm outline-none transition-all focus:ring-2 focus:ring-accent focus:border-accent ${!!x?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-light"} ${l?"opacity-50 cursor-not-allowed":""} ${f?N==="left"?"pl-12":"pr-12":""} ${j}`;return e.jsxs("div",{className:"w-full",children:[i&&e.jsxs("label",{htmlFor:v,className:"block text-sm font-medium text-secondary mb-2",children:[i,c&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[f&&N==="left"&&e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx(f,{className:"w-5 h-5 text-muted"})}),e.jsx("input",{id:v,name:s,type:r,value:a,onChange:o,placeholder:n,required:c,disabled:l,autoFocus:d,autoComplete:h,maxLength:g,pattern:y,className:k}),f&&N==="right"&&e.jsx("button",{type:"button",onClick:p,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary transition-colors",disabled:l,children:e.jsx(f,{className:"w-5 h-5"})})]}),x&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x}),S&&!x&&e.jsx("p",{className:"mt-1 text-sm text-muted",children:S})]})}function st({id:t,name:s,value:r,onChange:a,placeholder:o,label:n,required:i=!1,disabled:c=!1,autoFocus:l=!1,rows:d=4,maxLength:h,error:g,helpText:y,className:f="",showCharCount:N=!1}){const p=t||s,w=`w-full px-4 py-3 bg-background border rounded-md text-primary placeholder-muted resize-none outline-none transition-all focus:ring-2 focus:ring-accent focus:border-accent ${!!g?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-light"} ${c?"opacity-50 cursor-not-allowed":""} ${f}`;return e.jsxs("div",{className:"w-full",children:[n&&e.jsxs("label",{htmlFor:p,className:"block text-sm font-medium text-secondary mb-2",children:[n,i&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("textarea",{id:p,name:s,value:r,onChange:a,placeholder:o,required:i,disabled:c,autoFocus:l,rows:d,maxLength:h,className:w}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{children:[g&&e.jsx("p",{className:"text-sm text-red-600",children:g}),y&&!g&&e.jsx("p",{className:"text-sm text-muted",children:y})]}),(N||h)&&e.jsxs("span",{className:"text-xs text-muted",children:[r.length,h&&`/${h}`]})]})]})}const Ac={sm:"p-4",md:"p-6",lg:"p-8"},Pc={default:"bg-surface border border-light",elevated:"bg-surface border border-light shadow-card",bordered:"bg-background border-2 border-light"};function le({children:t,title:s,subtitle:r,icon:a,className:o="",padding:n="md",variant:i="default"}){const l=`rounded-lg ${Pc[i]} ${Ac[n]} ${o}`;return e.jsxs("div",{className:l,children:[(s||r||a)&&e.jsxs("div",{className:"mb-6",children:[a&&e.jsx("div",{className:"w-12 h-12 bg-accent/10 rounded-full flex items-center justify-center mb-4",children:e.jsx(a,{className:"w-6 h-6 text-accent"})}),s&&e.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:s}),r&&e.jsx("p",{className:"text-sm text-muted",children:r})]}),t]})}function Se({options:t,value:s,onChange:r,placeholder:a="Select an option",label:o,disabled:n=!1,error:i,className:c="",required:l=!1}){const[d,h]=u.useState(!1),g=u.useRef(null),y=t.find(x=>x.value===s);u.useEffect(()=>{const x=S=>{g.current&&!g.current.contains(S.target)&&h(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const f=x=>{r(x),h(!1)},p=`w-full flex items-center justify-between px-4 py-3 bg-surface text-primary border rounded-md shadow-sm outline-none transition-all ${!!i?"border-red-500":"border-light"} ${n?"opacity-50 cursor-not-allowed":"hover:border-accent focus:ring-2 focus:ring-accent focus:border-accent cursor-pointer"} ${c}`;return e.jsxs("div",{className:"w-full",children:[o&&e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:[o," ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs("button",{type:"button",onClick:()=>!n&&h(!d),className:p,disabled:n,children:[e.jsxs("div",{className:"flex items-center",children:[y?.icon&&e.jsx(y.icon,{className:"w-4 h-4 mr-2 text-muted"}),e.jsx("span",{className:y?"text-primary":"text-muted",children:y?y.label:a})]}),e.jsx(qe,{className:`w-4 h-4 text-muted transition-transform ${d?"rotate-180":""}`})]}),d&&e.jsx("div",{className:"absolute z-50 w-full mt-1 bg-surface border border-light rounded-md shadow-lg max-h-60 overflow-auto",children:t.map(x=>e.jsxs("button",{type:"button",onClick:()=>!x.disabled&&f(x.value),className:`w-full flex items-center px-4 py-3 text-left transition-colors ${x.disabled?"opacity-50 cursor-not-allowed":"hover:bg-accent-light cursor-pointer"} ${x.value===s?"bg-accent-light text-primary":"text-primary"}`,disabled:x.disabled,children:[x.icon&&e.jsx(x.icon,{className:"w-4 h-4 mr-2 text-muted"}),x.label]},x.value))})]}),i&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]})}function Ec({title:t,subtitle:s,showBackButton:r=!1,backTo:a,actions:o,icon:n,className:i=""}){const c=K(),l=()=>{c(a||-1)};return e.jsx("header",{className:`bg-surface border-b border-light px-6 py-4 ${i}`,children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[r&&e.jsx(M,{variant:"ghost",size:"sm",onClick:l,icon:he,title:"Go back"}),e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsx("div",{className:"w-10 h-10 bg-accent/10 rounded-lg flex items-center justify-center",children:e.jsx(n,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:t}),s&&e.jsx("p",{className:"text-sm text-secondary",children:s})]})]})]}),o&&e.jsx("div",{className:"flex items-center gap-3",children:o})]})})}const Tc={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};function ke({isOpen:t,onClose:s,title:r,children:a,size:o="md",showCloseButton:n=!0,closeOnOverlayClick:i=!0,actions:c}){return u.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),u.useEffect(()=>{const l=d=>{d.key==="Escape"&&s()};return t&&document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[t,s]),t?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i?s:void 0}),e.jsxs("div",{className:`relative bg-surface rounded-lg shadow-xl w-full ${Tc[o]} z-10`,children:[(r||n)&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light",children:[r&&e.jsx("h2",{className:"text-lg font-semibold text-primary",children:r}),n&&e.jsx(M,{variant:"ghost",size:"sm",onClick:s,icon:fe,title:"Close"})]}),e.jsx("div",{className:"p-6",children:a}),c&&e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-light",children:c})]})]})}):null}const Oc={success:{icon:ce,bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",titleColor:"text-green-800",textColor:"text-green-700"},error:{icon:ue,bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",titleColor:"text-red-800",textColor:"text-red-700"},warning:{icon:ot,bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-600",titleColor:"text-yellow-800",textColor:"text-yellow-700"},info:{icon:Nr,bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",titleColor:"text-blue-800",textColor:"text-blue-700"}};function Ue({variant:t,title:s,children:r,onClose:a,className:o=""}){const n=Oc[t],i=n.icon;return e.jsx("div",{className:`p-4 rounded-md border ${n.bgColor} ${n.borderColor} ${o}`,children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(i,{className:`w-5 h-5 ${n.iconColor}`})}),e.jsxs("div",{className:"ml-3 flex-1",children:[s&&e.jsx("h3",{className:`text-sm font-medium ${n.titleColor} mb-1`,children:s}),e.jsx("div",{className:`text-sm ${n.textColor}`,children:r})]}),a&&e.jsx("div",{className:"ml-auto pl-3",children:e.jsx("button",{type:"button",onClick:a,className:`inline-flex rounded-md p-1.5 ${n.textColor} hover:${n.bgColor} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-green-50 focus:ring-green-600`,children:e.jsx(fe,{className:"w-4 h-4"})})})]})})}const ha=Z.createContext(void 0),Dc=({children:t})=>{const[s,r]=u.useState([]),a=n=>{const i=Math.random().toString(36).substr(2,9),c={...n,id:i};r(d=>[...d,c]);const l=n.duration||5e3;setTimeout(()=>{o(i)},l)},o=n=>{r(i=>i.filter(c=>c.id!==n))};return e.jsxs(ha.Provider,{value:{toasts:s,showToast:a,removeToast:o},children:[t,e.jsx(Rc,{toasts:s,removeToast:o})]})},Rc=({toasts:t,removeToast:s})=>t.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(r=>e.jsx(Ue,{variant:r.variant,title:r.title,onClose:()=>s(r.id),className:"min-w-80 shadow-lg animate-slide-in",children:r.message},r.id))}),Fe=()=>{const t=Z.useContext(ha);if(!t)throw new Error("useToast must be used within ToastProvider");return t},Mc=[{pattern:/^I:\d+\/\d+$/i,description:"Input: I:x/y (e.g., I:1/0)"},{pattern:/^O:\d+\/\d+$/i,description:"Output: O:x/y (e.g., O:2/0)"},{pattern:/^N\d+:\d+$/i,description:"Integer: Nx:y (e.g., N7:0)"},{pattern:/^F\d+:\d+$/i,description:"Float: Fx:y (e.g., F8:0)"},{pattern:/^B\d+:\d+$/i,description:"Binary: Bx:y (e.g., B3:0)"},{pattern:/^T\d+:\d+$/i,description:"Timer: Tx:y (e.g., T4:0)"},{pattern:/^C\d+:\d+$/i,description:"Counter: Cx:y (e.g., C5:0)"},{pattern:/^R\d+:\d+$/i,description:"Control: Rx:y (e.g., R6:0)"},{pattern:/^S\d+:\d+$/i,description:"String: Sx:y (e.g., S2:0)"},{pattern:/^[A-Za-z_][A-Za-z0-9_]*$/i,description:"Symbolic: MyTag_1"}],Ic=[{pattern:/^I\d+\.\d+$/i,description:"Input: Ix.y (e.g., I0.0)"},{pattern:/^Q\d+\.\d+$/i,description:"Output: Qx.y (e.g., Q0.0)"},{pattern:/^M\d+\.\d+$/i,description:"Memory: Mx.y (e.g., M0.0)"},{pattern:/^DB\d+\.DB[BWDX]\d+$/i,description:"Data Block: DBx.DBYz (e.g., DB1.DBD0)"},{pattern:/^L\d+\.\d+$/i,description:"Local: Lx.y (e.g., L0.0)"},{pattern:/^[A-Za-z_][A-Za-z0-9_]*$/i,description:"Symbolic: MyTag_1"}],Fc=[{pattern:/^%[IQMT]\d+(\.\d+)?$/i,description:"I/O: %Xx.y (e.g., %I0.0, %Q2)"},{pattern:/^%[IQMT][BWDL]\d+$/i,description:"Typed Memory: %XYz (e.g., %MW100)"},{pattern:/^GVL\.[a-zA-Z_][\w]*$/i,description:"GVL Reference: GVL.Variable"},{pattern:/^[a-zA-Z_][\w]*$/i,description:"Symbolic: MyVariable"}];function rr(t,s){if(!t||!t.trim())return{isValid:!1,errorMessage:"Address is required"};const r=t.trim();let a=[],o="";switch(s.toLowerCase()){case"rockwell":a=Mc,o="Rockwell";break;case"siemens":a=Ic,o="Siemens";break;case"beckhoff":a=Fc,o="Beckhoff";break;default:return{isValid:!1,errorMessage:"Unsupported vendor"}}return a.some(({pattern:i})=>i.test(r))?{isValid:!0}:{isValid:!1,errorMessage:`Invalid ${o} address format: ${t}`,suggestedFormats:a.map(i=>i.description)}}function Lc(t){switch(t.toLowerCase()){case"rockwell":return["I:1/0","O:2/0","N7:0","F8:0","MyTag_1"];case"siemens":return["I0.0","Q0.0","M0.0","DB1.DBD0","MyTag_1"];case"beckhoff":return["%I0.0","%Q2.1","%MW100","GVL.MyVar","MyVariable"];default:return[]}}function _c(t){switch(t.toLowerCase()){case"rockwell":return"Rockwell Allen-Bradley addressing: I:x/y, O:x/y, Nx:y, Fx:y, or symbolic names";case"siemens":return"Siemens TIA Portal addressing: Ix.y, Qx.y, Mx.y, DBx.DBYz, or symbolic names";case"beckhoff":return"Beckhoff TwinCAT addressing: %Xx.y, %XYz, GVL.Variable, or symbolic names";default:return"Please select a vendor to see address format guidelines"}}const $c=[{value:"BOOL",label:"BOOL"},{value:"INT",label:"INT"},{value:"DINT",label:"DINT"},{value:"REAL",label:"REAL"},{value:"STRING",label:"STRING"},{value:"TIMER",label:"TIMER"},{value:"COUNTER",label:"COUNTER"}],$e={rockwell:["BOOL","INT","DINT","REAL","STRING","TIMER","COUNTER"],siemens:["BOOL","INT","DINT","REAL","STRING"],beckhoff:["BOOL","INT","DINT","REAL","STRING","TIMER","COUNTER"]},zc=t=>{const s=$e[t]||$e.rockwell;return $c.filter(r=>s.includes(r.value))},Uc=[{value:"rockwell",label:"Rockwell"},{value:"siemens",label:"Siemens"},{value:"beckhoff",label:"Beckhoff"}],Bc=[{value:"global",label:"Global"},{value:"local",label:"Local"},{value:"input",label:"Input"},{value:"output",label:"Output"}],Vc=[{value:"input",label:"Input"},{value:"output",label:"Output"},{value:"memory",label:"Memory"},{value:"temp",label:"Temp"},{value:"constant",label:"Constant"}];function qc({isOpen:t,onClose:s,onSuccess:r,projectId:a,onCreate:o}){const{showToast:n}=Fe(),[i,c]=u.useState({name:"",description:"",type:"BOOL",address:"",default_value:"",vendor:"rockwell",scope:"global",tag_type:"memory",is_ai_generated:!1}),[l,d]=u.useState({}),[h,g]=u.useState(!1),y=()=>{const x={};if(i.name.trim()||(x.name="Tag name is required"),i.description.trim()||(x.description="Description is required"),($e[i.vendor]||$e.rockwell).includes(i.type)||(x.type=`Data type '${i.type}' is not supported by ${i.vendor.charAt(0).toUpperCase()+i.vendor.slice(1)}`),!i.address.trim())x.address="Address is required";else{const j=rr(i.address,i.vendor);j.isValid||(x.address=j.errorMessage)}return d(x),Object.keys(x).length===0},f=async()=>{if(y()){g(!0);try{const x={...i,project_id:a,name:i.name.trim(),description:i.description.trim(),address:i.address.trim(),default_value:i.default_value?.trim()||""};await o(x),n({variant:"success",title:"Success!",message:`Tag "${i.name.trim()}" has been created successfully.`,duration:4e3}),r(),N()}catch(x){console.error("Failed to create tag:",x),n({variant:"error",title:"Error",message:x.message||"Failed to create tag. Please try again.",duration:5e3})}finally{g(!1)}}},N=()=>{c({name:"",description:"",type:"BOOL",address:"",default_value:"",vendor:"rockwell",scope:"global",tag_type:"memory",is_ai_generated:!1}),d({}),g(!1),s()},p=(x,S)=>{if(c(j=>{const v={...j,[x]:S};if(x==="vendor"){const C=$e[S]||$e.rockwell;C.includes(j.type)||(v.type=C[0])}return v}),l[x]&&d(j=>({...j,[x]:void 0})),x==="vendor"&&i.address){const j=rr(i.address,S);j.isValid||d(v=>({...v,address:j.errorMessage}))}};return e.jsx(ke,{isOpen:t,onClose:N,title:"Create New Tag",size:"lg",actions:e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"secondary",onClick:N,disabled:h,children:"Cancel"}),e.jsx(M,{onClick:f,disabled:h,loading:h,children:h?"Creating...":"Create Tag"})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx(Se,{label:"Vendor",options:Uc,value:i.vendor,onChange:x=>p("vendor",x),required:!0})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(se,{label:"Tag Name",placeholder:"Enter tag name (e.g., Motor_01_Start)",value:i.name,onChange:x=>p("name",x.target.value),error:l.name,required:!0})}),e.jsxs("div",{children:[e.jsx(se,{label:"Address",placeholder:`Enter ${i.vendor} address`,value:i.address,onChange:x=>p("address",x.target.value),error:l.address,required:!0}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[e.jsx("div",{className:"mb-1",children:_c(i.vendor)}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Examples:"})," ",Lc(i.vendor).join(", ")]})]})]})]}),e.jsx("div",{children:e.jsx(st,{label:"Description",placeholder:"Enter tag description",value:i.description,onChange:x=>p("description",x.target.value),error:l.description,rows:3,required:!0})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(Se,{label:"Data Type",options:zc(i.vendor),value:i.type,onChange:x=>p("type",x),required:!0})}),e.jsx("div",{children:e.jsx(Se,{label:"Scope",options:Bc,value:i.scope,onChange:x=>p("scope",x),required:!0})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(Se,{label:"Tag Type",options:Vc,value:i.tag_type,onChange:x=>p("tag_type",x),required:!0})}),e.jsx("div",{children:e.jsx(se,{label:"Default Value",placeholder:"Enter default value (optional)",value:i.default_value||"",onChange:x=>p("default_value",x.target.value)})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Name:"})," ",i.name||"Not specified"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",i.address||"Not specified"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",i.type," (",i.vendor,")"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Scope:"})," ",i.scope]})]})]})]})})}const ar=[{vendor:"rockwell",formats:["csv","xlsx","l5x"],displayName:"Rockwell (Allen-Bradley)"},{vendor:"siemens",formats:["csv","xlsx","xml"],displayName:"Siemens (TIA Portal)"},{vendor:"beckhoff",formats:["csv","xlsx","xml"],displayName:"Beckhoff (TwinCAT)"}];function Hc({isOpen:t,onClose:s,projectId:r,projectName:a,tags:o}){const[n,i]=u.useState({step:"select"}),c=j=>o.filter(v=>v.vendor===j).length,l=o.length;u.useEffect(()=>{t&&i({step:"select"})},[t]);const d=j=>{i(v=>({...v,selectedVendor:j}))},h=j=>{i(v=>({...v,selectedFormat:j}))},g=()=>{i(j=>({...j,step:"confirm"}))},y=async()=>{if(!n.selectedVendor||!n.selectedFormat)return;const j=c(n.selectedVendor);if(j===0){i(v=>({...v,step:"error",errorMessage:`No ${n.selectedVendor} tags found in this project. Please import or create ${n.selectedVendor} tags first.`}));return}i(v=>({...v,step:"progress"}));try{j>1e3&&await new Promise(P=>setTimeout(P,1e3));let v;n.selectedVendor==="beckhoff"?n.selectedFormat==="csv"?v=await W.exportBeckhoffCsv(r):n.selectedFormat==="xml"?v=await W.exportBeckhoffXml(r):v=await W.exportBeckhoffCsv(r):n.selectedVendor==="siemens"?n.selectedFormat==="csv"?v=await W.exportSiemensCsv(r):n.selectedFormat==="xml"?v=await W.exportSiemensXml(r):v=await W.exportSiemensCsv(r):n.selectedVendor==="rockwell"?n.selectedFormat==="csv"?v=await W.exportRockwellCsv(r):n.selectedFormat==="l5x"?v=await W.exportRockwellL5X(r):v=await W.exportRockwellCsv(r):v=await W.exportVendorTags(r,n.selectedVendor,n.selectedFormat);const C=window.URL.createObjectURL(v),w=`${a}-${n.selectedVendor}-tags.${n.selectedFormat}`;i(P=>({...P,step:"success",downloadUrl:C,filename:w}))}catch(v){let C="Unknown error occurred";v instanceof Error?C=v.message:typeof v=="string"&&(C=v),(C.includes("Failed to fetch")||C.includes("NetworkError"))&&(C="Network error occurred. Please check your connection and try again."),i(w=>({...w,step:"error",errorMessage:C}))}},f=()=>{if(n.downloadUrl&&n.filename){const j=document.createElement("a");j.href=n.downloadUrl,j.download=n.filename,document.body.appendChild(j),j.click(),document.body.removeChild(j),window.URL.revokeObjectURL(n.downloadUrl)}},N=()=>{i(j=>({...j,step:"select"}))},p=()=>{i(j=>({...j,step:"select"}))},x=n.selectedVendor&&n.selectedFormat,S=ar.find(j=>j.vendor===n.selectedVendor);return l===0?e.jsx(ke,{isOpen:t,onClose:s,title:"Export Tags",size:"md",children:e.jsxs("div",{className:"flex flex-col items-center py-8 text-center",children:[e.jsx(ue,{className:"w-16 h-16 text-amber-500 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Tags to Export"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please generate or import tags before exporting."}),e.jsx("button",{onClick:s,className:"bg-primary text-white px-6 py-2 rounded-md hover:bg-primary-dark transition-colors",children:"Close"})]})}):e.jsx(ke,{isOpen:t,onClose:s,title:n.step==="select"?"Export Your Tags":n.step==="confirm"?"Confirm Export":n.step==="progress"?"Exporting Tags":n.step==="success"?"Export Complete!":"Export Failed",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[n.step==="select"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Choose your export vendor and format:"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Vendor"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:ar.map(j=>{const v=c(j.vendor);return e.jsxs("div",{onClick:()=>d(j.vendor),className:`border rounded-lg p-3 cursor-pointer transition-colors ${n.selectedVendor===j.vendor?"border-primary bg-primary/5":v===0?"border-gray-200 bg-gray-50 opacity-60 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,style:{pointerEvents:v===0?"none":"auto"},children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:j.displayName}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Formats: ",j.formats.map(C=>C.toUpperCase()).join(", ")]})]}),e.jsxs("div",{className:`text-sm font-medium ${v===0?"text-gray-400":"text-blue-600"}`,children:[v," tags"]})]}),v===0&&e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"No tags available for this vendor"})]},j.vendor)})})]}),n.selectedVendor&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:S?.formats.map(j=>e.jsxs("div",{onClick:()=>h(j),className:`border rounded-lg p-3 cursor-pointer transition-colors text-center ${n.selectedFormat===j?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"font-medium",children:j.toUpperCase()}),j==="l5x"&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Rockwell Studio 5000 format"}),j==="xml"&&n.selectedVendor==="siemens"&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TIA Portal XML"}),j==="xml"&&n.selectedVendor==="beckhoff"&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"TwinCAT XML"})]},j))})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ue,{className:"w-4 h-4 text-blue-600 mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Tip:"})," Select the format compatible with your PLC programming environment."]})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:!x,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Continue"})]})]}),n.step==="confirm"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsxs("div",{className:"text-lg font-medium text-gray-900 mb-4",children:["You are about to export ",c(n.selectedVendor)," ",S?.displayName," tags for project '",a,"' in ",n.selectedFormat?.toUpperCase()," format."]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Click Export to start."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Back"}),e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Export"]})]})]}),n.step==="progress"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(wr,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Preparing your export file..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Please do not close this window."})]}),n.step==="success"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ce,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Export complete!"}),e.jsxs("div",{className:"text-gray-600 mb-6",children:["Your file ",n.filename," is ready to download."]}),e.jsxs("button",{onClick:f,className:"bg-primary text-white px-6 py-3 rounded-md hover:bg-primary-dark transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(bn,{className:"w-5 h-5"}),"Download Now"]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"})})]}),n.step==="error"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ue,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Export failed."}),e.jsxs("div",{className:"text-gray-600 mb-2",children:[e.jsx("strong",{children:"Reason:"})," ",n.errorMessage]}),e.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"Please try again or contact support if the problem persists."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Try Again"})]})]})]})})}const nr=[{vendor:"rockwell",formats:["csv","l5x"],displayName:"Rockwell (Allen-Bradley)",description:"Import tags from Studio 5000 CSV exports or L5X XML files"},{vendor:"siemens",formats:["csv"],displayName:"Siemens (TIA Portal)",description:"Import tags from TIA Portal CSV exports"},{vendor:"beckhoff",formats:["csv","xml"],displayName:"Beckhoff (TwinCAT)",description:"Import tags from TwinCAT CSV exports or XML files"}];function Gc({isOpen:t,onClose:s,projectId:r,projectName:a,onSuccess:o}){const[n,i]=u.useState({step:"select"}),c=u.useRef(null);u.useEffect(()=>{t&&i({step:"select"})},[t]);const l=j=>{i(v=>({...v,selectedVendor:j}))},d=j=>{i(v=>({...v,selectedFormat:j,step:"upload"}))},h=j=>{const v=j.target.files?.[0];v&&i(C=>({...C,selectedFile:v}))},g=async()=>{if(!(!n.selectedFile||!n.selectedVendor||!n.selectedFormat)){i(j=>({...j,step:"progress"}));try{let j;if(n.selectedVendor==="beckhoff"?n.selectedFormat==="csv"?j=await W.importBeckhoffCsv(r,n.selectedFile):n.selectedFormat==="xml"&&(j=await W.importBeckhoffXml(r,n.selectedFile)):n.selectedVendor==="siemens"?n.selectedFormat==="csv"&&(j=await W.importSiemensCsv(r,n.selectedFile)):n.selectedVendor==="rockwell"&&(n.selectedFormat==="csv"?j=await W.importRockwellCsv(r,n.selectedFile):n.selectedFormat==="l5x"&&(j=await W.importRockwellL5X(r,n.selectedFile))),!j)throw new Error("Unsupported import combination");i(v=>({...v,step:"success",importResult:j})),o&&j.inserted&&o(j.inserted)}catch(j){let v="Unknown error occurred";j instanceof Error?v=j.message:typeof j=="string"&&(v=j),(v.includes("Failed to fetch")||v.includes("NetworkError"))&&(v="Network error occurred. Please check your connection and try again."),i(C=>({...C,step:"error",errorMessage:v}))}}},y=()=>{i(j=>({...j,step:"select"}))},f=()=>{i(j=>({...j,step:"select"}))},N=()=>{i({step:"select"}),c.current&&(c.current.value="")},p=()=>{if(!n.selectedFormat)return"";switch(n.selectedFormat){case"csv":return".csv,text/csv";case"xml":return".xml,text/xml,application/xml";case"l5x":return".l5x,.xml,text/xml,application/xml";default:return""}},x=()=>{if(!n.selectedFormat)return"";switch(n.selectedFormat){case"csv":return"CSV files (.csv)";case"xml":return"XML files (.xml)";case"l5x":return"L5X files (.l5x)";default:return""}},S=nr.find(j=>j.vendor===n.selectedVendor);return e.jsx(ke,{isOpen:t,onClose:s,title:"Import Tags",size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[n.step==="select"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:['Import Tags to "',a,'"']}),e.jsx("p",{className:"text-gray-600",children:"Select the vendor and format of your tag file to import"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Vendor"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:nr.map(j=>e.jsxs("button",{onClick:()=>l(j.vendor),className:`
                        p-4 border-2 rounded-lg text-left transition-all
                        ${n.selectedVendor===j.vendor?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}
                      `,children:[e.jsx("div",{className:"font-medium text-gray-900",children:j.displayName}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:j.description})]},j.vendor))})]}),n.selectedVendor&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Format"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:S?.formats.map(j=>e.jsx("button",{onClick:()=>d(j),className:`
                          p-3 border-2 rounded-lg text-center font-medium transition-all
                          ${n.selectedFormat===j?"border-primary bg-primary text-white":"border-gray-200 text-gray-700 hover:border-gray-300"}
                        `,children:j.toUpperCase()},j))})]})]})]}),n.step==="upload"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Upload ",S?.displayName," ",n.selectedFormat?.toUpperCase()," File"]}),e.jsxs("p",{className:"text-gray-600",children:["Select your ",x()," file to import tags"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors",onClick:()=>c.current?.click(),children:[e.jsx("input",{ref:c,type:"file",accept:p(),onChange:h,className:"hidden"}),e.jsx(Ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:n.selectedFile?n.selectedFile.name:"Choose file to upload"}),e.jsx("div",{className:"text-gray-600",children:n.selectedFile?`Size: ${(n.selectedFile.size/1024).toFixed(1)} KB`:`Click to browse or drag and drop your ${x()}`})]}),n.selectedFile&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-green-900",children:n.selectedFile.name}),e.jsxs("div",{className:"text-sm text-green-700",children:[(n.selectedFile.size/1024).toFixed(1)," KB • Ready to import"]})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Back"}),e.jsxs("button",{onClick:g,disabled:!n.selectedFile,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Import Tags"]})]})]}),n.step==="progress"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(wr,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:"Importing your tags..."}),e.jsx("div",{className:"text-sm text-gray-600",children:"Please do not close this window while the import is processing."})]}),n.step==="success"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ce,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import completed successfully!"}),e.jsxs("div",{className:"text-gray-600 mb-4",children:[n.importResult?.inserted||0,' tags were imported into "',a,'"']}),n.importResult?.errors&&n.importResult.errors.length>0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-left mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ot,{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-yellow-800 mb-2",children:[n.importResult.errors.length," rows had issues:"]}),e.jsxs("div",{className:"text-sm text-yellow-700 space-y-1 max-h-32 overflow-y-auto",children:[n.importResult.errors.slice(0,5).map((j,v)=>e.jsxs("div",{children:["Row ",j.row,": ",j.errors.join(", ")]},v)),n.importResult.errors.length>5&&e.jsxs("div",{className:"text-yellow-600 italic",children:["... and ",n.importResult.errors.length-5," more"]})]})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:N,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Import More"}),e.jsx("button",{onClick:s,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Done"})]})]}),n.step==="error"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx(ue,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Import failed"}),e.jsxs("div",{className:"text-gray-600 mb-2",children:[e.jsx("strong",{children:"Error:"})," ",n.errorMessage]}),e.jsx("div",{className:"text-sm text-gray-500 mb-6",children:"Please check your file format and try again, or contact support if the problem persists."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:"Close"}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors",children:"Try Again"})]})]})]})})}const At={rockwell:["BOOL","INT","DINT","REAL","STRING","TIMER","COUNTER"],siemens:["BOOL","INT","DINT","REAL","STRING"],beckhoff:["BOOL","INT","DINT","REAL","STRING","TIMER","COUNTER"]},Wc=(t,s)=>At[s].includes(t),Yc=t=>At[t]||At.rockwell,Xc=(t,s)=>{if(!t||!t.trim())return!1;switch(s){case"rockwell":return/^([NBFTC]\d+:\d+|[NBFTC]\d+:\d+\/\d+)$/i.test(t);case"siemens":return/^(M\d+\.\d+|MW\d+|DB\d+\.DB[XWD]\d+(\.\d+)?|[IQ]\d+\.\d+)$/i.test(t);case"beckhoff":return/^%(I|Q)[XWD]\d+\.\d+$|^%MW\d+$/i.test(t);default:return!0}},Jc=(t,s)=>`Data type '${t}' is not supported by ${s.charAt(0).toUpperCase()+s.slice(1)} vendor. Supported types: ${At[s].join(", ")}`,Kc=(t,s)=>{const r={rockwell:"N7:0, B3:0/1, T4:0",siemens:"M10.0, MW20, DB1.DBX0.0",beckhoff:"%IX1.0, %QX2.1, %MW10"};return`Address format '${t}' is invalid for ${s.charAt(0).toUpperCase()+s.slice(1)} vendor. Examples: ${r[s]}`},Qc=({sessionMode:t=!1})=>{const{projectId:s}=hs(),r=K(),{showToast:a}=Fe(),o=window.location.pathname.startsWith("/workspace/"),{tags:n,loading:i,error:c,filters:l,pagination:d,fetchTags:h,createTag:g,updateTag:y,deleteTag:f,setFilters:N,clearError:p,refreshTags:x}=wc(),[S,j]=u.useState(!1),[v,C]=u.useState(null),[w,P]=u.useState(null),[b,m]=u.useState([]),[k,O]=u.useState(!1),[I,T]=u.useState(!1),[R,L]=u.useState(!1),[F,z]=u.useState(null),[H,Y]=u.useState(!1),[Ne,ee]=u.useState(!1),[G,ne]=u.useState(!1),[xe,V]=u.useState(null),X=u.useRef(null);u.useEffect(()=>{const E=$=>{X.current&&!X.current.contains($.target)&&j(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),u.useEffect(()=>{let E=null;if(s)E=parseInt(s),localStorage.setItem("currentProjectId",E.toString());else{const $=localStorage.getItem("currentProjectId");$&&(E=parseInt($))}E&&!isNaN(E)?(P(E),N({projectId:E}),!s&&!t&&!o&&r(`/tag-database/${E}`,{replace:!0})):!t&&!o&&(P(null),Cs())},[s,N,r,t,o]);const Cs=async()=>{try{O(!0);const E=await de.getProjects();m(E)}catch(E){console.error("Failed to load projects:",E)}finally{O(!1)}},pa=async E=>{try{const Ae=(await de.getProjects()).find(pe=>pe.id===E);Ae&&V(Ae)}catch($){console.error("Failed to load current project:",$)}},ga=E=>{P(E.id),V(E),localStorage.setItem("currentProjectId",E.id.toString()),N({projectId:E.id}),!t&&!o&&r(`/tag-database/${E.id}`,{replace:!0})};u.useEffect(()=>{w&&(h({projectId:w}),xe||pa(w))},[w]);const Vt=n.filter(E=>!(l.search&&!E.name.toLowerCase().includes(l.search.toLowerCase())&&!E.description.toLowerCase().includes(l.search.toLowerCase())||l.vendor&&l.vendor!=="all"&&E.vendor!==l.vendor||l.type&&l.type!=="all"&&E.type!==l.type||l.dataType&&l.dataType!=="all"&&E.data_type!==l.dataType||l.scope&&l.scope!=="all"&&E.scope!==l.scope||l.tagType&&l.tagType!=="all"&&E.tag_type!==l.tagType||l.isAIGenerated&&!E.is_ai_generated)),Ce=async(E,$,Ae)=>{try{const pe=n.find(Xe=>Xe.id===E);if(!pe)throw new Error("Tag not found");if($==="type"&&!Wc(Ae,pe.vendor)){const qt=Jc(Ae,pe.vendor);a({variant:"error",title:"Invalid Data Type",message:qt,duration:5e3});return}if($==="address"&&!Xc(Ae,pe.vendor)){const qt=Kc(Ae,pe.vendor);a({variant:"error",title:"Invalid Address Format",message:qt,duration:5e3});return}await y(E,{[$]:Ae}),a({variant:"success",title:"Tag Updated",message:`${$} updated successfully`,duration:3e3})}catch(pe){console.error("Error updating tag:",pe);const Xe=pe instanceof Error?pe.message:"Failed to update tag";a({variant:"error",title:"Update Failed",message:Xe,duration:5e3})}},fa=E=>{z(E),L(!0)},ba=async()=>{if(F){Y(!0);try{await f(F.id),a({variant:"success",title:"Tag Deleted",message:`Tag "${F.name}" has been successfully deleted.`,duration:4e3}),L(!1),z(null)}catch(E){console.error("Error deleting tag:",E),a({variant:"error",title:"Delete Failed",message:E instanceof Error?E.message:"Failed to delete tag. Please try again.",duration:5e3})}finally{Y(!1)}}},As=()=>{L(!1),z(null)},ja=async E=>{try{console.log("✅ Tag saved successfully:",E),C(null)}catch($){console.error("Error saving tag:",$),alert("Failed to save tag changes")}},ya=E=>{C(null)},va=()=>{if(!w){a({variant:"error",title:"No Project Selected",message:"Please select a project first before adding tags.",duration:4e3});return}T(!0)},Na=async E=>{try{await g(E),await x()}catch($){throw console.error("Error creating tag:",$),$}},wa=async()=>{if(!w){alert("Please select a project first");return}try{const E=await W.autoGenerateTags({project_id:w,logic_data:"Sample logic data",vendor:"rockwell",tag_prefix:"AUTO_"});alert(`Successfully generated ${E.data.count} tags!`),await x()}catch(E){console.error("Error auto-generating tags:",E),alert("Failed to generate tags: "+(E instanceof Error?E.message:"Unknown error"))}},Sa=()=>{if(!w){a({variant:"error",message:"Please select a project first"});return}ee(!0),j(!1)},ka=()=>{if(!w){a({variant:"error",title:"No Project Selected",message:"Please select a project first before importing tags.",duration:3e3});return}ne(!0)},Ca=E=>{a({variant:"success",title:"Import Successful",message:`Successfully imported ${E} tags.`,duration:5e3}),x()},Ye=(E,$)=>{N({[E]:$==="all"||$===""?void 0:$})},Aa=()=>{N({projectId:w||void 0,search:void 0,vendor:void 0,type:void 0,dataType:void 0,scope:void 0,tagType:void 0,isAIGenerated:void 0})};return e.jsxs("div",{className:"flex flex-col h-full bg-background text-primary",children:[c&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mx-6 mt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:c}),e.jsx("button",{onClick:p,className:"text-red-500 hover:text-red-700",children:e.jsx(fe,{className:"w-4 h-4"})})]})}),!w&&!t&&!o?e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Select a Project"}),e.jsx("p",{className:"text-secondary",children:"Choose a project to manage its tags"})]}),k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{className:"w-8 h-8 text-accent mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-secondary",children:"Loading projects..."})]}):b.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-muted mb-4",children:"No projects found"}),e.jsx("button",{onClick:()=>r("/pandaura-as"),className:"text-accent hover:text-accent-dark underline",children:"Create your first project"})]}):e.jsx("div",{className:"space-y-3",children:b.map(E=>e.jsxs("button",{onClick:()=>ga(E),className:"w-full p-4 bg-surface border border-light rounded-lg hover:border-accent hover:shadow-sm transition-all text-left",children:[e.jsx("div",{className:"font-medium text-primary",children:E.project_name}),E.client_name&&e.jsxs("div",{className:"text-sm text-secondary mt-1",children:["Client: ",E.client_name]}),E.target_plc_vendor&&e.jsxs("div",{className:"text-xs text-muted mt-1 capitalize",children:["Target: ",E.target_plc_vendor]})]},E.id))})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-30 bg-white border-b border-light px-6 py-4 flex justify-between items-center shadow-sm",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-primary",children:"Tag Database Manager"}),w&&e.jsxs("div",{className:"text-sm text-secondary mt-1",children:["Project ID: ",w,b.length>0&&e.jsxs("span",{className:"ml-2",children:["- ",b.find(E=>E.id===w)?.project_name||"Unknown Project"]})]})]}),e.jsxs("div",{className:"flex gap-3 items-center",children:[!o&&e.jsx("button",{onClick:()=>{P(null),localStorage.removeItem("currentProjectId"),t||r("/tag-database",{replace:!0}),Cs()},className:"bg-surface text-primary px-3 py-2 rounded-md text-sm hover:bg-gray-100 transition-colors border border-light",children:"Change Project"}),e.jsxs("button",{onClick:ka,disabled:i||!w,className:"bg-primary text-white px-4 py-2 rounded-md flex items-center gap-2 text-sm hover:bg-primary transition-colors cursor-pointer disabled:opacity-50",title:"Import Beckhoff tags from CSV or XML files",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Import Tags"]}),e.jsxs("button",{onClick:Sa,disabled:i||!w||n.length===0,className:"bg-primary border border-light px-4 py-2 rounded-md flex items-center gap-2 text-sm hover:bg-primary transition-colors cursor-pointer disabled:opacity-50 text-white hover:text-white",title:n.length===0?"No tags to export. Please add tags first.":"Export tags in vendor-specific formats",children:[e.jsx(Be,{className:"w-4 h-4"}),"Export your tags"]}),e.jsxs("button",{onClick:wa,disabled:i||!w,className:"bg-white border border-light px-4 py-2 rounded-md text-sm hover:bg-accent-light transition-colors cursor-pointer flex items-center gap-2 disabled:opacity-50",children:[e.jsx(as,{className:"w-4 h-4"}),"Auto-Generate Tags"]}),e.jsx("button",{onClick:x,disabled:i,className:"bg-white border border-light px-2 py-2 rounded-md text-sm hover:bg-accent-light transition-colors cursor-pointer disabled:opacity-50",children:e.jsx(me,{className:`w-4 h-4 ${i?"animate-spin":""}`})})]})]}),e.jsxs("div",{className:"sticky top-[64px] z-20 bg-white border-b border-light px-6 py-3 flex flex-wrap items-center gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search tags...",value:l.search||"",onChange:E=>Ye("search",E.target.value),className:"border border-light rounded px-4 py-2 text-sm w-64 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsxs("select",{value:l.vendor||"all",onChange:E=>Ye("vendor",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Vendors"}),e.jsx("option",{value:"rockwell",children:"Rockwell"}),e.jsx("option",{value:"siemens",children:"Siemens"}),e.jsx("option",{value:"beckhoff",children:"Beckhoff"})]}),e.jsxs("select",{value:l.tagType||"all",onChange:E=>Ye("tagType",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Tag Types"}),e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"}),e.jsx("option",{value:"memory",children:"Memory"}),e.jsx("option",{value:"temp",children:"Temp"}),e.jsx("option",{value:"constant",children:"Constant"})]}),e.jsxs("select",{value:l.type||"all",onChange:E=>Ye("type",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Data Types"}),e.jsx("option",{value:"BOOL",children:"BOOL"}),e.jsx("option",{value:"INT",children:"INT"}),e.jsx("option",{value:"REAL",children:"REAL"}),e.jsx("option",{value:"DINT",children:"DINT"}),e.jsx("option",{value:"STRING",children:"STRING"}),e.jsx("option",{value:"TIMER",children:"TIMER"}),e.jsx("option",{value:"COUNTER",children:"COUNTER"})]}),e.jsxs("select",{value:l.scope||"all",onChange:E=>Ye("scope",E.target.value),className:"border border-light rounded px-3 py-2 text-sm cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"all",children:"All Scopes"}),e.jsx("option",{value:"global",children:"Global"}),e.jsx("option",{value:"local",children:"Local"}),e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.isAIGenerated||!1,onChange:E=>N({isAIGenerated:E.target.checked?!0:void 0}),className:"accent-primary cursor-pointer"}),"Show AI-generated only"]}),e.jsxs("button",{onClick:va,disabled:i,className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Me,{className:"w-4 h-4"}),"Add Tag"]})]}),i&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(me,{className:"w-6 h-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-primary",children:"Loading tags..."})]}),e.jsxs("div",{className:"flex-1 px-6 py-4 pb-32 overflow-auto",children:[e.jsxs("div",{className:"bg-white border border-light rounded-md shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Tag Name"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Description"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Type"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Data Type"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Address"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Default"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Vendor"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Scope"}),e.jsx("th",{className:"text-left p-3 text-sm font-medium text-primary",children:"Actions"})]})}),e.jsx("tbody",{children:Vt.map(E=>e.jsxs("tr",{className:"border-b border-light hover:bg-gray-50",children:[e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[v===E.id?e.jsx("input",{type:"text",value:E.name,onChange:$=>Ce(E.id,"name",$.target.value),className:"border border-light rounded px-2 py-1 text-sm w-full font-mono",autoFocus:!0}):e.jsx("span",{className:"font-mono text-sm",children:E.name}),E.is_ai_generated&&e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-1 rounded",children:"AI"})]})}),e.jsx("td",{className:"p-3",children:v===E.id?e.jsx("input",{type:"text",value:E.description,onChange:$=>Ce(E.id,"description",$.target.value),className:"border border-light rounded px-2 py-1 text-sm w-full"}):e.jsx("span",{className:"text-sm text-muted",children:E.description})}),e.jsx("td",{className:"p-3",children:v===E.id?e.jsxs("select",{value:E.tag_type,onChange:$=>Ce(E.id,"tag_type",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"}),e.jsx("option",{value:"memory",children:"Memory"}),e.jsx("option",{value:"temp",children:"Temp"}),e.jsx("option",{value:"constant",children:"Constant"})]}):e.jsx("span",{className:`text-xs px-2 py-1 rounded ${E.tag_type==="input"?"bg-blue-100 text-blue-700":E.tag_type==="output"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:E.tag_type.charAt(0).toUpperCase()+E.tag_type.slice(1)})}),e.jsx("td",{className:"p-3",children:v===E.id?e.jsx("select",{value:E.type,onChange:$=>Ce(E.id,"type",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:Yc(E.vendor).map($=>e.jsx("option",{value:$,children:$},$))}):e.jsx("span",{className:"text-sm font-mono",children:E.type})}),e.jsx("td",{className:"p-3",children:v===E.id?e.jsx("input",{type:"text",value:E.address,onChange:$=>Ce(E.id,"address",$.target.value),className:"border border-light rounded px-2 py-1 text-sm font-mono w-20"}):e.jsx("span",{className:"text-sm font-mono text-muted",children:E.address})}),e.jsx("td",{className:"p-3",children:v===E.id?e.jsx("input",{type:"text",value:E.default_value,onChange:$=>Ce(E.id,"default_value",$.target.value),className:"border border-light rounded px-2 py-1 text-sm font-mono w-16"}):e.jsx("span",{className:"text-sm font-mono text-muted",children:E.default_value})}),e.jsx("td",{className:"p-3",children:v===E.id?e.jsxs("select",{value:E.vendor,onChange:$=>Ce(E.id,"vendor",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"rockwell",children:"Rockwell"}),e.jsx("option",{value:"siemens",children:"Siemens"}),e.jsx("option",{value:"beckhoff",children:"Beckhoff"})]}):e.jsx("span",{className:`text-xs px-2 py-1 rounded ${E.vendor==="rockwell"?"bg-red-100 text-red-700":E.vendor==="siemens"?"bg-teal-100 text-teal-700":"bg-orange-100 text-orange-700"}`,children:E.vendor.charAt(0).toUpperCase()+E.vendor.slice(1)})}),e.jsx("td",{className:"p-3",children:v===E.id?e.jsxs("select",{value:E.scope,onChange:$=>Ce(E.id,"scope",$.target.value),className:"border border-light rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"global",children:"Global"}),e.jsx("option",{value:"local",children:"Local"}),e.jsx("option",{value:"input",children:"Input"}),e.jsx("option",{value:"output",children:"Output"})]}):e.jsx("span",{className:"text-sm",children:E.scope})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex gap-1",children:v===E.id?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ja(E.id),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:e.jsx(ps,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ya(E.id),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:e.jsx(fe,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(E.id),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:e.jsx(po,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>fa(E),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:e.jsx(Rt,{className:"w-4 h-4"})})]})})})]},E.id))})]}),Vt.length===0&&!i&&e.jsxs("div",{className:"text-center py-8 text-muted",children:[e.jsx("div",{className:"mb-2",children:"No tags match your current filters"}),e.jsx("button",{onClick:Aa,className:"text-accent hover:underline text-sm",children:"Clear all filters"})]})]}),d.total>0&&e.jsxs("div",{className:"mt-4 text-center text-sm text-muted",children:["Showing ",Vt.length," of ",d.total," tags (Page ",d.page," of ",d.totalPages,")"]})]}),e.jsx(ke,{isOpen:R,onClose:As,title:"Confirm Delete",size:"md",actions:e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",onClick:As,disabled:H,children:"Cancel"}),e.jsx(M,{variant:"primary",onClick:ba,loading:H,className:"bg-red-600 hover:bg-red-700 text-white",children:H?"Deleting...":"Delete Tag"})]}),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ot,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-900 mb-2",children:["Are you sure you want to delete the tag ",e.jsxs("strong",{children:['"',F?.name,'"']}),"?"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. The tag will be permanently removed from the database."}),F&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded border text-sm",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",F.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Address:"})," ",F.address]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Vendor:"})," ",F.vendor]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Scope:"})," ",F.scope]})]})})]})]})}),w&&e.jsx(qc,{isOpen:I,onClose:()=>T(!1),onSuccess:()=>T(!1),projectId:w,onCreate:Na}),w&&xe&&e.jsx(Hc,{isOpen:Ne,onClose:()=>ee(!1),projectId:w,projectName:xe.project_name,tags:n}),w&&xe&&e.jsx(Gc,{isOpen:G,onClose:()=>ne(!1),projectId:w,projectName:xe.project_name,onSuccess:Ca})]})]})},gt=t=>e.jsx(Nc,{children:e.jsx(Qc,{...t})});function Zc(){const t=K(),s=Et(),{user:r,organizations:a,selectedOrg:o,logout:n,isAuthenticated:i,isLoading:c}=je(),[l,d]=u.useState("overview"),[h,g]=u.useState(!1),[y,f]=u.useState(!1);u.useEffect(()=>{!c&&!i&&t("/signin",{replace:!0})},[c,i,t]);const[N,p]=u.useState({name:r?.fullName||"Loading...",email:r?.email||"Loading...",company:o?.org_name||"Loading...",timezone:"America/New_York",language:"English",tier:"Enterprise",lastLogin:"Loading..."});u.useEffect(()=>{r&&o&&p(T=>({...T,name:r.fullName,email:r.email,company:o.org_name||"Unknown Organization",tier:o.role||"Enterprise"}))},[r,o]);const[x,S]=u.useState({defaultVendor:"Rockwell",defaultExportFormat:"PDF",documentBranding:!0,aiVerbosity:"Detailed",defaultModule:"Logic Studio",codeFontSize:14,notifications:{system:!0,aiUpdates:!0,docGeneration:!1}}),[j]=u.useState([{name:"Sarah Johnson",email:"sarah@example.com",role:"Admin",lastActive:"2 hours ago"},{name:"Mike Davis",email:"mike@example.com",role:"Engineer",lastActive:"1 day ago"},{name:"Lisa Chen",email:"lisa@example.com",role:"Viewer",lastActive:"3 days ago"}]),[v]=u.useState([{name:"Production API",created:"Jul 15, 2025",lastUsed:"Aug 4, 2025",key:"pk_live_..."},{name:"Development API",created:"Jun 22, 2025",lastUsed:"Aug 2, 2025",key:"pk_test_..."}]),C=T=>{console.log(`Saving ${T} changes`),alert(`${T} settings saved successfully!`)},w=()=>{const T=s.state?.from;if(T)t(T);else{const R=window.history.length>1;t(R?-1:"/home")}},P=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Profile Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:N.name,onChange:T=>p(R=>({...R,name:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email Address"}),e.jsx("input",{type:"email",value:N.email,onChange:T=>p(R=>({...R,email:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:N.company,onChange:T=>p(R=>({...R,company:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",disabled:!0,placeholder:"Based on current organization"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Timezone"}),e.jsxs("select",{value:N.timezone,onChange:T=>p(R=>({...R,timezone:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"America/New_York",children:"Eastern Time (EST/EDT)"}),e.jsx("option",{value:"America/Chicago",children:"Central Time (CST/CDT)"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time (MST/MDT)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PST/PDT)"}),e.jsx("option",{value:"UTC",children:"UTC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Language"}),e.jsxs("select",{value:N.language,onChange:T=>p(R=>({...R,language:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"English",children:"English"}),e.jsx("option",{value:"Spanish",children:"Español"}),e.jsx("option",{value:"German",children:"Deutsch"}),e.jsx("option",{value:"French",children:"Français"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company Logo (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Ve,{className:"w-8 h-8 text-muted mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted",children:"Upload PNG logo for document exports"}),e.jsx("button",{className:"mt-2 text-accent hover:underline text-sm",children:"Browse Files"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"System alerts and maintenance notifications"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"AI model updates and new features"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"Document generation completion alerts"})]})]})]}),e.jsxs("button",{onClick:()=>C("Profile"),className:"mt-6 bg-primary text-white px-6 py-2 rounded flex items-center gap-2 hover:bg-secondary transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"}),"Save Changes"]})]}),e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Organization & Account Details"}),a.length>1&&e.jsxs("span",{className:"text-xs text-muted bg-blue-50 px-2 py-1 rounded",children:[a.length," organizations"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-2",children:"Current Organization"}),e.jsx("p",{className:"text-lg font-semibold text-blue-900",children:o?.org_name||"Loading..."}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:o?.industry||"Industry not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted mb-2",children:"Your Role & Permissions"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-sm font-medium ${o?.role==="Admin"?"bg-red-100 text-red-800 border border-red-200":o?.role==="Editor"?"bg-blue-100 text-blue-800 border border-blue-200":o?.role==="Viewer"?"bg-green-100 text-green-800 border border-green-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:o?.role||"Loading..."}),e.jsx("span",{className:"text-sm text-muted",children:o?.role==="Admin"?"Full system access":o?.role==="Editor"?"Create & modify content":o?.role==="Viewer"?"View-only access":""})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:"Account Security"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?.twoFactorEnabled?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${r?.twoFactorEnabled?"text-green-700":"text-red-700"}`,children:r?.twoFactorEnabled?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Account ID"}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded font-mono",children:r?.userId?.substring(0,8)||"..."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-muted mb-1",children:"Organization Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"Size:"}),e.jsx("span",{className:"font-medium",children:o?.size||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted",children:"License:"}),e.jsx("span",{className:"font-medium",children:"On-Premise"})]})]})]})]})]}),a&&a.length>1&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-light",children:[e.jsxs("h4",{className:"text-sm font-medium mb-3",children:["Your Organizations (",a.length,")"]}),e.jsx("div",{className:"space-y-2",children:a.map(T=>e.jsx("div",{className:`p-3 rounded-lg border ${T.org_id===o?.org_id?"border-accent bg-accent/5":"border-light"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:T.org_name}),e.jsx("p",{className:"text-sm text-muted",children:T.industry||"Industry not specified"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex px-2 py-1 rounded text-xs font-medium ${T.role==="Admin"?"bg-red-100 text-red-700":T.role==="Editor"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:T.role}),T.org_id===o?.org_id&&e.jsx("p",{className:"text-xs text-accent mt-1",children:"Current"})]})]})},T.org_id))})]})]})]}),b=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Platform Preferences"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default PLC Vendor"}),e.jsxs("select",{value:x.defaultVendor,onChange:T=>S(R=>({...R,defaultVendor:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Rockwell",children:"Rockwell Automation"}),e.jsx("option",{value:"Siemens",children:"Siemens"}),e.jsx("option",{value:"Beckhoff",children:"Beckhoff"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Export Format"}),e.jsxs("select",{value:x.defaultExportFormat,onChange:T=>S(R=>({...R,defaultExportFormat:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"PDF",children:"PDF"}),e.jsx("option",{value:"DOCX",children:"Microsoft Word (DOCX)"}),e.jsx("option",{value:"ZIP",children:"ZIP Bundle"}),e.jsx("option",{value:"XLSX",children:"Excel (XLSX)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"AI Assistant Behavior"}),e.jsxs("select",{value:x.aiVerbosity,onChange:T=>S(R=>({...R,aiVerbosity:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Brief",children:"Brief replies"}),e.jsx("option",{value:"Detailed",children:"Detailed explanations"}),e.jsx("option",{value:"Verbose",children:"Verbose with examples"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Module on Login"}),e.jsxs("select",{value:x.defaultModule,onChange:T=>S(R=>({...R,defaultModule:T.target.value})),className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Pandaura AS",children:"Pandaura AS"}),e.jsx("option",{value:"Logic Studio",children:"Logic Studio"}),e.jsx("option",{value:"AutoDocs",children:"AutoDocs"}),e.jsx("option",{value:"Tag Database Manager",children:"Tag Database Manager"}),e.jsx("option",{value:"Projects",children:"Projects"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:x.documentBranding,onChange:T=>S(R=>({...R,documentBranding:T.target.checked})),className:"accent-primary"}),e.jsx("span",{className:"text-sm",children:"Include company branding on exported documents"})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Code Editor Font Size"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"range",min:"10",max:"20",value:x.codeFontSize,onChange:T=>S(R=>({...R,codeFontSize:parseInt(T.target.value)})),className:"flex-1"}),e.jsxs("span",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:[x.codeFontSize,"px"]})]})]}),e.jsxs("button",{onClick:()=>C("Preferences"),className:"mt-6 bg-primary text-white px-6 py-2 rounded flex items-center gap-2 hover:bg-secondary transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"}),"Save Preferences"]})]})}),m=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Team Management"}),e.jsx("span",{className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded",children:"Enterprise Plan"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Invite New Member"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",placeholder:"Enter email address...",className:"flex-1 border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsxs("select",{className:"border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"Engineer",children:"Engineer"}),e.jsx("option",{value:"Admin",children:"Admin"}),e.jsx("option",{value:"Viewer",children:"Viewer"})]}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors",children:"Invite"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Team Members (3/10 seats used)"}),e.jsx("div",{className:"space-y-2",children:j.map((T,R)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:T.name}),e.jsx("div",{className:"text-xs text-muted",children:T.email})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-xs text-muted",children:T.lastActive}),e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:T.role}),e.jsx("button",{className:"text-muted hover:text-red-500",children:e.jsx(Ms,{className:"w-4 h-4"})})]})]},R))})]})]})}),k=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Security & Authentication"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Change Password"}),e.jsxs("div",{className:"space-y-3 max-w-md",children:[e.jsx("input",{type:"password",placeholder:"Current password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsx("input",{type:"password",placeholder:"New password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsx("input",{type:"password",placeholder:"Confirm new password",className:"w-full border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent"}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors",children:"Update Password"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Two-Factor Authentication"}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm",children:"2FA is enabled via TOTP app"})]}),e.jsx("button",{onClick:()=>f(!0),className:"text-sm text-green-600 hover:underline",children:"Manage"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Active Sessions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kr,{className:"w-4 h-4 text-muted"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Current Session"}),e.jsx("div",{className:"text-xs text-muted",children:"Chrome on macOS • 192.168.1.100"})]})]}),e.jsx("span",{className:"text-xs text-green-600",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(uo,{className:"w-4 h-4 text-muted"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:"Mobile Browser"}),e.jsx("div",{className:"text-xs text-muted",children:"Safari on iOS • 2 hours ago"})]})]}),e.jsx("button",{className:"text-xs text-red-600 hover:underline",children:"Terminate"})]})]}),e.jsx("button",{className:"mt-3 text-sm text-red-600 hover:underline",children:"Sign Out Everywhere"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Session Timeout"}),e.jsxs("select",{className:"border border-light rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"30",children:"30 minutes"}),e.jsx("option",{value:"120",children:"2 hours"}),e.jsx("option",{value:"480",children:"8 hours"}),e.jsx("option",{value:"never",children:"Never"})]})]})]})]})}),O=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"API Keys"}),e.jsx("button",{className:"bg-primary text-white px-4 py-2 rounded text-sm hover:bg-secondary transition-colors",children:"Generate New Key"})]}),e.jsx("div",{className:"space-y-3",children:v.map((T,R)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-light rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:T.name}),e.jsxs("div",{className:"text-xs text-muted",children:["Created: ",T.created," • Last used: ",T.lastUsed]}),e.jsxs("div",{className:"text-xs font-mono bg-gray-100 px-2 py-1 rounded mt-1 inline-block",children:[T.key,"••••••••••••••••"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"text-sm text-muted hover:text-primary",children:"Regenerate"}),e.jsx("button",{className:"text-sm text-red-600 hover:text-red-700",children:"Revoke"})]})]},R))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ot,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"On-Premise Security:"})," API keys are stored locally and encrypted. All API calls are processed within your network infrastructure."]})]})})]})}),I=[{id:"overview",label:"Overview",icon:Cr},{id:"preferences",label:"Preferences",icon:fs},...N.tier!=="Individual"?[{id:"team",label:"Team Settings",icon:Mt}]:[],{id:"billing",label:"Billing & Plan",icon:mn},{id:"api",label:"API Keys",icon:Rn},{id:"security",label:"Security / 2FA",icon:we}];return e.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[c||!r?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted",children:"Loading profile..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white border-b border-light px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:w,className:"p-2 hover:bg-gray-100 rounded-md transition-colors flex items-center gap-2 text-muted hover:text-primary",title:"Go back",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Back"})]}),e.jsx("div",{className:"w-12 h-12 bg-primary text-white rounded-full flex items-center justify-center font-bold text-lg",children:N.name?N.name.split(" ").map(T=>T[0]).join(""):"??"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:N.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${o?.role==="Admin"?"bg-red-100 text-red-700":o?.role==="Editor"?"bg-blue-100 text-blue-700":o?.role==="Viewer"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:o?.role||N.tier}),o?.org_name&&e.jsxs("span",{children:["@ ",o.org_name]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Last login: ",N.lastLogin]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"text-sm text-muted hover:text-primary",children:"Edit Profile"}),e.jsxs("button",{onClick:()=>{n(),t("/signin")},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("nav",{className:"w-64 bg-white border-r border-light p-4",children:e.jsx("div",{className:"space-y-1",children:I.map(T=>{const R=T.icon;return e.jsxs("button",{onClick:()=>d(T.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded text-left transition-colors ${l===T.id?"bg-accent-light text-accent":"text-muted hover:text-primary hover:bg-gray-50"}`,children:[e.jsx(R,{className:"w-4 h-4"}),T.label]},T.id)})})}),e.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[l==="overview"&&P(),l==="preferences"&&b(),l==="team"&&m(),l==="security"&&k(),l==="api"&&O(),l==="billing"&&e.jsxs("div",{className:"bg-white border border-light rounded-lg p-6 text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Billing & Plan Management"}),e.jsx("p",{className:"text-muted mb-4",children:"On-premise deployments use local license management"}),e.jsx("div",{className:"text-sm text-left max-w-md mx-auto",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Current Role:"}),e.jsx("span",{className:"font-medium",children:o?.role||N.tier})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Organization:"}),e.jsx("span",{className:"font-medium",children:o?.org_name||"Loading..."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"License Type:"}),e.jsx("span",{className:"font-medium",children:"On-Premise"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Access Level:"}),e.jsx("span",{className:"font-medium",children:o?.role==="Admin"?"Full Access":o?.role==="Editor"?"Edit & View":o?.role==="Viewer"?"View Only":"Loading..."})]})]})})]})]})]})]}),e.jsx(Pr,{})]})}function ed(){return e.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-48 w-auto animate-pulse filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("p",{className:"text-primary text-lg font-semibold animate-pulse",children:"Loading Pandaura..."})]})})}function td({email:t,onVerify:s,onBack:r,isLoading:a=!1}){const[o,n]=u.useState(""),[i,c]=u.useState(!1),[l,d]=u.useState(""),[h,g]=u.useState(0);u.useEffect(()=>{o.length===6&&!a&&y()},[o,a]);const y=async()=>{if(o.length!==6){d("Please enter a 6-digit code");return}d("");try{const p=await s(o,i);p.success||(g(x=>x+1),d(p.message||"Invalid authentication code"),n(""))}catch(p){g(x=>x+1),d(p.message||"Verification failed"),n("")}},f=p=>{const x=p.target.value.replace(/[^0-9]/g,"");x.length<=6&&(n(x),d(""))},N=p=>{p.key==="Enter"&&o.length===6&&!a&&y()};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[e.jsx("img",{src:te,alt:"Pandaura AS Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mt-3",children:"Two-Factor Authentication"}),e.jsxs("p",{className:"text-sm text-muted text-center mt-2 max-w-md",children:["Enter the 6-digit code from your authenticator app for ",e.jsx("strong",{children:t})]})]}),e.jsx("div",{className:"w-full max-w-sm bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"twofa-code",name:"twofa-code",type:"text",inputMode:"numeric",pattern:"[0-9]*",required:!0,autoFocus:!0,autoComplete:"one-time-code",maxLength:6,value:o,onChange:f,onKeyPress:N,disabled:a,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all text-center text-2xl tracking-[0.5em] font-mono",placeholder:"000000"}),e.jsx("label",{htmlFor:"twofa-code",className:`absolute left-4 top-2 text-sm text-muted transition-all 
                           peer-focus:text-xs peer-focus:text-secondary`,children:"Authentication Code"})]}),e.jsx("div",{className:"flex justify-center space-x-2",children:Array.from({length:6},(p,x)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${x<o.length?"bg-accent":"bg-light"}`},x))}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer text-sm text-muted mt-4",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:p=>c(p.target.checked),disabled:a,className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{children:"Trust this device for 30 days"})]})]}),l&&e.jsxs("div",{className:"text-error text-sm text-center bg-error-light border border-error/20 rounded-md p-3 flex items-center justify-center",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),l,h>0&&e.jsxs("span",{className:"ml-2 text-xs",children:["(Attempt ",h,"/5)"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{type:"button",onClick:y,disabled:o.length!==6||a,className:"w-full bg-primary hover:bg-secondary disabled:bg-disabled disabled:text-muted text-white py-3 rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:a?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4 mr-2 animate-spin inline"}),"Verifying..."]}):"Verify & Sign In"}),e.jsxs("button",{type:"button",onClick:r,disabled:a,className:"w-full text-muted hover:text-primary text-sm transition-colors flex items-center justify-center",children:[e.jsx(he,{className:"w-4 h-4 mr-1"}),"Back to login"]})]}),h>=3&&e.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Having trouble?"})," Make sure your device's time is synchronized and you're using the latest code from your authenticator app."]})})]})}),e.jsx("div",{className:"mt-8 pt-4 text-center space-x-4 text-xs text-muted z-10",children:e.jsx("span",{children:"Need help? Contact your system administrator"})})]})}function sd({organizations:t,onOrgSelect:s,userEmail:r,isLoading:a=!1}){const[o,n]=u.useState(null),i=()=>{o&&s(o)},c=d=>{switch(d){case"Admin":return"text-red-600 bg-red-50 border-red-200";case"Editor":return"text-blue-600 bg-blue-50 border-blue-200";case"Viewer":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},l=d=>d?{startup:"1-10 employees",small:"11-50 employees",medium:"51-200 employees",large:"201-1000 employees",enterprise:"1000+ employees"}[d]||d:"";return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[e.jsx("img",{src:te,alt:"Pandaura AS Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mt-3",children:"Select Organization"}),e.jsx("p",{className:"text-sm text-muted text-center mt-2 max-w-md",children:"You have access to multiple organizations. Choose which one to sign in to."}),e.jsxs("p",{className:"text-xs text-secondary text-center mt-1",children:["Signed in as: ",e.jsx("strong",{children:r})]})]}),e.jsx("div",{className:"w-full max-w-md bg-surface border border-light rounded-lg shadow-card z-10 p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:"Your Organizations"}),e.jsx("div",{className:"space-y-3",children:t.map(d=>e.jsx("div",{children:e.jsxs("label",{className:`flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all hover:border-accent/50 ${o?.org_id===d.org_id?"border-accent bg-accent/5":"border-light bg-transparent"}`,children:[e.jsx("input",{type:"radio",name:"organization",value:d.org_id,checked:o?.org_id===d.org_id,onChange:()=>n(d),disabled:a,className:"sr-only"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(xs,{className:"w-8 h-8 text-accent"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-semibold text-primary",children:d.org_name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium border ${c(d.role)}`,children:d.role}),d.industry&&e.jsx("span",{className:"text-xs text-muted",children:d.industry})]}),d.size&&e.jsxs("p",{className:"text-xs text-muted mt-1 flex items-center",children:[e.jsx(Mt,{className:"w-3 h-3 mr-1"}),l(d.size)]})]})]}),o?.org_id===d.org_id&&e.jsx(Ee,{className:"w-5 h-5 text-accent flex-shrink-0"})]})})]})},d.org_id))}),e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:i,disabled:!o||a,className:"w-full",children:a?"Signing in...":"Continue"})})]})}),e.jsx("div",{className:"mt-8 pt-4 text-center text-xs text-muted z-10",children:e.jsx("p",{children:"You can switch organizations later from your profile settings"})})]})}const or=["The future of automation isn't wired — it's written.","Logic is your language. We just make it speak faster.","Great integrators don't copy-paste. They build systems that last.","Your plant doesn't wait. Neither should your tools.","Structured text. Unstructured power.","You didn't choose automation for paperwork.","Code once. Deploy everywhere. Trust always.","Real engineers ship reliable logic.","Automation that adapts, not breaks.","Your vision. Our intelligence. Perfect integration."];function rd(){const t=K(),{login:s,setSelectedOrg:r,organizations:a}=je(),[o,n]=u.useState(""),[i,c]=u.useState(""),[l,d]=u.useState(!1),[h,g]=u.useState(!1),[y,f]=u.useState("credentials"),[N,p]=u.useState([]),[x,S]=u.useState(""),[j,v]=u.useState(!1),[C,w]=u.useState(!1),[P,b]=u.useState(""),[m,k]=u.useState([]);u.useEffect(()=>{const F=or.filter(Y=>!m.includes(Y)),z=F.length>0?F:or,H=z[Math.floor(Math.random()*z.length)];b(H),k(Y=>[...Y,H])},[]);const O=async F=>{if(F.preventDefault(),!o.trim()||!i.trim()){S("Please enter both email and password.");return}v(!0),S("");try{const z=await s(o.trim(),i);z.requiresTwoFactor?f("twoFactor"):z.success?setTimeout(()=>{a&&a.length>1?(p(a),f("orgSelection")):(f("complete"),R())},100):S(z.message||"Invalid credentials")}catch(z){console.error("Login error:",z),S(z.message||"Login failed. Please try again.")}finally{v(!1)}},I=async(F,z)=>{v(!0),S("");try{const H=await s(o.trim(),i,F);return H.success?(z&&localStorage.setItem("pandaura_trusted_device","true"),setTimeout(()=>{a&&a.length>1?(p(a),f("orgSelection")):(f("complete"),R())},100),{success:!0}):{success:!1,message:H.message||"Invalid authentication code"}}catch(H){return console.error("2FA verification error:",H),{success:!1,message:H.message||"Verification failed"}}finally{v(!1)}},T=F=>{r(F),f("complete"),R()},R=()=>{w(!0),setTimeout(()=>{t("/home")},1500)},L=()=>{f("credentials"),S("")};return C?e.jsx(ed,{}):y==="twoFactor"?e.jsx(td,{email:o,onVerify:I,onBack:L,isLoading:j}):y==="orgSelection"&&N.length>1?e.jsx(sd,{organizations:N,onOrgSelect:T,userEmail:o,isLoading:j}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-20 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 mb-8 flex flex-col items-center",children:[e.jsx("img",{src:te,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-3xl font-bold text-primary text-center mt-4",children:"Pandaura AS"}),e.jsx("h2",{className:"text-lg text-secondary text-center",children:"Industrial Automation Suite"}),P&&e.jsx("div",{className:"mt-4 text-center max-w-md animate-fade-in",children:e.jsxs("p",{className:"text-sm text-muted italic px-4 py-2 bg-surface/50 rounded-md border border-light/50",children:['"',P,'"']})})]}),e.jsxs("div",{className:"w-full max-w-sm bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary text-center mb-6",children:"Sign in to Pandaura AS"}),e.jsxs("form",{className:"space-y-6",onSubmit:O,autoComplete:"on",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",name:"email",type:"email",required:!0,autoComplete:"username",autoFocus:!0,value:o,onChange:F=>n(F.target.value),disabled:j,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all disabled:opacity-50",placeholder:" "}),e.jsx("label",{htmlFor:"email",className:`absolute left-4 top-2 text-sm text-muted transition-all 
                         peer-focus:text-xs peer-focus:text-secondary peer-placeholder-shown:text-base peer-placeholder-shown:top-4 peer-placeholder-shown:text-disabled`,children:"Email Address"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:h?"text":"password",required:!0,autoComplete:"current-password",value:i,onChange:F=>c(F.target.value),disabled:j,className:"peer w-full px-4 pt-6 pb-3 bg-surface text-primary border border-light rounded-md shadow-sm outline-none focus:ring-2 focus:ring-accent focus:border-accent placeholder-transparent transition-all disabled:opacity-50",placeholder:" "}),e.jsx("label",{htmlFor:"password",className:`absolute left-4 top-2 text-sm text-muted transition-all 
                         peer-focus:text-xs peer-focus:text-secondary peer-placeholder-shown:text-base peer-placeholder-shown:top-4 peer-placeholder-shown:text-disabled`,children:"Password"}),e.jsx("button",{type:"button",onClick:()=>g(F=>!F),disabled:j,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted hover:text-primary transition-colors disabled:opacity-50",children:h?e.jsx(Nt,{className:"w-5 h-5"}):e.jsx(rt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer text-sm text-muted",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:F=>d(F.target.checked),disabled:j,className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-accent hover:text-secondary transition-colors",onClick:()=>{alert("Password reset functionality will be implemented soon.")},children:"Forgot password?"})]}),x&&e.jsx("div",{className:"text-error text-sm text-center bg-error-light border border-error/20 rounded-md p-3",children:x}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-primary hover:bg-secondary disabled:bg-disabled disabled:text-muted text-white py-3 rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:j?"Signing in...":"Continue"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-light"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-surface text-muted",children:"or continue with"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{type:"button",disabled:!0,className:"w-full inline-flex justify-center items-center px-4 py-2 border border-light rounded-md shadow-sm bg-surface text-sm font-medium text-muted hover:bg-light disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(xs,{className:"w-5 h-5 mr-2"}),"Enterprise SSO (Coming Soon)"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-light text-center space-x-4 text-xs text-muted",children:[e.jsx("button",{onClick:()=>t("/terms"),className:"hover:text-primary transition-colors",children:"Terms of Use"}),e.jsx("span",{children:"•"}),e.jsx("button",{onClick:()=>t("/privacy"),className:"hover:text-primary transition-colors",children:"Privacy Policy"})]})]}),e.jsxs("div",{className:"mt-8 text-center text-sm text-muted z-10",children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>t("/signup"),className:"text-accent hover:text-secondary font-medium transition-colors",children:"Sign up here"})]})]})}const Pt=t=>({id:t.id,name:t.project_name,client:t.client_name||"N/A",vendor:t.target_plc_vendor||"N/A",type:t.project_type||"",lastModified:t.updated_at,description:t.description||"",status:"active",versions:[],recentActivity:[]}),ws=t=>{switch(t.toLowerCase()){case"completed":return"bg-green-100 text-green-700";case"in progress":return"bg-blue-100 text-blue-700";case"active":return"bg-blue-100 text-blue-700";case"archived":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},Ss=t=>{if(!t||t==="N/A")return"bg-gray-100 text-gray-500";switch(t.toLowerCase()){case"rockwell":case"rockwell automation":return"bg-red-100 text-red-700";case"siemens":return"bg-teal-100 text-teal-700";case"beckhoff":return"bg-orange-100 text-orange-700";case"schneider":case"schneider electric":return"bg-green-100 text-green-700";case"omron":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-600"}},ks=t=>!t||t==="N/A"?"bg-gray-100 text-gray-500":"bg-purple-100 text-purple-700";function ad({project:t,onOpenOverview:s,onDelete:r}){return e.jsx("div",{className:`bg-surface rounded-lg border border-light p-6 hover:shadow-sm transition-all ${t.status==="archived"?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:t.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ws(t.status)}`,children:t.status==="active"?"Active":t.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-secondary mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Client:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${ks(t.client)}`,children:t.client})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Vendor:"}),e.jsx("span",{className:`ml-2 px-2 py-1 rounded text-xs font-medium ${Ss(t.vendor)}`,children:t.vendor})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Modified:"})," ",t.lastModified]})]}),e.jsx("p",{className:"text-sm text-muted",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(M,{onClick:()=>s(t),size:"sm",icon:Ee,iconPosition:"right",children:"Open Overview"}),e.jsx(M,{onClick:()=>r(t),variant:"ghost",size:"sm",icon:Rt,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete Project"})]})]})})}function nd({projects:t,onOpenOverview:s,onDelete:r}){return e.jsx("div",{className:"bg-surface rounded-lg border border-light overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Project Name"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Client"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Vendor"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Last Modified"}),e.jsx("th",{className:"text-left p-4 font-medium text-primary",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(a=>e.jsxs("tr",{className:`border-b border-light hover:bg-gray-50 transition-colors ${a.status==="archived"?"opacity-60":""}`,children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:a.name}),e.jsx("p",{className:"text-sm text-muted mt-1",children:a.description})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ks(a.client)}`,children:a.client})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ss(a.vendor)}`,children:a.vendor})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${ws(a.status)}`,children:a.status==="active"?"Active":a.status})}),e.jsx("td",{className:"p-4 text-secondary",children:a.lastModified}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{onClick:()=>s(a),size:"sm",icon:Ee,iconPosition:"right",children:"Open Overview"}),e.jsx(M,{onClick:()=>r(a),variant:"ghost",size:"sm",icon:Rt,className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Delete Project"})]})})]},a.id))})]})})}const od=[{value:"all",label:"All Projects"},{value:"active",label:"Active"},{value:"archived",label:"Archived"}];function id({onBack:t,onOpenProject:s,onDeleteProject:r,onNewProject:a,refreshTrigger:o=0,onRefreshComplete:n}){const{isAuthenticated:i,token:c,user:l}=je(),[d,h]=u.useState([]),[g,y]=u.useState(!0),[f,N]=u.useState(""),[p,x]=u.useState(""),[S,j]=u.useState("all"),[v,C]=u.useState("grid"),w=async()=>{if(!i||!c){console.log("ProjectsList: User not authenticated, skipping project load"),y(!1),N("Please log in to view projects");return}try{y(!0),N(""),console.log("ProjectsList: Loading projects for authenticated user:",l?.email),console.log("ProjectsList loadProjects - Token debug:",{localStorage:localStorage.getItem("authToken")?"exists":"missing",sessionStorage:sessionStorage.getItem("authToken")?"exists":"missing",localStorageKeys:Object.keys(localStorage),authTokenPreview:localStorage.getItem("authToken")?.substring(0,10)+"..."||"none"});const k=(await de.getProjects()).map(Pt);console.log("ProjectsList: Loaded",k.length,"projects"),h(k),n&&n()}catch(m){console.error("Failed to load projects:",m),N(m.message||"Failed to load projects")}finally{y(!1)}};u.useEffect(()=>{i&&c&&w()},[o,i,c]);const P=m=>{r(m)},b=d.filter(m=>{const k=m.name.toLowerCase().includes(p.toLowerCase())||m.client.toLowerCase().includes(p.toLowerCase())||m.description.toLowerCase().includes(p.toLowerCase()),O=S==="all"||m.status===S;return k&&O});return e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{onClick:t,variant:"ghost",icon:Tt,size:"sm",children:"Back"}),e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects"}),e.jsxs("span",{className:"text-sm text-secondary px-2 py-1 bg-light rounded",children:[b.length," projects"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{onClick:w,variant:"ghost",icon:me,disabled:g,size:"sm",children:g?"Loading...":"Refresh"}),e.jsxs("div",{className:"flex border border-light rounded overflow-hidden",children:[e.jsx("button",{onClick:()=>C("grid"),className:`p-2 ${v==="grid"?"bg-accent text-white":"bg-white text-muted hover:bg-gray-50"}`,title:"Card View",children:e.jsx(Sn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C("list"),className:`p-2 ${v==="list"?"bg-accent text-white":"bg-white text-muted hover:bg-gray-50"}`,title:"Table View",children:e.jsx(Fn,{className:"w-4 h-4"})})]}),e.jsx(M,{onClick:a,icon:Me,iconPosition:"left",children:"New Project"})]})]}),e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(se,{type:"search",placeholder:"Search projects...",value:p,onChange:m=>x(m.target.value),icon:et,iconPosition:"left"})}),e.jsx("div",{className:"w-48",children:e.jsx(Se,{options:od,value:S,onChange:j,placeholder:"Filter projects"})})]}),f&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:f}),e.jsx(M,{onClick:w,variant:"ghost",size:"sm",children:"Retry"})]})}),g&&!f&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(me,{className:"w-8 h-8 text-secondary mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-secondary",children:"Loading projects..."})]}),!g&&!f&&e.jsx("div",{className:v==="grid"?"space-y-4":"",children:b.length===0?e.jsxs("div",{className:"text-center py-12 bg-surface rounded-lg border border-light",children:[e.jsx(ns,{className:"w-16 h-16 text-muted mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary mb-2",children:"No projects found"}),e.jsx("p",{className:"text-secondary mb-4",children:p||S!=="all"?"Try adjusting your search or filter criteria.":"Get started by creating your first project."}),!p&&S==="all"&&e.jsx(M,{onClick:a,icon:Me,iconPosition:"left",children:"Create New Project"})]}):v==="grid"?b.map(m=>e.jsx(ad,{project:m,onOpenOverview:s,onDelete:P},m.id)):e.jsx(nd,{projects:b,onOpenOverview:s,onDelete:P})})]})}function ld(t,s=3e4){const[r,a]=u.useState(null),[o,n]=u.useState(!0),[i,c]=u.useState(null),[l,d]=u.useState(!1),[h,g]=u.useState(null),y=async()=>{try{c(null);const S=await de.getProject(t),j=Pt(S);a(j)}catch(S){console.error("Failed to load project:",S),c(S.message||"Failed to load project")}finally{n(!1)}},f=async S=>{if(!r)return;const j=await de.updateProject(r.id,S),v=Pt(j);a(v),d(!1),g(new Date)},N=async S=>{if(r)try{await de.autosaveProject(r.id,S),g(new Date)}catch(j){console.error("Auto-save failed:",j)}},p=async S=>{r&&(await de.saveProject(r.id,S),d(!1),g(new Date))},x=()=>d(!0);return u.useEffect(()=>{y()},[t]),{project:r,isLoading:o,error:i,isDirty:l,lastSaved:h,updateProject:f,autosave:N,save:p,markDirty:x,reload:y}}function cd({versions:t,onViewDiff:s,onRollback:r}){const[a,o]=u.useState(!1),[n,i]=u.useState(1),c=5,l=[...t].sort((p,x)=>x.id-p.id),d=Math.ceil(l.length/c),h=(n-1)*c,g=h+c,y=l.slice(h,g),f=p=>{i(p)},N=p=>{try{return new Date(p).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return p}};return e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer border-b border-light hover:bg-background transition-colors",onClick:()=>o(!a),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cn,{className:"w-5 h-5 text-accent"}),e.jsx("h3",{className:"font-semibold text-primary",children:"Version History"}),e.jsxs("span",{className:"text-sm text-muted",children:["(",l.length," versions)"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:a?e.jsx(tn,{className:"w-4 h-4 text-muted"}):e.jsx(qe,{className:"w-4 h-4 text-muted"})})]}),a&&e.jsx("div",{className:"p-4",children:l.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(fr,{className:"w-12 h-12 text-muted mx-auto mb-3"}),e.jsx("p",{className:"text-secondary",children:"No version history available"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3 mb-4",children:y.map((p,x)=>{const S=h+x===0;return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-md border transition-colors ${S?"bg-accent-light border-accent":"bg-background border-light hover:border-accent"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-medium text-primary",children:["Version ",p.id]}),S&&e.jsx("span",{className:"bg-accent text-white text-xs px-2 py-0.5 rounded-full",children:"Current"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${p.type==="Autosave"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:p.type})]}),e.jsxs("div",{className:"text-sm text-secondary mb-1",children:[e.jsx("span",{className:"font-medium",children:p.user})," • ",N(p.timestamp)]}),p.message&&e.jsx("p",{className:"text-sm text-muted",children:p.message}),p.changes&&p.changes.length>0&&e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted mt-2",children:[e.jsxs("span",{className:"text-green-600",children:["+",p.changes.reduce((j,v)=>j+v.linesAdded,0)," lines"]}),e.jsxs("span",{className:"text-red-600",children:["-",p.changes.reduce((j,v)=>j+v.linesRemoved,0)," lines"]}),e.jsxs("span",{children:[p.changes.length," file",p.changes.length!==1?"s":""," changed"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(M,{size:"sm",variant:"outline",icon:rt,onClick:()=>s(p),title:"View Changes",children:"View"}),!S&&e.jsx(M,{size:"sm",variant:"ghost",icon:wt,onClick:()=>r(p),className:"text-orange-600 hover:text-orange-700 hover:bg-orange-50",title:"Rollback to this version",children:"Rollback"})]})]},p.id)})}),d>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-light",children:[e.jsxs("div",{className:"text-sm text-secondary",children:["Showing ",h+1,"-",Math.min(g,l.length)," of ",l.length," versions"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>f(n-1),disabled:n===1,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:d},(p,x)=>x+1).map(p=>e.jsx(M,{size:"sm",variant:n===p?"primary":"ghost",onClick:()=>f(p),className:"w-8 h-8 p-0",children:p},p))}),e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>f(n+1),disabled:n===d,children:"Next"})]})]})]})})]})}const dd=t=>t.changes||[{file:"src/logic/main.st",type:"modified",linesAdded:15,linesRemoved:8},{file:"src/tags/process_tags.xml",type:"modified",linesAdded:3,linesRemoved:1},{file:"docs/system_overview.md",type:"added",linesAdded:42,linesRemoved:0}],ft={"src/logic/main.st":{additions:["+ // Added safety interlock for conveyor belt","+ IF Safety_OK AND Motor_Ready THEN","+     Conveyor_Start := TRUE;","+ ELSE","+     Conveyor_Start := FALSE;","+ END_IF;","","+ // Enhanced error handling","+ IF Error_Count > MAX_ERRORS THEN","+     System_Shutdown();","+ END_IF;"],deletions:["- // Basic motor control","- Motor_Start := TRUE;","","- IF Error THEN","-     Motor_Start := FALSE;","- END_IF;"],context:["  PROGRAM Main","  VAR","      Safety_OK : BOOL;","      Motor_Ready : BOOL;","      Conveyor_Start : BOOL;","  END_VAR"]}};function ud({version:t,onClose:s,onRollback:r,onExport:a}){const[o,n]=u.useState(null),[i,c]=u.useState(!1);if(!t)return null;const l=dd(t),d=o||(l.length>0?l[0].file:null),h=()=>{r(t),c(!1),s()},g=()=>{a&&a(t)},y=f=>{try{return new Date(f).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return f}};return e.jsxs(e.Fragment,{children:[e.jsxs(ke,{isOpen:!!t,onClose:s,title:`Version ${t.id} - Changes & Diff`,size:"xl",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-light",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-lg font-semibold text-primary",children:["Version ",t.id]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${t.type==="Autosave"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:t.type})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&e.jsx(M,{size:"sm",variant:"outline",icon:Be,onClick:g,children:"Export"}),e.jsx(M,{size:"sm",variant:"outline",icon:wt,onClick:()=>c(!0),className:"text-orange-600 hover:text-orange-700",children:"Rollback"})]})]}),e.jsxs("div",{className:"text-sm text-secondary",children:[e.jsx("span",{className:"font-medium",children:t.user})," • ",y(t.timestamp)]}),t.message&&e.jsx("p",{className:"text-sm text-primary mt-2",children:t.message}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mt-3",children:[e.jsxs("span",{className:"text-green-600",children:["+",l.reduce((f,N)=>f+N.linesAdded,0)," additions"]}),e.jsxs("span",{className:"text-red-600",children:["-",l.reduce((f,N)=>f+N.linesRemoved,0)," deletions"]}),e.jsxs("span",{children:[l.length," file",l.length!==1?"s":""," changed"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h4",{className:"font-medium text-primary mb-3",children:"Files Changed"}),e.jsx("div",{className:"space-y-2",children:l.map(f=>e.jsxs("button",{onClick:()=>n(f.file),className:`w-full text-left p-3 rounded-md border transition-colors ${d===f.file?"bg-accent-light border-accent":"bg-background border-light hover:border-accent"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Te,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm font-medium text-primary truncate",children:f.file.split("/").pop()}),e.jsx("span",{className:`ml-auto px-1 py-0.5 rounded text-xs ${f.type==="added"?"bg-green-100 text-green-700":f.type==="deleted"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:f.type==="added"?"A":f.type==="deleted"?"D":"M"})]}),e.jsx("div",{className:"text-xs text-muted",children:f.file}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted mt-1",children:[e.jsxs("span",{className:"text-green-600",children:["+",f.linesAdded]}),e.jsxs("span",{className:"text-red-600",children:["-",f.linesRemoved]})]})]},f.file))})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("h4",{className:"font-medium text-primary mb-3",children:d?`Changes in ${d.split("/").pop()}`:"Select a file"}),d&&ft[d]?e.jsxs("div",{className:"bg-background border border-light rounded-md overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-light bg-surface",children:e.jsx("span",{className:"text-sm font-mono text-muted",children:d})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsxs("div",{className:"font-mono text-sm",children:[ft[d].context.map((f,N)=>e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-12 bg-surface text-muted text-center py-0.5 text-xs select-none",children:N+1}),e.jsx("div",{className:"flex-1 px-3 py-0.5",children:f})]},`context-${N}`)),ft[d].deletions.map((f,N)=>e.jsxs("div",{className:"flex bg-red-50",children:[e.jsx("div",{className:"w-12 bg-red-100 text-red-700 text-center py-0.5 text-xs select-none",children:e.jsx(Sr,{className:"w-3 h-3 mx-auto"})}),e.jsx("div",{className:"flex-1 px-3 py-0.5 text-red-700",children:f})]},`del-${N}`)),ft[d].additions.map((f,N)=>e.jsxs("div",{className:"flex bg-green-50",children:[e.jsx("div",{className:"w-12 bg-green-100 text-green-700 text-center py-0.5 text-xs select-none",children:e.jsx(Me,{className:"w-3 h-3 mx-auto"})}),e.jsx("div",{className:"flex-1 px-3 py-0.5 text-green-700",children:f})]},`add-${N}`))]})})]}):e.jsxs("div",{className:"bg-background border border-light rounded-md p-8 text-center",children:[e.jsx(Te,{className:"w-12 h-12 text-muted mx-auto mb-3"}),e.jsx("p",{className:"text-secondary",children:d?"No diff available for this file":"Select a file to view changes"})]})]})]})]}),e.jsx("div",{className:"flex justify-end gap-3 mt-6",children:e.jsx(M,{variant:"ghost",onClick:s,children:"Close"})})]}),e.jsxs(ke,{isOpen:i,onClose:()=>c(!1),title:"Confirm Rollback",size:"sm",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-secondary mb-4",children:["Are you sure you want to rollback to ",e.jsxs("strong",{children:["Version ",t.id]}),"?"]}),e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-3",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Warning:"})," This action will create a new version with the rollback changes. Your current work will be preserved as the latest version."]})})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"ghost",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(M,{variant:"danger",onClick:h,icon:wt,children:["Rollback to Version ",t.id]})]})]})]})}function md({project:t,onBack:s,onOpenWorkspace:r}){const[a,o]=u.useState(null),[n,i]=u.useState(!1),[c,l]=u.useState(!1),{project:d,isLoading:h,error:g,isDirty:y,lastSaved:f,autosave:N,save:p,markDirty:x}=ld(t.id);u.useEffect(()=>{if(!y)return;const m=setTimeout(async()=>{const k={currentView:"overview",lastActivity:new Date().toISOString(),hasUnsavedChanges:n};await N(k),console.log("Auto-saved project state")},3e4);return()=>clearTimeout(m)},[y,n,N]),u.useEffect(()=>{const m=k=>{if(n||y)return k.preventDefault(),k.returnValue="You have unsaved changes. Are you sure you want to leave?",k.returnValue};return window.addEventListener("beforeunload",m),()=>window.removeEventListener("beforeunload",m)},[n,y]);const S=async()=>{try{const m={currentView:"overview",savedAt:new Date().toISOString(),hasUnsavedChanges:!1};await p(m),i(!1),l(!1),console.log("Project saved successfully")}catch(m){console.error("Failed to save project:",m)}},j=()=>{n||y?l(!0):r(t)},v=()=>{l(!1),r(t)},C=m=>{o(m)},w=m=>{console.log("Rolling back to version:",m.id),i(!0),x()},P=m=>{console.log("Exporting version:",m.id)};if(h)return e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading project..."})]})});if(g)return e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-8",children:e.jsxs("div",{className:"text-center py-12 bg-red-50 rounded-lg border border-red-200",children:[e.jsx(ue,{className:"w-8 h-8 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-red-700 mb-2",children:"Failed to load project"}),e.jsx("p",{className:"text-red-600 mb-4",children:g}),e.jsx(M,{onClick:()=>window.location.reload(),children:"Try Again"})]})});const b=d||t;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{onClick:s,variant:"ghost",icon:Tt,size:"sm",children:"Back to Projects"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-primary",children:["Project: ",b.name]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-secondary",children:[e.jsxs("span",{children:["Last modified ",b.lastModified]}),y&&e.jsxs("div",{className:"flex items-center gap-1 text-orange-600",children:[e.jsx(fr,{className:"w-4 h-4"}),e.jsx("span",{children:"Auto-saving..."})]}),f&&e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(ze,{className:"w-4 h-4"}),e.jsxs("span",{children:["Saved ",f.toLocaleTimeString()]})]})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:(n||y)&&e.jsx(M,{onClick:S,variant:"secondary",icon:ze,iconPosition:"left",children:"Save Changes"})})]}),(n||y)&&e.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-orange-600"}),e.jsx("p",{className:"text-orange-700",children:"You have unsaved changes. These will be auto-saved every 30 seconds, or you can save them manually."})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Unsaved Changes"}),e.jsx("p",{className:"text-secondary mb-6",children:"You have unsaved changes. Would you like to save them before opening the workspace?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"ghost",onClick:v,children:"Don't Save"}),e.jsx(M,{onClick:S,icon:ze,iconPosition:"left",children:"Save & Continue"})]})]})}),e.jsx(le,{className:"mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6 p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Name"}),e.jsx("p",{className:"text-primary",children:b.name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Client"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${ks(b.client)}`,children:b.client})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Type"}),e.jsx("p",{className:"text-primary w-fit",children:b.type})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Target PLC Vendor"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${Ss(b.vendor)}`,children:b.vendor})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium w-fit ${ws(b.status)}`,children:b.status==="active"?"Active":b.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-secondary",children:"Description"}),e.jsx("p",{className:"text-primary",children:b.description})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(M,{onClick:j,size:"lg",icon:Ee,iconPosition:"right",className:"w-full py-4",children:"Open Full Project Workspace"})}),e.jsxs("div",{className:"grid gap-6",children:[e.jsx(cd,{versions:b.versions,onViewDiff:C,onRollback:w}),e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-light",children:[e.jsx(Ds,{className:"w-5 h-5 text-accent"}),e.jsx("h3",{className:"font-semibold text-primary",children:"Recent Activity"})]}),e.jsx("div",{className:"p-4",children:b.recentActivity.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ds,{className:"w-12 h-12 text-muted mx-auto mb-3"}),e.jsx("p",{className:"text-secondary",children:"No recent activity"})]}):e.jsx("div",{className:"space-y-3",children:b.recentActivity.map((m,k)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-md",children:[e.jsx("div",{className:"w-2 h-2 bg-accent rounded-full mt-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-primary",children:m.action}),e.jsxs("p",{className:"text-xs text-muted",children:[m.user," • ",m.timestamp]}),m.details&&e.jsx("p",{className:"text-xs text-secondary mt-1",children:m.details})]})]},k))})})]})]})]}),e.jsx(ud,{version:a,onClose:()=>o(null),onRollback:w,onExport:P})]})}const hd=[{value:"",label:"Select project type"},{value:"new-installation",label:"New Installation"},{value:"migration",label:"Migration/Upgrade"},{value:"integration",label:"System Integration"},{value:"maintenance",label:"Maintenance/Support"},{value:"industrial-automation",label:"Industrial Automation"}],xd=[{value:"",label:"Select PLC vendor"},{value:"siemens",label:"Siemens"},{value:"rockwell",label:"Rockwell Automation"},{value:"beckhoff",label:"Beckhoff"}];function pd({isOpen:t,onClose:s,onSubmit:r,onSuccess:a}){const{showToast:o}=Fe(),[n,i]=u.useState({name:"",client:"",type:"",vendor:"",description:""}),[c,l]=u.useState({}),[d,h]=u.useState(!1),[g,y]=u.useState(""),f=async()=>{const p={};if(n.name.trim()||(p.name="Project name is required"),n.vendor&&!["siemens","rockwell","beckhoff"].includes(n.vendor)&&(p.vendor="Please select a valid PLC vendor"),l(p),y(""),Object.keys(p).length===0){h(!0);try{const x={projectName:n.name.trim(),clientName:n.client.trim()||void 0,projectType:n.type||void 0,targetPLCVendor:n.vendor,description:n.description.trim()||void 0},S=await de.createProject(x);console.log("Project created successfully:",S),o({variant:"success",title:"Success!",message:`Project "${n.name.trim()}" has been created successfully.`,duration:4e3}),r(n),a&&a(),N()}catch(x){console.error("Failed to create project:",x),y(x.message||"Failed to create project. Please try again.")}finally{h(!1)}}},N=()=>{i({name:"",client:"",type:"",vendor:"",description:""}),l({}),s()};return e.jsxs(ke,{isOpen:t,onClose:N,title:"Create New Project",size:"lg",children:[e.jsxs("div",{className:"space-y-4",children:[g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:g}),e.jsx(se,{label:"Project Name",required:!0,value:n.name,onChange:p=>i(x=>({...x,name:p.target.value})),placeholder:"Enter project name",error:c.name,disabled:d}),e.jsx(se,{label:"Client Name",value:n.client,onChange:p=>i(x=>({...x,client:p.target.value})),placeholder:"Enter client name",disabled:d}),e.jsx(Se,{label:"Project Type",options:hd,value:n.type,onChange:p=>i(x=>({...x,type:p})),disabled:d}),e.jsx(Se,{label:"Target PLC Vendor",options:xd,value:n.vendor,onChange:p=>i(x=>({...x,vendor:p})),error:c.vendor,disabled:d}),e.jsx(st,{label:"Brief Description",value:n.description,onChange:p=>i(x=>({...x,description:p.target.value})),placeholder:"Describe the project scope and objectives...",rows:3,disabled:d})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx(M,{variant:"ghost",onClick:N,disabled:d,children:"Cancel"}),e.jsx(M,{onClick:f,disabled:d,children:d?"Creating...":"Create Project"})]})]})}function gd({project:t,onClose:s,onConfirm:r,onSuccess:a}){const{showToast:o}=Fe(),[n,i]=u.useState(!1),c=async()=>{if(t)try{i(!0),await de.deleteProject(t.id),o({variant:"success",title:"Project Deleted",message:`Project "${t.name}" has been deleted successfully.`,duration:4e3}),r(t),a&&a(),s()}catch(l){console.error("Failed to delete project:",l),o({variant:"error",title:"Delete Failed",message:l.message||"Failed to delete project. Please try again.",duration:5e3})}finally{i(!1)}};return e.jsxs(ke,{isOpen:!!t,onClose:s,title:"Delete Project",size:"sm",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-secondary",children:["Are you sure you want to delete ",e.jsx("strong",{children:t?.name}),"? This action cannot be undone and will permanently remove all project data, including version history and activity logs."]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"ghost",onClick:s,disabled:n,children:"Cancel"}),e.jsx(M,{variant:"danger",onClick:c,disabled:n,children:n?"Deleting...":"Delete Project"})]})]})}function fd({tools:t,onBack:s}){const r=K();return e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(M,{onClick:s,variant:"ghost",icon:Tt,size:"sm",children:"Back"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Quick Tools"}),e.jsx("p",{className:"text-secondary",children:"Single-use sessions for quick tasks and testing"})]})]}),e.jsx("div",{className:"grid gap-4",children:t.map(a=>e.jsxs("button",{onClick:()=>!a.comingSoon&&r(a.path),disabled:a.comingSoon,className:`flex items-center gap-4 p-6 bg-surface rounded-lg border border-light transition-all text-left relative ${a.comingSoon?"opacity-75 cursor-not-allowed":"hover:border-accent hover:shadow-sm"}`,children:[e.jsx("div",{className:`p-3 rounded-lg ${a.comingSoon?"bg-gray-100":"bg-accent-light"}`,children:e.jsx(a.icon,{className:`w-6 h-6 ${a.comingSoon?"text-gray-400":"text-accent"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:a.name}),a.comingSoon&&e.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full border border-green-200",children:"Coming Soon"})]}),e.jsx("p",{className:"text-secondary",children:a.description})]}),!a.comingSoon&&e.jsx(Ee,{className:"w-5 h-5 text-muted flex-shrink-0"})]},a.name))})]})}const bd=[{name:"Logic Studio",icon:yr,path:"/tool/logic",description:"Turn natural language into vendor-ready PLC code instantly.",comingSoon:!1},{name:"Tag Database Manager",icon:vr,path:"/tool/tags",description:"Organize and maintain all your PLC tags in one place.",comingSoon:!1},{name:"AutoDocs",icon:Te,path:"/tool/autodocs",description:"Auto-generate professional PLC documentation.",comingSoon:!1},{name:"SignalFlow",icon:It,path:"/tool/signalflow",description:"Visualize and trace signal paths through your automation system.",comingSoon:!0},{name:"Pandaura AS Assistant",icon:gs,path:"/tool/assistant",description:"Get instant help with automation documents, logic files, and real-time support.",comingSoon:!1}];function bt(){const t=K(),s=Et(),{projectId:r}=hs(),{isAuthenticated:a,isLoading:o,user:n,token:i}=je(),[c,l]=u.useState(!1),[d,h]=u.useState(null),[g,y]=u.useState(0),[f,N]=u.useState(null),[p,x]=u.useState(!1);Z.useEffect(()=>{console.log("Home component mounted/updated"),console.log("Authentication state:",{isAuthenticated:a,isLoading:o,hasUser:!!n,hasToken:!!i,currentPath:s.pathname}),console.log("Token storage debug:",{contextToken:i?`${i.substring(0,10)}...`:"none",localStorageToken:localStorage.getItem("authToken")?`${localStorage.getItem("authToken").substring(0,10)}...`:"none",localStorageKeys:Object.keys(localStorage),userInfo:n?{userId:n.userId,email:n.email}:"none"})},[a,o,n,i,s.pathname]);const S=s.pathname==="/home/projects",j=s.pathname.startsWith("/home/projects/")&&r,v=s.pathname==="/home/quick-tools";u.useEffect(()=>{(async()=>{if(r&&a&&i){x(!0);try{console.log("Loading project with ID:",r);const k=await de.getProjects();console.log("All projects from API:",k.map(I=>({id:I.id,name:I.project_name})));const O=k.find(I=>I.id.toString()===r);O?(console.log("Found project:",O.project_name),N(Pt(O))):(console.warn("Project not found with ID:",r),console.log("Available project IDs:",k.map(I=>I.id)),N(null))}catch(k){console.error("Failed to load project:",k),N(null)}finally{x(!1)}}else console.log("Clearing selected project - projectId:",r,"isAuthenticated:",a,"hasToken:",!!i),N(null),x(!1)})()},[r,a,i]);const C=m=>{console.log("Creating project:",m),y(k=>k+1)},w=m=>{console.log("Delete confirmed for project:",m.name)},P=m=>{t(`/home/projects/${m.id}`)},b=m=>{if(!a){console.log("User not authenticated, redirecting to login"),t("/signin");return}console.log("User authenticated, navigating to workspace"),localStorage.setItem("currentProjectId",m.id.toString()),t(`/workspace/${m.id}/pandaura-as`,{state:{project:m}})};return j?(console.log("Project Overview View - Debug:",{projectId:r,isAuthenticated:a,isLoading:o,loadingProject:p,selectedProject:f?f.name:"null",pathname:s.pathname}),o?(console.log("Auth loading, showing spinner"),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading authentication..."})]})})):a?p?(console.log("Project loading, showing spinner"),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading project..."})]})})):f?(console.log("Rendering project overview for:",f.name),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Le,{})})]}),e.jsx(md,{project:f,onBack:()=>t("/home/projects"),onOpenWorkspace:b})]})):(console.log("Project not found, showing error state"),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Le,{})})]}),e.jsx("div",{className:"flex items-center justify-center",style:{height:"calc(100vh - 88px)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-muted mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-primary mb-2",children:"Project not found"}),e.jsxs("p",{className:"text-secondary mb-4",children:["The requested project (ID: ",r,") could not be found or you don't have access to it."]}),e.jsx(M,{onClick:()=>t("/home/projects"),children:"Back to Projects"})]})})]})):(console.log("Project overview accessed but user not authenticated, redirecting to signin"),setTimeout(()=>t("/signin"),100),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Redirecting to sign in..."})]})}))):S?o?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Loading authentication..."})]})}):a?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Le,{})})]}),e.jsx(id,{onBack:()=>t("/home"),onOpenProject:P,onDeleteProject:m=>h(m),onNewProject:()=>l(!0),refreshTrigger:g}),e.jsx(pd,{isOpen:c,onClose:()=>l(!1),onSubmit:C,onSuccess:()=>y(m=>m+1)}),e.jsx(gd,{project:d,onClose:()=>h(null),onConfirm:w,onSuccess:()=>y(m=>m+1)})]}):(console.log("Projects view accessed but user not authenticated, redirecting to signin"),setTimeout(()=>t("/signin"),100),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-secondary",children:"Redirecting to sign in..."})]})})):v?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Le,{})})]}),e.jsx(fd,{tools:bd,onBack:()=>t("/home")})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between bg-surface px-6 py-4 border-b border-light shadow",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("img",{src:te,alt:"Pandaura Logo",className:"h-16 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Le,{})})]}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-bold text-primary mb-4",children:"Welcome to Pandaura AS"}),e.jsx("p",{className:"text-lg text-secondary max-w-2xl mx-auto",children:"Your complete industrial automation suite. Choose how you want to work today."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-16",children:[e.jsx(le,{variant:"elevated",icon:ns,title:"Projects",subtitle:"Manage your automation projects with full history and collaboration.",className:"text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-xs text-secondary bg-background rounded-md p-3 border border-light",children:"Access all modules with persistent project history, version control, and team collaboration features."})}),e.jsx(M,{onClick:()=>t("/home/projects"),className:"w-full py-4",icon:Ee,iconPosition:"right",size:"lg",children:"Browse Projects"})]})}),e.jsx(le,{variant:"elevated",icon:It,title:"Quick Tools",subtitle:"Single-use sessions for quick tasks and testing.",className:"text-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsx("p",{className:"text-xs text-secondary bg-background rounded-md p-3 border border-light",children:"These tools are available for one-time use. You can upload files, use all features, and export results — but your session will not be saved."})}),e.jsx(M,{onClick:()=>t("/home/quick-tools"),className:"w-full py-4",variant:"outline",icon:Ee,iconPosition:"right",size:"lg",children:"Launch Quick Tools"})]})})]}),e.jsxs("div",{className:"flex items-center justify-center mb-8",children:[e.jsx("div",{className:"h-px bg-light flex-1"}),e.jsx("span",{className:"px-4 text-sm text-muted",children:"Pandaura Labs"}),e.jsx("div",{className:"h-px bg-light flex-1"})]}),e.jsxs("div",{className:"text-center text-sm text-muted space-x-6",children:[e.jsx("span",{children:"© 2025"}),e.jsx("button",{onClick:()=>t("/feedback"),className:"hover:text-primary transition-colors",children:"Support"}),e.jsx("button",{onClick:()=>t("/terms"),className:"hover:text-primary transition-colors",children:"Terms"}),e.jsx("button",{onClick:()=>t("/privacy"),className:"hover:text-primary transition-colors",children:"Privacy"})]})]})]})}function jd(){K();const[t,s]=u.useState(""),[r,a]=u.useState(""),[o,n]=u.useState(""),[i,c]=u.useState(!1),[l,d]=u.useState("idle"),h=async f=>{if(f.preventDefault(),!(!t.trim()&&!r.trim()&&!o.trim())){c(!0),d("idle");try{await new Promise(p=>setTimeout(p,2e3));const N=g();console.log("Feedback submission:",N),d("success"),setTimeout(()=>{s(""),a(""),n(""),d("idle")},3e3)}catch{d("error")}finally{c(!1)}}},g=()=>{let f="";return t.trim()&&(f+=`— Feedback About the App —
`+t.trim()+`

`),r.trim()&&(f+=`— Feedback About the AI —
`+r.trim()+`

`),o.trim()&&(f+=`— Advanced Feedback —
`+o.trim()+`

`),f+=`Submitted on: ${new Date().toLocaleString()}
`,f+=`User Session: ${Math.random().toString(36).substr(2,9)}`,f},y=t.trim()||r.trim()||o.trim();return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ec,{title:"Feedback",subtitle:"Help us improve Pandaura AS",showBackButton:!0}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"We'd love to hear from you"}),e.jsx("p",{className:"text-muted",children:"Your feedback helps us build better automation tools. Share your thoughts in any or all sections below."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-8",children:[e.jsx(le,{title:"Your thoughts on the app",subtitle:"What's been working well? What's been frustrating? Tell us anything about your experience with Pandaura.",children:e.jsx(st,{value:t,onChange:f=>s(f.target.value),placeholder:"Share your experience with the app...",rows:6,maxLength:2e3,helpText:"Optional • Be as detailed as you'd like",showCharCount:!0})}),e.jsx(le,{title:"Your thoughts on the AI",subtitle:"How helpful has the AI been for you? Any moments it surprised you—or totally missed the mark?",children:e.jsx(st,{value:r,onChange:f=>a(f.target.value),placeholder:"Tell us about your AI assistant experience...",rows:6,maxLength:2e3,helpText:"Optional • We're always improving the AI",showCharCount:!0})}),e.jsx(le,{title:"Want to go deeper?",subtitle:"If you've got technical notes, feature requests, or specific examples — we'd love to hear them here.",children:e.jsx(st,{value:o,onChange:f=>n(f.target.value),placeholder:"Share technical feedback, feature requests, or specific examples...",rows:6,maxLength:3e3,helpText:"Optional • Technical details welcome",showCharCount:!0})}),e.jsxs(le,{children:[l==="success"&&e.jsx(Ue,{variant:"success",className:"mb-4",children:"Thanks — we seriously read every message. ✅"}),l==="error"&&e.jsx(Ue,{variant:"error",className:"mb-4",children:"Something went wrong. Try again or email us directly at pandauracares@mail.com. ❌"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted",children:["Your feedback goes directly to ",e.jsx("span",{className:"font-mono",children:"pandauracares@mail.com"})]}),e.jsx(M,{type:"submit",disabled:!y||i,loading:i,icon:i?$n:Dt,children:i?"Sending...":"Send Feedback"})]})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("p",{className:"text-xs text-muted",children:"All feedback is sent securely and never shared with third parties. We read everything and use it to improve Pandaura AS."})})]})]})}function yd(){const t=K(),[s,r]=u.useState(new Set),[a,o]=u.useState(!1),[n,i]=u.useState(""),[c,l]=u.useState(!1),d=y=>{const f=new Set(s);f.has(y)?f.delete(y):f.add(y),r(f)},h=y=>{y.preventDefault(),n.trim()&&(console.log("Privacy feedback:",n),l(!0),i(""),setTimeout(()=>{l(!1),o(!1)},2e3))},g=[{id:"data-collection",title:"What We Don't Collect",icon:"🔒",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"We don't collect your code. Ever."}),e.jsx("p",{className:"text-muted",children:"Pandaura AS runs entirely on-premise. Your PLC logic, structured text, tag databases, and any project files never leave your local machine. There's no cloud syncing, no background uploads, and no external servers involved."})]})},{id:"ai-privacy",title:"AI Model Privacy",icon:"🧠",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"The AI doesn't train on your data."}),e.jsx("p",{className:"text-muted",children:"The AI features built into Pandaura (like logic generation, signal tracing, and auto-documentation) do not learn from your inputs. Your prompts and results are used in real time to help you — and that's it. Nothing is saved, reused, or sent to a central server."})]})},{id:"file-uploads",title:"Uploaded Files",icon:"📂",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Uploaded files stay local."}),e.jsx("p",{className:"text-muted",children:"Files uploaded for context (like machine specs, manuals, or existing logic files) are only used during that session — they're never saved or transmitted elsewhere. Everything resets when the session ends or the app is closed."})]})},{id:"case-studies",title:"Case Study Consent",icon:"🤝",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Case studies are always opt-in."}),e.jsx("p",{className:"text-muted",children:"We'll only collect feedback or usage examples if you explicitly submit a case study. Even then, all identifying data must be removed by you. If anything sensitive is left in by mistake, we'll delete it immediately upon notice — no questions asked."})]})},{id:"diagnostics",title:"Troubleshooting & Diagnostics (Optional)",icon:"🔧",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"You're in control of diagnostics."}),e.jsx("p",{className:"text-muted",children:"If you reach out for support, you can choose whether or not to share technical logs. By default, no diagnostic data is collected or sent. You're always in full control of what you share."})]})},{id:"user-accounts",title:"User Accounts & Sessions",icon:"👤",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"No user tracking."}),e.jsx("p",{className:"text-muted",children:"Pandaura doesn't require a cloud login, and we don't track behavior. If we add optional features like user profiles or saved projects in the future, they'll also stay entirely local unless you opt in to share."})]})},{id:"feedback",title:"Feedback You Submit",icon:"📧",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Feedback goes straight to us — nowhere else."}),e.jsx("p",{className:"text-muted",children:"If you submit app or AI feedback, it's sent directly to our internal support email: pandauracares@mail.com. It's never sold, stored in the cloud, or analyzed by third parties. We read it. That's all."})]})},{id:"user-control",title:"Your Control, Always",icon:"✅",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"You can clear all local data at any time."}),e.jsx("p",{className:"text-muted",children:"We give you full control to reset, clear, or delete all project data stored locally. You'll always be able to start fresh — no hidden caches, no stored prompts, no buried files."})]})},{id:"contact",title:"Contacting Us",icon:"📞",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-primary font-medium",children:"Questions about privacy? Reach out to us directly."}),e.jsxs("div",{className:"space-y-2 text-muted",children:[e.jsxs("p",{children:["Email: ",e.jsx("span",{className:"font-mono text-primary",children:"pandauracares@mail.com"})]}),e.jsxs("p",{children:["Case Study Privacy Team: ",e.jsx("span",{className:"font-mono text-primary",children:"privacy@pandauralabs.com"})]})]})]})}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Privacy Policy"}),e.jsx("p",{className:"text-sm text-secondary",children:e.jsx("button",{onClick:()=>t("/terms"),className:"hover:text-primary transition-colors underline",children:"View Terms of Use"})})]})]}),e.jsxs("button",{onClick:()=>o(!a),className:"p-3 hover:bg-background rounded-full transition-colors relative",title:"Privacy Feedback",children:[e.jsx(gs,{className:"w-5 h-5 text-secondary"}),a&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 bg-surface border border-light rounded-lg shadow-lg p-4 z-50",children:[e.jsx("h3",{className:"font-medium text-primary mb-2",children:"Have ideas for better privacy?"}),e.jsx("p",{className:"text-xs text-muted mb-3",children:"We take your trust seriously. If there's a privacy feature you think we should add, or if something feels unclear, let us know."}),c?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-sm text-green-600",children:"Thank you for your feedback! ✓"})}):e.jsxs("form",{onSubmit:h,className:"space-y-3",children:[e.jsx("textarea",{value:n,onChange:y=>i(y.target.value),placeholder:"Your privacy feedback...",className:"w-full px-3 py-2 bg-background border border-light rounded text-sm resize-none focus:outline-none focus:ring-2 focus:ring-accent",rows:3,maxLength:500}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-muted",children:[n.length,"/500"]}),e.jsxs("button",{type:"submit",disabled:!n.trim(),className:"bg-primary text-white px-3 py-1 rounded text-xs hover:bg-secondary transition-colors disabled:opacity-50 flex items-center gap-1",children:[e.jsx(Dt,{className:"w-3 h-3"}),"Send"]})]})]}),e.jsx("p",{className:"text-xs text-muted mt-2",children:"Your message goes straight to our core team. All feedback welcome."})]})]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsx("div",{className:"space-y-4 mb-8",children:g.map(y=>e.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>d(y.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:y.icon}),e.jsx("h2",{className:"text-lg font-semibold text-primary",children:y.title})]}),s.has(y.id)?e.jsx(qe,{className:"w-5 h-5 text-secondary"}):e.jsx(Ot,{className:"w-5 h-5 text-secondary"})]}),s.has(y.id)&&e.jsx("div",{className:"px-6 pb-6 border-t border-light",children:e.jsx("div",{className:"pt-4",children:y.content})})]},y.id))}),e.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-6 text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🔐"}),e.jsx("h3",{className:"text-lg font-semibold text-primary mb-2",children:"We built Pandaura to be local-first — because we know your data is critical."}),e.jsx("p",{className:"text-muted",children:"You control your environment. You own your code. That will never change."})]})]})]})}function vd(){const t=K(),[s,r]=u.useState(new Set),a=i=>{const c=new Set(s);c.has(i)?c.delete(i):c.add(i),r(c)},o=()=>{console.log("Downloading Terms of Use PDF..."),alert("PDF download would be available in production version.")},n=[{id:"introduction",title:"Introduction",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Welcome to Pandaura AS. These Terms of Use govern your use of the Pandaura AS software platform, licensed and operated by Pandaura Labs AS. By using our software, you agree to the terms below. If you do not agree, you should not use the software."})})},{id:"scope",title:"Scope of Use",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Pandaura AS is licensed software designed for use in professional industrial automation environments. You may use the software solely within your organization for engineering, configuration, logic generation, and automation project development."})})},{id:"licensing",title:"Licensing & Ownership",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"Pandaura AS is licensed, not sold. All rights, title, and interest in the software—including AI-generated logic, interface design, and proprietary workflows—remain the property of Pandaura Labs AS."}),e.jsx("p",{className:"text-muted",children:"You may not reverse engineer, decompile, or resell the software without express written permission."})]})},{id:"responsibilities",title:"User Responsibilities",content:e.jsx("div",{className:"space-y-4",children:e.jsxs("ul",{className:"space-y-2 text-muted list-disc list-inside",children:[e.jsx("li",{children:"You are responsible for how the software is used within your organization."}),e.jsx("li",{children:"You must ensure only authorized users access the software."}),e.jsx("li",{children:"You agree not to use Pandaura AS for unlawful or unsafe automation tasks."})]})})},{id:"ai-content",title:"AI-Generated Content",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"Pandaura AS includes AI systems that assist in generating automation logic. While powerful, this logic may require review by qualified engineers."}),e.jsx("p",{className:"text-muted font-medium",children:"You remain solely responsible for validating and approving all outputs used in real-world environments."})]})},{id:"data-privacy",title:"Data & Privacy",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"Pandaura AS is a fully on-premise platform. We do not collect or transmit user data, logic, or documents externally."}),e.jsx("p",{className:"text-muted font-medium",children:"Your data remains 100% within your environment, under your control."})]})},{id:"updates",title:"Software Updates",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Any software updates or patches will be delivered offline, and it is your responsibility to apply them. Pandaura Labs is not liable for issues arising from the use of outdated software versions."})})},{id:"warranty",title:"Warranty Disclaimer",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted font-medium",children:'Pandaura AS is provided "as is" without warranties of any kind.'}),e.jsx("p",{className:"text-muted",children:"We do not guarantee uninterrupted operation, nor do we accept liability for logic errors, production downtime, or misconfigurations caused by user input or AI-generated suggestions."})]})},{id:"liability",title:"Limitation of Liability",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"To the maximum extent permitted by law, Pandaura Labs AS shall not be liable for any indirect, incidental, or consequential damages resulting from the use of Pandaura AS."}),e.jsx("p",{className:"text-muted",children:"Your sole remedy for dissatisfaction with the software is to stop using it."})]})},{id:"termination",title:"Termination",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"Pandaura Labs reserves the right to revoke access or terminate licenses if terms are violated or if the software is used in breach of ethical or legal standards."})})},{id:"governing-law",title:"Governing Law",content:e.jsx("div",{className:"space-y-4",children:e.jsx("p",{className:"text-muted",children:"These Terms are governed by the laws of Norway. Any disputes shall be resolved in the appropriate courts of Oslo, Norway."})})},{id:"contact",title:"Contact",content:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-muted",children:"For licensing inquiries or enterprise agreements, please contact your Pandaura Labs representative directly."}),e.jsx("p",{className:"text-xs text-muted italic",children:"(Note: No public email or feedback form is provided on this page.)"})]})}];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Terms of Use"}),e.jsx("p",{className:"text-sm text-secondary",children:e.jsx("button",{onClick:()=>t("/privacy"),className:"hover:text-primary transition-colors underline",children:"View Privacy Policy"})})]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-md hover:bg-secondary transition-colors text-sm",children:[e.jsx(Be,{className:"w-4 h-4"}),"Download Terms of Use (PDF)"]})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Terms of Use"}),e.jsx("p",{className:"text-sm text-muted",children:"Last Updated: August 5, 2025"})]}),e.jsx("div",{className:"space-y-4 mb-8",children:n.map(i=>e.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>a(i.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:i.title}),s.has(i.id)?e.jsx(qe,{className:"w-5 h-5 text-secondary"}):e.jsx(Ot,{className:"w-5 h-5 text-secondary"})]}),s.has(i.id)&&e.jsx("div",{className:"px-6 pb-6 border-t border-light",children:e.jsx("div",{className:"pt-4",children:i.content})})]},i.id))}),e.jsx("div",{className:"text-center text-sm text-muted",children:e.jsx("p",{children:"For questions about these terms, please contact your Pandaura Labs representative."})})]})]})}function rs(){const t=K(),[s,r]=u.useState(null),[a]=u.useState([{id:"1",title:"Water Treatment Automation",status:"completed",lastModified:"2 days ago"},{id:"2",title:"Packaging Line Integration",status:"draft",lastModified:"1 week ago"}]),[o,n]=u.useState([{id:"overview",title:"Project Overview",description:"Basic project information and scope",isExpanded:!0},{id:"challenge",title:"Technical Challenge",description:"What made this project unique or difficult",isExpanded:!1},{id:"pandaura",title:"How Pandaura Helped",description:"Which features were used and their impact",isExpanded:!1},{id:"outcome",title:"Outcome & Results",description:"Final results and client feedback",isExpanded:!1},{id:"media",title:"Media Uploads",description:"Screenshots, PDFs, and documentation",isExpanded:!1},{id:"privacy",title:"Privacy & Security",description:"Data protection and sharing preferences",isExpanded:!1}]),[i,c]=u.useState(""),[l,d]=u.useState({title:"",company:"",industry:"",platforms:[],scope:"",timeline:"",challenge:"",uniqueAspects:"",featuresUsed:[],howPandauraHelped:"",aiUsed:"",timeSavings:"",outcome:"",clientQuote:"",metrics:"",removeClientData:!0,confirmNoSensitiveData:!1}),[h,g]=u.useState([]),y={selectProject:"Link this case study to an existing project for automatic data import",projectTitle:"Give your case study a clear, descriptive title that highlights the key achievement",plcPlatforms:"Select all PLC platforms that were used in this project",scopeSummary:"Briefly describe what the project covered - scope, systems involved, and scale",finalOutcome:"Describe the successful completion and measurable results of the project",uploadFiles:"Upload project documentation, screenshots, or technical diagrams (max 10MB each)"},f=({id:b,content:m})=>{const[k,O]=u.useState({x:0,y:0}),I=Z.useRef(null),T=()=>{if(I.current){const R=I.current.getBoundingClientRect();O({x:R.left+R.width/2,y:R.top-10})}r(b)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:I,className:"relative inline-block",children:e.jsx(Nr,{className:"w-4 h-4 inline ml-1 text-muted hover:text-primary cursor-help transition-colors",onMouseEnter:T,onMouseLeave:()=>r(null)})}),s===b&&e.jsxs("div",{className:"fixed px-3 py-2 bg-gray-900 text-white text-xs rounded-md whitespace-nowrap shadow-lg pointer-events-none",style:{left:`${k.x}px`,top:`${k.y}px`,transform:"translate(-50%, -100%)",zIndex:99999},children:[m,e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})},N=b=>{n(m=>m.map(k=>k.id===b?{...k,isExpanded:!k.isExpanded}:k))},p=(b,m,k)=>{(b==="platforms"||b==="featuresUsed")&&d(O=>({...O,[b]:k?[...O[b],m]:O[b].filter(I=>I!==m)}))},x=b=>{b.target.files&&g(m=>[...m,...Array.from(b.target.files)])},S=b=>{g(m=>m.filter((k,O)=>O!==b))},j=()=>{console.log("Saving draft...",l),alert("Case study saved as draft locally.")},v=()=>{if(!l.confirmNoSensitiveData){alert("Please confirm that no sensitive client data is included before uploading.");return}console.log("Uploading to Case Study Hub...",l),window.confirm("Looks great. Once you submit, your case study will be visible to others on the Pandaura Case Study Hub. Just make sure you've removed anything private — you're always in full control.")&&alert("✅ Case study uploaded to Pandaura Case Study Hub!")},C=["Oil & Gas","Pharmaceutical","Food & Beverage","OEM","Automotive","Water Treatment","Power Generation","Manufacturing","Chemical","Other"],w=["Rockwell","Siemens","Beckhoff","Schneider","Omron","ABB","Other"],P=["Logic Studio","Tag Manager","SignalFlow","AutoDocs","Assistant / Mini"];return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-surface border-b border-light px-6 py-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 hover:bg-background rounded-md transition-colors",title:"Go back",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Create a Case Study"}),e.jsx("p",{className:"text-sm text-secondary",children:"Generate professional case studies from your projects"})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-surface border border-light rounded-lg p-6 mb-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Project Selection"})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Select Project (Optional)",e.jsx(f,{id:"selectProject",content:y.selectProject})]}),e.jsxs("select",{value:i,onChange:b=>c(b.target.value),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"",children:"Start from scratch"}),e.jsx("option",{value:"water-treatment",children:"Water Treatment Plant"}),e.jsx("option",{value:"packaging-line",children:"Packaging Line Control"}),e.jsx("option",{value:"hvac-system",children:"HVAC System Integration"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:()=>{console.log("Starting new case study...")},className:"flex items-center gap-2 bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary transition-colors",children:[e.jsx(Me,{className:"w-4 h-4"}),"Start New Case Study"]})})]}),a.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-secondary mb-3",children:"Recent Case Studies"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:a.map(b=>e.jsx("button",{className:"text-left p-3 bg-background border border-light rounded-md hover:border-accent transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary",children:b.title}),e.jsxs("p",{className:"text-xs text-muted",children:[b.status," • ",b.lastModified]})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${b.status==="completed"?"bg-green-500":"bg-yellow-500"}`})]})},b.id))})]})]}),e.jsxs("div",{className:"space-y-6",children:[o.map(b=>e.jsxs("div",{className:"bg-surface border border-light rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>N(b.id),className:"w-full flex items-center justify-between p-6 text-left hover:bg-background transition-colors",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:b.title}),e.jsx("p",{className:"text-sm text-muted",children:b.description})]}),b.isExpanded?e.jsx(qe,{className:"w-5 h-5 text-secondary"}):e.jsx(Ot,{className:"w-5 h-5 text-secondary"})]}),b.isExpanded&&e.jsx("div",{className:"px-6 pb-6 border-t border-light",children:e.jsxs("div",{className:"pt-6 space-y-4",children:[b.id==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Project Title",e.jsx(f,{id:"projectTitle",content:y.projectTitle})]}),e.jsx("input",{type:"text",value:l.title,onChange:m=>d(k=>({...k,title:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., Smart Water Treatment Integration"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Integrator Name / Company (Optional)"}),e.jsx("input",{type:"text",value:l.company,onChange:m=>d(k=>({...k,company:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"Your company name"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Client Industry"}),e.jsxs("select",{value:l.industry,onChange:m=>d(k=>({...k,industry:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",children:[e.jsx("option",{value:"",children:"Select industry..."}),C.map(m=>e.jsx("option",{value:m,children:m},m))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Timeline (Optional)"}),e.jsx("input",{type:"text",value:l.timeline,onChange:m=>d(k=>({...k,timeline:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent",placeholder:"e.g., 3 months, Q1 2024"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["PLC Platforms Used",e.jsx(f,{id:"plcPlatforms",content:y.plcPlatforms})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:w.map(m=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.platforms.includes(m),onChange:k=>p("platforms",m,k.target.checked),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{className:"text-sm text-primary",children:m})]},m))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Scope Summary",e.jsx(f,{id:"scopeSummary",content:y.scopeSummary})]}),e.jsx("textarea",{value:l.scope,onChange:m=>d(k=>({...k,scope:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the overall project scope and objectives..."})]})]}),b.id==="challenge"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What was the original challenge or complexity?"}),e.jsx("textarea",{value:l.challenge,onChange:m=>d(k=>({...k,challenge:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the technical challenges you faced..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What made this project unique or difficult?"}),e.jsx("textarea",{value:l.uniqueAspects,onChange:m=>d(k=>({...k,uniqueAspects:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"What set this project apart from typical automation work..."})]})]}),b.id==="pandaura"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Which Pandaura AS features were used?"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:P.map(m=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.featuresUsed.includes(m),onChange:k=>p("featuresUsed",m,k.target.checked),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2"}),e.jsx("span",{className:"text-sm text-primary",children:m})]},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Describe how Pandaura made the project easier or faster"}),e.jsx("textarea",{value:l.howPandauraHelped,onChange:m=>d(k=>({...k,howPandauraHelped:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Explain the specific ways Pandaura helped..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Any AI-generated logic or documents used?"}),e.jsx("textarea",{value:l.aiUsed,onChange:m=>d(k=>({...k,aiUsed:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Describe AI assistance received..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Time savings or value gained? (Optional)"}),e.jsx("textarea",{value:l.timeSavings,onChange:m=>d(k=>({...k,timeSavings:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Quantify benefits if possible..."})]})]})]}),b.id==="outcome"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Final project outcome",e.jsx(f,{id:"finalOutcome",content:y.finalOutcome})]}),e.jsx("textarea",{value:l.outcome,onChange:m=>d(k=>({...k,outcome:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:4,placeholder:"Describe the successful outcome and results..."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"What did the client say? (Optional quote/testimonial)"}),e.jsx("textarea",{value:l.clientQuote,onChange:m=>d(k=>({...k,clientQuote:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Client feedback or testimonial..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-secondary mb-2",children:"Did Pandaura reduce time, errors, or handoff problems?"}),e.jsx("textarea",{value:l.metrics,onChange:m=>d(k=>({...k,metrics:m.target.value})),className:"w-full px-3 py-2 bg-background border border-light rounded-md text-primary focus:outline-none focus:ring-2 focus:ring-accent resize-none",rows:3,placeholder:"Specific improvements achieved..."})]})]})]}),b.id==="media"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-secondary mb-2",children:["Upload Files (Optional)",e.jsx(f,{id:"uploadFiles",content:y.uploadFiles})]}),e.jsxs("div",{className:"border-2 border-dashed border-light rounded-lg p-6 text-center",children:[e.jsx("input",{type:"file",multiple:!0,onChange:x,className:"hidden",id:"file-upload",accept:".jpg,.jpeg,.png,.pdf,.doc,.docx"}),e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Tn,{className:"w-8 h-8 text-muted"}),e.jsx(Te,{className:"w-8 h-8 text-muted"})]})}),e.jsx("p",{className:"text-primary",children:"Click to upload files"}),e.jsx("p",{className:"text-xs text-muted",children:"Screenshots, PDFs, exported logic blocks"}),e.jsx("p",{className:"text-xs text-muted",children:"Max 10MB per file • JPG, PNG, PDF, DOC"})]})})]})]}),h.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-secondary mb-2",children:"Uploaded Files"}),e.jsx("div",{className:"space-y-2",children:h.map((m,k)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-background border border-light rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"w-4 h-4 text-muted"}),e.jsx("span",{className:"text-sm text-primary",children:m.name}),e.jsxs("span",{className:"text-xs text-muted",children:["(",(m.size/1024).toFixed(1)," KB)"]})]}),e.jsx("button",{onClick:()=>S(k),className:"text-error hover:text-error-dark transition-colors",children:e.jsx(Rt,{className:"w-4 h-4"})})]},k))})]})]}),b.id==="privacy"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-accent/5 border border-accent/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(we,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-primary mb-2",children:"Privacy & Security Controls"}),e.jsx("p",{className:"text-sm text-muted",children:"You're always in control. Please double-check that any identifying info is removed — we'll never expose sensitive details."})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.removeClientData,onChange:m=>d(k=>({...k,removeClientData:m.target.checked})),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2 mt-1"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-primary",children:"Remove client-identifying data"}),e.jsx("p",{className:"text-xs text-muted",children:"Automatically sanitize client names and sensitive information (recommended)"})]})]}),e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l.confirmNoSensitiveData,onChange:m=>d(k=>({...k,confirmNoSensitiveData:m.target.checked})),className:"w-4 h-4 text-primary bg-surface border-strong rounded focus:ring-accent focus:ring-2 mt-1"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-primary",children:"I confirm this case study contains no confidential or sensitive client data"}),e.jsx("p",{className:"text-xs text-muted",children:"Required before uploading to public Case Study Hub"})]})]})]})]})]})})]},b.id)),e.jsxs("div",{className:"bg-surface border border-light rounded-lg p-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 justify-between",children:[e.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-6 py-3 bg-background border border-light rounded-md hover:border-accent transition-colors",children:[e.jsx(ze,{className:"w-4 h-4"}),"Save Draft"]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-6 py-3 bg-primary text-white rounded-md hover:bg-secondary transition-colors",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Upload to Case Study Hub"]})]}),e.jsx("p",{className:"text-xs text-muted mt-3 text-center",children:"Drafts are stored locally only. Uploading shares your case study publicly with the automation community."})]})]})]})]})}function Nd(){const t=je(),[s,r]=u.useState({auth:{isAuthenticated:!1,token:null,user:null},api:{canConnect:!1,error:null},projects:{count:0,data:[],error:null}}),[a,o]=u.useState(!1),[n,i]=u.useState(""),c=async()=>{o(!0),i("");try{const d={projectName:`Test Project ${Date.now()}`,clientName:"Debug Client",projectType:"industrial-automation",targetPLCVendor:"siemens",description:"This is a test project created from the debug page"},h=await de.createProject(d);console.log("Created test project:",h),await l()}catch(d){console.error("Failed to create test project:",d),i(d.message||"Failed to create project")}finally{o(!1)}},l=async()=>{const d={auth:{isAuthenticated:t.isAuthenticated,token:t.token,user:t.user},api:{canConnect:!1,error:null},projects:{count:0,data:[],error:null}};if(t.isAuthenticated&&t.token)try{const h=await de.getProjects();d.api.canConnect=!0,d.projects.count=h.length,d.projects.data=h}catch(h){d.api.error=h.message,d.projects.error=h.message}else d.api.error="Not authenticated",d.projects.error="Not authenticated";r(d)};return u.useEffect(()=>{l()},[t.isAuthenticated,t.token]),e.jsx("div",{className:"min-h-screen bg-background p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-primary",children:"Projects Debug Dashboard"}),e.jsx(le,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Authentication Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s.auth.isAuthenticated?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{children:["Authenticated: ",s.auth.isAuthenticated?"Yes":"No"]})]}),e.jsx("div",{children:e.jsxs("span",{children:["User: ",s.auth.user?.email||"None"]})}),e.jsx("div",{children:e.jsxs("span",{children:["Token: ",s.auth.token?"Present":"Missing"]})})]})]})}),e.jsx(le,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"API Connection"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s.api.canConnect?"bg-green-500":"bg-red-500"}`}),e.jsxs("span",{children:["API Connection: ",s.api.canConnect?"Working":"Failed"]})]}),s.api.error&&e.jsxs(Ue,{variant:"error",children:["API Error: ",s.api.error]})]})]})}),e.jsx(le,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Projects (",s.projects.count,")"]}),s.projects.error?e.jsxs(Ue,{variant:"error",children:["Projects Error: ",s.projects.error]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:["Total Projects: ",s.projects.count]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(M,{onClick:l,variant:"secondary",size:"sm",children:"Refresh"}),e.jsx(M,{onClick:c,disabled:!s.auth.isAuthenticated||a,children:a?"Creating...":"Create Test Project"})]})]}),n&&e.jsxs(Ue,{variant:"error",children:["Create Project Error: ",n]}),s.projects.data.length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-64 overflow-y-auto",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Project List:"}),s.projects.data.map((d,h)=>e.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:d.project_name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Client: ",d.client_name||"N/A"," | Type: ",d.project_type||"N/A"," | Vendor: ",d.target_plc_vendor||"N/A"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Created: ",new Date(d.created_at).toLocaleString()]})]},d.id||h))]})]})]})}),e.jsx(le,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{children:"1. Make sure you're logged in (authentication status should be green)"}),e.jsx("p",{children:"2. Check that the API connection is working (should be green)"}),e.jsx("p",{children:"3. Create a test project using the button above"}),e.jsx("p",{children:"4. Navigate to /home/projects to see your projects"}),e.jsx("p",{children:"5. Click on a project to view the Project Overview screen"})]})]})})]})})}const xa=u.createContext(void 0),ir={orgChoice:null,organizationCreated:!1},wd=({children:t})=>{const[s,r]=u.useState(ir),a=(i,c)=>{r(l=>({...l,[i]:c}))},o=()=>{r(ir)},n=!!(s.orgChoice&&s.accountData?.fullName&&s.accountData?.email&&s.accountData?.password&&(s.orgChoice==="join"?s.inviteData:s.orgData)&&s.securityData&&s.consentData?.termsAccepted&&s.consentData?.privacyAccepted);return e.jsx(xa.Provider,{value:{signUpData:s,updateSignUpData:a,clearSignUpData:o,isComplete:n},children:t})},Oe=()=>{const t=u.useContext(xa);if(!t)throw new Error("useSignUp must be used within SignUpProvider");return t};function lr({nextStep:t}){const s=K();return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:te,alt:"Pandaura AS Logo",className:"h-20 w-auto filter-none mb-6",style:{filter:"none",imageRendering:"crisp-edges"}}),e.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-2",children:"Welcome to Pandaura AS"}),e.jsx("p",{className:"text-secondary text-center mb-8",children:"Your complete industrial automation platform for PLCs, SCADA, and robotics"}),e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx(M,{onClick:t,className:"w-full",size:"lg",children:"Create Organization / Join Team"}),e.jsx(M,{onClick:()=>s("/signin"),variant:"outline",className:"w-full",size:"lg",children:"Sign In"})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-muted",children:e.jsx("p",{children:"Secure • On-Premise • Zero Trust"})})]})})})}function Sd({nextStep:t,prevStep:s,onOrgChoice:r}){const{signUpData:a}=Oe(),[o,n]=u.useState(a.orgChoice),[i,c]=u.useState(a.inviteData?.code||""),[l,d]=u.useState(!1),[h,g]=u.useState(""),{validateInvite:y}=je(),f=()=>{r("create"),t()},N=async()=>{if(!i.trim()){g("Please enter an invite code");return}d(!0),g("");try{const x=await y(i.trim());x.valid?(r("join",{code:i.trim(),orgName:x.orgName,role:x.role,email:x.email}),t()):g(x.message||"Invalid or expired invite code")}catch{g("Failed to validate invite code. Please try again.")}finally{d(!1)}},p=x=>{navigator.clipboard.writeText(x),c(x)};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Get Started"})]}),e.jsx("p",{className:"text-secondary mb-6",children:"Choose how you'd like to begin with Pandaura AS:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${o==="create"?"border-accent bg-accent-light":"border-light hover:border-accent/50"}`,onClick:()=>n("create"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-md mr-4 ${o==="create"?"bg-accent text-white":"bg-gray-100 text-secondary"}`,children:e.jsx(xs,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-primary",children:"Create New Organization"}),e.jsx("p",{className:"text-sm text-secondary",children:"Start fresh and set up your team's automation workspace"})]})]})}),e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${o==="join"?"border-accent bg-accent-light":"border-light hover:border-accent/50"}`,onClick:()=>n("join"),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-md mr-4 ${o==="join"?"bg-accent text-white":"bg-gray-100 text-secondary"}`,children:e.jsx(Mt,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-primary",children:"Join Existing Team"}),e.jsx("p",{className:"text-sm text-secondary",children:"Use an invite code to join your organization"})]})]})})]}),o==="join"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-3",children:"For Testing - Sample Invite Codes:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm text-blue-800",children:"TESTCODE123"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Viewer role • test@example.com"})]}),e.jsx("button",{onClick:()=>p("TESTCODE123"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:e.jsx(Wt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm text-blue-800",children:"ADMINCODE456"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Admin role • admin@example.com"})]}),e.jsx("button",{onClick:()=>p("ADMINCODE456"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:e.jsx(Wt,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-white rounded border p-2 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm text-blue-800",children:"EDITORCODE789"}),e.jsx("div",{className:"text-xs text-blue-600",children:"Editor role • editor@example.com"})]}),e.jsx("button",{onClick:()=>p("EDITORCODE789"),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-100 rounded",title:"Copy and use this code",children:e.jsx(Wt,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Click the copy icon to use any of these test codes."})]}),e.jsxs("div",{children:[e.jsx(se,{label:"Invite Code",placeholder:"Enter your invite code or paste invite link",value:i,onChange:x=>c(x.target.value),error:h,disabled:l}),e.jsx("p",{className:"text-xs text-muted mt-2",children:"Contact your organization admin for an invite code"})]}),e.jsx(M,{onClick:N,disabled:!i.trim()||l,className:"w-full",loading:l,children:l?"Validating...":"Validate & Continue"})]}),o==="create"&&e.jsx("div",{className:"mt-6",children:e.jsx(M,{onClick:f,className:"w-full",children:"Continue to Organization Setup"})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:e.jsx("p",{children:"Need help? Contact your administrator or check your email for an invite."})})]})})}const kd=[{value:"manufacturing",label:"Manufacturing"},{value:"automotive",label:"Automotive"},{value:"food-beverage",label:"Food & Beverage"},{value:"oil-gas",label:"Oil & Gas"},{value:"pharmaceuticals",label:"Pharmaceuticals"},{value:"water-treatment",label:"Water Treatment"},{value:"power-energy",label:"Power & Energy"},{value:"mining",label:"Mining"},{value:"chemical",label:"Chemical"},{value:"other",label:"Other"}],Cd=[{value:"1-10",label:"1-10 employees"},{value:"11-50",label:"11-50 employees"},{value:"51-200",label:"51-200 employees"},{value:"201-1000",label:"201-1000 employees"},{value:"1000+",label:"1000+ employees"}];function Ad({nextStep:t,prevStep:s,onOrgData:r,isJoining:a=!1,inviteData:o}){const{signUpData:n}=Oe(),[i,c]=u.useState({orgName:o?.orgName||n.orgData?.orgName||"",industry:n.orgData?.industry||"",size:n.orgData?.size||""}),[l,d]=u.useState({});u.useEffect(()=>{n.orgData&&c(f=>({...f,orgName:o?.orgName||n.orgData?.orgName||f.orgName,industry:n.orgData?.industry||f.industry,size:n.orgData?.size||f.size}))},[n.orgData,o?.orgName]);const h=(f,N)=>{c(p=>({...p,[f]:N})),l[f]&&d(p=>({...p,[f]:""}))},g=()=>{const f={};return!a&&!i.orgName.trim()&&(f.orgName="Organization name is required"),i.industry||(f.industry="Please select your industry"),i.size||(f.size="Please select organization size"),d(f),Object.keys(f).length===0},y=()=>{g()&&(r(i),t())};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:a?"Organization Details":"Create Organization"})]}),a&&e.jsxs("div",{className:"mb-6 p-4 bg-accent-light rounded-lg",children:[e.jsxs("p",{className:"text-sm text-primary",children:[e.jsx("strong",{children:"Joining:"})," ",o?.orgName]}),e.jsxs("p",{className:"text-sm text-secondary",children:["Role: ",o?.role]})]}),e.jsxs("div",{className:"space-y-4",children:[!a&&e.jsx(se,{label:"Organization / Company Name",placeholder:"Enter your organization name",value:i.orgName,onChange:f=>h("orgName",f.target.value),error:l.orgName,required:!0}),e.jsx(Se,{label:"Industry Sector",placeholder:"Select your industry",options:kd,value:i.industry,onChange:f=>h("industry",f),error:l.industry,required:!0}),e.jsx(Se,{label:"Organization Size",placeholder:"Select organization size",options:Cd,value:i.size,onChange:f=>h("size",f),error:l.size,required:!0})]}),e.jsx("div",{className:"mt-8",children:e.jsx(M,{onClick:y,className:"w-full",size:"lg",children:"Continue to Account Setup"})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:e.jsx("p",{children:"This information helps us customize your automation workspace"})})]})})}function cr(t){return/.+@.+\..+/.test(t)}function dr(t){return{length:t.length>=12,uppercase:/[A-Z]/.test(t),lowercase:/[a-z]/.test(t),number:/[0-9]/.test(t),special:/[^A-Za-z0-9]/.test(t)}}function ur({nextStep:t,prevStep:s,onAccountData:r,isJoining:a=!1,inviteData:o}){const[n,i]=u.useState({fullName:"",email:"",password:"",confirmPassword:""}),[c,l]=u.useState({}),[d,h]=u.useState(!1),[g,y]=u.useState(!1),[f,N]=u.useState(!1),{createOrganization:p,acceptInvite:x}=je(),{signUpData:S,updateSignUpData:j}=Oe(),{showToast:v}=Fe();Z.useEffect(()=>{S.accountData&&i(m=>({...m,fullName:S.accountData?.fullName||m.fullName,email:S.accountData?.email||m.email,password:S.accountData?.password||m.password,confirmPassword:S.accountData?.confirmPassword||m.confirmPassword}))},[S.accountData]);const C=(m,k)=>{const O={...n,[m]:k};if(i(O),j("accountData",{fullName:O.fullName,email:O.email,password:O.password,confirmPassword:O.confirmPassword}),c[m]&&l(I=>({...I,[m]:""})),m==="email"&&k&&!cr(k)&&l(I=>({...I,email:"Please enter a valid email address"})),m==="confirmPassword"||m==="password"&&O.confirmPassword){const I=m==="password"?k:O.password,T=m==="confirmPassword"?k:O.confirmPassword;l(T&&I!==T?R=>({...R,confirmPassword:"Passwords do not match"}):R=>({...R,confirmPassword:""}))}},w=()=>{const m={};if(n.fullName.trim()||(m.fullName="Full name is required"),n.email.trim()?cr(n.email)||(m.email="Please enter a valid email address"):m.email="Email is required",!n.password)m.password="Password is required";else{const k=dr(n.password);Object.values(k).every(Boolean)||(m.password="Password does not meet all requirements")}return n.confirmPassword?n.password!==n.confirmPassword&&(m.confirmPassword="Passwords do not match"):m.confirmPassword="Please confirm your password",l(m),Object.keys(m).length===0},P=async()=>{if(w()){N(!0);try{if(j("accountData",{fullName:n.fullName,email:n.email,password:n.password,confirmPassword:n.confirmPassword}),r(n),S.orgChoice==="create"&&S.orgData&&!a){const m=await p({orgName:S.orgData.orgName,industry:S.orgData.industry,size:S.orgData.size,fullName:n.fullName,email:n.email,password:n.password});m.success?(v({variant:"success",title:"Organization Created!",message:`Welcome to ${S.orgData.orgName}! Your organization has been successfully created.`,duration:5e3}),j("organizationCreated",!0),t()):v({variant:"error",title:"Organization Creation Failed",message:m.message||"Failed to create organization. Please try again.",duration:5e3})}else if(S.orgChoice==="join"&&S.inviteData&&a){const m=await x({code:S.inviteData.code,fullName:n.fullName,email:n.email,password:n.password});m.success?(v({variant:"success",title:"Welcome to the Team!",message:`Successfully joined ${S.inviteData.orgName}! Your account has been created.`,duration:5e3}),j("organizationCreated",!0),t()):v({variant:"error",title:"Join Organization Failed",message:m.message||"Failed to join organization. Please try again.",duration:5e3})}else t()}catch(m){console.error("Organization creation error:",m),v({variant:"error",title:"Error",message:"An unexpected error occurred. Please try again.",duration:5e3})}finally{N(!1)}}},b=dr(n.password);return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Account Setup"})]}),a&&o&&e.jsxs("div",{className:"mb-6 p-4 bg-accent-light rounded-lg",children:[e.jsxs("p",{className:"text-sm text-primary",children:[e.jsx("strong",{children:"Joining:"})," ",o.orgName]}),e.jsxs("p",{className:"text-sm text-secondary",children:["Role: ",o.role]}),e.jsx("p",{className:"text-xs text-secondary mt-2",children:"You can use any email address for your account."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{label:"Full Name",placeholder:"Enter your full name",value:n.fullName,onChange:m=>C("fullName",m.target.value),error:c.fullName,required:!0}),e.jsx(se,{label:"Work Email",type:"email",placeholder:"Enter your work email",value:n.email,onChange:m=>C("email",m.target.value),error:c.email,required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{label:"Create Password",type:d?"text":"password",placeholder:"Create a strong password",value:n.password,onChange:m=>C("password",m.target.value),error:c.password,required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-8 text-secondary hover:text-primary transition-colors",children:d?e.jsx(Nt,{className:"w-5 h-5"}):e.jsx(rt,{className:"w-5 h-5"})})]}),n.password&&e.jsxs("div",{className:"text-xs space-y-1 p-3 bg-gray-50 rounded-md",children:[e.jsx("p",{className:"font-medium text-secondary mb-2",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[e.jsxs("div",{className:`flex items-center ${b.length?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:b.length?"✓":"○"}),"At least 12 characters"]}),e.jsxs("div",{className:`flex items-center ${b.uppercase?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:b.uppercase?"✓":"○"}),"Uppercase letter"]}),e.jsxs("div",{className:`flex items-center ${b.lowercase?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:b.lowercase?"✓":"○"}),"Lowercase letter"]}),e.jsxs("div",{className:`flex items-center ${b.number?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:b.number?"✓":"○"}),"Number"]}),e.jsxs("div",{className:`flex items-center ${b.special?"text-green-600":"text-gray-400"}`,children:[e.jsx("span",{className:"mr-2",children:b.special?"✓":"○"}),"Special character"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{label:"Confirm Password",type:g?"text":"password",placeholder:"Confirm your password",value:n.confirmPassword,onChange:m=>C("confirmPassword",m.target.value),error:c.confirmPassword,required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-8 text-secondary hover:text-primary transition-colors",children:g?e.jsx(Nt,{className:"w-5 h-5"}):e.jsx(rt,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(M,{onClick:P,className:"w-full",size:"lg",disabled:f,children:f?"Creating Organization...":"Continue to Security Setup"})}),e.jsx("div",{className:"mt-6 text-center text-sm text-muted",children:e.jsx("p",{children:"Strong passwords help protect your automation workspace"})})]})})}function mr({nextStep:t,prevStep:s,onSecurityData:r}){const{signUpData:a,updateSignUpData:o}=Oe(),{setupTwoFactor:n,verifyTwoFactor:i,login:c,logout:l}=je(),{showToast:d}=Fe(),[h,g]=u.useState(a.securityData?.method||null),[y,f]=u.useState(a.securityData?.code||""),[N,p]=u.useState(a.securityData?.secret||""),[x,S]=u.useState(a.securityData?.qrCodeUrl||""),[j,v]=u.useState(""),[C,w]=u.useState(!1),[P,b]=u.useState(!1),[m,k]=u.useState(a.securityData?.verified||!1),[O,I]=u.useState(!1),[T,R]=u.useState(0),[L,F]=u.useState(0),[z,H]=u.useState(!1);u.useEffect(()=>{h==="totp"&&!N&&!x&&a.accountData&&Y()},[h,N,x,a.accountData]);const Y=async()=>{if(!a.accountData?.email||!a.accountData?.password){v("Account credentials not available. Please go back and complete account creation.");return}w(!0),I(!0),v("");try{const V=await c(a.accountData.email,a.accountData.password);if(!V.success)throw new Error(V.message||"Failed to authenticate");I(!1);const X=await n();p(X.secret),S(X.qrCodeUrl),o("securityData",{...a.securityData,method:"totp",secret:X.secret,qrCodeUrl:X.qrCodeUrl,code:y}),d({variant:"success",title:"2FA Setup Initiated",message:"Please scan the QR code with your authenticator app."})}catch(V){console.error("2FA setup error:",V),R(X=>X+1),v(V.message||"Failed to setup 2FA. Please try again."),d({variant:"error",title:"2FA Setup Failed",message:`Attempt ${T+1}/3: Unable to generate QR code. ${T>=2?"Please contact support if issue persists.":"Please try again."}`})}finally{w(!1),I(!1)}},Ne=()=>{p(""),S(""),v(""),Y()},ee=async()=>{if(y.length!==6){v("Please enter a 6-digit code");return}b(!0),v("");try{const V=await i(y);if(V.success){k(!0);const X={method:h,secret:N,qrCodeUrl:x,code:y,verified:!0};o("securityData",X),r(X),l(),d({variant:"success",title:"2FA Verified",message:"Two-factor authentication has been successfully enabled."}),setTimeout(()=>{t()},1500)}else throw new Error(V.message)}catch(V){console.error("2FA verification error:",V),F(X=>X+1),v(V.message||"Invalid verification code. Please try again."),d({variant:"error",title:"Verification Failed",message:`Attempt ${L+1}/5: Invalid code. ${L>=4?"Please check your authenticator app setup.":"Please check your authenticator app and try again."}`})}finally{b(!1)}},G=V=>{g(V),v(""),f(""),k(!1),V==="sms"&&o("securityData",{method:"sms",code:"",verified:!1})},ne=()=>{if(!h){v("Please select a security method.");return}if(h==="totp"&&!m){v("Please verify your 2FA setup before continuing.");return}if(h==="sms"&&y.length!==6){v("Please enter the 6-digit SMS code.");return}const V={method:h,secret:N,qrCodeUrl:x,code:y,verified:h==="sms"||m};o("securityData",V),r(V),t()},xe=h==="totp"?m:h==="sms"&&y.length===6;return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Secure Your Account"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-3 text-base font-medium text-secondary",children:"Choose your security method:"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`flex items-center border-2 rounded-lg px-4 py-3 cursor-pointer transition-all ${h==="totp"?"border-accent bg-accent/5":"border-gray-200 bg-transparent hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",name:"method",value:"totp",checked:h==="totp",onChange:()=>G("totp"),className:"hidden"}),e.jsx("span",{className:"mr-3",children:h==="totp"?e.jsx(ce,{className:"w-5 h-5 text-accent"}):e.jsx(Rs,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-base font-medium text-primary",children:"Authenticator App (TOTP)"}),e.jsx("p",{className:"text-sm text-secondary mt-1",children:"Recommended - Use Google Authenticator or similar app"})]}),m&&h==="totp"&&e.jsx(ce,{className:"w-5 h-5 text-green-600 ml-2"})]}),e.jsxs("label",{className:`flex items-center border-2 rounded-lg px-4 py-3 cursor-pointer transition-all ${h==="sms"?"border-accent bg-accent/5":"border-gray-200 bg-transparent hover:border-accent/50"}`,children:[e.jsx("input",{type:"radio",name:"method",value:"sms",checked:h==="sms",onChange:()=>G("sms"),className:"hidden"}),e.jsx("span",{className:"mr-3",children:h==="sms"?e.jsx(ce,{className:"w-5 h-5 text-accent"}):e.jsx(Rs,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-base font-medium text-primary",children:"SMS Backup Code"}),e.jsx("p",{className:"text-sm text-secondary mt-1",children:"Receive codes via text message"})]})]})]})]}),h==="totp"&&e.jsxs("div",{className:"space-y-4",children:[!N&&!x&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(M,{onClick:Y,disabled:C||!a.accountData?.email,className:"w-full",children:C?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4 mr-2 animate-spin"}),O?"Authenticating...":"Setting up 2FA..."]}):"Setup Authenticator App"}),!a.accountData?.email&&e.jsxs("p",{className:"text-sm text-yellow-600 mt-2 flex items-center justify-center",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),"Account credentials not available"]})]}),x&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-sm text-secondary",children:"Scan this QR code with your authenticator app:"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-48 h-48 border-2 border-gray-200 rounded-lg flex items-center justify-center bg-white",children:e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=192x192&data=${encodeURIComponent(x)}`,alt:"2FA QR Code",className:"w-44 h-44"})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>H(!z),className:"text-sm text-accent hover:text-accent-dark underline",children:[z?"Hide":"Show"," manual setup key"]}),z&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-secondary mb-2",children:"Manual setup key:"}),e.jsx("p",{className:"font-mono text-sm bg-white px-3 py-2 rounded border break-all",children:N})]})]}),T>0&&T<3&&e.jsx("div",{className:"mt-4",children:e.jsxs(M,{onClick:Ne,variant:"outline",size:"sm",disabled:C,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Retry QR Code Generation"]})})]}),x&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(se,{label:"Verification Code",placeholder:"Enter 6-digit code",value:y,onChange:V=>{const X=V.target.value.replace(/\D/g,"");f(X),v("")},maxLength:6,error:j,disabled:m,className:"text-center text-lg font-mono"}),!m&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(M,{onClick:ee,disabled:y.length!==6||P,className:"w-full",variant:m?"success":"primary",children:P?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Verify & Enable 2FA"}),L>0&&L<5&&e.jsxs("p",{className:"text-sm text-yellow-600 text-center",children:["Attempt ",L,"/5 - Double-check the code in your authenticator app"]}),L>=3&&!m&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Having trouble?"})," Make sure your device's time is synchronized and you're using the latest code."]})})]}),m&&e.jsx("div",{className:"text-center py-2",children:e.jsxs("div",{className:"inline-flex items-center text-green-600",children:[e.jsx(ce,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"font-medium",children:"2FA Successfully Enabled!"})]})})]})]}),h==="sms"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," SMS-based 2FA is available as a backup option. For this demo, enter any 6-digit code to continue."]})}),e.jsx(se,{label:"SMS Verification Code",placeholder:"Enter 6-digit SMS code",value:y,onChange:V=>{const X=V.target.value.replace(/\D/g,"");f(X),v("")},maxLength:6,error:j,className:"text-center text-lg font-mono"})]}),j&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),j]})}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx(M,{variant:"secondary",onClick:s,disabled:P,children:"Back"}),e.jsx(M,{onClick:ne,disabled:!xe||P,children:h==="totp"&&m?"Continue":"Next"})]})]})]})})}function hr({nextStep:t,prevStep:s,onConsentData:r}){const{signUpData:a}=Oe(),[o,n]=u.useState(a.consentData?.termsAccepted||!1),[i,c]=u.useState(a.consentData?.privacyAccepted||!1),[l,d]=u.useState({}),h=()=>{const g={};o||(g.consent1="You must acknowledge zero-trust policy."),i||(g.consent2="You must agree to the EULA."),d(g),Object.keys(g).length===0&&(r({termsAccepted:o,privacyAccepted:i}),t())};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-fit bg-background relative overflow-hidden py-0 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsx("div",{className:"z-10 mb-8 flex flex-col items-center",children:e.jsx("img",{src:te,alt:"Pandaura AS Logo",className:"h-24 w-auto filter-none",style:{filter:"none",imageRendering:"crisp-edges"}})}),e.jsxs("div",{className:"w-[600px] max-w-lg bg-surface border border-light rounded-lg shadow-card z-10 p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-primary text-center mb-6",children:"Zero-Trust Ready Consent"}),e.jsxs("form",{className:"space-y-6",onSubmit:g=>{g.preventDefault(),h()},children:[e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o,onChange:g=>n(g.target.checked),className:"accent-accent w-5 h-5 mt-1"}),e.jsx("span",{className:"text-primary text-base",children:"I acknowledge Pandaura AS uses role-based access and activity monitoring in accordance with zero-trust security principles."})]}),l.consent1&&e.jsx("p",{className:"text-error text-sm mt-2",children:l.consent1})]}),e.jsx("div",{className:"relative",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i,onChange:g=>c(g.target.checked),className:"accent-accent w-5 h-5 mt-1"}),e.jsx("span",{className:"text-primary text-base",children:"I agree to the End User License Agreement."})]})}),e.jsx("a",{href:"/eula",target:"_blank",rel:"noopener noreferrer",className:"text-accent underline ml-2 text-sm",children:"View EULA"}),l.consent2&&e.jsx("p",{className:"text-error text-sm mt-2",children:l.consent2}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 text-muted font-medium transition-all",onClick:s,children:"Back"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary hover:bg-secondary text-white rounded-md shadow-sm transition-all duration-200 focus:ring-2 focus:ring-accent focus:ring-offset-2 font-medium",children:"Next"})]})]})]})]})}function Pd(){const t=localStorage.getItem("pandaura_instance_id");if(t)return t;const s="INST-"+Math.random().toString(36).substr(2,9).toUpperCase();return localStorage.setItem("pandaura_instance_id",s),s}function Ed(){const t=document.createElement("canvas"),s=t.getContext("2d");s.textBaseline="top",s.font="14px Arial",s.fillText("Device fingerprint",2,2);const r=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,Intl.DateTimeFormat().resolvedOptions().timeZone,t.toDataURL()].join("|");let a=0;for(let o=0;o<r.length;o++){const n=r.charCodeAt(o);a=(a<<5)-a+n,a=a&a}return Math.abs(a).toString(36)}function xr({nextStep:t,prevStep:s,onEnvironmentData:r}){const{signUpData:a,updateSignUpData:o}=Oe(),{bindDevice:n}=je(),{showToast:i}=Fe(),[c,l]=u.useState(a.environmentData?.instanceId||""),[d,h]=u.useState(a.environmentData?.fingerprint||""),[g,y]=u.useState(!1),[f,N]=u.useState(""),[p,x]=u.useState(a.environmentData?.bound||!1),[S,j]=u.useState(0),[v,C]=u.useState(!1),[w,P]=u.useState(!1);u.useEffect(()=>{const O=Pd(),I=Ed();l(O),h(I);const T=a.orgChoice==="create";P(T),o("environmentData",{...a.environmentData,instanceId:O,fingerprint:I})},[]);const b=async()=>{y(!0),N("");try{const O=await fetch(`${He.apiBaseUrl}/api/v1/auth/signup-device-bind`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instanceId:c,fingerprint:d,email:a.accountData?.email,signupToken:"temp-signup-"+Date.now(),isOrgCreator:w})});if(!O.ok){const T=await O.json().catch(()=>({}));throw new Error(T.message||"Failed to bind device")}x(!0),j(0);const I={instanceId:c,fingerprint:d,bound:!0,bindingTimestamp:new Date().toISOString(),isOrgCreator:w};o("environmentData",I),r(I),i({variant:"success",title:"Device Bound Successfully",message:"Your account is now securely bound to this device."}),setTimeout(()=>{t()},2e3)}catch(O){console.error("Device binding error:",O),j(I=>I+1),N(O.message||"Failed to bind device. Please try again."),i({variant:"error",title:"Device Binding Failed",message:`Attempt ${S+1}/3: ${O.message||"Device binding failed"}`})}finally{y(!1)}},m=()=>{N(""),x(!1),b()},k=()=>{if(!w){N("Manual override is only available for organization creators."),i({variant:"error",title:"Access Denied",message:"Manual override is restricted to organization creators only."});return}const O={instanceId:c,fingerprint:d,bound:!0,manualOverride:!0,bindingTimestamp:new Date().toISOString(),isOrgCreator:w};o("environmentData",O),r(O),i({variant:"success",title:"Manual Override Applied",message:"Device binding bypassed by organization creator."}),t()};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:s,className:"mr-3 p-1 rounded-md hover:bg-gray-100 transition-colors",children:e.jsx(he,{className:"w-5 h-5 text-secondary"})}),e.jsx("h2",{className:"text-xl font-semibold text-primary",children:"Environment Binding"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center",children:e.jsx(we,{className:"w-8 h-8 text-accent"})})}),e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Secure Your Account"}),e.jsx("p",{className:"text-sm text-secondary",children:w?"As an organization creator, bind your device for enhanced security.":"Bind your account to this device and environment to prevent unauthorized access."}),w&&e.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx(we,{className:"w-3 h-3 inline mr-1"}),"Organization Creator: Manual override available if binding fails"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(kr,{className:"w-5 h-5 text-secondary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Device Instance"}),e.jsx("p",{className:"text-xs text-secondary font-mono",children:c})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(we,{className:"w-5 h-5 text-secondary"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Device Fingerprint"}),e.jsxs("p",{className:"text-xs text-secondary font-mono",children:[d.substring(0,16),"..."]})]})]})]}),p?e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ce,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Device Successfully Bound"}),e.jsx("p",{className:"text-xs text-green-600",children:"Your account is now secured to this environment"})]})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{onClick:b,disabled:g,className:"w-full",size:"lg",children:g?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4 mr-2 animate-spin"}),"Binding Device..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Bind This Device"]})}),S>0&&S<3&&!p&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(M,{onClick:m,variant:"outline",className:"w-full",disabled:g,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Retry Device Binding"]}),e.jsxs("p",{className:"text-sm text-yellow-600 text-center",children:["Attempt ",S,"/3 failed. Please try again."]})]}),(S>=3||w)&&!p&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800",children:S>=3?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Multiple binding attempts failed."}),w?" As an organization creator, you can use manual override.":" Please contact support."]}):e.jsx(e.Fragment,{children:"Organization creators can use manual override if needed."})})}),(S>=3||w)&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>C(!v),className:"text-sm text-accent hover:text-accent-dark underline",children:[v?"Hide":"Show"," organization creator options"]}),v&&e.jsxs("div",{className:"p-3 bg-gray-50 border rounded-lg space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-secondary",children:"Organization Creator Options:"}),e.jsx(M,{onClick:k,variant:"outline",size:"sm",className:"w-full border-yellow-300 text-yellow-700 hover:bg-yellow-50",disabled:!w,children:w?"Manual Override (Creator)":"Override Not Available"}),e.jsxs("p",{className:"text-xs text-yellow-600",children:["⚠️ ",w?"As organization creator, you can bypass device binding. Use with caution.":"Manual override is only available to organization creators."]})]})]})]})]}),f&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),f]})}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-secondary",children:"Device binding prevents credential reuse on unauthorized devices"})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(M,{variant:"secondary",onClick:s,disabled:g,children:"Back"}),p&&e.jsx(M,{onClick:t,children:"Continue to Finish"})]})]})]})]})]})})}function pr({onComplete:t,isLoading:s}){const{signUpData:r}=Oe(),a=()=>r.orgChoice==="create"?r.orgData?.orgName||"your organization":r.orgChoice==="join"?r.inviteData?.orgName||"the organization":"your organization",o=()=>r.orgChoice==="join"?r.inviteData?.role||"Member":"Admin",n=()=>r.securityData?.verified?"2FA Authentication enabled":r.securityData?.method==="sms"?"SMS backup authentication configured":"Basic authentication",i=()=>r.environmentData?.bound?r.environmentData.manualOverride?"Device binding overridden by administrator":"Device securely bound to account":"Device binding skipped";return e.jsx("div",{className:"w-full max-w-lg mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsxs("div",{className:"text-center space-y-4 mb-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(ce,{className:"w-12 h-12 text-green-600"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-primary mb-2",children:"Welcome to Pandaura AS!"}),e.jsxs("p",{className:"text-lg text-secondary",children:["Account created and joined ",e.jsx("strong",{children:a()})]}),e.jsx("p",{className:"text-sm text-secondary mt-1",children:"You're ready to collaborate with your team."})]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold text-secondary uppercase tracking-wide",children:"Setup Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(Mt,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:a()}),e.jsxs("p",{className:"text-xs text-blue-600",children:["Role: ",o()]})]}),e.jsx(ce,{className:"w-4 h-4 text-green-600"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Security Setup"}),e.jsx("p",{className:"text-xs text-green-600",children:n()})]}),e.jsx(ce,{className:"w-4 h-4 text-green-600"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-purple-50 rounded-lg",children:[e.jsx(we,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"Device Security"}),e.jsx("p",{className:"text-xs text-purple-600",children:i()})]}),e.jsx(ce,{className:"w-4 h-4 text-green-600"})]})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg mb-8",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Account Email:"}),e.jsx("span",{className:"text-sm text-primary",children:r.accountData?.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Full Name:"}),e.jsx("span",{className:"text-sm text-primary",children:r.accountData?.fullName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Organization:"}),e.jsx("span",{className:"text-sm text-primary",children:a()})]}),r.environmentData?.instanceId&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-secondary",children:"Device Instance:"}),e.jsx("span",{className:"text-xs font-mono text-secondary",children:r.environmentData.instanceId})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{onClick:t,disabled:s,className:"w-full",size:"lg",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Finalizing Setup..."]}):e.jsxs(e.Fragment,{children:["Go to Dashboard",e.jsx(Ee,{className:"w-4 h-4 ml-2"})]})}),e.jsx("p",{className:"text-center text-xs text-secondary",children:"Your organization context and team permissions are now active."})]}),e.jsx("div",{className:"mt-6 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:[e.jsx("strong",{children:"Security Notice:"})," Your account has been configured with enhanced security features.",r.securityData?.verified&&" Keep your authenticator app accessible for future logins.",r.environmentData?.bound&&" Your device binding helps protect against unauthorized access."]})})]})})}function Td(){const[t,s]=u.useState(0),[r,a]=u.useState(!1),{createOrganization:o,acceptInvite:n,login:i}=je(),{signUpData:c,updateSignUpData:l,clearSignUpData:d}=Oe(),h=K(),g=()=>s(w=>w+1),y=()=>s(w=>Math.max(w-1,0)),f=(w,P)=>{l("orgChoice",w),w==="join"&&P&&l("inviteData",P)},N=w=>{l("orgData",w)},p=w=>{l("accountData",w)},x=w=>{l("securityData",w)},S=w=>{l("consentData",w)},j=w=>{l("environmentData",w)},v=async()=>{if(!c.accountData)throw new Error("Account data is required");a(!0);try{if(c.organizationCreated){d(),h("/home");return}if(c.orgChoice==="create"){if(!c.orgData)throw new Error("Organization data is required");const w=await o({orgName:c.orgData.orgName,industry:c.orgData.industry,size:c.orgData.size,fullName:c.accountData.fullName,email:c.accountData.email,password:c.accountData.password});if(w.success)d(),h("/home");else throw new Error(w.message||"Failed to create organization")}else if(c.orgChoice==="join"){if(!c.inviteData)throw new Error("Invite data is required");const w=await n({code:c.inviteData.code,fullName:c.accountData.fullName,email:c.accountData.email,password:c.accountData.password});if(w.success)d(),h("/home");else throw new Error(w.message||"Failed to join organization")}}catch(w){console.error("Sign up error:",w),alert("Sign up failed. Please try again."),a(!1)}},C=()=>{switch(t){case 0:return e.jsx(lr,{nextStep:g});case 1:return e.jsx(Sd,{nextStep:g,prevStep:y,onOrgChoice:f});case 2:return c.orgChoice==="join"?e.jsx(ur,{nextStep:g,prevStep:y,onAccountData:p,isJoining:!0,inviteData:c.inviteData}):e.jsx(Ad,{nextStep:g,prevStep:y,onOrgData:N,isJoining:!1,inviteData:c.inviteData});case 3:return c.orgChoice==="join"?e.jsx(mr,{nextStep:g,prevStep:y,onSecurityData:x}):e.jsx(ur,{nextStep:g,prevStep:y,onAccountData:p,isJoining:!1,inviteData:c.inviteData});case 4:return c.orgChoice==="join"?e.jsx(hr,{nextStep:g,prevStep:y,onConsentData:S}):e.jsx(mr,{nextStep:g,prevStep:y,onSecurityData:x});case 5:return c.orgChoice==="join"?e.jsx(xr,{nextStep:g,prevStep:y,onEnvironmentData:j}):e.jsx(hr,{nextStep:g,prevStep:y,onConsentData:S});case 6:return c.orgChoice==="join"?e.jsx(pr,{onComplete:v,isLoading:r}):e.jsx(xr,{nextStep:g,prevStep:y,onEnvironmentData:j});case 7:return e.jsx(pr,{onComplete:v,isLoading:r});default:return e.jsx(lr,{nextStep:g})}};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background relative overflow-hidden py-8 px-4",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-accent/5 to-transparent"})}),e.jsxs("div",{className:"z-10 w-full max-w-md",children:[t>0&&t<7&&e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsxs("span",{className:"text-sm text-secondary",children:["Step ",t," of 6"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${t/6*100}%`}})})]}),C()]})]})}function Od(){return Z.useEffect(()=>{js()},[]),e.jsx(il,{children:e.jsx(wd,{children:e.jsx(Dc,{children:e.jsx(Co,{children:e.jsx(Oa,{children:e.jsxs(Da,{children:[e.jsx(B,{path:"/",element:e.jsx(Ht,{to:"/signup",replace:!0})}),e.jsx(B,{path:"/signup",element:e.jsx(Td,{})}),e.jsx(B,{path:"/signin",element:e.jsx(rd,{})}),e.jsx(B,{path:"/home",element:e.jsx(bt,{})}),e.jsx(B,{path:"/home/projects",element:e.jsx(bt,{})}),e.jsx(B,{path:"/home/projects/:projectId",element:e.jsx(bt,{})}),e.jsx(B,{path:"/home/quick-tools",element:e.jsx(bt,{})}),e.jsx(B,{path:"/debug/projects",element:e.jsx(oe,{children:e.jsx(Nd,{})})}),e.jsx(B,{path:"/app",element:e.jsx(Ht,{to:"/pandaura-as",replace:!0})}),e.jsx(B,{path:"/pandaura-as",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(Kt,{})})})}),e.jsx(B,{path:"/logic-studio",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(ts,{})})})}),e.jsx(B,{path:"/autodocs",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(ss,{})})})}),e.jsx(B,{path:"/tag-database",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(gt,{})})})}),e.jsx(B,{path:"/tag-database/:projectId",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(gt,{})})})}),e.jsx(B,{path:"/case-studies",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(rs,{})})})}),e.jsx(B,{path:"/workspace/:projectId/pandaura-as",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(Kt,{})})})}),e.jsx(B,{path:"/workspace/:projectId/logic-studio",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(ts,{})})})}),e.jsx(B,{path:"/workspace/:projectId/autodocs",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(ss,{})})})}),e.jsx(B,{path:"/workspace/:projectId/tag-database",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(gt,{})})})}),e.jsx(B,{path:"/workspace/:projectId/case-studies",element:e.jsx(oe,{children:e.jsx(ge,{children:e.jsx(rs,{})})})}),e.jsx(B,{path:"/tool/logic",element:e.jsx(Ke,{children:e.jsx(ts,{sessionMode:!0})})}),e.jsx(B,{path:"/tool/tags",element:e.jsx(Ke,{children:e.jsx(gt,{sessionMode:!0})})}),e.jsx(B,{path:"/tool/autodocs",element:e.jsx(Ke,{children:e.jsx(ss,{sessionMode:!0})})}),e.jsx(B,{path:"/tool/signalflow",element:e.jsx(Ke,{children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-primary",children:"SignalFlow (Coming Soon)"}),e.jsx("p",{className:"text-muted mt-2",children:"Signal path visualization and tracing"})]})})}),e.jsx(B,{path:"/tool/assistant",element:e.jsx(Ke,{children:e.jsx(Kt,{sessionMode:!0})})}),e.jsx(B,{path:"/profile",element:e.jsx(oe,{children:e.jsx(Zc,{})})}),e.jsx(B,{path:"/feedback",element:e.jsx(jd,{})}),e.jsx(B,{path:"/privacy",element:e.jsx(yd,{})}),e.jsx(B,{path:"/terms",element:e.jsx(vd,{})}),e.jsx(B,{path:"/case-study-library",element:e.jsx(rs,{})}),e.jsx(B,{path:"*",element:e.jsx(Ht,{to:"/signin",replace:!0})})]})})})})})})}js();La.createRoot(document.getElementById("root")).render(e.jsx(Z.StrictMode,{children:e.jsx(Od,{})}));
